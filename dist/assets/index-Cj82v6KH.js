var WC=Object.defineProperty;var KC=(n,e,t)=>e in n?WC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Af=(n,e,t)=>KC(n,typeof e!="symbol"?e+"":e,t);function QC(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var XC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function YC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function be(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var uE={exports:{}},hd={},cE={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Au=Symbol.for("react.element"),JC=Symbol.for("react.portal"),ZC=Symbol.for("react.fragment"),e1=Symbol.for("react.strict_mode"),t1=Symbol.for("react.profiler"),n1=Symbol.for("react.provider"),i1=Symbol.for("react.context"),r1=Symbol.for("react.forward_ref"),s1=Symbol.for("react.suspense"),o1=Symbol.for("react.memo"),a1=Symbol.for("react.lazy"),Ov=Symbol.iterator;function l1(n){return n===null||typeof n!="object"?null:(n=Ov&&n[Ov]||n["@@iterator"],typeof n=="function"?n:null)}var hE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dE=Object.assign,fE={};function Sa(n,e,t){this.props=n,this.context=e,this.refs=fE,this.updater=t||hE}Sa.prototype.isReactComponent={};Sa.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Sa.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function pE(){}pE.prototype=Sa.prototype;function wg(n,e,t){this.props=n,this.context=e,this.refs=fE,this.updater=t||hE}var Eg=wg.prototype=new pE;Eg.constructor=wg;dE(Eg,Sa.prototype);Eg.isPureReactComponent=!0;var Nv=Array.isArray,mE=Object.prototype.hasOwnProperty,Tg={current:null},gE={key:!0,ref:!0,__self:!0,__source:!0};function _E(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)mE.call(e,i)&&!gE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];r.children=c}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Au,type:n,key:s,ref:o,props:r,_owner:Tg.current}}function u1(n,e){return{$$typeof:Au,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Sg(n){return typeof n=="object"&&n!==null&&n.$$typeof===Au}function c1(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Lv=/\/+/g;function Cf(n,e){return typeof n=="object"&&n!==null&&n.key!=null?c1(""+n.key):e.toString(36)}function Gc(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Au:case JC:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+Cf(o,0):i,Nv(r)?(t="",n!=null&&(t=n.replace(Lv,"$&/")+"/"),Gc(r,e,t,"",function(l){return l})):r!=null&&(Sg(r)&&(r=u1(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Lv,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Nv(n))for(var a=0;a<n.length;a++){s=n[a];var c=i+Cf(s,a);o+=Gc(s,e,t,c,r)}else if(c=l1(n),typeof c=="function")for(n=c.call(n),a=0;!(s=n.next()).done;)s=s.value,c=i+Cf(s,a++),o+=Gc(s,e,t,c,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wc(n,e,t){if(n==null)return n;var i=[],r=0;return Gc(n,i,"","",function(s){return e.call(t,s,r++)}),i}function h1(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var cn={current:null},Wc={transition:null},d1={ReactCurrentDispatcher:cn,ReactCurrentBatchConfig:Wc,ReactCurrentOwner:Tg};function yE(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:wc,forEach:function(n,e,t){wc(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return wc(n,function(){e++}),e},toArray:function(n){return wc(n,function(e){return e})||[]},only:function(n){if(!Sg(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ae.Component=Sa;Ae.Fragment=ZC;Ae.Profiler=t1;Ae.PureComponent=wg;Ae.StrictMode=e1;Ae.Suspense=s1;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d1;Ae.act=yE;Ae.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=dE({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Tg.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(c in e)mE.call(e,c)&&!gE.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=t;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];i.children=a}return{$$typeof:Au,type:n.type,key:r,ref:s,props:i,_owner:o}};Ae.createContext=function(n){return n={$$typeof:i1,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:n1,_context:n},n.Consumer=n};Ae.createElement=_E;Ae.createFactory=function(n){var e=_E.bind(null,n);return e.type=n,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(n){return{$$typeof:r1,render:n}};Ae.isValidElement=Sg;Ae.lazy=function(n){return{$$typeof:a1,_payload:{_status:-1,_result:n},_init:h1}};Ae.memo=function(n,e){return{$$typeof:o1,type:n,compare:e===void 0?null:e}};Ae.startTransition=function(n){var e=Wc.transition;Wc.transition={};try{n()}finally{Wc.transition=e}};Ae.unstable_act=yE;Ae.useCallback=function(n,e){return cn.current.useCallback(n,e)};Ae.useContext=function(n){return cn.current.useContext(n)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(n){return cn.current.useDeferredValue(n)};Ae.useEffect=function(n,e){return cn.current.useEffect(n,e)};Ae.useId=function(){return cn.current.useId()};Ae.useImperativeHandle=function(n,e,t){return cn.current.useImperativeHandle(n,e,t)};Ae.useInsertionEffect=function(n,e){return cn.current.useInsertionEffect(n,e)};Ae.useLayoutEffect=function(n,e){return cn.current.useLayoutEffect(n,e)};Ae.useMemo=function(n,e){return cn.current.useMemo(n,e)};Ae.useReducer=function(n,e,t){return cn.current.useReducer(n,e,t)};Ae.useRef=function(n){return cn.current.useRef(n)};Ae.useState=function(n){return cn.current.useState(n)};Ae.useSyncExternalStore=function(n,e,t){return cn.current.useSyncExternalStore(n,e,t)};Ae.useTransition=function(){return cn.current.useTransition()};Ae.version="18.3.1";cE.exports=Ae;var Tn=cE.exports;const Ig=YC(Tn),Mv=QC({__proto__:null,default:Ig},[Tn]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f1=Tn,p1=Symbol.for("react.element"),m1=Symbol.for("react.fragment"),g1=Object.prototype.hasOwnProperty,_1=f1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y1={key:!0,ref:!0,__self:!0,__source:!0};function vE(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)g1.call(e,i)&&!y1.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:p1,type:n,key:s,ref:o,props:r,_owner:_1.current}}hd.Fragment=m1;hd.jsx=vE;hd.jsxs=vE;uE.exports=hd;var ae=uE.exports,Hp={},bE={exports:{}},Ln={},wE={exports:{}},EE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(J,fe){var we=J.length;J.push(fe);e:for(;0<we;){var je=we-1>>>1,Fe=J[je];if(0<r(Fe,fe))J[je]=fe,J[we]=Fe,we=je;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var fe=J[0],we=J.pop();if(we!==fe){J[0]=we;e:for(var je=0,Fe=J.length,We=Fe>>>1;je<We;){var Zt=2*(je+1)-1,Tt=J[Zt],St=Zt+1,In=J[St];if(0>r(Tt,we))St<Fe&&0>r(In,Tt)?(J[je]=In,J[St]=we,je=St):(J[je]=Tt,J[Zt]=we,je=Zt);else if(St<Fe&&0>r(In,we))J[je]=In,J[St]=we,je=St;else break e}}return fe}function r(J,fe){var we=J.sortIndex-fe.sortIndex;return we!==0?we:J.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],l=[],d=1,f=null,g=3,w=!1,P=!1,x=!1,L=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(J){for(var fe=t(l);fe!==null;){if(fe.callback===null)i(l);else if(fe.startTime<=J)i(l),fe.sortIndex=fe.expirationTime,e(c,fe);else break;fe=t(l)}}function N(J){if(x=!1,I(J),!P)if(t(c)!==null)P=!0,Sn(K);else{var fe=t(l);fe!==null&&Pt(N,fe.startTime-J)}}function K(J,fe){P=!1,x&&(x=!1,v(_),_=-1),w=!0;var we=g;try{for(I(fe),f=t(c);f!==null&&(!(f.expirationTime>fe)||J&&!C());){var je=f.callback;if(typeof je=="function"){f.callback=null,g=f.priorityLevel;var Fe=je(f.expirationTime<=fe);fe=n.unstable_now(),typeof Fe=="function"?f.callback=Fe:f===t(c)&&i(c),I(fe)}else i(c);f=t(c)}if(f!==null)var We=!0;else{var Zt=t(l);Zt!==null&&Pt(N,Zt.startTime-fe),We=!1}return We}finally{f=null,g=we,w=!1}}var Q=!1,S=null,_=-1,b=5,T=-1;function C(){return!(n.unstable_now()-T<b)}function R(){if(S!==null){var J=n.unstable_now();T=J;var fe=!0;try{fe=S(!0,J)}finally{fe?A():(Q=!1,S=null)}}else Q=!1}var A;if(typeof E=="function")A=function(){E(R)};else if(typeof MessageChannel<"u"){var st=new MessageChannel,gt=st.port2;st.port1.onmessage=R,A=function(){gt.postMessage(null)}}else A=function(){L(R,0)};function Sn(J){S=J,Q||(Q=!0,A())}function Pt(J,fe){_=L(function(){J(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){P||w||(P=!0,Sn(K))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(J){switch(g){case 1:case 2:case 3:var fe=3;break;default:fe=g}var we=g;g=fe;try{return J()}finally{g=we}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,fe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var we=g;g=J;try{return fe()}finally{g=we}},n.unstable_scheduleCallback=function(J,fe,we){var je=n.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?je+we:je):we=je,J){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=we+Fe,J={id:d++,callback:fe,priorityLevel:J,startTime:we,expirationTime:Fe,sortIndex:-1},we>je?(J.sortIndex=we,e(l,J),t(c)===null&&J===t(l)&&(x?(v(_),_=-1):x=!0,Pt(N,we-je))):(J.sortIndex=Fe,e(c,J),P||w||(P=!0,Sn(K))),J},n.unstable_shouldYield=C,n.unstable_wrapCallback=function(J){var fe=g;return function(){var we=g;g=fe;try{return J.apply(this,arguments)}finally{g=we}}}})(EE);wE.exports=EE;var v1=wE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b1=Tn,Dn=v1;function Y(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TE=new Set,Hl={};function Xs(n,e){ta(n,e),ta(n+"Capture",e)}function ta(n,e){for(Hl[n]=e,n=0;n<e.length;n++)TE.add(e[n])}var Vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gp=Object.prototype.hasOwnProperty,w1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vv={},Bv={};function E1(n){return Gp.call(Bv,n)?!0:Gp.call(Vv,n)?!1:w1.test(n)?Bv[n]=!0:(Vv[n]=!0,!1)}function T1(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S1(n,e,t,i){if(e===null||typeof e>"u"||T1(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hn(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){qt[n]=new hn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];qt[e]=new hn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){qt[n]=new hn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){qt[n]=new hn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){qt[n]=new hn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){qt[n]=new hn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){qt[n]=new hn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){qt[n]=new hn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){qt[n]=new hn(n,5,!1,n.toLowerCase(),null,!1,!1)});var Ag=/[\-:]([a-z])/g;function Cg(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Ag,Cg);qt[e]=new hn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Ag,Cg);qt[e]=new hn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Ag,Cg);qt[e]=new hn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){qt[n]=new hn(n,1,!1,n.toLowerCase(),null,!1,!1)});qt.xlinkHref=new hn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){qt[n]=new hn(n,1,!1,n.toLowerCase(),null,!0,!0)});function Pg(n,e,t,i){var r=qt.hasOwnProperty(e)?qt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(S1(e,t,r,i)&&(t=null),i||r===null?E1(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Hi=b1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ec=Symbol.for("react.element"),xo=Symbol.for("react.portal"),Ro=Symbol.for("react.fragment"),kg=Symbol.for("react.strict_mode"),Wp=Symbol.for("react.profiler"),SE=Symbol.for("react.provider"),IE=Symbol.for("react.context"),xg=Symbol.for("react.forward_ref"),Kp=Symbol.for("react.suspense"),Qp=Symbol.for("react.suspense_list"),Rg=Symbol.for("react.memo"),fr=Symbol.for("react.lazy"),AE=Symbol.for("react.offscreen"),Fv=Symbol.iterator;function il(n){return n===null||typeof n!="object"?null:(n=Fv&&n[Fv]||n["@@iterator"],typeof n=="function"?n:null)}var ut=Object.assign,Pf;function yl(n){if(Pf===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Pf=e&&e[1]||""}return`
`+Pf+n}var kf=!1;function xf(n,e){if(!n||kf)return"";kf=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var i=l}Reflect.construct(n,[],e)}else{try{e.call()}catch(l){i=l}n.call(e.prototype)}else{try{throw Error()}catch(l){i=l}n()}}catch(l){if(l&&i&&typeof l.stack=="string"){for(var r=l.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var c=`
`+r[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=a);break}}}finally{kf=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?yl(n):""}function I1(n){switch(n.tag){case 5:return yl(n.type);case 16:return yl("Lazy");case 13:return yl("Suspense");case 19:return yl("SuspenseList");case 0:case 2:case 15:return n=xf(n.type,!1),n;case 11:return n=xf(n.type.render,!1),n;case 1:return n=xf(n.type,!0),n;default:return""}}function Xp(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ro:return"Fragment";case xo:return"Portal";case Wp:return"Profiler";case kg:return"StrictMode";case Kp:return"Suspense";case Qp:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case IE:return(n.displayName||"Context")+".Consumer";case SE:return(n._context.displayName||"Context")+".Provider";case xg:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Rg:return e=n.displayName||null,e!==null?e:Xp(n.type)||"Memo";case fr:e=n._payload,n=n._init;try{return Xp(n(e))}catch{}}return null}function A1(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xp(e);case 8:return e===kg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function CE(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function C1(n){var e=CE(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Tc(n){n._valueTracker||(n._valueTracker=C1(n))}function PE(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=CE(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function gh(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Yp(n,e){var t=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function $v(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Lr(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kE(n,e){e=e.checked,e!=null&&Pg(n,"checked",e,!1)}function Jp(n,e){kE(n,e);var t=Lr(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Zp(n,e.type,t):e.hasOwnProperty("defaultValue")&&Zp(n,e.type,Lr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function zv(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Zp(n,e,t){(e!=="number"||gh(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var vl=Array.isArray;function jo(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Lr(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function em(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function jv(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Y(92));if(vl(t)){if(1<t.length)throw Error(Y(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Lr(t)}}function xE(n,e){var t=Lr(e.value),i=Lr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function qv(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function RE(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tm(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?RE(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Sc,DE=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Sc=Sc||document.createElement("div"),Sc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sc.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Gl(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},P1=["Webkit","ms","Moz","O"];Object.keys(Pl).forEach(function(n){P1.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Pl[e]=Pl[n]})});function OE(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Pl.hasOwnProperty(n)&&Pl[n]?(""+e).trim():e+"px"}function NE(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=OE(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var k1=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nm(n,e){if(e){if(k1[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function im(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rm=null;function Dg(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var sm=null,qo=null,Uo=null;function Uv(n){if(n=ku(n)){if(typeof sm!="function")throw Error(Y(280));var e=n.stateNode;e&&(e=gd(e),sm(n.stateNode,n.type,e))}}function LE(n){qo?Uo?Uo.push(n):Uo=[n]:qo=n}function ME(){if(qo){var n=qo,e=Uo;if(Uo=qo=null,Uv(n),e)for(n=0;n<e.length;n++)Uv(e[n])}}function VE(n,e){return n(e)}function BE(){}var Rf=!1;function FE(n,e,t){if(Rf)return n(e,t);Rf=!0;try{return VE(n,e,t)}finally{Rf=!1,(qo!==null||Uo!==null)&&(BE(),ME())}}function Wl(n,e){var t=n.stateNode;if(t===null)return null;var i=gd(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Y(231,e,typeof t));return t}var om=!1;if(Vi)try{var rl={};Object.defineProperty(rl,"passive",{get:function(){om=!0}}),window.addEventListener("test",rl,rl),window.removeEventListener("test",rl,rl)}catch{om=!1}function x1(n,e,t,i,r,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(t,l)}catch(d){this.onError(d)}}var kl=!1,_h=null,yh=!1,am=null,R1={onError:function(n){kl=!0,_h=n}};function D1(n,e,t,i,r,s,o,a,c){kl=!1,_h=null,x1.apply(R1,arguments)}function O1(n,e,t,i,r,s,o,a,c){if(D1.apply(this,arguments),kl){if(kl){var l=_h;kl=!1,_h=null}else throw Error(Y(198));yh||(yh=!0,am=l)}}function Ys(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function $E(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Hv(n){if(Ys(n)!==n)throw Error(Y(188))}function N1(n){var e=n.alternate;if(!e){if(e=Ys(n),e===null)throw Error(Y(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return Hv(r),n;if(s===i)return Hv(r),e;s=s.sibling}throw Error(Y(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(t.alternate!==i)throw Error(Y(190))}if(t.tag!==3)throw Error(Y(188));return t.stateNode.current===t?n:e}function zE(n){return n=N1(n),n!==null?jE(n):null}function jE(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=jE(n);if(e!==null)return e;n=n.sibling}return null}var qE=Dn.unstable_scheduleCallback,Gv=Dn.unstable_cancelCallback,L1=Dn.unstable_shouldYield,M1=Dn.unstable_requestPaint,_t=Dn.unstable_now,V1=Dn.unstable_getCurrentPriorityLevel,Og=Dn.unstable_ImmediatePriority,UE=Dn.unstable_UserBlockingPriority,vh=Dn.unstable_NormalPriority,B1=Dn.unstable_LowPriority,HE=Dn.unstable_IdlePriority,dd=null,mi=null;function F1(n){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(dd,n,void 0,(n.current.flags&128)===128)}catch{}}var ii=Math.clz32?Math.clz32:j1,$1=Math.log,z1=Math.LN2;function j1(n){return n>>>=0,n===0?32:31-($1(n)/z1|0)|0}var Ic=64,Ac=4194304;function bl(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function bh(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=bl(a):(s&=o,s!==0&&(i=bl(s)))}else o=t&~r,o!==0?i=bl(o):s!==0&&(i=bl(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-ii(e),r=1<<t,i|=n[t],e&=~r;return i}function q1(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U1(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-ii(s),a=1<<o,c=r[o];c===-1?(!(a&t)||a&i)&&(r[o]=q1(a,e)):c<=e&&(n.expiredLanes|=a),s&=~a}}function lm(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function GE(){var n=Ic;return Ic<<=1,!(Ic&4194240)&&(Ic=64),n}function Df(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Cu(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ii(e),n[e]=t}function H1(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-ii(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function Ng(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-ii(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var He=0;function WE(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var KE,Lg,QE,XE,YE,um=!1,Cc=[],Er=null,Tr=null,Sr=null,Kl=new Map,Ql=new Map,mr=[],G1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wv(n,e){switch(n){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":Kl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(e.pointerId)}}function sl(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=ku(e),e!==null&&Lg(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function W1(n,e,t,i,r){switch(e){case"focusin":return Er=sl(Er,n,e,t,i,r),!0;case"dragenter":return Tr=sl(Tr,n,e,t,i,r),!0;case"mouseover":return Sr=sl(Sr,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Kl.set(s,sl(Kl.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ql.set(s,sl(Ql.get(s)||null,n,e,t,i,r)),!0}return!1}function JE(n){var e=Ts(n.target);if(e!==null){var t=Ys(e);if(t!==null){if(e=t.tag,e===13){if(e=$E(t),e!==null){n.blockedOn=e,YE(n.priority,function(){QE(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Kc(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=cm(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);rm=i,t.target.dispatchEvent(i),rm=null}else return e=ku(t),e!==null&&Lg(e),n.blockedOn=t,!1;e.shift()}return!0}function Kv(n,e,t){Kc(n)&&t.delete(e)}function K1(){um=!1,Er!==null&&Kc(Er)&&(Er=null),Tr!==null&&Kc(Tr)&&(Tr=null),Sr!==null&&Kc(Sr)&&(Sr=null),Kl.forEach(Kv),Ql.forEach(Kv)}function ol(n,e){n.blockedOn===e&&(n.blockedOn=null,um||(um=!0,Dn.unstable_scheduleCallback(Dn.unstable_NormalPriority,K1)))}function Xl(n){function e(r){return ol(r,n)}if(0<Cc.length){ol(Cc[0],n);for(var t=1;t<Cc.length;t++){var i=Cc[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Er!==null&&ol(Er,n),Tr!==null&&ol(Tr,n),Sr!==null&&ol(Sr,n),Kl.forEach(e),Ql.forEach(e),t=0;t<mr.length;t++)i=mr[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<mr.length&&(t=mr[0],t.blockedOn===null);)JE(t),t.blockedOn===null&&mr.shift()}var Ho=Hi.ReactCurrentBatchConfig,wh=!0;function Q1(n,e,t,i){var r=He,s=Ho.transition;Ho.transition=null;try{He=1,Mg(n,e,t,i)}finally{He=r,Ho.transition=s}}function X1(n,e,t,i){var r=He,s=Ho.transition;Ho.transition=null;try{He=4,Mg(n,e,t,i)}finally{He=r,Ho.transition=s}}function Mg(n,e,t,i){if(wh){var r=cm(n,e,t,i);if(r===null)jf(n,e,i,Eh,t),Wv(n,i);else if(W1(r,n,e,t,i))i.stopPropagation();else if(Wv(n,i),e&4&&-1<G1.indexOf(n)){for(;r!==null;){var s=ku(r);if(s!==null&&KE(s),s=cm(n,e,t,i),s===null&&jf(n,e,i,Eh,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else jf(n,e,i,null,t)}}var Eh=null;function cm(n,e,t,i){if(Eh=null,n=Dg(i),n=Ts(n),n!==null)if(e=Ys(n),e===null)n=null;else if(t=e.tag,t===13){if(n=$E(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Eh=n,null}function ZE(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(V1()){case Og:return 1;case UE:return 4;case vh:case B1:return 16;case HE:return 536870912;default:return 16}default:return 16}}var vr=null,Vg=null,Qc=null;function eT(){if(Qc)return Qc;var n,e=Vg,t=e.length,i,r="value"in vr?vr.value:vr.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return Qc=r.slice(n,1<i?1-i:void 0)}function Xc(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Pc(){return!0}function Qv(){return!1}function Mn(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Pc:Qv,this.isPropagationStopped=Qv,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Pc)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Pc)},persist:function(){},isPersistent:Pc}),e}var Ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bg=Mn(Ia),Pu=ut({},Ia,{view:0,detail:0}),Y1=Mn(Pu),Of,Nf,al,fd=ut({},Pu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fg,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==al&&(al&&n.type==="mousemove"?(Of=n.screenX-al.screenX,Nf=n.screenY-al.screenY):Nf=Of=0,al=n),Of)},movementY:function(n){return"movementY"in n?n.movementY:Nf}}),Xv=Mn(fd),J1=ut({},fd,{dataTransfer:0}),Z1=Mn(J1),eP=ut({},Pu,{relatedTarget:0}),Lf=Mn(eP),tP=ut({},Ia,{animationName:0,elapsedTime:0,pseudoElement:0}),nP=Mn(tP),iP=ut({},Ia,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),rP=Mn(iP),sP=ut({},Ia,{data:0}),Yv=Mn(sP),oP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uP(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=lP[n])?!!e[n]:!1}function Fg(){return uP}var cP=ut({},Pu,{key:function(n){if(n.key){var e=oP[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Xc(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?aP[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fg,charCode:function(n){return n.type==="keypress"?Xc(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Xc(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),hP=Mn(cP),dP=ut({},fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jv=Mn(dP),fP=ut({},Pu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fg}),pP=Mn(fP),mP=ut({},Ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),gP=Mn(mP),_P=ut({},fd,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),yP=Mn(_P),vP=[9,13,27,32],$g=Vi&&"CompositionEvent"in window,xl=null;Vi&&"documentMode"in document&&(xl=document.documentMode);var bP=Vi&&"TextEvent"in window&&!xl,tT=Vi&&(!$g||xl&&8<xl&&11>=xl),Zv=" ",eb=!1;function nT(n,e){switch(n){case"keyup":return vP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Do=!1;function wP(n,e){switch(n){case"compositionend":return iT(e);case"keypress":return e.which!==32?null:(eb=!0,Zv);case"textInput":return n=e.data,n===Zv&&eb?null:n;default:return null}}function EP(n,e){if(Do)return n==="compositionend"||!$g&&nT(n,e)?(n=eT(),Qc=Vg=vr=null,Do=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tT&&e.locale!=="ko"?null:e.data;default:return null}}var TP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!TP[n.type]:e==="textarea"}function rT(n,e,t,i){LE(i),e=Th(e,"onChange"),0<e.length&&(t=new Bg("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Rl=null,Yl=null;function SP(n){mT(n,0)}function pd(n){var e=Lo(n);if(PE(e))return n}function IP(n,e){if(n==="change")return e}var sT=!1;if(Vi){var Mf;if(Vi){var Vf="oninput"in document;if(!Vf){var nb=document.createElement("div");nb.setAttribute("oninput","return;"),Vf=typeof nb.oninput=="function"}Mf=Vf}else Mf=!1;sT=Mf&&(!document.documentMode||9<document.documentMode)}function ib(){Rl&&(Rl.detachEvent("onpropertychange",oT),Yl=Rl=null)}function oT(n){if(n.propertyName==="value"&&pd(Yl)){var e=[];rT(e,Yl,n,Dg(n)),FE(SP,e)}}function AP(n,e,t){n==="focusin"?(ib(),Rl=e,Yl=t,Rl.attachEvent("onpropertychange",oT)):n==="focusout"&&ib()}function CP(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return pd(Yl)}function PP(n,e){if(n==="click")return pd(e)}function kP(n,e){if(n==="input"||n==="change")return pd(e)}function xP(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var si=typeof Object.is=="function"?Object.is:xP;function Jl(n,e){if(si(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!Gp.call(e,r)||!si(n[r],e[r]))return!1}return!0}function rb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function sb(n,e){var t=rb(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=rb(t)}}function aT(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?aT(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function lT(){for(var n=window,e=gh();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=gh(n.document)}return e}function zg(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function RP(n){var e=lT(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&aT(t.ownerDocument.documentElement,t)){if(i!==null&&zg(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=sb(t,s);var o=sb(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var DP=Vi&&"documentMode"in document&&11>=document.documentMode,Oo=null,hm=null,Dl=null,dm=!1;function ob(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;dm||Oo==null||Oo!==gh(i)||(i=Oo,"selectionStart"in i&&zg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Dl&&Jl(Dl,i)||(Dl=i,i=Th(hm,"onSelect"),0<i.length&&(e=new Bg("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Oo)))}function kc(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var No={animationend:kc("Animation","AnimationEnd"),animationiteration:kc("Animation","AnimationIteration"),animationstart:kc("Animation","AnimationStart"),transitionend:kc("Transition","TransitionEnd")},Bf={},uT={};Vi&&(uT=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function md(n){if(Bf[n])return Bf[n];if(!No[n])return n;var e=No[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in uT)return Bf[n]=e[t];return n}var cT=md("animationend"),hT=md("animationiteration"),dT=md("animationstart"),fT=md("transitionend"),pT=new Map,ab="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xr(n,e){pT.set(n,e),Xs(e,[n])}for(var Ff=0;Ff<ab.length;Ff++){var $f=ab[Ff],OP=$f.toLowerCase(),NP=$f[0].toUpperCase()+$f.slice(1);Xr(OP,"on"+NP)}Xr(cT,"onAnimationEnd");Xr(hT,"onAnimationIteration");Xr(dT,"onAnimationStart");Xr("dblclick","onDoubleClick");Xr("focusin","onFocus");Xr("focusout","onBlur");Xr(fT,"onTransitionEnd");ta("onMouseEnter",["mouseout","mouseover"]);ta("onMouseLeave",["mouseout","mouseover"]);ta("onPointerEnter",["pointerout","pointerover"]);ta("onPointerLeave",["pointerout","pointerover"]);Xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LP=new Set("cancel close invalid load scroll toggle".split(" ").concat(wl));function lb(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,O1(i,e,void 0,n),n.currentTarget=null}function mT(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&r.isPropagationStopped())break e;lb(r,a,l),s=c}else for(o=0;o<i.length;o++){if(a=i[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&r.isPropagationStopped())break e;lb(r,a,l),s=c}}}if(yh)throw n=am,yh=!1,am=null,n}function Je(n,e){var t=e[_m];t===void 0&&(t=e[_m]=new Set);var i=n+"__bubble";t.has(i)||(gT(e,n,2,!1),t.add(i))}function zf(n,e,t){var i=0;e&&(i|=4),gT(t,n,i,e)}var xc="_reactListening"+Math.random().toString(36).slice(2);function Zl(n){if(!n[xc]){n[xc]=!0,TE.forEach(function(t){t!=="selectionchange"&&(LP.has(t)||zf(t,!1,n),zf(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[xc]||(e[xc]=!0,zf("selectionchange",!1,e))}}function gT(n,e,t,i){switch(ZE(e)){case 1:var r=Q1;break;case 4:r=X1;break;default:r=Mg}t=r.bind(null,e,t,n),r=void 0,!om||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function jf(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Ts(a),o===null)return;if(c=o.tag,c===5||c===6){i=s=o;continue e}a=a.parentNode}}i=i.return}FE(function(){var l=s,d=Dg(t),f=[];e:{var g=pT.get(n);if(g!==void 0){var w=Bg,P=n;switch(n){case"keypress":if(Xc(t)===0)break e;case"keydown":case"keyup":w=hP;break;case"focusin":P="focus",w=Lf;break;case"focusout":P="blur",w=Lf;break;case"beforeblur":case"afterblur":w=Lf;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Xv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Z1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=pP;break;case cT:case hT:case dT:w=nP;break;case fT:w=gP;break;case"scroll":w=Y1;break;case"wheel":w=yP;break;case"copy":case"cut":case"paste":w=rP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Jv}var x=(e&4)!==0,L=!x&&n==="scroll",v=x?g!==null?g+"Capture":null:g;x=[];for(var E=l,I;E!==null;){I=E;var N=I.stateNode;if(I.tag===5&&N!==null&&(I=N,v!==null&&(N=Wl(E,v),N!=null&&x.push(eu(E,N,I)))),L)break;E=E.return}0<x.length&&(g=new w(g,P,null,t,d),f.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=n==="mouseover"||n==="pointerover",w=n==="mouseout"||n==="pointerout",g&&t!==rm&&(P=t.relatedTarget||t.fromElement)&&(Ts(P)||P[Bi]))break e;if((w||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,w?(P=t.relatedTarget||t.toElement,w=l,P=P?Ts(P):null,P!==null&&(L=Ys(P),P!==L||P.tag!==5&&P.tag!==6)&&(P=null)):(w=null,P=l),w!==P)){if(x=Xv,N="onMouseLeave",v="onMouseEnter",E="mouse",(n==="pointerout"||n==="pointerover")&&(x=Jv,N="onPointerLeave",v="onPointerEnter",E="pointer"),L=w==null?g:Lo(w),I=P==null?g:Lo(P),g=new x(N,E+"leave",w,t,d),g.target=L,g.relatedTarget=I,N=null,Ts(d)===l&&(x=new x(v,E+"enter",P,t,d),x.target=I,x.relatedTarget=L,N=x),L=N,w&&P)t:{for(x=w,v=P,E=0,I=x;I;I=yo(I))E++;for(I=0,N=v;N;N=yo(N))I++;for(;0<E-I;)x=yo(x),E--;for(;0<I-E;)v=yo(v),I--;for(;E--;){if(x===v||v!==null&&x===v.alternate)break t;x=yo(x),v=yo(v)}x=null}else x=null;w!==null&&ub(f,g,w,x,!1),P!==null&&L!==null&&ub(f,L,P,x,!0)}}e:{if(g=l?Lo(l):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var K=IP;else if(tb(g))if(sT)K=kP;else{K=CP;var Q=AP}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(K=PP);if(K&&(K=K(n,l))){rT(f,K,t,d);break e}Q&&Q(n,g,l),n==="focusout"&&(Q=g._wrapperState)&&Q.controlled&&g.type==="number"&&Zp(g,"number",g.value)}switch(Q=l?Lo(l):window,n){case"focusin":(tb(Q)||Q.contentEditable==="true")&&(Oo=Q,hm=l,Dl=null);break;case"focusout":Dl=hm=Oo=null;break;case"mousedown":dm=!0;break;case"contextmenu":case"mouseup":case"dragend":dm=!1,ob(f,t,d);break;case"selectionchange":if(DP)break;case"keydown":case"keyup":ob(f,t,d)}var S;if($g)e:{switch(n){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Do?nT(n,t)&&(_="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(_="onCompositionStart");_&&(tT&&t.locale!=="ko"&&(Do||_!=="onCompositionStart"?_==="onCompositionEnd"&&Do&&(S=eT()):(vr=d,Vg="value"in vr?vr.value:vr.textContent,Do=!0)),Q=Th(l,_),0<Q.length&&(_=new Yv(_,n,null,t,d),f.push({event:_,listeners:Q}),S?_.data=S:(S=iT(t),S!==null&&(_.data=S)))),(S=bP?wP(n,t):EP(n,t))&&(l=Th(l,"onBeforeInput"),0<l.length&&(d=new Yv("onBeforeInput","beforeinput",null,t,d),f.push({event:d,listeners:l}),d.data=S))}mT(f,e)})}function eu(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Th(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Wl(n,t),s!=null&&i.unshift(eu(n,s,r)),s=Wl(n,e),s!=null&&i.push(eu(n,s,r))),n=n.return}return i}function yo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ub(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,c=a.alternate,l=a.stateNode;if(c!==null&&c===i)break;a.tag===5&&l!==null&&(a=l,r?(c=Wl(t,s),c!=null&&o.unshift(eu(t,c,a))):r||(c=Wl(t,s),c!=null&&o.push(eu(t,c,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var MP=/\r\n?/g,VP=/\u0000|\uFFFD/g;function cb(n){return(typeof n=="string"?n:""+n).replace(MP,`
`).replace(VP,"")}function Rc(n,e,t){if(e=cb(e),cb(n)!==e&&t)throw Error(Y(425))}function Sh(){}var fm=null,pm=null;function mm(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gm=typeof setTimeout=="function"?setTimeout:void 0,BP=typeof clearTimeout=="function"?clearTimeout:void 0,hb=typeof Promise=="function"?Promise:void 0,FP=typeof queueMicrotask=="function"?queueMicrotask:typeof hb<"u"?function(n){return hb.resolve(null).then(n).catch($P)}:gm;function $P(n){setTimeout(function(){throw n})}function qf(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Xl(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Xl(e)}function Ir(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function db(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Aa=Math.random().toString(36).slice(2),di="__reactFiber$"+Aa,tu="__reactProps$"+Aa,Bi="__reactContainer$"+Aa,_m="__reactEvents$"+Aa,zP="__reactListeners$"+Aa,jP="__reactHandles$"+Aa;function Ts(n){var e=n[di];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Bi]||t[di]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=db(n);n!==null;){if(t=n[di])return t;n=db(n)}return e}n=t,t=n.parentNode}return null}function ku(n){return n=n[di]||n[Bi],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Lo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Y(33))}function gd(n){return n[tu]||null}var ym=[],Mo=-1;function Yr(n){return{current:n}}function et(n){0>Mo||(n.current=ym[Mo],ym[Mo]=null,Mo--)}function Xe(n,e){Mo++,ym[Mo]=n.current,n.current=e}var Mr={},Jt=Yr(Mr),bn=Yr(!1),Ns=Mr;function na(n,e){var t=n.type.contextTypes;if(!t)return Mr;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function wn(n){return n=n.childContextTypes,n!=null}function Ih(){et(bn),et(Jt)}function fb(n,e,t){if(Jt.current!==Mr)throw Error(Y(168));Xe(Jt,e),Xe(bn,t)}function _T(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Y(108,A1(n)||"Unknown",r));return ut({},t,i)}function Ah(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Mr,Ns=Jt.current,Xe(Jt,n),Xe(bn,bn.current),!0}function pb(n,e,t){var i=n.stateNode;if(!i)throw Error(Y(169));t?(n=_T(n,e,Ns),i.__reactInternalMemoizedMergedChildContext=n,et(bn),et(Jt),Xe(Jt,n)):et(bn),Xe(bn,t)}var Ri=null,_d=!1,Uf=!1;function yT(n){Ri===null?Ri=[n]:Ri.push(n)}function qP(n){_d=!0,yT(n)}function Jr(){if(!Uf&&Ri!==null){Uf=!0;var n=0,e=He;try{var t=Ri;for(He=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Ri=null,_d=!1}catch(r){throw Ri!==null&&(Ri=Ri.slice(n+1)),qE(Og,Jr),r}finally{He=e,Uf=!1}}return null}var Vo=[],Bo=0,Ch=null,Ph=0,Fn=[],$n=0,Ls=null,Di=1,Oi="";function ps(n,e){Vo[Bo++]=Ph,Vo[Bo++]=Ch,Ch=n,Ph=e}function vT(n,e,t){Fn[$n++]=Di,Fn[$n++]=Oi,Fn[$n++]=Ls,Ls=n;var i=Di;n=Oi;var r=32-ii(i)-1;i&=~(1<<r),t+=1;var s=32-ii(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Di=1<<32-ii(e)+r|t<<r|i,Oi=s+n}else Di=1<<s|t<<r|i,Oi=n}function jg(n){n.return!==null&&(ps(n,1),vT(n,1,0))}function qg(n){for(;n===Ch;)Ch=Vo[--Bo],Vo[Bo]=null,Ph=Vo[--Bo],Vo[Bo]=null;for(;n===Ls;)Ls=Fn[--$n],Fn[$n]=null,Oi=Fn[--$n],Fn[$n]=null,Di=Fn[--$n],Fn[$n]=null}var Rn=null,kn=null,tt=!1,ni=null;function bT(n,e){var t=jn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function mb(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Rn=n,kn=Ir(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Rn=n,kn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ls!==null?{id:Di,overflow:Oi}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=jn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Rn=n,kn=null,!0):!1;default:return!1}}function vm(n){return(n.mode&1)!==0&&(n.flags&128)===0}function bm(n){if(tt){var e=kn;if(e){var t=e;if(!mb(n,e)){if(vm(n))throw Error(Y(418));e=Ir(t.nextSibling);var i=Rn;e&&mb(n,e)?bT(i,t):(n.flags=n.flags&-4097|2,tt=!1,Rn=n)}}else{if(vm(n))throw Error(Y(418));n.flags=n.flags&-4097|2,tt=!1,Rn=n}}}function gb(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Rn=n}function Dc(n){if(n!==Rn)return!1;if(!tt)return gb(n),tt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!mm(n.type,n.memoizedProps)),e&&(e=kn)){if(vm(n))throw wT(),Error(Y(418));for(;e;)bT(n,e),e=Ir(e.nextSibling)}if(gb(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Y(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){kn=Ir(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}kn=null}}else kn=Rn?Ir(n.stateNode.nextSibling):null;return!0}function wT(){for(var n=kn;n;)n=Ir(n.nextSibling)}function ia(){kn=Rn=null,tt=!1}function Ug(n){ni===null?ni=[n]:ni.push(n)}var UP=Hi.ReactCurrentBatchConfig;function ll(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Y(309));var i=t.stateNode}if(!i)throw Error(Y(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Y(284));if(!t._owner)throw Error(Y(290,n))}return n}function Oc(n,e){throw n=Object.prototype.toString.call(e),Error(Y(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function _b(n){var e=n._init;return e(n._payload)}function ET(n){function e(v,E){if(n){var I=v.deletions;I===null?(v.deletions=[E],v.flags|=16):I.push(E)}}function t(v,E){if(!n)return null;for(;E!==null;)e(v,E),E=E.sibling;return null}function i(v,E){for(v=new Map;E!==null;)E.key!==null?v.set(E.key,E):v.set(E.index,E),E=E.sibling;return v}function r(v,E){return v=kr(v,E),v.index=0,v.sibling=null,v}function s(v,E,I){return v.index=I,n?(I=v.alternate,I!==null?(I=I.index,I<E?(v.flags|=2,E):I):(v.flags|=2,E)):(v.flags|=1048576,E)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,E,I,N){return E===null||E.tag!==6?(E=Yf(I,v.mode,N),E.return=v,E):(E=r(E,I),E.return=v,E)}function c(v,E,I,N){var K=I.type;return K===Ro?d(v,E,I.props.children,N,I.key):E!==null&&(E.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===fr&&_b(K)===E.type)?(N=r(E,I.props),N.ref=ll(v,E,I),N.return=v,N):(N=ih(I.type,I.key,I.props,null,v.mode,N),N.ref=ll(v,E,I),N.return=v,N)}function l(v,E,I,N){return E===null||E.tag!==4||E.stateNode.containerInfo!==I.containerInfo||E.stateNode.implementation!==I.implementation?(E=Jf(I,v.mode,N),E.return=v,E):(E=r(E,I.children||[]),E.return=v,E)}function d(v,E,I,N,K){return E===null||E.tag!==7?(E=ks(I,v.mode,N,K),E.return=v,E):(E=r(E,I),E.return=v,E)}function f(v,E,I){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Yf(""+E,v.mode,I),E.return=v,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ec:return I=ih(E.type,E.key,E.props,null,v.mode,I),I.ref=ll(v,null,E),I.return=v,I;case xo:return E=Jf(E,v.mode,I),E.return=v,E;case fr:var N=E._init;return f(v,N(E._payload),I)}if(vl(E)||il(E))return E=ks(E,v.mode,I,null),E.return=v,E;Oc(v,E)}return null}function g(v,E,I,N){var K=E!==null?E.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return K!==null?null:a(v,E,""+I,N);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ec:return I.key===K?c(v,E,I,N):null;case xo:return I.key===K?l(v,E,I,N):null;case fr:return K=I._init,g(v,E,K(I._payload),N)}if(vl(I)||il(I))return K!==null?null:d(v,E,I,N,null);Oc(v,I)}return null}function w(v,E,I,N,K){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(I)||null,a(E,v,""+N,K);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ec:return v=v.get(N.key===null?I:N.key)||null,c(E,v,N,K);case xo:return v=v.get(N.key===null?I:N.key)||null,l(E,v,N,K);case fr:var Q=N._init;return w(v,E,I,Q(N._payload),K)}if(vl(N)||il(N))return v=v.get(I)||null,d(E,v,N,K,null);Oc(E,N)}return null}function P(v,E,I,N){for(var K=null,Q=null,S=E,_=E=0,b=null;S!==null&&_<I.length;_++){S.index>_?(b=S,S=null):b=S.sibling;var T=g(v,S,I[_],N);if(T===null){S===null&&(S=b);break}n&&S&&T.alternate===null&&e(v,S),E=s(T,E,_),Q===null?K=T:Q.sibling=T,Q=T,S=b}if(_===I.length)return t(v,S),tt&&ps(v,_),K;if(S===null){for(;_<I.length;_++)S=f(v,I[_],N),S!==null&&(E=s(S,E,_),Q===null?K=S:Q.sibling=S,Q=S);return tt&&ps(v,_),K}for(S=i(v,S);_<I.length;_++)b=w(S,v,_,I[_],N),b!==null&&(n&&b.alternate!==null&&S.delete(b.key===null?_:b.key),E=s(b,E,_),Q===null?K=b:Q.sibling=b,Q=b);return n&&S.forEach(function(C){return e(v,C)}),tt&&ps(v,_),K}function x(v,E,I,N){var K=il(I);if(typeof K!="function")throw Error(Y(150));if(I=K.call(I),I==null)throw Error(Y(151));for(var Q=K=null,S=E,_=E=0,b=null,T=I.next();S!==null&&!T.done;_++,T=I.next()){S.index>_?(b=S,S=null):b=S.sibling;var C=g(v,S,T.value,N);if(C===null){S===null&&(S=b);break}n&&S&&C.alternate===null&&e(v,S),E=s(C,E,_),Q===null?K=C:Q.sibling=C,Q=C,S=b}if(T.done)return t(v,S),tt&&ps(v,_),K;if(S===null){for(;!T.done;_++,T=I.next())T=f(v,T.value,N),T!==null&&(E=s(T,E,_),Q===null?K=T:Q.sibling=T,Q=T);return tt&&ps(v,_),K}for(S=i(v,S);!T.done;_++,T=I.next())T=w(S,v,_,T.value,N),T!==null&&(n&&T.alternate!==null&&S.delete(T.key===null?_:T.key),E=s(T,E,_),Q===null?K=T:Q.sibling=T,Q=T);return n&&S.forEach(function(R){return e(v,R)}),tt&&ps(v,_),K}function L(v,E,I,N){if(typeof I=="object"&&I!==null&&I.type===Ro&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Ec:e:{for(var K=I.key,Q=E;Q!==null;){if(Q.key===K){if(K=I.type,K===Ro){if(Q.tag===7){t(v,Q.sibling),E=r(Q,I.props.children),E.return=v,v=E;break e}}else if(Q.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===fr&&_b(K)===Q.type){t(v,Q.sibling),E=r(Q,I.props),E.ref=ll(v,Q,I),E.return=v,v=E;break e}t(v,Q);break}else e(v,Q);Q=Q.sibling}I.type===Ro?(E=ks(I.props.children,v.mode,N,I.key),E.return=v,v=E):(N=ih(I.type,I.key,I.props,null,v.mode,N),N.ref=ll(v,E,I),N.return=v,v=N)}return o(v);case xo:e:{for(Q=I.key;E!==null;){if(E.key===Q)if(E.tag===4&&E.stateNode.containerInfo===I.containerInfo&&E.stateNode.implementation===I.implementation){t(v,E.sibling),E=r(E,I.children||[]),E.return=v,v=E;break e}else{t(v,E);break}else e(v,E);E=E.sibling}E=Jf(I,v.mode,N),E.return=v,v=E}return o(v);case fr:return Q=I._init,L(v,E,Q(I._payload),N)}if(vl(I))return P(v,E,I,N);if(il(I))return x(v,E,I,N);Oc(v,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,E!==null&&E.tag===6?(t(v,E.sibling),E=r(E,I),E.return=v,v=E):(t(v,E),E=Yf(I,v.mode,N),E.return=v,v=E),o(v)):t(v,E)}return L}var ra=ET(!0),TT=ET(!1),kh=Yr(null),xh=null,Fo=null,Hg=null;function Gg(){Hg=Fo=xh=null}function Wg(n){var e=kh.current;et(kh),n._currentValue=e}function wm(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Go(n,e){xh=n,Hg=Fo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(gn=!0),n.firstContext=null)}function Gn(n){var e=n._currentValue;if(Hg!==n)if(n={context:n,memoizedValue:e,next:null},Fo===null){if(xh===null)throw Error(Y(308));Fo=n,xh.dependencies={lanes:0,firstContext:n}}else Fo=Fo.next=n;return e}var Ss=null;function Kg(n){Ss===null?Ss=[n]:Ss.push(n)}function ST(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,Kg(e)):(t.next=r.next,r.next=t),e.interleaved=t,Fi(n,i)}function Fi(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var pr=!1;function Qg(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IT(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Li(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Me&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Fi(n,t)}return r=i.interleaved,r===null?(e.next=e,Kg(i)):(e.next=r.next,r.next=e),i.interleaved=e,Fi(n,t)}function Yc(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Ng(n,t)}}function yb(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Rh(n,e,t,i){var r=n.updateQueue;pr=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=c))}if(s!==null){var f=r.baseState;o=0,d=l=c=null,a=s;do{var g=a.lane,w=a.eventTime;if((i&g)===g){d!==null&&(d=d.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var P=n,x=a;switch(g=e,w=t,x.tag){case 1:if(P=x.payload,typeof P=="function"){f=P.call(w,f,g);break e}f=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=x.payload,g=typeof P=="function"?P.call(w,f,g):P,g==null)break e;f=ut({},f,g);break e;case 2:pr=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,g=r.effects,g===null?r.effects=[a]:g.push(a))}else w={eventTime:w,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(l=d=w,c=f):d=d.next=w,o|=g;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;g=a,a=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);if(d===null&&(c=f),r.baseState=c,r.firstBaseUpdate=l,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Vs|=o,n.lanes=o,n.memoizedState=f}}function vb(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Y(191,r));r.call(i)}}}var xu={},gi=Yr(xu),nu=Yr(xu),iu=Yr(xu);function Is(n){if(n===xu)throw Error(Y(174));return n}function Xg(n,e){switch(Xe(iu,e),Xe(nu,n),Xe(gi,xu),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tm(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=tm(e,n)}et(gi),Xe(gi,e)}function sa(){et(gi),et(nu),et(iu)}function AT(n){Is(iu.current);var e=Is(gi.current),t=tm(e,n.type);e!==t&&(Xe(nu,n),Xe(gi,t))}function Yg(n){nu.current===n&&(et(gi),et(nu))}var ot=Yr(0);function Dh(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hf=[];function Jg(){for(var n=0;n<Hf.length;n++)Hf[n]._workInProgressVersionPrimary=null;Hf.length=0}var Jc=Hi.ReactCurrentDispatcher,Gf=Hi.ReactCurrentBatchConfig,Ms=0,at=null,It=null,xt=null,Oh=!1,Ol=!1,ru=0,HP=0;function Wt(){throw Error(Y(321))}function Zg(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!si(n[t],e[t]))return!1;return!0}function e_(n,e,t,i,r,s){if(Ms=s,at=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jc.current=n===null||n.memoizedState===null?QP:XP,n=t(i,r),Ol){s=0;do{if(Ol=!1,ru=0,25<=s)throw Error(Y(301));s+=1,xt=It=null,e.updateQueue=null,Jc.current=YP,n=t(i,r)}while(Ol)}if(Jc.current=Nh,e=It!==null&&It.next!==null,Ms=0,xt=It=at=null,Oh=!1,e)throw Error(Y(300));return n}function t_(){var n=ru!==0;return ru=0,n}function hi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?at.memoizedState=xt=n:xt=xt.next=n,xt}function Wn(){if(It===null){var n=at.alternate;n=n!==null?n.memoizedState:null}else n=It.next;var e=xt===null?at.memoizedState:xt.next;if(e!==null)xt=e,It=n;else{if(n===null)throw Error(Y(310));It=n,n={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},xt===null?at.memoizedState=xt=n:xt=xt.next=n}return xt}function su(n,e){return typeof e=="function"?e(n):e}function Wf(n){var e=Wn(),t=e.queue;if(t===null)throw Error(Y(311));t.lastRenderedReducer=n;var i=It,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,c=null,l=s;do{var d=l.lane;if((Ms&d)===d)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),i=l.hasEagerState?l.eagerState:n(i,l.action);else{var f={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=f,o=i):c=c.next=f,at.lanes|=d,Vs|=d}l=l.next}while(l!==null&&l!==s);c===null?o=i:c.next=a,si(i,e.memoizedState)||(gn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=c,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,at.lanes|=s,Vs|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Kf(n){var e=Wn(),t=e.queue;if(t===null)throw Error(Y(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);si(s,e.memoizedState)||(gn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function CT(){}function PT(n,e){var t=at,i=Wn(),r=e(),s=!si(i.memoizedState,r);if(s&&(i.memoizedState=r,gn=!0),i=i.queue,n_(RT.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||xt!==null&&xt.memoizedState.tag&1){if(t.flags|=2048,ou(9,xT.bind(null,t,i,r,e),void 0,null),Dt===null)throw Error(Y(349));Ms&30||kT(t,e,r)}return r}function kT(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function xT(n,e,t,i){e.value=t,e.getSnapshot=i,DT(e)&&OT(n)}function RT(n,e,t){return t(function(){DT(e)&&OT(n)})}function DT(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!si(n,t)}catch{return!0}}function OT(n){var e=Fi(n,1);e!==null&&ri(e,n,1,-1)}function bb(n){var e=hi();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:su,lastRenderedState:n},e.queue=n,n=n.dispatch=KP.bind(null,at,n),[e.memoizedState,n]}function ou(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function NT(){return Wn().memoizedState}function Zc(n,e,t,i){var r=hi();at.flags|=n,r.memoizedState=ou(1|e,t,void 0,i===void 0?null:i)}function yd(n,e,t,i){var r=Wn();i=i===void 0?null:i;var s=void 0;if(It!==null){var o=It.memoizedState;if(s=o.destroy,i!==null&&Zg(i,o.deps)){r.memoizedState=ou(e,t,s,i);return}}at.flags|=n,r.memoizedState=ou(1|e,t,s,i)}function wb(n,e){return Zc(8390656,8,n,e)}function n_(n,e){return yd(2048,8,n,e)}function LT(n,e){return yd(4,2,n,e)}function MT(n,e){return yd(4,4,n,e)}function VT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function BT(n,e,t){return t=t!=null?t.concat([n]):null,yd(4,4,VT.bind(null,e,n),t)}function i_(){}function FT(n,e){var t=Wn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Zg(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function $T(n,e){var t=Wn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Zg(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function zT(n,e,t){return Ms&21?(si(t,e)||(t=GE(),at.lanes|=t,Vs|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,gn=!0),n.memoizedState=t)}function GP(n,e){var t=He;He=t!==0&&4>t?t:4,n(!0);var i=Gf.transition;Gf.transition={};try{n(!1),e()}finally{He=t,Gf.transition=i}}function jT(){return Wn().memoizedState}function WP(n,e,t){var i=Pr(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},qT(n))UT(e,t);else if(t=ST(n,e,t,i),t!==null){var r=on();ri(t,n,i,r),HT(t,e,i)}}function KP(n,e,t){var i=Pr(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(qT(n))UT(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,si(a,o)){var c=e.interleaved;c===null?(r.next=r,Kg(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}t=ST(n,e,r,i),t!==null&&(r=on(),ri(t,n,i,r),HT(t,e,i))}}function qT(n){var e=n.alternate;return n===at||e!==null&&e===at}function UT(n,e){Ol=Oh=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function HT(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Ng(n,t)}}var Nh={readContext:Gn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},QP={readContext:Gn,useCallback:function(n,e){return hi().memoizedState=[n,e===void 0?null:e],n},useContext:Gn,useEffect:wb,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Zc(4194308,4,VT.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Zc(4194308,4,n,e)},useInsertionEffect:function(n,e){return Zc(4,2,n,e)},useMemo:function(n,e){var t=hi();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=hi();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=WP.bind(null,at,n),[i.memoizedState,n]},useRef:function(n){var e=hi();return n={current:n},e.memoizedState=n},useState:bb,useDebugValue:i_,useDeferredValue:function(n){return hi().memoizedState=n},useTransition:function(){var n=bb(!1),e=n[0];return n=GP.bind(null,n[1]),hi().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=at,r=hi();if(tt){if(t===void 0)throw Error(Y(407));t=t()}else{if(t=e(),Dt===null)throw Error(Y(349));Ms&30||kT(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,wb(RT.bind(null,i,s,n),[n]),i.flags|=2048,ou(9,xT.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=hi(),e=Dt.identifierPrefix;if(tt){var t=Oi,i=Di;t=(i&~(1<<32-ii(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=ru++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=HP++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},XP={readContext:Gn,useCallback:FT,useContext:Gn,useEffect:n_,useImperativeHandle:BT,useInsertionEffect:LT,useLayoutEffect:MT,useMemo:$T,useReducer:Wf,useRef:NT,useState:function(){return Wf(su)},useDebugValue:i_,useDeferredValue:function(n){var e=Wn();return zT(e,It.memoizedState,n)},useTransition:function(){var n=Wf(su)[0],e=Wn().memoizedState;return[n,e]},useMutableSource:CT,useSyncExternalStore:PT,useId:jT,unstable_isNewReconciler:!1},YP={readContext:Gn,useCallback:FT,useContext:Gn,useEffect:n_,useImperativeHandle:BT,useInsertionEffect:LT,useLayoutEffect:MT,useMemo:$T,useReducer:Kf,useRef:NT,useState:function(){return Kf(su)},useDebugValue:i_,useDeferredValue:function(n){var e=Wn();return It===null?e.memoizedState=n:zT(e,It.memoizedState,n)},useTransition:function(){var n=Kf(su)[0],e=Wn().memoizedState;return[n,e]},useMutableSource:CT,useSyncExternalStore:PT,useId:jT,unstable_isNewReconciler:!1};function ei(n,e){if(n&&n.defaultProps){e=ut({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Em(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:ut({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var vd={isMounted:function(n){return(n=n._reactInternals)?Ys(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=on(),r=Pr(n),s=Li(i,r);s.payload=e,t!=null&&(s.callback=t),e=Ar(n,s,r),e!==null&&(ri(e,n,r,i),Yc(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=on(),r=Pr(n),s=Li(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ar(n,s,r),e!==null&&(ri(e,n,r,i),Yc(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=on(),i=Pr(n),r=Li(t,i);r.tag=2,e!=null&&(r.callback=e),e=Ar(n,r,i),e!==null&&(ri(e,n,i,t),Yc(e,n,i))}};function Eb(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Jl(t,i)||!Jl(r,s):!0}function GT(n,e,t){var i=!1,r=Mr,s=e.contextType;return typeof s=="object"&&s!==null?s=Gn(s):(r=wn(e)?Ns:Jt.current,i=e.contextTypes,s=(i=i!=null)?na(n,r):Mr),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vd,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function Tb(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&vd.enqueueReplaceState(e,e.state,null)}function Tm(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},Qg(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Gn(s):(s=wn(e)?Ns:Jt.current,r.context=na(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Em(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&vd.enqueueReplaceState(r,r.state,null),Rh(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function oa(n,e){try{var t="",i=e;do t+=I1(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function Qf(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Sm(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var JP=typeof WeakMap=="function"?WeakMap:Map;function WT(n,e,t){t=Li(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Mh||(Mh=!0,Nm=i),Sm(n,e)},t}function KT(n,e,t){t=Li(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){Sm(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Sm(n,e),typeof i!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Sb(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new JP;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=dk.bind(null,n,e,t),e.then(n,n))}function Ib(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Ab(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Li(-1,1),e.tag=2,Ar(t,e,1))),t.lanes|=1),n)}var ZP=Hi.ReactCurrentOwner,gn=!1;function nn(n,e,t,i){e.child=n===null?TT(e,null,t,i):ra(e,n.child,t,i)}function Cb(n,e,t,i,r){t=t.render;var s=e.ref;return Go(e,r),i=e_(n,e,t,i,s,r),t=t_(),n!==null&&!gn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,$i(n,e,r)):(tt&&t&&jg(e),e.flags|=1,nn(n,e,i,r),e.child)}function Pb(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!h_(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,QT(n,e,s,i,r)):(n=ih(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Jl,t(o,i)&&n.ref===e.ref)return $i(n,e,r)}return e.flags|=1,n=kr(s,i),n.ref=e.ref,n.return=e,e.child=n}function QT(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Jl(s,i)&&n.ref===e.ref)if(gn=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(gn=!0);else return e.lanes=n.lanes,$i(n,e,r)}return Im(n,e,t,i,r)}function XT(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(zo,Cn),Cn|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Xe(zo,Cn),Cn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Xe(zo,Cn),Cn|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Xe(zo,Cn),Cn|=i;return nn(n,e,r,t),e.child}function YT(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Im(n,e,t,i,r){var s=wn(t)?Ns:Jt.current;return s=na(e,s),Go(e,r),t=e_(n,e,t,i,s,r),i=t_(),n!==null&&!gn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,$i(n,e,r)):(tt&&i&&jg(e),e.flags|=1,nn(n,e,t,r),e.child)}function kb(n,e,t,i,r){if(wn(t)){var s=!0;Ah(e)}else s=!1;if(Go(e,r),e.stateNode===null)eh(n,e),GT(e,t,i),Tm(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=t.contextType;typeof l=="object"&&l!==null?l=Gn(l):(l=wn(t)?Ns:Jt.current,l=na(e,l));var d=t.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||c!==l)&&Tb(e,o,i,l),pr=!1;var g=e.memoizedState;o.state=g,Rh(e,i,o,r),c=e.memoizedState,a!==i||g!==c||bn.current||pr?(typeof d=="function"&&(Em(e,t,d,i),c=e.memoizedState),(a=pr||Eb(e,t,a,i,g,c,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),o.props=i,o.state=c,o.context=l,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,IT(n,e),a=e.memoizedProps,l=e.type===e.elementType?a:ei(e.type,a),o.props=l,f=e.pendingProps,g=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=Gn(c):(c=wn(t)?Ns:Jt.current,c=na(e,c));var w=t.getDerivedStateFromProps;(d=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||g!==c)&&Tb(e,o,i,c),pr=!1,g=e.memoizedState,o.state=g,Rh(e,i,o,r);var P=e.memoizedState;a!==f||g!==P||bn.current||pr?(typeof w=="function"&&(Em(e,t,w,i),P=e.memoizedState),(l=pr||Eb(e,t,l,i,g,P,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,P,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,P,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=P),o.props=i,o.state=P,o.context=c,i=l):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&g===n.memoizedState||(e.flags|=1024),i=!1)}return Am(n,e,t,i,s,r)}function Am(n,e,t,i,r,s){YT(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&pb(e,t,!1),$i(n,e,s);i=e.stateNode,ZP.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=ra(e,n.child,null,s),e.child=ra(e,null,a,s)):nn(n,e,a,s),e.memoizedState=i.state,r&&pb(e,t,!0),e.child}function JT(n){var e=n.stateNode;e.pendingContext?fb(n,e.pendingContext,e.pendingContext!==e.context):e.context&&fb(n,e.context,!1),Xg(n,e.containerInfo)}function xb(n,e,t,i,r){return ia(),Ug(r),e.flags|=256,nn(n,e,t,i),e.child}var Cm={dehydrated:null,treeContext:null,retryLane:0};function Pm(n){return{baseLanes:n,cachePool:null,transitions:null}}function ZT(n,e,t){var i=e.pendingProps,r=ot.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Xe(ot,r&1),n===null)return bm(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ed(o,i,0,null),n=ks(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Pm(t),e.memoizedState=Cm,n):r_(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return ek(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var c={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=kr(r,c),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=kr(a,s):(s=ks(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?Pm(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Cm,i}return s=n.child,n=s.sibling,i=kr(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function r_(n,e){return e=Ed({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Nc(n,e,t,i){return i!==null&&Ug(i),ra(e,n.child,null,t),n=r_(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function ek(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=Qf(Error(Y(422))),Nc(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Ed({mode:"visible",children:i.children},r,0,null),s=ks(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&ra(e,n.child,null,o),e.child.memoizedState=Pm(o),e.memoizedState=Cm,s);if(!(e.mode&1))return Nc(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Y(419)),i=Qf(s,i,void 0),Nc(n,e,o,i)}if(a=(o&n.childLanes)!==0,gn||a){if(i=Dt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Fi(n,r),ri(i,n,r,-1))}return c_(),i=Qf(Error(Y(421))),Nc(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=fk.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,kn=Ir(r.nextSibling),Rn=e,tt=!0,ni=null,n!==null&&(Fn[$n++]=Di,Fn[$n++]=Oi,Fn[$n++]=Ls,Di=n.id,Oi=n.overflow,Ls=e),e=r_(e,i.children),e.flags|=4096,e)}function Rb(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),wm(n.return,e,t)}function Xf(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function eS(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(nn(n,e,i.children,t),i=ot.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Rb(n,t,e);else if(n.tag===19)Rb(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Xe(ot,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Dh(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Xf(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Dh(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Xf(e,!0,t,null,s);break;case"together":Xf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function eh(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function $i(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Vs|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Y(153));if(e.child!==null){for(n=e.child,t=kr(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=kr(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function tk(n,e,t){switch(e.tag){case 3:JT(e),ia();break;case 5:AT(e);break;case 1:wn(e.type)&&Ah(e);break;case 4:Xg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Xe(kh,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Xe(ot,ot.current&1),e.flags|=128,null):t&e.child.childLanes?ZT(n,e,t):(Xe(ot,ot.current&1),n=$i(n,e,t),n!==null?n.sibling:null);Xe(ot,ot.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return eS(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Xe(ot,ot.current),i)break;return null;case 22:case 23:return e.lanes=0,XT(n,e,t)}return $i(n,e,t)}var tS,km,nS,iS;tS=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};km=function(){};nS=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Is(gi.current);var s=null;switch(t){case"input":r=Yp(n,r),i=Yp(n,i),s=[];break;case"select":r=ut({},r,{value:void 0}),i=ut({},i,{value:void 0}),s=[];break;case"textarea":r=em(n,r),i=em(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Sh)}nm(t,i);var o;t=null;for(l in r)if(!i.hasOwnProperty(l)&&r.hasOwnProperty(l)&&r[l]!=null)if(l==="style"){var a=r[l];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Hl.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in i){var c=i[l];if(a=r!=null?r[l]:void 0,i.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(s||(s=[]),s.push(l,t)),t=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Hl.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Je("scroll",n),s||a===c||(s=[])):(s=s||[]).push(l,c))}t&&(s=s||[]).push("style",t);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};iS=function(n,e,t,i){t!==i&&(e.flags|=4)};function ul(n,e){if(!tt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Kt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function nk(n,e,t){var i=e.pendingProps;switch(qg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(e),null;case 1:return wn(e.type)&&Ih(),Kt(e),null;case 3:return i=e.stateNode,sa(),et(bn),et(Jt),Jg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Dc(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ni!==null&&(Vm(ni),ni=null))),km(n,e),Kt(e),null;case 5:Yg(e);var r=Is(iu.current);if(t=e.type,n!==null&&e.stateNode!=null)nS(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Y(166));return Kt(e),null}if(n=Is(gi.current),Dc(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[di]=e,i[tu]=s,n=(e.mode&1)!==0,t){case"dialog":Je("cancel",i),Je("close",i);break;case"iframe":case"object":case"embed":Je("load",i);break;case"video":case"audio":for(r=0;r<wl.length;r++)Je(wl[r],i);break;case"source":Je("error",i);break;case"img":case"image":case"link":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"input":$v(i,s),Je("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Je("invalid",i);break;case"textarea":jv(i,s),Je("invalid",i)}nm(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Rc(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Rc(i.textContent,a,n),r=["children",""+a]):Hl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Je("scroll",i)}switch(t){case"input":Tc(i),zv(i,s,!0);break;case"textarea":Tc(i),qv(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Sh)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=RE(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[di]=e,n[tu]=i,tS(n,e,!1,!1),e.stateNode=n;e:{switch(o=im(t,i),t){case"dialog":Je("cancel",n),Je("close",n),r=i;break;case"iframe":case"object":case"embed":Je("load",n),r=i;break;case"video":case"audio":for(r=0;r<wl.length;r++)Je(wl[r],n);r=i;break;case"source":Je("error",n),r=i;break;case"img":case"image":case"link":Je("error",n),Je("load",n),r=i;break;case"details":Je("toggle",n),r=i;break;case"input":$v(n,i),r=Yp(n,i),Je("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=ut({},i,{value:void 0}),Je("invalid",n);break;case"textarea":jv(n,i),r=em(n,i),Je("invalid",n);break;default:r=i}nm(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?NE(n,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&DE(n,c)):s==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&Gl(n,c):typeof c=="number"&&Gl(n,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hl.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Je("scroll",n):c!=null&&Pg(n,s,c,o))}switch(t){case"input":Tc(n),zv(n,i,!1);break;case"textarea":Tc(n),qv(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Lr(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?jo(n,!!i.multiple,s,!1):i.defaultValue!=null&&jo(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Sh)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kt(e),null;case 6:if(n&&e.stateNode!=null)iS(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Y(166));if(t=Is(iu.current),Is(gi.current),Dc(e)){if(i=e.stateNode,t=e.memoizedProps,i[di]=e,(s=i.nodeValue!==t)&&(n=Rn,n!==null))switch(n.tag){case 3:Rc(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Rc(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[di]=e,e.stateNode=i}return Kt(e),null;case 13:if(et(ot),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(tt&&kn!==null&&e.mode&1&&!(e.flags&128))wT(),ia(),e.flags|=98560,s=!1;else if(s=Dc(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[di]=e}else ia(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kt(e),s=!1}else ni!==null&&(Vm(ni),ni=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||ot.current&1?At===0&&(At=3):c_())),e.updateQueue!==null&&(e.flags|=4),Kt(e),null);case 4:return sa(),km(n,e),n===null&&Zl(e.stateNode.containerInfo),Kt(e),null;case 10:return Wg(e.type._context),Kt(e),null;case 17:return wn(e.type)&&Ih(),Kt(e),null;case 19:if(et(ot),s=e.memoizedState,s===null)return Kt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)ul(s,!1);else{if(At!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Dh(n),o!==null){for(e.flags|=128,ul(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Xe(ot,ot.current&1|2),e.child}n=n.sibling}s.tail!==null&&_t()>aa&&(e.flags|=128,i=!0,ul(s,!1),e.lanes=4194304)}else{if(!i)if(n=Dh(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ul(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!tt)return Kt(e),null}else 2*_t()-s.renderingStartTime>aa&&t!==1073741824&&(e.flags|=128,i=!0,ul(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=_t(),e.sibling=null,t=ot.current,Xe(ot,i?t&1|2:t&1),e):(Kt(e),null);case 22:case 23:return u_(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Cn&1073741824&&(Kt(e),e.subtreeFlags&6&&(e.flags|=8192)):Kt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function ik(n,e){switch(qg(e),e.tag){case 1:return wn(e.type)&&Ih(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return sa(),et(bn),et(Jt),Jg(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Yg(e),null;case 13:if(et(ot),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));ia()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return et(ot),null;case 4:return sa(),null;case 10:return Wg(e.type._context),null;case 22:case 23:return u_(),null;case 24:return null;default:return null}}var Lc=!1,Xt=!1,rk=typeof WeakSet=="function"?WeakSet:Set,he=null;function $o(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){dt(n,e,i)}else t.current=null}function xm(n,e,t){try{t()}catch(i){dt(n,e,i)}}var Db=!1;function sk(n,e){if(fm=wh,n=lT(),zg(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,c=-1,l=0,d=0,f=n,g=null;t:for(;;){for(var w;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(c=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(w=f.firstChild)!==null;)g=f,f=w;for(;;){if(f===n)break t;if(g===t&&++l===r&&(a=o),g===s&&++d===i&&(c=o),(w=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=w}t=a===-1||c===-1?null:{start:a,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(pm={focusedElem:n,selectionRange:t},wh=!1,he=e;he!==null;)if(e=he,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,he=n;else for(;he!==null;){e=he;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var x=P.memoizedProps,L=P.memoizedState,v=e.stateNode,E=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:ei(e.type,x),L);v.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(N){dt(e,e.return,N)}if(n=e.sibling,n!==null){n.return=e.return,he=n;break}he=e.return}return P=Db,Db=!1,P}function Nl(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&xm(e,t,s)}r=r.next}while(r!==i)}}function bd(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Rm(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function rS(n){var e=n.alternate;e!==null&&(n.alternate=null,rS(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[di],delete e[tu],delete e[_m],delete e[zP],delete e[jP])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function sS(n){return n.tag===5||n.tag===3||n.tag===4}function Ob(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||sS(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Dm(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Sh));else if(i!==4&&(n=n.child,n!==null))for(Dm(n,e,t),n=n.sibling;n!==null;)Dm(n,e,t),n=n.sibling}function Om(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Om(n,e,t),n=n.sibling;n!==null;)Om(n,e,t),n=n.sibling}var Bt=null,ti=!1;function or(n,e,t){for(t=t.child;t!==null;)oS(n,e,t),t=t.sibling}function oS(n,e,t){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(dd,t)}catch{}switch(t.tag){case 5:Xt||$o(t,e);case 6:var i=Bt,r=ti;Bt=null,or(n,e,t),Bt=i,ti=r,Bt!==null&&(ti?(n=Bt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Bt.removeChild(t.stateNode));break;case 18:Bt!==null&&(ti?(n=Bt,t=t.stateNode,n.nodeType===8?qf(n.parentNode,t):n.nodeType===1&&qf(n,t),Xl(n)):qf(Bt,t.stateNode));break;case 4:i=Bt,r=ti,Bt=t.stateNode.containerInfo,ti=!0,or(n,e,t),Bt=i,ti=r;break;case 0:case 11:case 14:case 15:if(!Xt&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&xm(t,e,o),r=r.next}while(r!==i)}or(n,e,t);break;case 1:if(!Xt&&($o(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){dt(t,e,a)}or(n,e,t);break;case 21:or(n,e,t);break;case 22:t.mode&1?(Xt=(i=Xt)||t.memoizedState!==null,or(n,e,t),Xt=i):or(n,e,t);break;default:or(n,e,t)}}function Nb(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new rk),e.forEach(function(i){var r=pk.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Jn(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Bt=a.stateNode,ti=!1;break e;case 3:Bt=a.stateNode.containerInfo,ti=!0;break e;case 4:Bt=a.stateNode.containerInfo,ti=!0;break e}a=a.return}if(Bt===null)throw Error(Y(160));oS(s,o,r),Bt=null,ti=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(l){dt(r,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aS(e,n),e=e.sibling}function aS(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Jn(e,n),ci(n),i&4){try{Nl(3,n,n.return),bd(3,n)}catch(x){dt(n,n.return,x)}try{Nl(5,n,n.return)}catch(x){dt(n,n.return,x)}}break;case 1:Jn(e,n),ci(n),i&512&&t!==null&&$o(t,t.return);break;case 5:if(Jn(e,n),ci(n),i&512&&t!==null&&$o(t,t.return),n.flags&32){var r=n.stateNode;try{Gl(r,"")}catch(x){dt(n,n.return,x)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&kE(r,s),im(a,o);var l=im(a,s);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?NE(r,f):d==="dangerouslySetInnerHTML"?DE(r,f):d==="children"?Gl(r,f):Pg(r,d,f,l)}switch(a){case"input":Jp(r,s);break;case"textarea":xE(r,s);break;case"select":var g=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?jo(r,!!s.multiple,w,!1):g!==!!s.multiple&&(s.defaultValue!=null?jo(r,!!s.multiple,s.defaultValue,!0):jo(r,!!s.multiple,s.multiple?[]:"",!1))}r[tu]=s}catch(x){dt(n,n.return,x)}}break;case 6:if(Jn(e,n),ci(n),i&4){if(n.stateNode===null)throw Error(Y(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(x){dt(n,n.return,x)}}break;case 3:if(Jn(e,n),ci(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Xl(e.containerInfo)}catch(x){dt(n,n.return,x)}break;case 4:Jn(e,n),ci(n);break;case 13:Jn(e,n),ci(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(a_=_t())),i&4&&Nb(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Xt=(l=Xt)||d,Jn(e,n),Xt=l):Jn(e,n),ci(n),i&8192){if(l=n.memoizedState!==null,(n.stateNode.isHidden=l)&&!d&&n.mode&1)for(he=n,d=n.child;d!==null;){for(f=he=d;he!==null;){switch(g=he,w=g.child,g.tag){case 0:case 11:case 14:case 15:Nl(4,g,g.return);break;case 1:$o(g,g.return);var P=g.stateNode;if(typeof P.componentWillUnmount=="function"){i=g,t=g.return;try{e=i,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(x){dt(i,t,x)}}break;case 5:$o(g,g.return);break;case 22:if(g.memoizedState!==null){Mb(f);continue}}w!==null?(w.return=g,he=w):Mb(f)}d=d.sibling}e:for(d=null,f=n;;){if(f.tag===5){if(d===null){d=f;try{r=f.stateNode,l?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=OE("display",o))}catch(x){dt(n,n.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(x){dt(n,n.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Jn(e,n),ci(n),i&4&&Nb(n);break;case 21:break;default:Jn(e,n),ci(n)}}function ci(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(sS(t)){var i=t;break e}t=t.return}throw Error(Y(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Gl(r,""),i.flags&=-33);var s=Ob(n);Om(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Ob(n);Dm(n,a,o);break;default:throw Error(Y(161))}}catch(c){dt(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function ok(n,e,t){he=n,lS(n)}function lS(n,e,t){for(var i=(n.mode&1)!==0;he!==null;){var r=he,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Lc;if(!o){var a=r.alternate,c=a!==null&&a.memoizedState!==null||Xt;a=Lc;var l=Xt;if(Lc=o,(Xt=c)&&!l)for(he=r;he!==null;)o=he,c=o.child,o.tag===22&&o.memoizedState!==null?Vb(r):c!==null?(c.return=o,he=c):Vb(r);for(;s!==null;)he=s,lS(s),s=s.sibling;he=r,Lc=a,Xt=l}Lb(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,he=s):Lb(n)}}function Lb(n){for(;he!==null;){var e=he;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xt||bd(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Xt)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:ei(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&vb(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}vb(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var d=l.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Xl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Xt||e.flags&512&&Rm(e)}catch(g){dt(e,e.return,g)}}if(e===n){he=null;break}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}}function Mb(n){for(;he!==null;){var e=he;if(e===n){he=null;break}var t=e.sibling;if(t!==null){t.return=e.return,he=t;break}he=e.return}}function Vb(n){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{bd(4,e)}catch(c){dt(e,t,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){dt(e,r,c)}}var s=e.return;try{Rm(e)}catch(c){dt(e,s,c)}break;case 5:var o=e.return;try{Rm(e)}catch(c){dt(e,o,c)}}}catch(c){dt(e,e.return,c)}if(e===n){he=null;break}var a=e.sibling;if(a!==null){a.return=e.return,he=a;break}he=e.return}}var ak=Math.ceil,Lh=Hi.ReactCurrentDispatcher,s_=Hi.ReactCurrentOwner,Un=Hi.ReactCurrentBatchConfig,Me=0,Dt=null,wt=null,jt=0,Cn=0,zo=Yr(0),At=0,au=null,Vs=0,wd=0,o_=0,Ll=null,mn=null,a_=0,aa=1/0,xi=null,Mh=!1,Nm=null,Cr=null,Mc=!1,br=null,Vh=0,Ml=0,Lm=null,th=-1,nh=0;function on(){return Me&6?_t():th!==-1?th:th=_t()}function Pr(n){return n.mode&1?Me&2&&jt!==0?jt&-jt:UP.transition!==null?(nh===0&&(nh=GE()),nh):(n=He,n!==0||(n=window.event,n=n===void 0?16:ZE(n.type)),n):1}function ri(n,e,t,i){if(50<Ml)throw Ml=0,Lm=null,Error(Y(185));Cu(n,t,i),(!(Me&2)||n!==Dt)&&(n===Dt&&(!(Me&2)&&(wd|=t),At===4&&gr(n,jt)),En(n,i),t===1&&Me===0&&!(e.mode&1)&&(aa=_t()+500,_d&&Jr()))}function En(n,e){var t=n.callbackNode;U1(n,e);var i=bh(n,n===Dt?jt:0);if(i===0)t!==null&&Gv(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&Gv(t),e===1)n.tag===0?qP(Bb.bind(null,n)):yT(Bb.bind(null,n)),FP(function(){!(Me&6)&&Jr()}),t=null;else{switch(WE(i)){case 1:t=Og;break;case 4:t=UE;break;case 16:t=vh;break;case 536870912:t=HE;break;default:t=vh}t=gS(t,uS.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function uS(n,e){if(th=-1,nh=0,Me&6)throw Error(Y(327));var t=n.callbackNode;if(Wo()&&n.callbackNode!==t)return null;var i=bh(n,n===Dt?jt:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Bh(n,i);else{e=i;var r=Me;Me|=2;var s=hS();(Dt!==n||jt!==e)&&(xi=null,aa=_t()+500,Ps(n,e));do try{ck();break}catch(a){cS(n,a)}while(!0);Gg(),Lh.current=s,Me=r,wt!==null?e=0:(Dt=null,jt=0,e=At)}if(e!==0){if(e===2&&(r=lm(n),r!==0&&(i=r,e=Mm(n,r))),e===1)throw t=au,Ps(n,0),gr(n,i),En(n,_t()),t;if(e===6)gr(n,i);else{if(r=n.current.alternate,!(i&30)&&!lk(r)&&(e=Bh(n,i),e===2&&(s=lm(n),s!==0&&(i=s,e=Mm(n,s))),e===1))throw t=au,Ps(n,0),gr(n,i),En(n,_t()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Y(345));case 2:ms(n,mn,xi);break;case 3:if(gr(n,i),(i&130023424)===i&&(e=a_+500-_t(),10<e)){if(bh(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){on(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=gm(ms.bind(null,n,mn,xi),e);break}ms(n,mn,xi);break;case 4:if(gr(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-ii(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=_t()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*ak(i/1960))-i,10<i){n.timeoutHandle=gm(ms.bind(null,n,mn,xi),i);break}ms(n,mn,xi);break;case 5:ms(n,mn,xi);break;default:throw Error(Y(329))}}}return En(n,_t()),n.callbackNode===t?uS.bind(null,n):null}function Mm(n,e){var t=Ll;return n.current.memoizedState.isDehydrated&&(Ps(n,e).flags|=256),n=Bh(n,e),n!==2&&(e=mn,mn=t,e!==null&&Vm(e)),n}function Vm(n){mn===null?mn=n:mn.push.apply(mn,n)}function lk(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!si(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gr(n,e){for(e&=~o_,e&=~wd,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ii(e),i=1<<t;n[t]=-1,e&=~i}}function Bb(n){if(Me&6)throw Error(Y(327));Wo();var e=bh(n,0);if(!(e&1))return En(n,_t()),null;var t=Bh(n,e);if(n.tag!==0&&t===2){var i=lm(n);i!==0&&(e=i,t=Mm(n,i))}if(t===1)throw t=au,Ps(n,0),gr(n,e),En(n,_t()),t;if(t===6)throw Error(Y(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ms(n,mn,xi),En(n,_t()),null}function l_(n,e){var t=Me;Me|=1;try{return n(e)}finally{Me=t,Me===0&&(aa=_t()+500,_d&&Jr())}}function Bs(n){br!==null&&br.tag===0&&!(Me&6)&&Wo();var e=Me;Me|=1;var t=Un.transition,i=He;try{if(Un.transition=null,He=1,n)return n()}finally{He=i,Un.transition=t,Me=e,!(Me&6)&&Jr()}}function u_(){Cn=zo.current,et(zo)}function Ps(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,BP(t)),wt!==null)for(t=wt.return;t!==null;){var i=t;switch(qg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ih();break;case 3:sa(),et(bn),et(Jt),Jg();break;case 5:Yg(i);break;case 4:sa();break;case 13:et(ot);break;case 19:et(ot);break;case 10:Wg(i.type._context);break;case 22:case 23:u_()}t=t.return}if(Dt=n,wt=n=kr(n.current,null),jt=Cn=e,At=0,au=null,o_=wd=Vs=0,mn=Ll=null,Ss!==null){for(e=0;e<Ss.length;e++)if(t=Ss[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Ss=null}return n}function cS(n,e){do{var t=wt;try{if(Gg(),Jc.current=Nh,Oh){for(var i=at.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Oh=!1}if(Ms=0,xt=It=at=null,Ol=!1,ru=0,s_.current=null,t===null||t.return===null){At=1,au=e,wt=null;break}e:{var s=n,o=t.return,a=t,c=e;if(e=jt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=Ib(o);if(w!==null){w.flags&=-257,Ab(w,o,a,s,e),w.mode&1&&Sb(s,l,e),e=w,c=l;var P=e.updateQueue;if(P===null){var x=new Set;x.add(c),e.updateQueue=x}else P.add(c);break e}else{if(!(e&1)){Sb(s,l,e),c_();break e}c=Error(Y(426))}}else if(tt&&a.mode&1){var L=Ib(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),Ab(L,o,a,s,e),Ug(oa(c,a));break e}}s=c=oa(c,a),At!==4&&(At=2),Ll===null?Ll=[s]:Ll.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=WT(s,c,e);yb(s,v);break e;case 1:a=c;var E=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Cr===null||!Cr.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=KT(s,a,e);yb(s,N);break e}}s=s.return}while(s!==null)}fS(t)}catch(K){e=K,wt===t&&t!==null&&(wt=t=t.return);continue}break}while(!0)}function hS(){var n=Lh.current;return Lh.current=Nh,n===null?Nh:n}function c_(){(At===0||At===3||At===2)&&(At=4),Dt===null||!(Vs&268435455)&&!(wd&268435455)||gr(Dt,jt)}function Bh(n,e){var t=Me;Me|=2;var i=hS();(Dt!==n||jt!==e)&&(xi=null,Ps(n,e));do try{uk();break}catch(r){cS(n,r)}while(!0);if(Gg(),Me=t,Lh.current=i,wt!==null)throw Error(Y(261));return Dt=null,jt=0,At}function uk(){for(;wt!==null;)dS(wt)}function ck(){for(;wt!==null&&!L1();)dS(wt)}function dS(n){var e=mS(n.alternate,n,Cn);n.memoizedProps=n.pendingProps,e===null?fS(n):wt=e,s_.current=null}function fS(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=ik(t,e),t!==null){t.flags&=32767,wt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{At=6,wt=null;return}}else if(t=nk(t,e,Cn),t!==null){wt=t;return}if(e=e.sibling,e!==null){wt=e;return}wt=e=n}while(e!==null);At===0&&(At=5)}function ms(n,e,t){var i=He,r=Un.transition;try{Un.transition=null,He=1,hk(n,e,t,i)}finally{Un.transition=r,He=i}return null}function hk(n,e,t,i){do Wo();while(br!==null);if(Me&6)throw Error(Y(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Y(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(H1(n,s),n===Dt&&(wt=Dt=null,jt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Mc||(Mc=!0,gS(vh,function(){return Wo(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Un.transition,Un.transition=null;var o=He;He=1;var a=Me;Me|=4,s_.current=null,sk(n,t),aS(t,n),RP(pm),wh=!!fm,pm=fm=null,n.current=t,ok(t),M1(),Me=a,He=o,Un.transition=s}else n.current=t;if(Mc&&(Mc=!1,br=n,Vh=r),s=n.pendingLanes,s===0&&(Cr=null),F1(t.stateNode),En(n,_t()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(Mh)throw Mh=!1,n=Nm,Nm=null,n;return Vh&1&&n.tag!==0&&Wo(),s=n.pendingLanes,s&1?n===Lm?Ml++:(Ml=0,Lm=n):Ml=0,Jr(),null}function Wo(){if(br!==null){var n=WE(Vh),e=Un.transition,t=He;try{if(Un.transition=null,He=16>n?16:n,br===null)var i=!1;else{if(n=br,br=null,Vh=0,Me&6)throw Error(Y(331));var r=Me;for(Me|=4,he=n.current;he!==null;){var s=he,o=s.child;if(he.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(he=l;he!==null;){var d=he;switch(d.tag){case 0:case 11:case 15:Nl(8,d,s)}var f=d.child;if(f!==null)f.return=d,he=f;else for(;he!==null;){d=he;var g=d.sibling,w=d.return;if(rS(d),d===l){he=null;break}if(g!==null){g.return=w,he=g;break}he=w}}}var P=s.alternate;if(P!==null){var x=P.child;if(x!==null){P.child=null;do{var L=x.sibling;x.sibling=null,x=L}while(x!==null)}}he=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,he=o;else e:for(;he!==null;){if(s=he,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Nl(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,he=v;break e}he=s.return}}var E=n.current;for(he=E;he!==null;){o=he;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,he=I;else e:for(o=E;he!==null;){if(a=he,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bd(9,a)}}catch(K){dt(a,a.return,K)}if(a===o){he=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,he=N;break e}he=a.return}}if(Me=r,Jr(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(dd,n)}catch{}i=!0}return i}finally{He=t,Un.transition=e}}return!1}function Fb(n,e,t){e=oa(t,e),e=WT(n,e,1),n=Ar(n,e,1),e=on(),n!==null&&(Cu(n,1,e),En(n,e))}function dt(n,e,t){if(n.tag===3)Fb(n,n,t);else for(;e!==null;){if(e.tag===3){Fb(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Cr===null||!Cr.has(i))){n=oa(t,n),n=KT(e,n,1),e=Ar(e,n,1),n=on(),e!==null&&(Cu(e,1,n),En(e,n));break}}e=e.return}}function dk(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=on(),n.pingedLanes|=n.suspendedLanes&t,Dt===n&&(jt&t)===t&&(At===4||At===3&&(jt&130023424)===jt&&500>_t()-a_?Ps(n,0):o_|=t),En(n,e)}function pS(n,e){e===0&&(n.mode&1?(e=Ac,Ac<<=1,!(Ac&130023424)&&(Ac=4194304)):e=1);var t=on();n=Fi(n,e),n!==null&&(Cu(n,e,t),En(n,t))}function fk(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),pS(n,t)}function pk(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(e),pS(n,t)}var mS;mS=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||bn.current)gn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return gn=!1,tk(n,e,t);gn=!!(n.flags&131072)}else gn=!1,tt&&e.flags&1048576&&vT(e,Ph,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;eh(n,e),n=e.pendingProps;var r=na(e,Jt.current);Go(e,t),r=e_(null,e,i,n,r,t);var s=t_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wn(i)?(s=!0,Ah(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Qg(e),r.updater=vd,e.stateNode=r,r._reactInternals=e,Tm(e,i,n,t),e=Am(null,e,i,!0,s,t)):(e.tag=0,tt&&s&&jg(e),nn(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(eh(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=gk(i),n=ei(i,n),r){case 0:e=Im(null,e,i,n,t);break e;case 1:e=kb(null,e,i,n,t);break e;case 11:e=Cb(null,e,i,n,t);break e;case 14:e=Pb(null,e,i,ei(i.type,n),t);break e}throw Error(Y(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ei(i,r),Im(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ei(i,r),kb(n,e,i,r,t);case 3:e:{if(JT(e),n===null)throw Error(Y(387));i=e.pendingProps,s=e.memoizedState,r=s.element,IT(n,e),Rh(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=oa(Error(Y(423)),e),e=xb(n,e,i,t,r);break e}else if(i!==r){r=oa(Error(Y(424)),e),e=xb(n,e,i,t,r);break e}else for(kn=Ir(e.stateNode.containerInfo.firstChild),Rn=e,tt=!0,ni=null,t=TT(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ia(),i===r){e=$i(n,e,t);break e}nn(n,e,i,t)}e=e.child}return e;case 5:return AT(e),n===null&&bm(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,mm(i,r)?o=null:s!==null&&mm(i,s)&&(e.flags|=32),YT(n,e),nn(n,e,o,t),e.child;case 6:return n===null&&bm(e),null;case 13:return ZT(n,e,t);case 4:return Xg(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=ra(e,null,i,t):nn(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ei(i,r),Cb(n,e,i,r,t);case 7:return nn(n,e,e.pendingProps,t),e.child;case 8:return nn(n,e,e.pendingProps.children,t),e.child;case 12:return nn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Xe(kh,i._currentValue),i._currentValue=o,s!==null)if(si(s.value,o)){if(s.children===r.children&&!bn.current){e=$i(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=Li(-1,t&-t),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var d=l.pending;d===null?c.next=c:(c.next=d.next,d.next=c),l.pending=c}}s.lanes|=t,c=s.alternate,c!==null&&(c.lanes|=t),wm(s.return,t,e),a.lanes|=t;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),wm(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}nn(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Go(e,t),r=Gn(r),i=i(r),e.flags|=1,nn(n,e,i,t),e.child;case 14:return i=e.type,r=ei(i,e.pendingProps),r=ei(i.type,r),Pb(n,e,i,r,t);case 15:return QT(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ei(i,r),eh(n,e),e.tag=1,wn(i)?(n=!0,Ah(e)):n=!1,Go(e,t),GT(e,i,r),Tm(e,i,r,t),Am(null,e,i,!0,n,t);case 19:return eS(n,e,t);case 22:return XT(n,e,t)}throw Error(Y(156,e.tag))};function gS(n,e){return qE(n,e)}function mk(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(n,e,t,i){return new mk(n,e,t,i)}function h_(n){return n=n.prototype,!(!n||!n.isReactComponent)}function gk(n){if(typeof n=="function")return h_(n)?1:0;if(n!=null){if(n=n.$$typeof,n===xg)return 11;if(n===Rg)return 14}return 2}function kr(n,e){var t=n.alternate;return t===null?(t=jn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function ih(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")h_(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Ro:return ks(t.children,r,s,e);case kg:o=8,r|=8;break;case Wp:return n=jn(12,t,e,r|2),n.elementType=Wp,n.lanes=s,n;case Kp:return n=jn(13,t,e,r),n.elementType=Kp,n.lanes=s,n;case Qp:return n=jn(19,t,e,r),n.elementType=Qp,n.lanes=s,n;case AE:return Ed(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case SE:o=10;break e;case IE:o=9;break e;case xg:o=11;break e;case Rg:o=14;break e;case fr:o=16,i=null;break e}throw Error(Y(130,n==null?n:typeof n,""))}return e=jn(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function ks(n,e,t,i){return n=jn(7,n,i,e),n.lanes=t,n}function Ed(n,e,t,i){return n=jn(22,n,i,e),n.elementType=AE,n.lanes=t,n.stateNode={isHidden:!1},n}function Yf(n,e,t){return n=jn(6,n,null,e),n.lanes=t,n}function Jf(n,e,t){return e=jn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function _k(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Df(0),this.expirationTimes=Df(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Df(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function d_(n,e,t,i,r,s,o,a,c){return n=new _k(n,e,t,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=jn(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qg(s),n}function yk(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xo,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function _S(n){if(!n)return Mr;n=n._reactInternals;e:{if(Ys(n)!==n||n.tag!==1)throw Error(Y(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(n.tag===1){var t=n.type;if(wn(t))return _T(n,t,e)}return e}function yS(n,e,t,i,r,s,o,a,c){return n=d_(t,i,!0,n,r,s,o,a,c),n.context=_S(null),t=n.current,i=on(),r=Pr(t),s=Li(i,r),s.callback=e??null,Ar(t,s,r),n.current.lanes=r,Cu(n,r,i),En(n,i),n}function Td(n,e,t,i){var r=e.current,s=on(),o=Pr(r);return t=_S(t),e.context===null?e.context=t:e.pendingContext=t,e=Li(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Ar(r,e,o),n!==null&&(ri(n,r,o,s),Yc(n,r,o)),o}function Fh(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function $b(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function f_(n,e){$b(n,e),(n=n.alternate)&&$b(n,e)}function vk(){return null}var vS=typeof reportError=="function"?reportError:function(n){console.error(n)};function p_(n){this._internalRoot=n}Sd.prototype.render=p_.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Y(409));Td(n,e,null,null)};Sd.prototype.unmount=p_.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Bs(function(){Td(null,n,null,null)}),e[Bi]=null}};function Sd(n){this._internalRoot=n}Sd.prototype.unstable_scheduleHydration=function(n){if(n){var e=XE();n={blockedOn:null,target:n,priority:e};for(var t=0;t<mr.length&&e!==0&&e<mr[t].priority;t++);mr.splice(t,0,n),t===0&&JE(n)}};function m_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Id(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function zb(){}function bk(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var l=Fh(o);s.call(l)}}var o=yS(e,i,n,0,null,!1,!1,"",zb);return n._reactRootContainer=o,n[Bi]=o.current,Zl(n.nodeType===8?n.parentNode:n),Bs(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var l=Fh(c);a.call(l)}}var c=d_(n,0,!1,null,null,!1,!1,"",zb);return n._reactRootContainer=c,n[Bi]=c.current,Zl(n.nodeType===8?n.parentNode:n),Bs(function(){Td(e,c,t,i)}),c}function Ad(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var c=Fh(o);a.call(c)}}Td(e,o,n,r)}else o=bk(t,e,n,r,i);return Fh(o)}KE=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=bl(e.pendingLanes);t!==0&&(Ng(e,t|1),En(e,_t()),!(Me&6)&&(aa=_t()+500,Jr()))}break;case 13:Bs(function(){var i=Fi(n,1);if(i!==null){var r=on();ri(i,n,1,r)}}),f_(n,1)}};Lg=function(n){if(n.tag===13){var e=Fi(n,134217728);if(e!==null){var t=on();ri(e,n,134217728,t)}f_(n,134217728)}};QE=function(n){if(n.tag===13){var e=Pr(n),t=Fi(n,e);if(t!==null){var i=on();ri(t,n,e,i)}f_(n,e)}};XE=function(){return He};YE=function(n,e){var t=He;try{return He=n,e()}finally{He=t}};sm=function(n,e,t){switch(e){case"input":if(Jp(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=gd(i);if(!r)throw Error(Y(90));PE(i),Jp(i,r)}}}break;case"textarea":xE(n,t);break;case"select":e=t.value,e!=null&&jo(n,!!t.multiple,e,!1)}};VE=l_;BE=Bs;var wk={usingClientEntryPoint:!1,Events:[ku,Lo,gd,LE,ME,l_]},cl={findFiberByHostInstance:Ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ek={bundleType:cl.bundleType,version:cl.version,rendererPackageName:cl.rendererPackageName,rendererConfig:cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=zE(n),n===null?null:n.stateNode},findFiberByHostInstance:cl.findFiberByHostInstance||vk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vc.isDisabled&&Vc.supportsFiber)try{dd=Vc.inject(Ek),mi=Vc}catch{}}Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wk;Ln.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m_(e))throw Error(Y(200));return yk(n,e,null,t)};Ln.createRoot=function(n,e){if(!m_(n))throw Error(Y(299));var t=!1,i="",r=vS;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=d_(n,1,!1,null,null,t,!1,i,r),n[Bi]=e.current,Zl(n.nodeType===8?n.parentNode:n),new p_(e)};Ln.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Y(188)):(n=Object.keys(n).join(","),Error(Y(268,n)));return n=zE(e),n=n===null?null:n.stateNode,n};Ln.flushSync=function(n){return Bs(n)};Ln.hydrate=function(n,e,t){if(!Id(e))throw Error(Y(200));return Ad(null,n,e,!0,t)};Ln.hydrateRoot=function(n,e,t){if(!m_(n))throw Error(Y(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=vS;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=yS(e,null,n,1,t??null,r,!1,s,o),n[Bi]=e.current,Zl(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Sd(e)};Ln.render=function(n,e,t){if(!Id(e))throw Error(Y(200));return Ad(null,n,e,!1,t)};Ln.unmountComponentAtNode=function(n){if(!Id(n))throw Error(Y(40));return n._reactRootContainer?(Bs(function(){Ad(null,null,n,!1,function(){n._reactRootContainer=null,n[Bi]=null})}),!0):!1};Ln.unstable_batchedUpdates=l_;Ln.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Id(t))throw Error(Y(200));if(n==null||n._reactInternals===void 0)throw Error(Y(38));return Ad(n,e,t,!1,i)};Ln.version="18.3.1-next-f1338f8080-20240426";function bS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bS)}catch(n){console.error(n)}}bS(),bE.exports=Ln;var wS=bE.exports,jb=wS;Hp.createRoot=jb.createRoot,Hp.hydrateRoot=jb.hydrateRoot;var ES={exports:{}},TS={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ru=Tn;function Tk(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Sk=typeof Object.is=="function"?Object.is:Tk,Ik=Ru.useSyncExternalStore,Ak=Ru.useRef,Ck=Ru.useEffect,Pk=Ru.useMemo,kk=Ru.useDebugValue;TS.useSyncExternalStoreWithSelector=function(n,e,t,i,r){var s=Ak(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Pk(function(){function c(w){if(!l){if(l=!0,d=w,w=i(w),r!==void 0&&o.hasValue){var P=o.value;if(r(P,w))return f=P}return f=w}if(P=f,Sk(d,w))return P;var x=i(w);return r!==void 0&&r(P,x)?P:(d=w,f=x)}var l=!1,d,f,g=t===void 0?null:t;return[function(){return c(e())},g===null?void 0:function(){return c(g())}]},[e,t,i,r]);var a=Ik(n,s[0],s[1]);return Ck(function(){o.hasValue=!0,o.value=a},[a]),kk(a),a};ES.exports=TS;var xk=ES.exports,xn="default"in Mv?Ig:Mv,qb=Symbol.for("react-redux-context"),Ub=typeof globalThis<"u"?globalThis:{};function Rk(){if(!xn.createContext)return{};const n=Ub[qb]??(Ub[qb]=new Map);let e=n.get(xn.createContext);return e||(e=xn.createContext(null),n.set(xn.createContext,e)),e}var Vr=Rk(),Dk=()=>{throw new Error("uSES not initialized!")};function g_(n=Vr){return function(){return xn.useContext(n)}}var SS=g_(),IS=Dk,Ok=n=>{IS=n},Nk=(n,e)=>n===e;function Lk(n=Vr){const e=n===Vr?SS:g_(n),t=(i,r={})=>{const{equalityFn:s=Nk,devModeChecks:o={}}=typeof r=="function"?{equalityFn:r}:r,{store:a,subscription:c,getServerState:l,stabilityCheck:d,identityFunctionCheck:f}=e();xn.useRef(!0);const g=xn.useCallback({[i.name](P){return i(P)}}[i.name],[i,d,o.stabilityCheck]),w=IS(c.addNestedSub,a.getState,l||a.getState,g,s);return xn.useDebugValue(w),w};return Object.assign(t,{withTypes:()=>t}),t}var __=Lk();function Mk(n){n()}function Vk(){let n=null,e=null;return{clear(){n=null,e=null},notify(){Mk(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const r=e={callback:t,next:null,prev:e};return r.prev?r.prev.next=r:n=r,function(){!i||n===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:n=r.next)}}}}var Hb={notify(){},get:()=>[]};function Bk(n,e){let t,i=Hb,r=0,s=!1;function o(x){d();const L=i.subscribe(x);let v=!1;return()=>{v||(v=!0,L(),f())}}function a(){i.notify()}function c(){P.onStateChange&&P.onStateChange()}function l(){return s}function d(){r++,t||(t=n.subscribe(c),i=Vk())}function f(){r--,t&&r===0&&(t(),t=void 0,i.clear(),i=Hb)}function g(){s||(s=!0,d())}function w(){s&&(s=!1,f())}const P={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:c,isSubscribed:l,trySubscribe:g,tryUnsubscribe:w,getListeners:()=>i};return P}var Fk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$k=typeof navigator<"u"&&navigator.product==="ReactNative",zk=Fk||$k?xn.useLayoutEffect:xn.useEffect;function jk({store:n,context:e,children:t,serverState:i,stabilityCheck:r="once",identityFunctionCheck:s="once"}){const o=xn.useMemo(()=>{const l=Bk(n);return{store:n,subscription:l,getServerState:i?()=>i:void 0,stabilityCheck:r,identityFunctionCheck:s}},[n,i,r,s]),a=xn.useMemo(()=>n.getState(),[n]);zk(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==n.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const c=e||Vr;return xn.createElement(c.Provider,{value:o},t)}var qk=jk;function AS(n=Vr){const e=n===Vr?SS:g_(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var Uk=AS();function Hk(n=Vr){const e=n===Vr?Uk:AS(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var CS=Hk();Ok(xk.useSyncExternalStoreWithSelector);var Bm={exports:{}};const Gk=window.HTMLElement;class Wk{constructor(){this._selectedPlatform=null,this._ignorePlatformSelect=!1}select(e){typeof e=="string"&&(this._selectedPlatform=e.trim().toLowerCase())}_getSelectedPlatform(){return this._ignorePlatformSelect?null:this._selectedPlatform}_runOnActualPlatform(e){this._ignorePlatformSelect=!0;const t=e();return this._ignorePlatformSelect=!1,t}isWebView(){if(document.readyState==="loading"||document.readyState=="uninitialized")throw new Error("isWebView() method is available after dom contents loaded.");return!!(window.cordova||window.phonegap||window.PhoneGap)}isIPhone(){return/iPhone/i.test(navigator.userAgent)}isIPhoneX(){return this.isIPhone()&&(window.screen.width===375&&window.screen.height===812||window.screen.width===812&&window.screen.height===375||window.screen.width===414&&window.screen.height===896||window.screen.width===896&&window.screen.height===414||window.screen.width===390&&window.screen.height===844||window.screen.width===844&&window.screen.height===390||window.screen.width===428&&window.screen.height===926||window.screen.width===926&&window.screen.height===428||window.screen.width===430&&window.screen.height===932||window.screen.width===932&&window.screen.height===430||window.screen.width===393&&window.screen.height===852||window.screen.width===852&&window.screen.height===393)}isIPad(){return/iPad/i.test(navigator.userAgent)||this.isIPadOS()}isIPod(){return/iPod/i.test(navigator.userAgent)}isIOS(e){return!e&&this._getSelectedPlatform()?this._getSelectedPlatform()==="ios":typeof device=="object"&&!/browser/i.test(device.platform)?/iOS/i.test(device.platform):/iPhone|iPad|iPod/i.test(navigator.userAgent)||this.isIPadOS()}isIOS7above(){if(typeof device=="object"&&!/browser/i.test(device.platform))return/iOS/i.test(device.platform)&&parseInt(device.version.split(".")[0])>=7;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){const e=(navigator.userAgent.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,".");return parseInt(e.split(".")[0])>=7}return!1}isIPadOS(){return!!(/Macintosh/i.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints===5)}isIOSSafari(){const e=window.navigator,t=e.userAgent;return!!(this.isIOS()&&t.indexOf("Safari")!==-1&&t.indexOf("Version")!==-1&&!e.standalone)}isWKWebView(){const e=/constructor/i.test(Gk);return!!(this.isIOS()&&window.webkit&&window.webkit.messageHandlers&&window.indexedDB&&!e)}isAndroidPhone(){return/Android/i.test(navigator.userAgent)&&/Mobile/i.test(navigator.userAgent)}isAndroidTablet(){return/Android/i.test(navigator.userAgent)&&!/Mobile/i.test(navigator.userAgent)}isAndroid(e){return!e&&this._getSelectedPlatform()?this._getSelectedPlatform()==="android":typeof device=="object"&&!/browser/i.test(device.platform)?/Android/i.test(device.platform):/Android/i.test(navigator.userAgent)}isWP(e){return!e&&this._getSelectedPlatform()?this._getSelectedPlatform()==="wp":typeof device=="object"&&!/browser/i.test(device.platform)?/Win32NT|WinCE/i.test(device.platform):/Windows Phone|IEMobile|WPDesktop/i.test(navigator.userAgent)}isBlackBerry(e){return!e&&this._getSelectedPlatform()?this._getSelectedPlatform()==="blackberry":typeof device=="object"&&!/browser/i.test(device.platform)?/BlackBerry/i.test(device.platform):/BlackBerry|RIM Tablet OS|BB10/i.test(navigator.userAgent)}isOpera(e){return!e&&this._getSelectedPlatform()?this._getSelectedPlatform()==="opera":!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0}isFirefox(e){return!e&&this._getSelectedPlatform()?this._getSelectedPlatform()==="firefox":typeof InstallTrigger<"u"}isSafari(e){return!e&&this._getSelectedPlatform()?this._getSelectedPlatform()==="safari":Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||function(t){return t.toString()==="[object SafariRemoteNotification]"}(!window.safari||safari.pushNotification)}isChrome(e){return!e&&this._getSelectedPlatform()?this._getSelectedPlatform()==="chrome":!!window.chrome&&!(window.opera||navigator.userAgent.indexOf(" OPR/")>=0)&&!(navigator.userAgent.indexOf(" Edge/")>=0)}isIE(e){return!e&&this._getSelectedPlatform()?this._getSelectedPlatform()==="ie":!!document.documentMode}isEdge(e){return!e&&this._getSelectedPlatform()?this._getSelectedPlatform()==="edge":navigator.userAgent.indexOf(" Edge/")>=0}getMobileOS(){return this.isAndroid()?"android":this.isIOS()?"ios":this.isWP()?"wp":"other"}getIOSDevice(){return this.isIPhone()?"iphone":this.isIPad()?"ipad":this.isIPod()?"ipod":"na"}}const qe=new Wk;window.customElements&&(window.customElements.forcePolyfill=!0);(function(){var n=new function(){},e=new Set("annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" "));function t(O){var F=e.has(O);return O=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(O),!F&&O}function i(O){var F=O.isConnected;if(F!==void 0)return F;for(;O&&!(O.__CE_isImportDocument||O instanceof Document);)O=O.parentNode||(window.ShadowRoot&&O instanceof ShadowRoot?O.host:void 0);return!(!O||!(O.__CE_isImportDocument||O instanceof Document))}function r(O,F){for(;F&&F!==O&&!F.nextSibling;)F=F.parentNode;return F&&F!==O?F.nextSibling:null}function s(O,F,q){q=q||new Set;for(var $=O;$;){if($.nodeType===Node.ELEMENT_NODE){var D=$;F(D);var U=D.localName;if(U==="link"&&D.getAttribute("rel")==="import"){if($=D.import,$ instanceof Node&&!q.has($))for(q.add($),$=$.firstChild;$;$=$.nextSibling)s($,F,q);$=r(O,D);continue}else if(U==="template"){$=r(O,D);continue}if(D=D.__CE_shadowRoot)for(D=D.firstChild;D;D=D.nextSibling)s(D,F,q)}$=$.firstChild?$.firstChild:r(O,$)}}function o(O,F,q){O[F]=q}function a(){this.a=new Map,this.f=new Map,this.c=[],this.b=!1}function c(O,F,q){O.a.set(F,q),O.f.set(q.constructor,q)}function l(O,F){O.b=!0,O.c.push(F)}function d(O,F){O.b&&s(F,function(q){return f(O,q)})}function f(O,F){if(O.b&&!F.__CE_patched){F.__CE_patched=!0;for(var q=0;q<O.c.length;q++)O.c[q](F)}}function g(O,F){var q=[];for(s(F,function(D){return q.push(D)}),F=0;F<q.length;F++){var $=q[F];$.__CE_state===1?i($)&&O.connectedCallback($):x(O,$)}}function w(O,F){var q=[];for(s(F,function(D){return q.push(D)}),F=0;F<q.length;F++){var $=q[F];$.__CE_state===1&&O.disconnectedCallback($)}}function P(O,F,q){q=q||new Set;var $=[];if(s(F,function(D){if(D.localName==="link"&&D.getAttribute("rel")==="import"){var U=D.import;U instanceof Node&&U.readyState==="complete"?(U.__CE_isImportDocument=!0,U.__CE_hasRegistry=!0):D.addEventListener("load",function(){var oe=D.import;oe.__CE_documentLoadHandled||(oe.__CE_documentLoadHandled=!0,oe.__CE_isImportDocument=!0,oe.__CE_hasRegistry=!0,new Set(q),q.delete(oe),P(O,oe,q))})}else $.push(D)},q),O.b)for(F=0;F<$.length;F++)f(O,$[F]);for(F=0;F<$.length;F++)x(O,$[F])}function x(O,F){if(F.__CE_state===void 0){var q=O.a.get(F.localName);if(q){q.constructionStack.push(F);var $=q.constructor;try{try{if(new $!==F)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{q.constructionStack.pop()}}catch(oe){throw F.__CE_state=2,oe}if(F.__CE_state=1,F.__CE_definition=q,q.attributeChangedCallback)for(q=q.observedAttributes,$=0;$<q.length;$++){var D=q[$],U=F.getAttribute(D);U!==null&&O.attributeChangedCallback(F,D,null,U,null)}i(F)&&O.connectedCallback(F)}}}a.prototype.connectedCallback=function(O){var F=O.__CE_definition;F.connectedCallback&&F.connectedCallback.call(O),O.i=!0},a.prototype.disconnectedCallback=function(O){O.i||this.connectedCallback(O);var F=O.__CE_definition;F.disconnectedCallback&&F.disconnectedCallback.call(O),O.i=void 0},a.prototype.attributeChangedCallback=function(O,F,q,$,D){var U=O.__CE_definition;U.attributeChangedCallback&&-1<U.observedAttributes.indexOf(F)&&U.attributeChangedCallback.call(O,F,q,$,D)};function L(O,F){this.c=O,this.a=F,this.b=void 0,P(this.c,this.a),this.a.readyState==="loading"&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}))}function v(O){O.b&&O.b.disconnect()}L.prototype.f=function(O){var F=this.a.readyState;for(F!=="interactive"&&F!=="complete"||v(this),F=0;F<O.length;F++)for(var q=O[F].addedNodes,$=0;$<q.length;$++)P(this.c,q[$])};function E(){var O=this;this.b=this.a=void 0,this.c=new Promise(function(F){O.b=F,O.a&&F(O.a)})}function I(O){if(O.a)throw Error("Already resolved.");O.a=void 0,O.b&&O.b(void 0)}function N(O){this.f=!1,this.a=O,this.h=new Map,this.g=function(F){return F()},this.b=!1,this.c=[],this.l=new L(O,document)}N.prototype.m=function(O,F){var q=this;if(!(F instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!t(O))throw new SyntaxError("The element name '"+O+"' is not valid.");if(this.a.a.get(O))throw Error("A custom element with name '"+O+"' has already been defined.");if(this.f)throw Error("A custom element is already being defined.");this.f=!0;var $,D,U,oe,Le;try{var ct=function(tn){var Qn=en[tn];if(Qn!==void 0&&!(Qn instanceof Function))throw Error("The '"+tn+"' callback must be a function.");return Qn},en=F.prototype;if(!(en instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");$=ct("connectedCallback"),D=ct("disconnectedCallback"),U=ct("adoptedCallback"),oe=ct("attributeChangedCallback"),Le=F.observedAttributes||[]}catch{return}finally{this.f=!1}c(this.a,O,{localName:O,constructor:F,connectedCallback:$,disconnectedCallback:D,adoptedCallback:U,attributeChangedCallback:oe,observedAttributes:Le,constructionStack:[]}),this.c.push(O),this.b||(this.b=!0,this.g(function(){if(q.b!==!1)for(q.b=!1,P(q.a,document);0<q.c.length;){var tn=q.c.shift();(tn=q.h.get(tn))&&I(tn)}}))},N.prototype.get=function(O){if(O=this.a.a.get(O))return O.constructor},N.prototype.s=function(O){if(!t(O))return Promise.reject(new SyntaxError("'"+O+"' is not a valid custom element name."));var F=this.h.get(O);return F||(F=new E,this.h.set(O,F),this.a.a.get(O)&&this.c.indexOf(O)===-1&&I(F)),F.c},N.prototype.o=function(O){v(this.l);var F=this.g;this.g=function(q){return O(function(){return F(q)})}},window.CustomElementRegistry=N,N.prototype.define=N.prototype.m,N.prototype.get=N.prototype.get,N.prototype.whenDefined=N.prototype.s,N.prototype.polyfillWrapFlushCallback=N.prototype.o;var K=window.Document.prototype.createElement,Q=window.Document.prototype.createElementNS,S=window.Document.prototype.importNode,_=window.Document.prototype.prepend,b=window.Document.prototype.append,T=window.Node.prototype.cloneNode,C=window.Node.prototype.appendChild,R=window.Node.prototype.insertBefore,A=window.Node.prototype.removeChild,st=window.Node.prototype.replaceChild,gt=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),Sn=window.Element.prototype.attachShadow,Pt=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),J=window.Element.prototype.getAttribute,fe=window.Element.prototype.setAttribute,we=window.Element.prototype.removeAttribute,je=window.Element.prototype.getAttributeNS,Fe=window.Element.prototype.setAttributeNS,We=window.Element.prototype.removeAttributeNS,Zt=window.Element.prototype.insertAdjacentElement,Tt=window.Element.prototype.prepend,St=window.Element.prototype.append,In=window.Element.prototype.before,Ju=window.Element.prototype.after,oo=window.Element.prototype.replaceWith,Ei=window.Element.prototype.remove,Yi=window.HTMLElement,Ti=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),Si=window.HTMLElement.prototype.insertAdjacentElement;function Ji(){var O=ai;window.HTMLElement=function(){function F(){var q=this.constructor,D=O.f.get(q);if(!D)throw Error("The custom element being constructed was not registered with `customElements`.");var $=D.constructionStack;if(!$.length)return $=K.call(document,D.localName),Object.setPrototypeOf($,q.prototype),$.__CE_state=1,$.__CE_definition=D,f(O,$),$;var D=$.length-1,U=$[D];if(U===n)throw Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");return $[D]=n,Object.setPrototypeOf(U,q.prototype),f(O,U),U}return F.prototype=Yi.prototype,F}()}function Ii(O,F,q){F.prepend=function($){for(var D=[],U=0;U<arguments.length;++U)D[U-0]=arguments[U];U=D.filter(function(Le){return Le instanceof Node&&i(Le)}),q.j.apply(this,D);for(var oe=0;oe<U.length;oe++)w(O,U[oe]);if(i(this))for(U=0;U<D.length;U++)oe=D[U],oe instanceof Element&&g(O,oe)},F.append=function($){for(var D=[],U=0;U<arguments.length;++U)D[U-0]=arguments[U];U=D.filter(function(Le){return Le instanceof Node&&i(Le)}),q.append.apply(this,D);for(var oe=0;oe<U.length;oe++)w(O,U[oe]);if(i(this))for(U=0;U<D.length;U++)oe=D[U],oe instanceof Element&&g(O,oe)}}function is(){var O=ai;o(Document.prototype,"createElement",function(F){if(this.__CE_hasRegistry){var q=O.a.get(F);if(q)return new q.constructor}return F=K.call(this,F),f(O,F),F}),o(Document.prototype,"importNode",function(F,q){return F=S.call(this,F,q),this.__CE_hasRegistry?P(O,F):d(O,F),F}),o(Document.prototype,"createElementNS",function(F,q){if(this.__CE_hasRegistry&&(F===null||F==="http://www.w3.org/1999/xhtml")){var $=O.a.get(q);if($)return new $.constructor}return F=Q.call(this,F,q),f(O,F),F}),Ii(O,Document.prototype,{j:_,append:b})}function Ma(){var O=ai;function F(q,$){Object.defineProperty(q,"textContent",{enumerable:$.enumerable,configurable:!0,get:$.get,set:function(D){if(this.nodeType===Node.TEXT_NODE)$.set.call(this,D);else{var U=void 0;if(this.firstChild){var oe=this.childNodes,Le=oe.length;if(0<Le&&i(this))for(var U=Array(Le),ct=0;ct<Le;ct++)U[ct]=oe[ct]}if($.set.call(this,D),U)for(D=0;D<U.length;D++)w(O,U[D])}}})}o(Node.prototype,"insertBefore",function(q,$){if(q instanceof DocumentFragment){var D=Array.prototype.slice.apply(q.childNodes);if(q=R.call(this,q,$),i(this))for($=0;$<D.length;$++)g(O,D[$]);return q}return D=i(q),$=R.call(this,q,$),D&&w(O,q),i(this)&&g(O,q),$}),o(Node.prototype,"appendChild",function(q){if(q instanceof DocumentFragment){var $=Array.prototype.slice.apply(q.childNodes);if(q=C.call(this,q),i(this))for(var D=0;D<$.length;D++)g(O,$[D]);return q}return $=i(q),D=C.call(this,q),$&&w(O,q),i(this)&&g(O,q),D}),o(Node.prototype,"cloneNode",function(q){return q=T.call(this,q),this.ownerDocument.__CE_hasRegistry?P(O,q):d(O,q),q}),o(Node.prototype,"removeChild",function(q){var $=i(q),D=A.call(this,q);return $&&w(O,q),D}),o(Node.prototype,"replaceChild",function(q,$){if(q instanceof DocumentFragment){var D=Array.prototype.slice.apply(q.childNodes);if(q=st.call(this,q,$),i(this))for(w(O,$),$=0;$<D.length;$++)g(O,D[$]);return q}var D=i(q),U=st.call(this,q,$),oe=i(this);return oe&&w(O,$),D&&w(O,q),oe&&g(O,q),U}),gt&&gt.get?F(Node.prototype,gt):l(O,function(q){F(q,{enumerable:!0,configurable:!0,get:function(){for(var $=[],D=0;D<this.childNodes.length;D++)$.push(this.childNodes[D].textContent);return $.join("")},set:function($){for(;this.firstChild;)A.call(this,this.firstChild);C.call(this,document.createTextNode($))}})})}function Va(O){var F=Element.prototype;F.before=function(q){for(var $=[],D=0;D<arguments.length;++D)$[D-0]=arguments[D];D=$.filter(function(oe){return oe instanceof Node&&i(oe)}),In.apply(this,$);for(var U=0;U<D.length;U++)w(O,D[U]);if(i(this))for(D=0;D<$.length;D++)U=$[D],U instanceof Element&&g(O,U)},F.after=function(q){for(var $=[],D=0;D<arguments.length;++D)$[D-0]=arguments[D];D=$.filter(function(oe){return oe instanceof Node&&i(oe)}),Ju.apply(this,$);for(var U=0;U<D.length;U++)w(O,D[U]);if(i(this))for(D=0;D<$.length;D++)U=$[D],U instanceof Element&&g(O,U)},F.replaceWith=function(q){for(var $=[],D=0;D<arguments.length;++D)$[D-0]=arguments[D];var D=$.filter(function(Le){return Le instanceof Node&&i(Le)}),U=i(this);oo.apply(this,$);for(var oe=0;oe<D.length;oe++)w(O,D[oe]);if(U)for(w(O,this),D=0;D<$.length;D++)U=$[D],U instanceof Element&&g(O,U)},F.remove=function(){var q=i(this);Ei.call(this),q&&w(O,this)}}function ao(){var O=ai;function F(D,U){Object.defineProperty(D,"innerHTML",{enumerable:U.enumerable,configurable:!0,get:U.get,set:function(oe){var Le=this,ct=void 0;if(i(this)&&(ct=[],s(this,function(Qn){Qn!==Le&&ct.push(Qn)})),U.set.call(this,oe),ct)for(var en=0;en<ct.length;en++){var tn=ct[en];tn.__CE_state===1&&O.disconnectedCallback(tn)}return this.ownerDocument.__CE_hasRegistry?P(O,this):d(O,this),oe}})}function q(D,U){o(D,"insertAdjacentElement",function(oe,Le){var ct=i(Le);return oe=U.call(this,oe,Le),ct&&w(O,Le),i(oe)&&g(O,Le),oe})}if(Sn?o(Element.prototype,"attachShadow",function(D){return this.__CE_shadowRoot=D=Sn.call(this,D)}):console.warn("Custom Elements: `Element#attachShadow` was not patched."),Pt&&Pt.get)F(Element.prototype,Pt);else if(Ti&&Ti.get)F(HTMLElement.prototype,Ti);else{var $=K.call(document,"div");l(O,function(D){F(D,{enumerable:!0,configurable:!0,get:function(){return T.call(this,!0).innerHTML},set:function(U){var oe=this.localName==="template"?this.content:this;for($.innerHTML=U;0<oe.childNodes.length;)A.call(oe,oe.childNodes[0]);for(;0<$.childNodes.length;)C.call(oe,$.childNodes[0])}})})}o(Element.prototype,"setAttribute",function(D,U){if(this.__CE_state!==1)return fe.call(this,D,U);var oe=J.call(this,D);fe.call(this,D,U),U=J.call(this,D),O.attributeChangedCallback(this,D,oe,U,null)}),o(Element.prototype,"setAttributeNS",function(D,U,oe){if(this.__CE_state!==1)return Fe.call(this,D,U,oe);var Le=je.call(this,D,U);Fe.call(this,D,U,oe),oe=je.call(this,D,U),O.attributeChangedCallback(this,U,Le,oe,D)}),o(Element.prototype,"removeAttribute",function(D){if(this.__CE_state!==1)return we.call(this,D);var U=J.call(this,D);we.call(this,D),U!==null&&O.attributeChangedCallback(this,D,U,null,null)}),o(Element.prototype,"removeAttributeNS",function(D,U){if(this.__CE_state!==1)return We.call(this,D,U);var oe=je.call(this,D,U);We.call(this,D,U);var Le=je.call(this,D,U);oe!==Le&&O.attributeChangedCallback(this,U,oe,Le,D)}),Si?q(HTMLElement.prototype,Si):Zt?q(Element.prototype,Zt):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched."),Ii(O,Element.prototype,{j:Tt,append:St}),Va(O)}var Kn=window.customElements;if(!Kn||Kn.forcePolyfill||typeof Kn.define!="function"||typeof Kn.get!="function"){var ai=new a;Ji(),is(),Ma(),ao(),document.__CE_hasRegistry=!0;var Zu=new N(ai);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:Zu})}}).call(self);/**
 * @license
 * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
 */(function(n){if(n.JsMutationObserver)return;var e=new WeakMap,t;if(/Trident|Edge/.test(navigator.userAgent))t=setTimeout;else if(window.setImmediate)t=window.setImmediate;else{var i=[],r=String(Math.random());window.addEventListener("message",function(_){if(_.data===r){var b=i;i=[],b.forEach(function(T){T()})}}),t=function(_){i.push(_),window.postMessage(r,"*")}}var s=!1,o=[];function a(_){o.push(_),s||(s=!0,t(l))}function c(_){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(_)||_}function l(){s=!1;var _=o;o=[],_.sort(function(T,C){return T.uid_-C.uid_});var b=!1;_.forEach(function(T){var C=T.takeRecords();d(T),C.length&&(T.callback_(C,T),b=!0)}),b&&l()}function d(_){_.nodes_.forEach(function(b){var T=e.get(b);T&&T.forEach(function(C){C.observer===_&&C.removeTransientObservers()})})}function f(_,b){for(var T=_;T;T=T.parentNode){var C=e.get(T);if(C)for(var R=0;R<C.length;R++){var A=C[R],st=A.options;if(!(T!==_&&!st.subtree)){var gt=b(st);gt&&A.enqueue(gt)}}}}var g=0;function w(_){this.callback_=_,this.nodes_=[],this.records_=[],this.uid_=++g}w.prototype={observe:function(_,b){if(_=c(_),!b.childList&&!b.attributes&&!b.characterData||b.attributeOldValue&&!b.attributes||b.attributeFilter&&b.attributeFilter.length&&!b.attributes||b.characterDataOldValue&&!b.characterData)throw new SyntaxError;var T=e.get(_);T||e.set(_,T=[]);for(var C,R=0;R<T.length;R++)if(T[R].observer===this){C=T[R],C.removeListeners(),C.options=b;break}C||(C=new S(this,_,b),T.push(C),this.nodes_.push(_)),C.addListeners()},disconnect:function(){this.nodes_.forEach(function(_){for(var b=e.get(_),T=0;T<b.length;T++){var C=b[T];if(C.observer===this){C.removeListeners(),b.splice(T,1);break}}},this),this.records_=[]},takeRecords:function(){var _=this.records_;return this.records_=[],_}};function P(_,b){this.type=_,this.target=b,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function x(_){var b=new P(_.type,_.target);return b.addedNodes=_.addedNodes.slice(),b.removedNodes=_.removedNodes.slice(),b.previousSibling=_.previousSibling,b.nextSibling=_.nextSibling,b.attributeName=_.attributeName,b.attributeNamespace=_.attributeNamespace,b.oldValue=_.oldValue,b}var L,v;function E(_,b){return L=new P(_,b)}function I(_){return v||(v=x(L),v.oldValue=_,v)}function N(){L=v=void 0}function K(_){return _===v||_===L}function Q(_,b){return _===b?_:v&&K(_)?v:null}function S(_,b,T){this.observer=_,this.target=b,this.options=T,this.transientObservedNodes=[]}S.prototype={enqueue:function(_){var b=this.observer.records_,T=b.length;if(b.length>0){var C=b[T-1],R=Q(C,_);if(R){b[T-1]=R;return}}else a(this.observer);b[T]=_},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(_){var b=this.options;b.attributes&&_.addEventListener("DOMAttrModified",this,!0),b.characterData&&_.addEventListener("DOMCharacterDataModified",this,!0),b.childList&&_.addEventListener("DOMNodeInserted",this,!0),(b.childList||b.subtree)&&_.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(_){var b=this.options;b.attributes&&_.removeEventListener("DOMAttrModified",this,!0),b.characterData&&_.removeEventListener("DOMCharacterDataModified",this,!0),b.childList&&_.removeEventListener("DOMNodeInserted",this,!0),(b.childList||b.subtree)&&_.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(_){if(_!==this.target){this.addListeners_(_),this.transientObservedNodes.push(_);var b=e.get(_);b||e.set(_,b=[]),b.push(this)}},removeTransientObservers:function(){var _=this.transientObservedNodes;this.transientObservedNodes=[],_.forEach(function(b){this.removeListeners_(b);for(var T=e.get(b),C=0;C<T.length;C++)if(T[C]===this){T.splice(C,1);break}},this)},handleEvent:function(_){switch(_.stopImmediatePropagation(),_.type){case"DOMAttrModified":var b=_.attrName,T=_.relatedNode.namespaceURI,C=_.target,J=new E("attributes",C);J.attributeName=b,J.attributeNamespace=T;var R=_.attrChange===MutationEvent.ADDITION?null:_.prevValue;f(C,function(fe){if(fe.attributes&&!(fe.attributeFilter&&fe.attributeFilter.length&&fe.attributeFilter.indexOf(b)===-1&&fe.attributeFilter.indexOf(T)===-1))return fe.attributeOldValue?I(R):J});break;case"DOMCharacterDataModified":var C=_.target,J=E("characterData",C),R=_.prevValue;f(C,function(fe){if(fe.characterData)return fe.characterDataOldValue?I(R):J});break;case"DOMNodeRemoved":this.addTransientObserver(_.target);case"DOMNodeInserted":var A=_.target,st,gt;_.type==="DOMNodeInserted"?(st=[A],gt=[]):(st=[],gt=[A]);var Sn=A.previousSibling,Pt=A.nextSibling,J=E("childList",_.target.parentNode);J.addedNodes=st,J.removedNodes=gt,J.previousSibling=Sn,J.nextSibling=Pt,f(_.relatedNode,function(fe){if(fe.childList)return J})}N()}},n.JsMutationObserver=w,n.MutationObserver||(n.MutationObserver=w,w._isPolyfilled=!0)})(self);(function(n,e){if(n.setImmediate)return;var t=1,i={},r=!1,s=n.document,o;function a(E){return i[t]=c.apply(e,E),t++}function c(E){var I=[].slice.call(arguments,1);return function(){typeof E=="function"?E.apply(e,I):new Function(""+E)()}}function l(E){if(r)setTimeout(c(l,E),0);else{var I=i[E];if(I){r=!0;try{I()}finally{d(E),r=!1}}}}function d(E){delete i[E]}function f(){o=function(){var E=a(arguments);return process.nextTick(c(l,E)),E}}function g(){if(n.postMessage&&!n.importScripts){var E=!0,I=n.onmessage;return n.onmessage=function(){E=!1},n.postMessage("","*"),n.onmessage=I,E}}function w(){var E="setImmediate$"+Math.random()+"$",I=function(N){N.source===n&&typeof N.data=="string"&&N.data.indexOf(E)===0&&l(+N.data.slice(E.length))};n.addEventListener?n.addEventListener("message",I,!1):n.attachEvent("onmessage",I),o=function(){var N=a(arguments);return n.postMessage(E+N,"*"),N}}function P(){var E=new MessageChannel;E.port1.onmessage=function(I){var N=I.data;l(N)},o=function(){var I=a(arguments);return E.port2.postMessage(I),I}}function x(){var E=s.documentElement;o=function(){var I=a(arguments),N=s.createElement("script");return N.onreadystatechange=function(){l(I),N.onreadystatechange=null,E.removeChild(N),N=null},E.appendChild(N),I}}function L(){o=function(){var E=a(arguments);return setTimeout(c(l,E),0),E}}var v=Object.getPrototypeOf&&Object.getPrototypeOf(n);v=v&&v.setTimeout?v:n,{}.toString.call(n.process)==="[object process]"?f():g()?w():n.MessageChannel?P():s&&"onreadystatechange"in s.createElement("script")?x():L(),v.setImmediate=o,v.clearImmediate=d})(self);(function(){var n="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no",e={ensureViewportElement:function(){var t=document.querySelector("meta[name=viewport]");return t||(t=document.createElement("meta"),t.name="viewport",document.head.appendChild(t)),t},setup:function(){var t=e.ensureViewportElement();t&&(t.hasAttribute("content")||t.setAttribute("content",n))}};window.Viewport=e})();const xs=function(){};xs.prototype={on:function(n,e){this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(e)},once:function(n,e){var t=this,i=function(){return t.off(n,i),e.apply(null,arguments)};this.on(n,i)},off:function(n,e){this._events=this._events||{},n in this._events&&(this._events[n]=this._events[n].filter(function(t){return e?e!==t:!1}))},emit:function(n){if(this._events=this._events||{},n in this._events)for(var e=0;e<this._events[n].length;e++)this._events[n][e].apply(this,Array.prototype.slice.call(arguments,1))}};xs.mixin=function(n){for(var e=["on","once","off","emit"],t=0;t<e.length;t++)typeof n=="function"?n.prototype[e[t]]=xs.prototype[e[t]]:n[e[t]]=xs.prototype[e[t]]};window.MicroEvent=xs;const ve={},Fm=function(){const n=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/)||n.OLink===""&&["","o"])[1];return function(t){return"-"+e+"-"+m.hyphenate(t)}}(),zt=function(n,e){return Object.keys(e).forEach(function(t){t in n.style?n.style[t]=e[t]:Fm(t)in n.style?n.style[Fm(t)]=e[t]:m.warn("No such style property: "+t)}),n};zt.clear=function(n,e=""){const t=e.split(/\s+/).reduce((r,s)=>r.concat([m.hyphenate(s),Fm(s)]),[]),i=[];for(let r=n.style.length-1;r>=0;r--){const s=n.style[r];(t.length===0||t.some(o=>s.indexOf(o)===0))&&i.push(s)}i.forEach(r=>n.style[r]=""),n.getAttribute("style")===""&&n.removeAttribute("style")};let rh=!0;const $h={quiet:"material--flat",light:"material--flat",outline:"material--flat",cta:"","large--quiet":"material--flat large","large--cta":"large",noborder:"",tappable:""},Cd={};Cd.android=n=>{const e=n.tagName.toLowerCase();if(!m.hasModifier(n,"material")){const r=(n.getAttribute("modifier")||"").trim().split(/\s+/).map(s=>Object.prototype.hasOwnProperty.call($h,s)?$h[s]:s);r.unshift("material"),n.setAttribute("modifier",r.join(" ").trim())}["ons-alert-dialog-button","ons-toolbar-button","ons-back-button","ons-button","ons-list-item","ons-fab","ons-speed-dial","ons-speed-dial-item","ons-tab"].indexOf(e)!==-1&&!n.hasAttribute("ripple")&&!n.querySelector("ons-ripple")&&(e==="ons-list-item"?n.hasAttribute("tappable")&&(n.setAttribute("ripple",""),n.removeAttribute("tappable")):n.setAttribute("ripple",""))};Cd.ios=n=>{m.removeModifier(n,"material")&&(m.removeModifier(n,"material--flat")&&m.addModifier(n,m.removeModifier(n,"large")?"large--quiet":"quiet"),n.getAttribute("modifier")||n.removeAttribute("modifier")),n.hasAttribute("ripple")&&(n.tagName.toLowerCase()==="ons-list-item"&&n.setAttribute("tappable",""),n.removeAttribute("ripple"))};const Kk={android:!0},Pd=(n,e)=>{if(rh&&!n.hasAttribute("disable-auto-styling")){const t=qe.getMobileOS();if(Object.prototype.hasOwnProperty.call(Cd,t)&&(Object.prototype.hasOwnProperty.call(Kk,t)||e))return t}return null},Qk=(n,e)=>{const t=Pd(n,e);t&&Cd[t](n)},PS=(n,e,t)=>Pd(e,t)?n.split(/\s+/).map(i=>Object.prototype.hasOwnProperty.call($h,i)?$h[i]:i).join(" "):n,Xk=n=>{if(Pd(n)==="android"){const e=n.getAttribute("modifier")||"";let t=PS(e,n);if(/(^|\s+)material($|\s+)/i.test(e)||(t="material "+t),t!==e)return n.setAttribute("modifier",t.trim()),!0}return!1},Be={isEnabled:()=>rh,enable:()=>rh=!0,disable:()=>rh=!1,prepare:Qk,mapModifier:PS,getPlatform:Pd,restoreModifier:Xk};class le{static diff(e,t){e=s((""+e).trim()),t=s((""+t).trim());const i=Object.keys(e).reduce((o,a)=>(t[a]||o.push(a),o),[]);return{added:Object.keys(t).reduce((o,a)=>(e[a]||o.push(a),o),[]),removed:i};function s(o){const a={};return le.split(o).forEach(c=>a[c]=c),a}}static applyDiffToClassList(e,t,i){e.added.map(r=>i.replace(/\*/g,r)).forEach(r=>r.split(/\s+/).forEach(s=>t.add(s))),e.removed.map(r=>i.replace(/\*/g,r)).forEach(r=>r.split(/\s+/).forEach(s=>t.remove(s)))}static applyDiffToElement(e,t,i){Object.keys(i).forEach(r=>{const s=!r||m.match(t,r)?[t]:Array.prototype.filter.call(t.querySelectorAll(r),o=>!m.findParent(o,t.tagName,a=>a===t));for(let o=0;o<s.length;o++)le.applyDiffToClassList(e,s[o].classList,i[r])})}static onModifierChanged(e,t,i,r){le.applyDiffToElement(le.diff(e,t),i,r),Be.restoreModifier(i)}static refresh(e,t){le.applyDiffToElement(le.diff("",e.getAttribute("modifier")||""),e,t)}static initModifier(e,t){const i=e.getAttribute("modifier");typeof i=="string"&&le.applyDiffToElement({removed:[],added:le.split(i)},e,t)}static split(e){return typeof e!="string"?[]:e.trim().split(/ +/).filter(t=>t!=="")}static addModifier(e,t){if(!e.hasAttribute("modifier"))e.setAttribute("modifier",t);else{const i=le.split(e.getAttribute("modifier"));i.indexOf(t)==-1&&(i.push(t),e.setAttribute("modifier",i.join(" ")))}}static removeModifier(e,t){if(e.hasAttribute("modifier")){const i=le.split(e.getAttribute("modifier")),r=i.indexOf(t);r!==-1&&(i.splice(r,1),e.setAttribute("modifier",i.join(" ")))}}}const zh=(n,e)=>n.substr(0,e.length)===e,jh=(n,e)=>n.substr(n.length-e.length,e.length)===e,Ko=n=>n.slice(1,-1),kS=n=>zh(n,"{")&&jh(n,"}"),xS=n=>zh(n,"[")&&jh(n,"]"),RS=n=>zh(n,"'")&&jh(n,"'")||zh(n,'"')&&jh(n,'"'),qh=(n,e,t)=>{throw new Error("Unexpected token '"+n+"' at position "+(t.length-e.length-1)+" in string: '"+t+"'")},Uh=(n,e,t)=>{if(n==="true"||n==="false")return n==="true";if(RS(n))return Ko(n);if(isNaN(n)){if(kS(n))return OS(Ko(n));if(xS(n))return NS(Ko(n));qh(n,e,t)}else return+n},DS=n=>{n=n.trim();let e=n.length;if(n[0]===":"||n[0]===",")e=1;else if(n[0]==="{"||n[0]==="["){const t=n.charCodeAt(0);let i=1;for(let r=1;r<n.length;r++)if(n.charCodeAt(r)===t)i++;else if(n.charCodeAt(r)===t+2&&(i--,i===0)){e=r+1;break}}else if(n[0]==="'"||n[0]==='"'){for(let t=1;t<n.length;t++)if(n[t]===n[0]){e=t+1;break}}else for(let t=1;t<n.length;t++)if([" ",",",":"].indexOf(n[t])!==-1){e=t;break}return n.slice(0,e)},OS=n=>{const e=c=>/^[A-Z_$][A-Z0-9_$]*$/i.test(c);n=n.trim();const t=n,i={};let r=!0,s,o,a;for(;n.length>0;)if(o=a,a=DS(n),n=n.slice(a.length,n.length).trim(),a===":"&&(!r||!o||o===",")||a===","&&r||a!==":"&&a!==","&&o&&o!==","&&o!==":")qh(a,n,t);else if(a===":"&&r&&o)if(o=RS(o)?Ko(o):o,e(o))s=o,r=!1;else throw new Error("Invalid key token '"+o+"' at position 0 in string: '"+t+"'");else a===","&&!r&&o&&(i[s]=Uh(o,n,t),r=!0);return a&&(i[s]=Uh(a,n,t)),i},NS=n=>{n=n.trim();const e=n,t=[];let i,r;for(;n.length>0;)i=r,r=DS(n),n=n.slice(r.length,n.length).trim(),r===","&&(!i||i===",")?qh(r,n,e):r===","&&t.push(Uh(i,n,e));return r&&(r!==","?t.push(Uh(r,n,e)):qh(r,n,e)),t},Yk=n=>{if(n=n.trim(),kS(n))return OS(Ko(n));if(xS(n))return NS(Ko(n));throw new Error("Provided string must be object or array like: "+n)},ne={},y_="[Onsen UI]";ne.globals={fabOffset:0,errorPrefix:y_,supportsPassive:!1};qe._runOnActualPlatform(()=>{ne.globals.actualMobileOS=qe.getMobileOS(),ne.globals.isWKWebView=qe.isWKWebView()});try{const n=Object.defineProperty({},"passive",{get(){ne.globals.supportsPassive=!0}});window.addEventListener("testPassive",null,n),window.removeEventListener("testPassive",null,n)}catch{}ne.addEventListener=(n,e,t,i,r)=>{n.addEventListener(e,t,ne.globals.supportsPassive?i:(i||{}).capture)};ne.removeEventListener=(n,e,t,i,r)=>{n.removeEventListener(e,t,ne.globals.supportsPassive?i:(i||{}).capture)};ne.prepareQuery=n=>n instanceof Function?n:e=>ne.match(e,n);ne.match=(n,e)=>(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector).call(n,e);ne.findChild=(n,e)=>{const t=ne.prepareQuery(e);for(let i=0;i<n.childNodes.length;i++){const r=n.childNodes[i];if(r.nodeType===Node.ELEMENT_NODE&&t(r))return r}return null};ne.findParent=(n,e,t)=>{const i=ne.prepareQuery(e);let r=n.parentNode;for(;;){if(!r||r===document||r instanceof DocumentFragment||t&&t(r))return null;if(i(r))return r;r=r.parentNode}};ne.isAttached=n=>document.body.contains(n);ne.hasAnyComponentAsParent=n=>{for(;n&&document.documentElement!==n;)if(n=n.parentNode,n&&n.nodeName.toLowerCase().match(/(ons-navigator|ons-tabbar|ons-modal)/))return!0;return!1};ne.getAllChildNodes=n=>[n].concat(...Array.from(n.children).map(e=>ne.getAllChildNodes(e)));ne.isPageControl=n=>n.nodeName.match(/^ons-(navigator|splitter|tabbar|page)$/i);ne.propagateAction=(n,e)=>{for(let t=0;t<n.childNodes.length;t++){const i=n.childNodes[t];i[e]instanceof Function?i[e]():ne.propagateAction(i,e)}};ne.camelize=n=>n.toLowerCase().replace(/-([a-z])/g,(e,t)=>t.toUpperCase());ne.hyphenate=n=>n.replace(/([a-zA-Z])([A-Z])/g,"$1-$2").toLowerCase();ne.create=(n="",e={})=>{const t=n.split("."),i=document.createElement(t.shift()||"div");return t.length&&(i.className=t.join(" ")),zt(i,e),i};ne.createElement=n=>{const e=document.createElement("div");n instanceof DocumentFragment?e.appendChild(document.importNode(n,!0)):e.innerHTML=n.trim(),e.children.length>1&&ne.throw("HTML template must contain a single root element");const t=e.children[0];return e.children[0].remove(),t};ne.createFragment=n=>{const e=document.createElement("template");return e.innerHTML=n,document.importNode(e.content,!0)};ne.extend=(n,...e)=>{for(let t=0;t<e.length;t++)if(e[t]){const i=Object.keys(e[t]);for(let r=0;r<i.length;r++){const s=i[r];n[s]=e[t][s]}}return n};ne.arrayFrom=n=>Array.prototype.slice.apply(n);ne.parseJSONObjectSafely=(n,e={})=>{try{const t=JSON.parse(""+n);if(typeof t=="object"&&t!==null)return t}catch{return e}return e};ne.findFromPath=n=>{n=n.split(".");for(var e=window,t;t=n.shift();)e=e[t];return e};ne.getTopPage=n=>n&&(n.tagName.toLowerCase()==="ons-page"?n:n.topPage)||null;ne.findToolbarPage=n=>{const e=ne.getTopPage(n);if(e){if(e._canAnimateToolbar())return e;for(let t=0;t<e._contentElement.children.length;t++){const i=ne.getTopPage(e._contentElement.children[t]);if(i&&!/ons-tabbar/i.test(e._contentElement.children[t].tagName))return ne.findToolbarPage(i)}}return null};ne.triggerElementEvent=(n,e,t={})=>{const i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});return Object.keys(t).forEach(r=>{i[r]=t[r]}),n.dispatchEvent(i),i};ne.hasModifier=(n,e)=>n.hasAttribute("modifier")?RegExp(`(^|\\s+)${e}($|\\s+)`,"i").test(n.getAttribute("modifier")):!1;ne.addModifier=(n,e,t={})=>(t.autoStyle&&(e=Be.mapModifier(e,n,t.forceAutoStyle)),ne.hasModifier(n,e)?!1:(n.setAttribute("modifier",((n.getAttribute("modifier")||"")+" "+e).trim()),!0));ne.removeModifier=(n,e,t={})=>{if(t.autoStyle&&(e=Be.mapModifier(e,n,t.forceAutoStyle)),!n.getAttribute("modifier")||!ne.hasModifier(n,e))return!1;const i=n.getAttribute("modifier").split(/\s+/).filter(r=>r&&r!==e);return i.length?n.setAttribute("modifier",i.join(" ")):n.removeAttribute("modifier"),!0};ne.toggleModifier=(...n)=>{const e=n.length>2?n[2]:{},t=typeof e=="boolean"?e:e.force;(typeof t=="boolean"?t:!ne.hasModifier(...n))?ne.addModifier(...n):ne.removeModifier(...n)};ne.restoreClass=(n,e,t)=>{e.split(/\s+/).forEach(i=>i!==""&&!n.classList.contains(i)&&n.classList.add(i)),n.hasAttribute("modifier")&&le.refresh(n,t)};ne.updateParentPosition=n=>{!n._parentUpdated&&n.parentElement&&(window.getComputedStyle(n.parentElement).getPropertyValue("position")==="static"&&(n.parentElement.style.position="relative"),n._parentUpdated=!0)};ne.toggleAttribute=(n,e,t)=>{t?n.setAttribute(e,typeof t=="boolean"?"":t):n.removeAttribute(e)};ne.bindListeners=(n,e)=>{e.forEach(t=>{const i=t.replace(/^_[a-z]/,"_bound"+t[1].toUpperCase());n[i]=n[i]||n[t].bind(n)})};ne.each=(n,e)=>Object.keys(n).forEach(t=>e(t,n[t]));ne.updateRipple=(n,e,t={})=>{e===void 0&&(e=n.hasAttribute("ripple"));const i=ne.findChild(n,"ons-ripple");if(e){if(!i){const r=document.createElement("ons-ripple");Object.keys(t).forEach(s=>r.setAttribute(s,t[s])),n.insertBefore(r,n.firstChild)}}else i&&i.remove()};ne.animationOptionsParse=Yk;ne.isInteger=n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;ne.defer=()=>{const n={};return n.promise=new Promise((e,t)=>{n.resolve=e,n.reject=t}),n};ne.warn=(...n)=>{ke.config.warningsDisabled||console.warn(y_,...n)};ne.throw=n=>{throw new Error(`${y_} ${n}`)};ne.throwAbstract=()=>ne.throw("Cannot instantiate abstract class");ne.throwMember=()=>ne.throw("Class member must be implemented");ne.throwPageLoader=()=>ne.throw("First parameter should be an instance of PageLoader");ne.throwAnimator=n=>ne.throw(`"Animator" param must inherit ${n}Animator`);const Gb=n=>n.cancelable&&n.preventDefault();ne.iosPreventScroll=n=>{if(ne.globals.actualMobileOS==="ios"){const e=t=>{n.off("touchmove",Gb),n.off("dragend",e)};n.on("touchmove",Gb),n.on("dragend",e)}};ne.iosPageScrollFix=n=>{ne.globals.actualMobileOS==="ios"&&(document.body.classList.toggle("ons-ios-scroll",n),document.body.classList.toggle("ons-ios-scroll-fix",n))};ne.isValidGesture=n=>n.gesture!==void 0&&(n.gesture.distance<=15||n.gesture.deltaTime<=100);ne.checkMissingImport=(...n)=>{n.forEach(e=>{ve[e]||ne.throw(`Ons${e} is required but was not imported (Custom Elements)`)})};ne.defineBooleanProperties=(n,e)=>{e.forEach(t=>{const i=ne.camelize(t);Object.defineProperty(n.prototype,i,{get(){return this.hasAttribute(t)},set(r){r?this.setAttribute(t,""):this.removeAttribute(t)},configurable:!0})})};ne.defineStringProperties=(n,e)=>{e.forEach(t=>{const i=ne.camelize(t);Object.defineProperty(n.prototype,i,{get(){return this.getAttribute(t)},set(r){r==null?this.removeAttribute(t):this.setAttribute(t,r)},configurable:!0})})};ne.defineListenerProperty=(n,e)=>{const t=ne.camelize(e),i="on"+t.charAt(0).toUpperCase()+t.slice(1);let r;return Object.defineProperty(n,i,{get(){return r},set(s){n.isConnected&&(r&&n.removeEventListener(e,r),n.addEventListener(e,s)),r=s},configurable:!0}),{onConnected(){n[i]&&n.addEventListener(e,n[i])},onDisconnected(){n[i]&&n.removeEventListener(e,n[i])}}};const m=ne,ki=n=>m.throw(`In PageAttributeExpression: ${n}`),Du={_variables:{},defineVariable:function(n,e,t=!1){typeof n!="string"?ki("Variable name must be a string"):typeof e!="string"&&typeof e!="function"?ki("Variable value must be a string or a function"):Object.prototype.hasOwnProperty.call(this._variables,n)&&!t&&ki(`"${n}" is already defined`),this._variables[n]=e},getVariable:function(n){return Object.prototype.hasOwnProperty.call(this._variables,n)?this._variables[n]:null},removeVariable:function(n){delete this._variables[n]},getAllVariables:function(){return this._variables},_parsePart:function(n){let e,t=!1,i=0;const r=[];n.length===0&&ki("Unable to parse empty string");for(let s=0;s<n.length;s++)e=n.charAt(s),e==="$"&&n.charAt(s+1)==="{"?(t&&ki("Nested interpolation not supported"),n.substring(i,s).length>0&&r.push(n.substring(i,s)),i=s,t=!0):e==="}"&&(t||ki("} must be preceeded by ${"),n.substring(i,s+1).length>0&&r.push(n.substring(i,s+1)),i=s+1,t=!1);return t&&ki("Unterminated interpolation"),r.push(n.substring(i,n.length)),r},_replaceToken:function(n){const e=/^\${(.*?)}$/,t=n.match(e);if(t){const i=t[1].trim(),r=this.getVariable(i);if(r===null)ki(`Variable "${i}" does not exist`);else{if(typeof r=="string")return r;{const s=r();return typeof s!="string"&&ki("Must return a string"),s}}}else return n},_replaceTokens:function(n){return n.map(this._replaceToken.bind(this))},_parseExpression:function(n){return n.split(",").map(function(e){return e.trim()}).map(this._parsePart.bind(this)).map(this._replaceTokens.bind(this)).map(e=>e.join(""))},evaluate:function(n){return n?this._parseExpression(n):[]}};Du.defineVariable("mobileOS",qe.getMobileOS());Du.defineVariable("iOSDevice",qe.getIOSDevice());Du.defineVariable("runtime",()=>qe.isWebView()?"cordova":"browser");const pt={};pt.config={autoStatusBarFill:!0,animationsDisabled:!1,warningsDisabled:!1};pt.nullElement=window.document.createElement("div");pt.isEnabledAutoStatusBarFill=()=>!!pt.config.autoStatusBarFill;pt.normalizePageHTML=n=>(""+n).trim();pt.waitDOMContentLoaded=n=>{if(window.document.readyState==="loading"||window.document.readyState=="uninitialized"){const e=()=>{n(),window.document.removeEventListener("DOMContentLoaded",e)};window.document.addEventListener("DOMContentLoaded",e)}else setImmediate(n)};pt.autoStatusBarFill=n=>{const e=()=>{pt.shouldFillStatusBar()&&n(),document.removeEventListener("deviceready",e)};typeof device=="object"?document.addEventListener("deviceready",e):["complete","interactive"].indexOf(document.readyState)===-1?pt.waitDOMContentLoaded(e):e()};pt.shouldFillStatusBar=()=>pt.isEnabledAutoStatusBarFill()&&(qe.isWebView()&&(qe.isIOS7above()||qe.isIPadOS())&&!qe.isIPhoneX()||document.body.querySelector(".ons-status-bar-mock.ios"));pt.templateStore={_storage:{},get(n){return pt.templateStore._storage[n]||null},set(n,e){pt.templateStore._storage[n]=e}};pt.getTemplateHTMLAsync=function(n){return new Promise((e,t)=>{pt.waitDOMContentLoaded(()=>{const i=pt.templateStore.get(n);if(i){if(i instanceof DocumentFragment)return e(i);const o=typeof i=="string"?i:i[1];return e(pt.normalizePageHTML(o))}const r=window.document.getElementById(n);if(r){const o=r.textContent||r.content;return e(o)}const s=new XMLHttpRequest;s.open("GET",n,!0),s.onload=function(){const o=s.responseText;if(s.status>=400&&s.status<600)s.status===404?t(404):t(o);else{const a=m.createFragment(o);m.arrayFrom(a.querySelectorAll("script")).forEach(c=>{const l=document.createElement("script");l.type=c.type||"text/javascript",l.appendChild(document.createTextNode(c.text||c.textContent||c.innerHTML)),c.parentNode.replaceChild(l,c)}),pt.templateStore.set(n,a),e(a)}},s.onerror=function(){m.throw(`Page template not found: ${n}`)},s.send(null)})})};pt.getPageHTMLAsync=function(n){const e=Du.evaluate(n),t=i=>typeof i!="string"?Promise.reject("Must specify a page."):pt.getTemplateHTMLAsync(i).catch(function(r){return e.length===0?Promise.reject(r):t(e.shift())});return t(e.shift())};const ke=pt;class On{constructor(e){this._animators=e.animators,this._baseClass=e.baseClass,this._baseClassName=e.baseClassName||e.baseClass.name,this._animation=e.defaultAnimation||"default",this._animationOptions=e.defaultAnimationOptions||{},this._animators[this._animation]||m.throw("No such animation: "+this._animation)}static parseAnimationOptionsString(e){try{if(typeof e=="string"){const t=m.animationOptionsParse(e);if(typeof t=="object"&&t!==null)return t;console.error('"animation-options" attribute must be a JSON object string: '+e)}return{}}catch{return console.error('"animation-options" attribute must be a JSON object string: '+e),{}}}setAnimationOptions(e){this._animationOptions=e}newAnimator(e={},t){let i=null;if(e.animation instanceof this._baseClass)return e.animation;let r=null;if(typeof e.animation=="string"&&(r=this._animators[e.animation]),!r&&t)i=t;else{r=r||this._animators[this._animation];const s=m.extend({},this._animationOptions,e.animationOptions||{},ke.config.animationsDisabled?{duration:0,delay:0}:{});i=new r(s),typeof i=="function"&&(i=new i(s))}return i instanceof this._baseClass||m.throw(`"animator" is not an instance of ${this._baseClassName}`),i}}const Qo={_ready:!1,_domContentLoaded:!1,_onDOMContentLoaded:()=>{Qo._domContentLoaded=!0,qe.isWebView()?window.document.addEventListener("deviceready",()=>{Qo._ready=!0},!1):Qo._ready=!0},addBackButtonListener:function(n){if(!this._domContentLoaded)throw new Error("This method is available after DOMContentLoaded");this._ready?window.document.addEventListener("backbutton",n,!1):window.document.addEventListener("deviceready",function(){window.document.addEventListener("backbutton",n,!1)})},removeBackButtonListener:function(n){if(!this._domContentLoaded)throw new Error("This method is available after DOMContentLoaded");this._ready?window.document.removeEventListener("backbutton",n,!1):window.document.addEventListener("deviceready",function(){window.document.removeEventListener("backbutton",n,!1)})}};window.addEventListener("DOMContentLoaded",()=>Qo._onDOMContentLoaded(),!1);const Zn={_store:{},_genId:(()=>{let n=0;return()=>n++})(),set:function(n,e){n.dataset.deviceBackButtonHandlerId&&this.remove(n);const t=n.dataset.deviceBackButtonHandlerId=Zn._genId();this._store[t]=e},remove:function(n){n.dataset.deviceBackButtonHandlerId&&(delete this._store[n.dataset.deviceBackButtonHandlerId],delete n.dataset.deviceBackButtonHandlerId)},get:function(n){if(!n.dataset.deviceBackButtonHandlerId)return;const e=n.dataset.deviceBackButtonHandlerId;if(!this._store[e])throw new Error;return this._store[e]},has:function(n){if(!n.dataset)return!1;const e=n.dataset.deviceBackButtonHandlerId;return!!this._store[e]}};class Jk{constructor(){this._isEnabled=!1,this._boundCallback=this._callback.bind(this)}enable(){this._isEnabled||(Qo.addBackButtonListener(this._boundCallback),this._isEnabled=!0)}disable(){this._isEnabled&&(Qo.removeBackButtonListener(this._boundCallback),this._isEnabled=!1)}fireDeviceBackButtonEvent(){const e=document.createEvent("Event");e.initEvent("backbutton",!0,!0),document.dispatchEvent(e)}_callback(){this._dispatchDeviceBackButtonEvent()}createHandler(e,t){if(!(e instanceof HTMLElement))throw new Error("element must be an instance of HTMLElement");if(!(t instanceof Function))throw new Error("callback must be an instance of Function");const i={_callback:t,_element:e,disable:function(){Zn.remove(e)},setListener:function(r){this._callback=r},enable:function(){Zn.set(e,this)},isEnabled:function(){return Zn.get(e)===this},destroy:function(){Zn.remove(e),this._callback=this._element=null}};return i.enable(),i}_dispatchDeviceBackButtonEvent(){const e=this._captureTree(),t=this._findHandlerLeafElement(e);let i=Zn.get(t);i._callback(r(t));function r(s){return{_element:s,callParentHandler:function(){let o=this._element.parentNode;for(;o;){if(i=Zn.get(o),i)return i._callback(r(o));o=o.parentNode}}}}}_captureTree(){return e(document.body);function e(i){const r={element:i,children:Array.prototype.concat.apply([],t(i.children).map(function(s){if(s.style.display==="none"||s._isShown===!1)return[];if(s.children.length===0&&!Zn.has(s))return[];const o=e(s);return o.children.length===0&&!Zn.has(o.element)?[]:[o]}))};if(!Zn.has(r.element))for(let s=0;s<r.children.length;s++){const o=r.children[s];if(Zn.has(o.element))return o}return r}function t(i){const r=[];for(let s=0;s<i.length;s++)r.push(i[s]);return r}}_findHandlerLeafElement(e){return t(e);function t(i){return i.children.length===0?i.element:i.children.length===1?t(i.children[0]):i.children.map(function(r){return r.element}).reduce(function(r,s){if(!r)return s;const o=parseInt(window.getComputedStyle(r,"").zIndex,10),a=parseInt(window.getComputedStyle(s,"").zIndex,10);if(!isNaN(o)&&!isNaN(a))return o>a?r:s;throw new Error("Capturing backbutton-handler is failure.")},null)}}}const Ou=new Jk;ke.AnimatorFactory=On;ke.ModifierUtil=le;ke.dbbDispatcher=Ou;function Zk(n){ke.waitDOMContentLoaded(function(){e('script[type="text/template"]'),e('script[type="text/ng-template"]'),e("template");function e(t){const i=window.document.querySelectorAll(t);for(let r=0;r<i.length;r++)ke.templateStore.set(i[r].getAttribute("id"),i[r].textContent||i[r].content)}}),window._onsLoaded&&n._util.warn("Onsen UI is loaded more than once."),window._onsLoaded=!0,n.ready(function(){n.enableDeviceBackButtonHandler(),n._defaultDeviceBackButtonHandler=n._internal.dbbDispatcher.createHandler(window.document.body,()=>{Object.hasOwnProperty.call(navigator,"app")?navigator.app.exitApp():console.warn(`Could not close the app. Is 'cordova.js' included?
Error: 'window.navigator.app' is undefined.`)}),document.body._gestureDetector=new n.GestureDetector(document.body,{passive:!0}),n.platform.isWebView()||document.body.addEventListener("keydown",function(e){e.keyCode===27&&n.fireDeviceBackButtonEvent()}),n._setupLoadingPlaceHolders()}),Viewport.setup()}var LS=1.4,Ce={};Ce.capitalize=function(n){return n.charAt(0).toUpperCase()+n.slice(1)};Ce.buildTransitionValue=function(n){n.property=n.property||"all",n.duration=n.duration||.4,n.timing=n.timing||"linear";var e=n.property.split(/ +/);return e.map(function(t){return t+" "+n.duration+"s "+n.timing}).join(", ")};Ce.onceOnTransitionEnd=function(n,e){if(!n)return function(){};var t=function(){Ce._transitionEndEvents.forEach(function(r){n.removeEventListener(r,i,!1)})},i=function(r){n==r.target&&(r.stopPropagation(),t(),e())};return Ce._transitionEndEvents.forEach(function(r){n.addEventListener(r,i,!1)}),t};Ce._transitionEndEvents=function(){return"ontransitionend"in window?["transitionend"]:"onwebkittransitionend"in window?["webkitTransitionEnd"]:Ce.vendorPrefix==="webkit"||Ce.vendorPrefix==="o"||Ce.vendorPrefix==="moz"||Ce.vendorPrefix==="ms"?[Ce.vendorPrefix+"TransitionEnd","transitionend"]:[]}();Ce._cssPropertyDict=function(){for(var n=window.getComputedStyle(document.documentElement,""),e={},t=65,i=122,r=function(a){return a.substr(1).toUpperCase()},s=0;s<n.length;s++){var o=n[s].replace(/^[-]+/,"").replace(/[-][a-z]/g,r).replace(/^moz/,"Moz");t<=o.charCodeAt(0)&&i>=o.charCodeAt(0)&&o!=="cssText"&&o!=="parentText"&&(e[o]=!0)}return e}();Ce.hasCssProperty=function(n){return n in Ce._cssPropertyDict};Ce.vendorPrefix=function(){var n=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/)||n.OLink===""&&["","o"])[1];return e}();Ce.forceLayoutAtOnce=function(n,e){this.batchImmediate(function(){n.forEach(function(t){t.offsetHeight}),e()})};Ce.batchImmediate=function(){var n=[];return function(e){n.length===0&&setImmediate(function(){var t=n.slice(0);n=[],t.forEach(function(i){i()})}),n.push(e)}}();Ce.batchAnimationFrame=function(){var n=[],e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16.666666666666668)};return function(t){n.length===0&&e(function(){var i=n.slice(0);n=[],i.forEach(function(r){r()})}),n.push(t)}}();Ce.transitionPropertyName=function(){if(Ce.hasCssProperty("transitionDuration"))return"transition";if(Ce.hasCssProperty(Ce.vendorPrefix+"TransitionDuration"))return Ce.vendorPrefix+"Transition";throw new Error("Invalid state")}();var k=function(n,e){if(!(this instanceof k))return new k(n,e);if(n instanceof HTMLElement)this.elements=[n];else if(Object.prototype.toString.call(n)==="[object Array]")this.elements=n;else throw new Error("First argument must be an array or an instance of HTMLElement.");this.defaults=e,this.transitionQueue=[],this.lastStyleAttributeDict=[]};k.prototype={transitionQueue:void 0,elements:void 0,defaults:void 0,play:function(n){return typeof n=="function"&&this.transitionQueue.push(function(e){n(),e()}),this.startAnimation(),this},default:function(n,e,t){function i(r,s,o){return r.duration!==void 0&&(s=r.duration),r.timing!==void 0&&(o=r.timing),{css:r.css||r,duration:s,timing:o}}return this.saveStyle().queue(i(n,0,this.defaults.timing)).wait(t===void 0?this.defaults.delay:t).queue(i(e,this.defaults.duration,this.defaults.timing)).restoreStyle()},queue:function(n,e){var t=this.transitionQueue;if(n&&e&&(e.css=n,n=new k.Transition(e)),n instanceof Function||n instanceof k.Transition||(n.css?n=new k.Transition(n):n=new k.Transition({css:n})),n instanceof Function)t.push(n);else if(n instanceof k.Transition)t.push(n.build());else throw new Error("Invalid arguments");return this},wait:function(n){return n>0&&this.transitionQueue.push(function(e){setTimeout(e,1e3*n)}),this},saveStyle:function(){return this.transitionQueue.push((function(n){this.elements.forEach((function(e,t){for(var i=this.lastStyleAttributeDict[t]={},r=0;r<e.style.length;r++)i[e.style[r]]=e.style[e.style[r]]}).bind(this)),n()}).bind(this)),this},restoreStyle:function(n){n=n||{};var e=this;if(n.transition&&!n.duration)throw new Error('"options.duration" is required when "options.transition" is enabled.');var t=Ce.transitionPropertyName;if(n.transition||n.duration&&n.duration>0){var i=n.transition||"all "+n.duration+"s "+(n.timing||"linear");this.transitionQueue.push(function(s){var o=this.elements,a,c=function(){o.forEach(function(d){d.style[t]=""})},l=Ce.onceOnTransitionEnd(o[0],function(){clearTimeout(a),c(),s()});a=setTimeout(function(){l(),c(),s()},n.duration*1e3*LS),o.forEach(function(d,f){var g=e.lastStyleAttributeDict[f];if(!g)throw new Error("restoreStyle(): The style is not saved. Invoke saveStyle() before.");e.lastStyleAttributeDict[f]=void 0;for(var w,P=0,x=d.style.length;P<x;P++)w=d.style[P],g[w]===void 0&&(g[w]="");d.style[t]=i,Object.keys(g).forEach(function(L){L!==t&&(d.style[L]=g[L])}),d.style[t]=i})})}else this.transitionQueue.push(function(s){r(),s()});return this;function r(){e.elements.forEach(function(s,o){s.style[t]="none";var a=e.lastStyleAttributeDict[o];if(!a)throw new Error("restoreStyle(): The style is not saved. Invoke saveStyle() before.");e.lastStyleAttributeDict[o]=void 0;for(var c=0,l="";c<s.style.length;c++)l=s.style[c],typeof a[s.style[c]]>"u"&&(a[s.style[c]]="");Object.keys(a).forEach(function(d){s.style[d]=a[d]})})}},startAnimation:function(){return this._dequeueTransition(),this},_dequeueTransition:function(){var n=this.transitionQueue.shift();if(this._currentTransition)throw new Error("Current transition exists.");this._currentTransition=n;var e=this,t=!1,i=function(){if(!t)t=!0,e._currentTransition=void 0,e._dequeueTransition();else throw new Error("Invalid state: This callback is called twice.")};n&&n.call(this,i)}};k.runAll=function(){for(var n=0;n<arguments.length;n++)arguments[n].play()};k.Transition=function(n){this.options=n||{},this.options.duration=this.options.duration||0,this.options.timing=this.options.timing||"linear",this.options.css=this.options.css||{},this.options.property=this.options.property||"all"};k.Transition.prototype={build:function(){if(Object.keys(this.options.css).length===0)throw new Error("options.css is required.");var n=i(this.options.css);if(this.options.duration>0){var e=Ce.buildTransitionValue(this.options),t=this;return function(r){var s=this.elements,o=t.options.duration*1e3*LS,a,c=Ce.onceOnTransitionEnd(s[0],function(){clearTimeout(a),r()});a=setTimeout(function(){c(),r()},o),s.forEach(function(l){l.style[Ce.transitionPropertyName]=e,Object.keys(n).forEach(function(d){l.style[d]=n[d]})})}}if(this.options.duration<=0)return function(r){var s=this.elements;s.forEach(function(o){o.style[Ce.transitionPropertyName]="",Object.keys(n).forEach(function(a){o.style[a]=n[a]})}),s.length>0?Ce.forceLayoutAtOnce(s,function(){Ce.batchAnimationFrame(r)}):Ce.batchAnimationFrame(r)};function i(r){var s={};return Object.keys(r).forEach(function(o){var a=r[o];if(Ce.hasCssProperty(o)){s[o]=a;return}var c=Ce.vendorPrefix+Ce.capitalize(o);Ce.hasCssProperty(c)?s[c]=a:(s[c]=a,s[o]=a)}),s}}};var xr,Te,Yt,dr,pe=function n(e,t){return new n.Instance(e,t||{})};pe.defaults={behavior:{touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};pe.DOCUMENT=document;pe.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled;pe.HAS_TOUCHEVENTS="ontouchstart"in window;pe.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent);pe.NO_MOUSEEVENTS=pe.HAS_TOUCHEVENTS&&pe.IS_MOBILE||pe.HAS_POINTEREVENTS;pe.CALCULATE_INTERVAL=25;var So={},$m=pe.DIRECTION_DOWN="down",MS=pe.DIRECTION_LEFT="left",zm=pe.DIRECTION_UP="up",VS=pe.DIRECTION_RIGHT="right",lu=pe.POINTER_MOUSE="mouse",Hh=pe.POINTER_TOUCH="touch",Gh=pe.POINTER_PEN="pen",zn=pe.EVENT_START="start",Rr=pe.EVENT_MOVE="move",Pn=pe.EVENT_END="end",Br=pe.EVENT_RELEASE="release",uu=pe.EVENT_TOUCH="touch";pe.READY=!1;pe.plugins=pe.plugins||{};pe.gestures=pe.gestures||{};function ex(n){pe.READY||(xr.determineEventTypes(),Te.each(pe.gestures,function(e){Yt.register(e)}),xr.onTouch(pe.DOCUMENT,Rr,Yt.detect,n),xr.onTouch(pe.DOCUMENT,Pn,Yt.detect,n),pe.READY=!0)}Te=pe.utils={extend:function(e,t,i){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]===void 0||!i)&&(e[r]=t[r]);return e},on:function(e,t,i,r){m.addEventListener(e,t,i,r,!0)},off:function(e,t,i,r){m.removeEventListener(e,t,i,r,!0)},each:function(e,t,i){var r,s;if("forEach"in e)e.forEach(t,i);else if(e.length!==void 0){for(r=0,s=e.length;r<s;r++)if(t.call(i,e[r],r,e)===!1)return}else for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.call(i,e[r],r,e)===!1)return},inStr:function(e,t){return e.indexOf(t)>-1},inArray:function(e,t,i){if(i){for(var r=0,s=e.length;r<s;r++)if(Object.keys(t).every(function(o){return e[r][o]===t[o]}))return r;return-1}if(e.indexOf)return e.indexOf(t);for(var r=0,s=e.length;r<s;r++)if(e[r]===t)return r;return-1},toArray:function(e){return Array.prototype.slice.call(e,0)},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){var t=[],i=[],r=[],s=[],o=Math.min,a=Math.max;return e.length===1?{pageX:e[0].pageX,pageY:e[0].pageY,clientX:e[0].clientX,clientY:e[0].clientY}:(Te.each(e,function(c){t.push(c.pageX),i.push(c.pageY),r.push(c.clientX),s.push(c.clientY)}),{pageX:(o.apply(Math,t)+a.apply(Math,t))/2,pageY:(o.apply(Math,i)+a.apply(Math,i))/2,clientX:(o.apply(Math,r)+a.apply(Math,r))/2,clientY:(o.apply(Math,s)+a.apply(Math,s))/2})},getVelocity:function(e,t,i){return{x:Math.abs(t/e)||0,y:Math.abs(i/e)||0}},getAngle:function(e,t){var i=t.clientX-e.clientX,r=t.clientY-e.clientY;return Math.atan2(r,i)*180/Math.PI},getDirection:function(e,t){var i=Math.abs(e.clientX-t.clientX),r=Math.abs(e.clientY-t.clientY);return i>=r?e.clientX-t.clientX>0?MS:VS:e.clientY-t.clientY>0?zm:$m},getDistance:function(e,t){var i=t.clientX-e.clientX,r=t.clientY-e.clientY;return Math.sqrt(i*i+r*r)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(e){return e==zm||e==$m},setPrefixedCss:function(e,t,i,r){var s=["","Webkit","Moz","O","ms"];t=Te.toCamelCase(t);for(var o=0;o<s.length;o++){var a=t;if(s[o]&&(a=s[o]+a.slice(0,1).toUpperCase()+a.slice(1)),a in e.style){e.style[a]=(r===null||r)&&i||"";break}}},toggleBehavior:function(e,t,i){if(!(!t||!e||!e.style)){Te.each(t,function(s,o){Te.setPrefixedCss(e,o,s,i)});var r=i&&function(){return!1};t.userSelect=="none"&&(e.onselectstart=r),t.userDrag=="none"&&(e.ondragstart=r)}},toCamelCase:function(e){return e.replace(/[_-]([a-z])/g,function(t){return t[1].toUpperCase()})}};xr=pe.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(e,t,i,r,s){var o=t.split(" ");Te.each(o,function(a){Te.on(e,a,i,r),s&&s(a)})},off:function(e,t,i,r,s){var o=t.split(" ");Te.each(o,function(a){Te.off(e,a,i,r),s&&s(a)})},onTouch:function(e,t,i,r){var s=this,o=function(c){var l=c.type.toLowerCase(),d=pe.HAS_POINTEREVENTS,f=Te.inStr(l,"mouse"),g;f&&s.preventMouseEvents||(f&&t==zn&&c.button===0?(s.preventMouseEvents=!1,s.shouldDetect=!0):d&&t==zn?s.shouldDetect=c.buttons===1||dr.matchType(Hh,c):!f&&t==zn&&(s.preventMouseEvents=!0,s.shouldDetect=!0),d&&t!=Pn&&dr.updatePointer(t,c),s.shouldDetect&&(g=s.doDetect.call(s,c,t,e,i)),g==Pn&&(s.preventMouseEvents=!1,s.shouldDetect=!1,dr.reset()),d&&t==Pn&&dr.updatePointer(t,c))};return this.on(e,So[t],o,r),o},doDetect:function(e,t,i,r){var s=this.getTouchList(e,t),o=s.length,a=t,c=s.trigger,l=o;t==zn?c=uu:t==Pn&&(c=Br,l=s.length-(e.changedTouches?e.changedTouches.length:1)),l>0&&this.started&&(a=Rr),this.started=!0;var d=this.collectEventData(i,a,s,e);return t!=Pn&&r.call(Yt,d),c&&(d.changedLength=l,d.eventType=c,r.call(Yt,d),d.eventType=a,delete d.changedLength),a==Pn&&(r.call(Yt,d),this.started=!1),a},determineEventTypes:function(){var e;return pe.HAS_POINTEREVENTS?window.PointerEvent?e=["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:e=["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:pe.NO_MOUSEEVENTS?e=["touchstart","touchmove","touchend touchcancel"]:e=["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],So[zn]=e[0],So[Rr]=e[1],So[Pn]=e[2],So},getTouchList:function(e,t){if(pe.HAS_POINTEREVENTS)return dr.getTouchList();if(e.touches){if(t==Rr)return e.touches;var i=[],r=[].concat(Te.toArray(e.touches),Te.toArray(e.changedTouches)),s=[];return Te.each(r,function(o){Te.inArray(i,o.identifier)===-1&&s.push(o),i.push(o.identifier)}),s}return e.identifier=1,[e]},collectEventData:function(e,t,i,r){var s=Hh;return Te.inStr(r.type,"mouse")||dr.matchType(lu,r)?s=lu:dr.matchType(Gh,r)&&(s=Gh),{center:Te.getCenter(i),timeStamp:Date.now(),target:r.target,touches:i,eventType:t,pointerType:s,srcEvent:r,preventDefault:function(){var o=this.srcEvent;o.preventManipulation&&o.preventManipulation(),o.preventDefault&&o.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return Yt.stopDetect()}}}};dr=pe.PointerEvent={pointers:{},getTouchList:function(){var e=[];return Te.each(this.pointers,function(t){e.push(t)}),e},updatePointer:function(e,t){e==Pn||e!=Pn&&t.buttons!==1?delete this.pointers[t.pointerId]:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t)},matchType:function(e,t){if(!t.pointerType)return!1;var i=t.pointerType,r={};return r[lu]=i===(t.MSPOINTER_TYPE_MOUSE||lu),r[Hh]=i===(t.MSPOINTER_TYPE_TOUCH||Hh),r[Gh]=i===(t.MSPOINTER_TYPE_PEN||Gh),r[e]},reset:function(){this.pointers={}}};Yt=pe.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(e,t){this.current||(this.stopped=!1,this.current={inst:e,startEvent:Te.extend({},t),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(t))},detect:function(e){if(!(!this.current||this.stopped)){e=this.extendEventData(e);var t=this.current.inst,i=t.options;return Te.each(this.gestures,function(s){!this.stopped&&t.enabled&&i[s.name]&&s.handler.call(s,e,t)},this),this.current&&(this.current.lastEvent=e),e.eventType==Pn&&this.stopDetect(),e}},stopDetect:function(){this.previous=Te.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(e,t,i,r,s){var o=this.current,a=!1,c=o.lastCalcEvent,l=o.lastCalcData;c&&e.timeStamp-c.timeStamp>pe.CALCULATE_INTERVAL&&(t=c.center,i=e.timeStamp-c.timeStamp,r=e.center.clientX-c.center.clientX,s=e.center.clientY-c.center.clientY,a=!0),(e.eventType==uu||e.eventType==Br)&&(o.futureCalcEvent=e),(!o.lastCalcEvent||a)&&(l.velocity=Te.getVelocity(i,r,s),l.angle=Te.getAngle(t,e.center),l.direction=Te.getDirection(t,e.center),o.lastCalcEvent=o.futureCalcEvent||e,o.futureCalcEvent=e),e.velocityX=l.velocity.x,e.velocityY=l.velocity.y,e.interimAngle=l.angle,e.interimDirection=l.direction},extendEventData:function(e){var t=this.current,i=t.startEvent,r=t.lastEvent||i;(e.eventType==uu||e.eventType==Br)&&(i.touches=[],Te.each(e.touches,function(c){i.touches.push({clientX:c.clientX,clientY:c.clientY})}));var s=e.timeStamp-i.timeStamp,o=e.center.clientX-i.center.clientX,a=e.center.clientY-i.center.clientY;return this.getCalculatedData(e,r.center,s,o,a),Te.extend(e,{startEvent:i,deltaTime:s,deltaX:o,deltaY:a,distance:Te.getDistance(i.center,e.center),angle:Te.getAngle(i.center,e.center),direction:Te.getDirection(i.center,e.center),scale:Te.getScale(i.touches,e.touches),rotation:Te.getRotation(i.touches,e.touches)}),e},register:function(e){var t=e.defaults||{};return t[e.name]===void 0&&(t[e.name]=!0),Te.extend(pe.defaults,t,!0),e.index=e.index||1e3,this.gestures.push(e),this.gestures.sort(function(i,r){return i.index<r.index?-1:i.index>r.index?1:0}),this.gestures}};pe.Instance=function(n,e){var t=this,i=e&&e.passive?{passive:!0}:void 0;ex(i),this.element=n,this.enabled=!0,Te.each(e,function(r,s){delete e[s],e[Te.toCamelCase(s)]=r}),this.options=Te.extend(Te.extend({},pe.defaults),e||{}),this.options.listenerOptions=i,this.options.behavior&&Te.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=xr.onTouch(n,zn,function(r){t.enabled&&r.eventType==zn?Yt.startDetect(t,r):r.eventType==uu&&Yt.detect(r)},i),this.eventHandlers=[]};pe.Instance.prototype={on:function(e,t,i){var r=this;return xr.on(r.element,e,t,m.extend({},r.options.listenerOptions,i),function(s){r.eventHandlers.push({gesture:s,handler:t})}),r},off:function(e,t,i){var r=this;return xr.off(r.element,e,t,m.extend({},r.options.listenerOptions,i),function(s){var o=Te.inArray(r.eventHandlers,{gesture:s,handler:t},!0);o>=0&&r.eventHandlers.splice(o,1)}),r},trigger:function(e,t){t||(t={});var i=pe.DOCUMENT.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=t;var r=this.element;return Te.hasParent(t.target,r)&&(r=t.target),r.dispatchEvent(i),this},enable:function(e){return this.enabled=e,this},dispose:function(){var e,t;for(Te.toggleBehavior(this.element,this.options.behavior,!1),e=-1;t=this.eventHandlers[++e];)Te.off(this.element,t.gesture,t.handler);return this.eventHandlers=[],xr.off(this.element,So[zn],this.eventStartHandler),null}};(function(n){var e=!1;function t(i,r){var s=Yt.current;if(!(r.options.dragMaxTouches>0&&i.touches.length>r.options.dragMaxTouches))switch(i.eventType){case zn:e=!1;break;case Rr:if(i.distance<r.options.dragMinDistance&&s.name!=n)return;var o=s.startEvent.center;if(s.name!=n&&(s.name=n,r.options.dragDistanceCorrection&&i.distance>0)){var a=Math.abs(r.options.dragMinDistance/i.distance);o.pageX+=i.deltaX*a,o.pageY+=i.deltaY*a,o.clientX+=i.deltaX*a,o.clientY+=i.deltaY*a,i=Yt.extendEventData(i)}(s.lastEvent.dragLockToAxis||r.options.dragLockToAxis&&r.options.dragLockMinDistance<=i.distance)&&(i.dragLockToAxis=!0);var c=s.lastEvent.direction;i.dragLockToAxis&&c!==i.direction&&(Te.isVertical(c)?i.direction=i.deltaY<0?zm:$m:i.direction=i.deltaX<0?MS:VS),e||(r.trigger(n+"start",i),e=!0),r.trigger(n,i),r.trigger(n+i.direction,i);var l=Te.isVertical(i.direction);(r.options.dragBlockVertical&&l||r.options.dragBlockHorizontal&&!l)&&i.preventDefault();break;case Br:e&&i.changedLength<=r.options.dragMaxTouches&&(r.trigger(n+"end",i),e=!1);break;case Pn:e=!1;break}}pe.gestures.Drag={name:n,index:50,handler:t,defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}})("drag");pe.gestures.Gesture={name:"gesture",index:1337,handler:function(e,t){t.trigger(this.name,e)}};(function(n){var e;function t(i,r){var s=r.options,o=Yt.current;switch(i.eventType){case zn:clearTimeout(e),o.name=n,e=setTimeout(function(){o&&o.name==n&&r.trigger(n,i)},s.holdTimeout);break;case Rr:i.distance>s.holdThreshold&&clearTimeout(e);break;case Br:clearTimeout(e);break}}pe.gestures.Hold={name:n,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:t}})("hold");pe.gestures.Release={name:"release",index:1/0,handler:function(e,t){e.eventType==Br&&t.trigger(this.name,e)}};pe.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(e,t){if(e.eventType==Br){var i=e.touches.length,r=t.options;if(i<r.swipeMinTouches||i>r.swipeMaxTouches)return;(e.velocityX>r.swipeVelocityX||e.velocityY>r.swipeVelocityY)&&(t.trigger(this.name,e),t.trigger(this.name+e.direction,e))}}};(function(n){var e=!1;function t(i,r){var s=r.options,o=Yt.current,a=Yt.previous,c,l;switch(i.eventType){case zn:e=!1;break;case Rr:e=e||i.distance>s.tapMaxDistance;break;case Pn:!Te.inStr(i.srcEvent.type,"cancel")&&i.deltaTime<s.tapMaxTime&&!e&&(c=a&&a.lastEvent&&i.timeStamp-a.lastEvent.timeStamp,l=!1,a&&a.name==n&&c&&c<s.doubleTapInterval&&i.distance<s.doubleTapDistance&&(r.trigger("doubletap",i),l=!0),(!l||s.tapAlways)&&(o.name=n,r.trigger(o.name,i)));break}}pe.gestures.Tap={name:n,index:100,handler:t,defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}})("tap");pe.gestures.Touch={name:"touch",index:-1/0,defaults:{preventDefault:!1,preventMouse:!1},handler:function(e,t){if(t.options.preventMouse&&e.pointerType==lu){e.stopDetect();return}t.options.preventDefault&&e.preventDefault(),e.eventType==uu&&t.trigger("touch",e)}};(function(n){var e=!1;function t(i,r){switch(i.eventType){case zn:e=!1;break;case Rr:if(i.touches.length<2)return;var s=Math.abs(1-i.scale),o=Math.abs(i.rotation);if(s<r.options.transformMinScale&&o<r.options.transformMinRotation)return;Yt.current.name=n,e||(r.trigger(n+"start",i),e=!0),r.trigger(n,i),o>r.options.transformMinRotation&&r.trigger("rotate",i),s>r.options.transformMinScale&&(r.trigger("pinch",i),r.trigger("pinch"+(i.scale<1?"in":"out"),i));break;case Br:e&&i.changedLength<2&&(r.trigger(n+"end",i),e=!1);break}}pe.gestures.Transform={name:n,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:t}})("transform");let Wh,Xo;function tx(n){return n.childNodes.length>0&&jm(n),Wh.has(n)}function jm(n){Wh.set(n,!0)}function nx(n,e){Xo.has(n)||Xo.set(n,[]),Xo.get(n).push(e)}function Zf(n){const e=Xo.get(n,[])||[];Xo.delete(n),e.forEach(t=>t())}function Z(n,e=()=>{}){if(Wh===void 0&&(Wh=new WeakMap,Xo=new WeakMap),nx(n,e),tx(n)){Zf(n);return}new MutationObserver(i=>{jm(n),Zf(n)}).observe(n,{childList:!0,characterData:!0}),setImmediate(()=>{jm(n),Zf(n)})}class ix{constructor(){this.queue=[]}add(e,t){this.queue.push(e),this.queue.length===1&&setImmediate(this.queue[0]),t.then(()=>{this.queue.shift(),this.queue.length>0&&setTimeout(this.queue[0],1e3/30)})}}const rx=new ix,BS=(n,e)=>{["id","class","animation"].forEach(t=>Object.prototype.hasOwnProperty.call(e,t)&&n.setAttribute(t,e[t])),e.modifier&&m.addModifier(n,e.modifier)},FS=(n,e={},t={})=>(e={...e},typeof n=="string"?e.message=n:e=n,(!e||!e.message&&!e.messageHTML)&&m.throw("Notifications must contain a message"),(Object.prototype.hasOwnProperty.call(e,"buttonLabels")||Object.prototype.hasOwnProperty.call(e,"buttonLabel"))&&(e.buttonLabels=e.buttonLabels||e.buttonLabel,Array.isArray(e.buttonLabels)||(e.buttonLabels=[e.buttonLabels||""])),m.extend({compile:i=>i,callback:i=>i,animation:"default",cancelable:!1,primaryButtonIndex:(e.buttonLabels||t.buttonLabels||[]).length-1},t,e)),zi={};zi._createAlertDialog=(...n)=>new Promise(e=>{const t=FS(...n);m.checkMissingImport("AlertDialog","AlertDialogButton");let i="";t.isPrompt&&(i=`
      <input
        class="text-input text-input--underbar"
        type="${t.inputType||"text"}"
        placeholder="${t.placeholder||""}"
        value="${t.defaultValue||""}"
        style="width: 100%; margin-top: 10px;"
      />
    `);let r="";t.buttonLabels.forEach((a,c)=>{r+=`
      <ons-alert-dialog-button
        class="
          ${c===t.primaryButtonIndex?" alert-dialog-button--primal":""}
          ${t.buttonLabels.length<=2?" alert-dialog-button--rowfooter":""}
        "
        style="position: relative;">
        ${a}
      </ons-alert-dialog-button>
    `});let s={};const o=()=>{s.dialog.onDialogCancel&&s.dialog.removeEventListener("dialogcancel",s.dialog.onDialogCancel),Object.keys(s).forEach(a=>delete s[a]),s=null,t.destroy instanceof Function&&t.destroy()};s.dialog=document.createElement("ons-alert-dialog"),s.dialog.innerHTML=`
    <div class="alert-dialog-mask"
      style="
        ${t.maskColor?"background-color: "+t.maskColor:""}
      "></div>
    <div class="alert-dialog">
      <div class="alert-dialog-container">
        <div class="alert-dialog-title">
          ${t.title||""}
        </div>
        <div class="alert-dialog-content">
          ${t.message||t.messageHTML}
          ${i}
        </div>
        <div class="
          alert-dialog-footer
          ${t.buttonLabels.length<=2?" alert-dialog-footer--rowfooter":""}
        ">
          ${r}
        </div>
      </div>
    </div>
  `,Z(s.dialog),BS(s.dialog,t),t.isPrompt&&(s.input=s.dialog.querySelector(".text-input"),t.submitOnEnter&&(s.input.onkeypress=a=>{a.keyCode===13&&s.dialog.hide().then(()=>{if(s){const c=s.input.value;o(),t.callback(c),e(c)}})})),s.footer=s.dialog.querySelector(".alert-dialog-footer"),m.arrayFrom(s.dialog.querySelectorAll(".alert-dialog-button")).forEach((a,c)=>{a.onclick=()=>{s.dialog.hide().then(()=>{if(s){let l=c;t.isPrompt&&(l=c===t.primaryButtonIndex?s.input.value:null),s.dialog.remove(),o(),t.callback(l),e(l)}})},s.footer.appendChild(a)}),t.cancelable&&(s.dialog.cancelable=!0,s.dialog.onDialogCancel=()=>{setImmediate(()=>{s.dialog.remove(),o()});const a=t.isPrompt?null:-1;t.callback(a),e(a)},s.dialog.addEventListener("dialogcancel",s.dialog.onDialogCancel,!1)),document.body.appendChild(s.dialog),t.compile(s.dialog),setImmediate(()=>{s.dialog.show().then(()=>{if(s.input&&t.isPrompt&&t.autofocus){const a=s.input.value.length;s.input.focus(),s.input.type&&["text","search","url","tel","password"].includes(s.input.type)&&s.input.setSelectionRange(a,a)}})})});zi.alert=(n,e)=>zi._createAlertDialog(n,e,{buttonLabels:["OK"],title:"Alert"});zi.confirm=(n,e)=>zi._createAlertDialog(n,e,{buttonLabels:["Cancel","OK"],title:"Confirm"});zi.prompt=(n,e)=>zi._createAlertDialog(n,e,{buttonLabels:["OK"],title:"Alert",isPrompt:!0,autofocus:!0,submitOnEnter:!0});zi.toast=(n,e)=>{const t=new Promise(i=>{m.checkMissingImport("Toast"),e=FS(n,e,{timeout:0,force:!1});let r=m.createElement(`
      <ons-toast>
        ${e.message}
        ${e.buttonLabels?`<button>${e.buttonLabels[0]}</button>`:""}
      </ons-toast>
    `);BS(r,e);const s=r.hide.bind(r),o=c=>{r&&s().then(()=>{r&&(r.remove(),r=null,e.callback(c),i(c))})};e.buttonLabels&&(m.findChild(r._toast,"button").onclick=()=>o(0)),r.hide=()=>o(-1),document.body.appendChild(r),e.compile(r);const a=()=>{r.parentElement&&r.show(e).then(()=>{e.timeout&&setTimeout(()=>o(-1),e.timeout)})};setImmediate(()=>e.force?a():rx.add(a,t))});return t};const sx=n=>{const e=(c,l="Function")=>m.throw(`"options.${c}" must be an instance of ${l}`),t=c=>Object.hasOwnProperty.call(n,c),i=(c,l=Function)=>n[c]instanceof l,r="buttons",s="callback",o="compile",a="destroy";(!t(r)||!i(r,Array))&&e(r,"Array"),t(s)&&!i(s)&&e(s),t(o)&&!i(o)&&e(o),t(a)&&!i(a)&&e(a)},ox=(n={})=>new Promise(e=>{m.checkMissingImport("ActionSheet"),sx(n);let t=m.createElement(`
    <ons-action-sheet
      ${n.title?`title="${n.title}"`:""}
      ${n.cancelable?"cancelable":""}
      ${n.modifier?`modifier="${n.modifier}"`:""}
      ${n.maskColor?`mask-color="${n.maskColor}"`:""}
      ${n.id?`id="${n.id}"`:""}
      ${n.class?`class="${n.class}"`:""}
    >
      <div class="action-sheet"></div>
    </ons-action-sheet>
  `);const i=(s,o=-1)=>{t&&(n.destroy&&n.destroy(t),t.removeEventListener("dialogcancel",i,!1),t.remove(),t=null,n.callback&&n.callback(o),e(o))};t.addEventListener("dialogcancel",i,!1);const r=document.createDocumentFragment();n.buttons.forEach((s,o)=>{const a=typeof s=="string"?{label:s}:{...s};n.destructive===o&&(a.modifier=(a.modifier||"")+" destructive");const c=m.createElement(`
      <ons-action-sheet-button
        ${a.icon?`icon="${a.icon}"`:""}
        ${a.modifier?`modifier="${a.modifier}"`:""}
      >
        ${a.label}
      </ons-action-sheet-button>
    `);c.onclick=l=>t.hide().then(()=>i(l,o)),r.appendChild(c)}),m.findChild(t,".action-sheet").appendChild(r),document.body.appendChild(t),n.compile&&n.compile(el.dialog),setImmediate(()=>t.show({animation:n.animation,animationOptions:n.animationOptions}))}),ax=()=>{const n={_isPortrait:!1,isPortrait:function(){return this._isPortrait()},isLandscape:function(){return!this.isPortrait()},_init:function(){return document.addEventListener("DOMContentLoaded",this._onDOMContentLoaded.bind(this),!1),"orientation"in window?window.addEventListener("orientationchange",this._onOrientationChange.bind(this),!1):window.addEventListener("resize",this._onResize.bind(this),!1),this._isPortrait=function(){return window.innerHeight>window.innerWidth},this},_onDOMContentLoaded:function(){this._installIsPortraitImplementation(),this.emit("change",{isPortrait:this.isPortrait()})},_installIsPortraitImplementation:function(){const e=window.innerWidth<window.innerHeight;"orientation"in window?window.orientation%180===0?this._isPortrait=function(){return Math.abs(window.orientation%180)===0?e:!e}:this._isPortrait=function(){return Math.abs(window.orientation%180)===90?e:!e}:this._isPortrait=function(){return window.innerHeight>window.innerWidth}},_onOrientationChange:function(){const e=this._isPortrait();let t=0;const i=setInterval(()=>{t++;const r=window.innerWidth,s=window.innerHeight;e&&r<=s||!e&&r>=s?(this.emit("change",{isPortrait:e}),clearInterval(i)):t===50&&(this.emit("change",{isPortrait:e}),clearInterval(i))},20)},_onResize:function(){this.emit("change",{isPortrait:this.isPortrait()})}};return xs.mixin(n),n},sh=ax()._init(),lx={add:(n,...e)=>e.forEach(t=>m.addModifier(n,t)),remove:(n,...e)=>e.forEach(t=>m.removeModifier(n,t)),contains:m.hasModifier,toggle:m.toggleModifier},ji=new xs;ji._visible=!1;const Wb=()=>{ji._visible=!0,ji.emit("show")},Kb=()=>{ji._visible=!1,ji.emit("hide")},ux=()=>typeof Keyboard<"u"?(Keyboard.onshow=Wb,Keyboard.onhide=Kb,ji.emit("init",{visible:Keyboard.isVisible}),!0):typeof cordova.plugins<"u"&&typeof cordova.plugins.Keyboard<"u"?(window.addEventListener("native.keyboardshow",Wb),window.addEventListener("native.keyboardhide",Kb),ji.emit("init",{visible:cordova.plugins.Keyboard.isVisible}),!0):!1,Qb=()=>{m.warn("ons-keyboard: Cordova Keyboard plugin is not present.")};document.addEventListener("deviceready",()=>{ux()||((document.querySelector("[ons-keyboard-active]")||document.querySelector("[ons-keyboard-inactive]"))&&Qb(),ji.on=Qb)});const cx=function(){let n=0;return function(){return n++}}();class v_{constructor(e={}){this._lockList=[],this._waitList=[],this._log=e.log||function(){}}lock(){const e=()=>{this._unlock(e)};return e.id=cx(),this._lockList.push(e),this._log("lock: "+e.id),e}_unlock(e){const t=this._lockList.indexOf(e);if(t===-1)throw new Error("This function is not registered in the lock list.");this._lockList.splice(t,1),this._log("unlock: "+e.id),this._tryToFreeWaitList()}_tryToFreeWaitList(){for(;!this.isLocked()&&this._waitList.length>0;)this._waitList.shift()()}waitUnlock(e){if(!(e instanceof Function))throw new Error("The callback param must be a function.");this.isLocked()?this._waitList.push(e):e()}isLocked(){return this._lockList.length>0}}function hx({page:n,parent:e,params:t={}},i,r){ke.getPageHTMLAsync(n).then(s=>{const o=m.createElement(s);e.appendChild(o),i(o)}).catch(s=>r(s))}function $S(n){n._destroy instanceof Function?n._destroy():n.remove()}class Js{constructor(e,t){this._loader=e instanceof Function?e:hx,this._unloader=t instanceof Function?t:$S}set internalLoader(e){if(!(e instanceof Function))throw Error("First parameter must be an instance of Function");this._loader=e}get internalLoader(){return this._loader}load({page:e,parent:t,params:i={}},r,s){this._loader({page:e,parent:t,params:i},o=>{if(!(o instanceof Element))throw Error("pageElement must be an instance of Element.");r(o)},s)}unload(e){if(!(e instanceof Element))throw Error("pageElement must be an instance of Element.");this._unloader(e)}}const Nu=new Js,Xb=new Js(function({page:n,parent:e,params:t={}},i){const r=m.createElement(n.trim());e.appendChild(r),i(r)},$S),ye={animit:k,defaultPageLoader:Nu,elements:ve,GestureDetector:pe,modifier:lx,notification:zi,orientation:sh,pageAttributeExpression:Du,PageLoader:Js,platform:qe,softwareKeyboard:ji,_autoStyle:Be,_internal:ke,_readyLock:new v_,_util:m};ye.platform.select((window.location.search.match(/platform=([\w-]+)/)||[])[1]);dx();const Ca=n=>m.throw(`This method must be called ${n?"after":"before"} ons.isReady() is true`);ye.isReady=()=>!ye._readyLock.isLocked();ye.isWebView=ye.platform.isWebView;ye.ready=n=>{ye.isReady()?n():ye._readyLock.waitUnlock(n)};ye.setDefaultDeviceBackButtonListener=function(n){ye.isReady()||Ca(!0),ye._defaultDeviceBackButtonHandler.setListener(n)};ye.disableDeviceBackButtonHandler=function(){ye.isReady()||Ca(!0),ke.dbbDispatcher.disable()};ye.enableDeviceBackButtonHandler=function(){ye.isReady()||Ca(!0),ke.dbbDispatcher.enable()};ye.fireDeviceBackButtonEvent=function(){ke.dbbDispatcher.fireDeviceBackButtonEvent()};ye.enableAutoStatusBarFill=()=>{ye.isReady()&&Ca(!1),ke.config.autoStatusBarFill=!0};ye.disableAutoStatusBarFill=()=>{ye.isReady()&&Ca(!1),ke.config.autoStatusBarFill=!1};ye.mockStatusBar=()=>{ye.isReady()&&Ca(!1);const n=()=>{if(!document.body.children[0]||!document.body.children[0].classList.contains("ons-status-bar-mock")){const e=qe.isAndroid(),t=o=>`<i class="${o.split("-")[0]} ${o}"></i>`,i=e?`${t("zmdi-twitter")} ${t("zmdi-google-play")}`:`No SIM ${t("fa-wifi")}`,r=e?"":"12:28 PM",s=e?`${t("zmdi-network")} ${t("zmdi-wifi")} ${t("zmdi-battery")} 12:28 PM`:`80% ${t("fa-battery-three-quarters")}`;document.body.insertBefore(m.createElement(`<div class="ons-status-bar-mock ${e?"android":"ios"}"><div>${i}</div><div>${r}</div><div>${s}</div></div>`),document.body.firstChild)}};document.body?n():ke.waitDOMContentLoaded(n)};ye.disableAnimations=()=>{ke.config.animationsDisabled=!0};ye.enableAnimations=()=>{ke.config.animationsDisabled=!1};ye._disableWarnings=()=>{ke.config.warningsDisabled=!0};ye._enableWarnings=()=>{ke.config.warningsDisabled=!1};ye.disableAutoStyling=Be.disable;ye.enableAutoStyling=Be.enable;ye.disableIconAutoPrefix=()=>{m.checkMissingImport("Icon"),ve.Icon.setAutoPrefix(!1)};ye.forcePlatformStyling=n=>{ye.enableAutoStyling(),ye.platform.select(n||"ios"),ye._util.arrayFrom(document.querySelectorAll("*")).forEach(function(e){e.tagName.toLowerCase()==="ons-if"?e._platformUpdate():e.tagName.match(/^ons-/i)&&(Be.prepare(e,!0),e.tagName.toLowerCase()==="ons-tabbar"&&e._updatePosition())})};ye.preload=function(n=[]){return Promise.all((n instanceof Array?n:[n]).map(e=>(typeof e!="string"&&m.throw("Expected string arguments but got "+typeof e),ke.getTemplateHTMLAsync(e))))};ye.createElement=(n,e={})=>{n=n.trim();const t=i=>{const r=ye._util.createElement(i);return r.remove(),e.append&&((e.append instanceof HTMLElement?e.append:document.body).insertBefore(r,e.insertBefore||null),e.link instanceof Function&&e.link(r)),r};return n.charAt(0)==="<"?t(n):ke.getPageHTMLAsync(n).then(t)};ye.createPopover=ye.createDialog=ye.createAlertDialog=(n,e={})=>ye.createElement(n,{append:!0,...e});ye.openActionSheet=ox;ye.resolveLoadingPlaceholder=(n,e)=>{const t=ye._util.arrayFrom(window.document.querySelectorAll("[ons-loading-placeholder]"));t.length===0&&m.throw("No ons-loading-placeholder exists"),t.filter(i=>!i.getAttribute("page")).forEach(i=>{i.setAttribute("ons-loading-placeholder",n),ye._resolveLoadingPlaceholder(i,n,e)})};ye._setupLoadingPlaceHolders=function(){ye.ready(()=>{ye._util.arrayFrom(window.document.querySelectorAll("[ons-loading-placeholder]")).forEach(e=>{const t=e.getAttribute("ons-loading-placeholder");typeof t=="string"&&ye._resolveLoadingPlaceholder(e,t)})})};ye._resolveLoadingPlaceholder=function(n,e,t=(i,r)=>r()){e&&ye.createElement(e).then(i=>{i.style.display="none",n.appendChild(i),t(i,()=>{for(;n.firstChild&&n.firstChild!==i;)n.removeChild(n.firstChild);i.style.display=""})}).catch(i=>Promise.reject("Unabled to resolve placeholder: "+i))};function dx(){const n=ye._readyLock.lock();window.addEventListener("DOMContentLoaded",()=>{ye.isWebView()?window.document.addEventListener("deviceready",n,{once:!0}):n()},{once:!0})}const ep="currentScript"in document?()=>document.currentScript:()=>document.scripts[document.scripts.length-1];ye.getScriptPage=()=>ep()&&/ons-page/i.test(ep().parentElement.tagName)&&ep().parentElement||null;Zk(ye);const fx=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"})),px=be(fx);var tp={exports:{}},np,Yb;function mx(){if(Yb)return np;Yb=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return np=n,np}var ip,Jb;function gx(){if(Jb)return ip;Jb=1;var n=mx();function e(){}function t(){}return t.resetWarningCache=e,ip=function(){function i(o,a,c,l,d,f){if(f!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},ip}var Zb;function _x(){return Zb||(Zb=1,tp.exports=gx()()),tp.exports}class Gi{constructor(e={}){this.timing=e.timing||"linear",this.duration=e.duration||0,this.delay=e.delay||0,this.def={timing:this.timing,duration:this.duration,delay:this.delay}}static extend(e={}){const t=this,i=function(){t.apply(this,arguments),m.extend(this,e)};return i.prototype=this.prototype,i}}const Ot={};Ot.isIPhoneXPortraitPatchActive=()=>document.documentElement.getAttribute("onsflag-iphonex-portrait")!=null&&window.innerWidth<window.innerHeight;Ot.isIPhoneXLandscapePatchActive=()=>document.documentElement.getAttribute("onsflag-iphonex-landscape")!=null&&window.innerWidth>=window.innerHeight;Ot.getSafeAreaLengths=()=>{let n;return Ot.isIPhoneXPortraitPatchActive()?n={top:44,right:0,bottom:34,left:0}:Ot.isIPhoneXLandscapePatchActive()?n={top:0,right:44,bottom:21,left:44}:n={top:0,right:0,bottom:0,left:0},n};Ot.getSafeAreaDOMRect=()=>{let n;return Ot.isIPhoneXPortraitPatchActive()?n={x:0,y:44,width:window.innerWidth,height:window.innerHeight-78}:Ot.isIPhoneXLandscapePatchActive()?n={x:44,y:0,width:window.innerWidth-88,height:window.innerHeight-21}:n={x:0,y:0,width:window.innerWidth,height:window.innerHeight},{...n,left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height}};class Yo extends Gi{constructor({timing:e="linear",delay:t=0,duration:i=.2}={}){super({timing:e,delay:t,duration:i})}show(e,t){t()}hide(e,t){t()}}class yx extends Yo{constructor({timing:e="ease",delay:t=0,duration:i=.4}={}){super({timing:e,delay:t,duration:i}),this.maskTiming="linear",this.maskDuration=.2}show(e,t){k.runAll(k(e._mask).queue({opacity:0}).wait(this.delay).queue({opacity:1},{duration:this.maskDuration,timing:this.maskTiming}),k(e._sheet,this.def).default({transform:"translate3d(0, 80%, 0)",opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}).queue(i=>{t&&t(),i()}))}hide(e,t){k.runAll(k(e._mask).queue({opacity:1}).wait(this.delay).queue({opacity:0},{duration:this.maskDuration,timing:this.maskTiming}),k(e._sheet,this.def).default({transform:"translate3d(0, 0, 0)",opacity:1},{transform:"translate3d(0, 80%, 0)",opacity:0}).queue(i=>{t&&t(),i()}))}}class vx extends Yo{constructor({timing:e="ease",delay:t=0,duration:i=.3}={}){super({timing:e,delay:t,duration:i}),this.maskTiming="linear",this.maskDuration=.2,Ot.isIPhoneXPortraitPatchActive()?this.liftAmount="calc(100% + 48px)":Ot.isIPhoneXLandscapePatchActive()?this.liftAmount="calc(100% + 33px)":this.liftAmount=document.body.clientHeight/2-1+"px"}show(e,t){k.runAll(k(e._mask).queue({opacity:0}).wait(this.delay).queue({opacity:1},{duration:this.maskDuration,timing:this.maskTiming}),k(e._sheet,this.def).default({transform:`translate3d(0, ${this.liftAmount}, 0)`},{transform:"translate3d(0, 0, 0)"}).queue(i=>{t&&t(),i()}))}hide(e,t){k.runAll(k(e._mask).queue({opacity:1}).wait(this.delay).queue({opacity:0},{duration:this.maskDuration,timing:this.maskTiming}),k(e._sheet,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:`translate3d(0, ${this.liftAmount}, 0)`}).queue(i=>{t&&t(),i()}))}}function bx(){if(typeof HTMLElement!="function"){const n=()=>{};return n.prototype=document.createElement("div"),n}else return HTMLElement}class Oe extends bx(){constructor(){super()}}class Wi extends Oe{get _scheme(){m.throwMember()}_updateAnimatorFactory(){m.throwMember()}_toggleStyle(e){this.style.display=e?"block":"none"}constructor(){super(),this.constructor===Wi&&m.throwAbstract(),this._visible=!1,this._doorLock=new v_,this._cancel=this._cancel.bind(this),this._selfCamelName=m.camelize(this.tagName.slice(4)),this._defaultDBB=e=>this.cancelable?this._cancel():e.callParentHandler(),this._animatorFactory=this._updateAnimatorFactory()}get onDeviceBackButton(){return this._backButtonHandler}set onDeviceBackButton(e){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonCallback=e,this._backButtonHandler=Ou.createHandler(this,e)}_cancel(){this.cancelable&&!this._running&&(this._running=!0,this.hide().then(()=>{this._running=!1,m.triggerElementEvent(this,"dialogcancel"),m.triggerElementEvent(this,"dialog-cancel")},()=>this._running=!1))}show(...e){return this._setVisible(!0,...e).then(t=>(this.visible=!0,t))}hide(...e){return this._setVisible(!1,...e).then(t=>(this.visible=!1,t))}toggle(...e){return this._setVisible(!this.visible,...e).then(t=>(this.visible=this._visible,t))}_setVisible(e,t={}){const i=e?"show":"hide";t={...t},t.animationOptions=m.extend(t.animationOptions||{},this.animationOptions);let r=!1;return m.triggerElementEvent(this,`pre${i}`,{[this._selfCamelName]:this,cancel:()=>r=!0}),r?Promise.reject(`Canceled in pre${i} event.`):new Promise(s=>{this._doorLock.waitUnlock(()=>{const o=this._doorLock.lock(),a=this._animatorFactory.newAnimator(t);e&&this._toggleStyle(!0,t),this._visible=e,m.iosPageScrollFix(e),Z(this,()=>{a[i](this,()=>{!e&&this._toggleStyle(!1,t),o(),m.propagateAction(this,"_"+i),m.triggerElementEvent(this,"post"+i,{[this._selfCamelName]:this}),t.callback instanceof Function&&t.callback(this),s(this)})})})})}get maskColor(){return this.getAttribute("mask-color")}set maskColor(e){e==null?this.removeAttribute("mask-color"):this.setAttribute("mask-color",e)}get animationOptions(){return On.parseAnimationOptionsString(this.getAttribute("animation-options"))}set animationOptions(e){e==null?this.removeAttribute("animation-options"):this.setAttribute("animation-options",JSON.stringify(e))}_updateMask(){Z(this,()=>{this._mask&&(this._mask.style.backgroundColor=this.maskColor)})}_updateAnimation(){this._animatorFactory=this._updateAnimatorFactory()}connectedCallback(){typeof this._backButtonCallback=="function"?this.onDeviceBackButton=this._backButtonCallback:typeof this._defaultDBB=="function"&&(this.onDeviceBackButton=this._defaultDBB.bind(this)),Z(this,()=>{this._mask&&this._mask.addEventListener("click",this._cancel,!1)})}disconnectedCallback(){this._backButtonHandler&&(this._backButtonHandler.destroy(),this._backButtonHandler=null),this._mask&&this._mask.removeEventListener("click",this._cancel,!1)}static get observedAttributes(){return["modifier","animation","mask-color","visible"]}attributeChangedCallback(e,t,i){switch(e){case"modifier":le.onModifierChanged(t,i,this,this._scheme);break;case"animation":this._updateAnimation();break;case"mask-color":this._updateMask();break;case"visible":this.visible!==this._visible&&(this._updateMask(),this._updateAnimation(),Z(this,()=>{this._setVisible(this.visible)}));break}}static get events(){return["preshow","postshow","prehide","posthide","dialogcancel","dialog-cancel"]}}m.defineBooleanProperties(Wi,["visible","disabled","cancelable"]);const wx={".action-sheet":"action-sheet--*",".action-sheet-mask":"action-sheet-mask--*",".action-sheet-title":"action-sheet-title--*"},rp={default:function(){return qe.isAndroid()?yx:vx},none:Yo};class b_ extends Wi{constructor(){super(),Z(this,()=>this._compile())}get _scheme(){return wx}get _mask(){return m.findChild(this,".action-sheet-mask")}get _sheet(){return m.findChild(this,".action-sheet")}get _title(){return this.querySelector(".action-sheet-title")}_updateAnimatorFactory(){return new On({animators:rp,baseClass:Yo,baseClassName:"ActionSheetAnimator",defaultAnimation:this.getAttribute("animation")})}_compile(){if(Be.prepare(this),this.style.display="none",this.style.zIndex=10001,!this._sheet){const e=document.createElement("div");for(e.classList.add("action-sheet");this.firstChild;)e.appendChild(this.firstChild);this.appendChild(e)}if(!this._title){const e=document.createElement("div");e.classList.add("action-sheet-title"),this.title?e.innerHTML=this.title:e.hidden=!0,this._sheet.insertBefore(e,this._sheet.firstChild)}if(!this._mask){const e=document.createElement("div");e.classList.add("action-sheet-mask"),this.insertBefore(e,this.firstChild)}this._sheet.style.zIndex=20001,this._mask.style.zIndex=2e4,le.initModifier(this,this._scheme)}_updateTitle(){this._title&&(this.title?(this._title.innerHTML=this.title,this._title.hidden=!1):this._title.hidden=!0)}get title(){return this.getAttribute("title")}set title(e){e==null?this.removeAttribute("title"):this.setAttribute("title",e)}static get observedAttributes(){return[...super.observedAttributes,"title"]}attributeChangedCallback(e,t,i){e==="title"?this._updateTitle():super.attributeChangedCallback(e,t,i)}static registerAnimator(e,t){t.prototype instanceof Yo||m.throwAnimator("ActionSheet"),rp[e]=t}static get animators(){return rp}static get ActionSheetAnimator(){return Yo}}ve.ActionSheet=b_;customElements.define("ons-action-sheet",b_);const Ex=Object.freeze(Object.defineProperty({__proto__:null,default:b_},Symbol.toStringTag,{value:"Module"})),Tx=be(Ex);class Sx{animate(e,t,i=200){var r=new Date().getTime(),s={},o=!1,a=!1,c=!1,l=Object.keys(t),d=()=>{let w=window.getComputedStyle(e);l.forEach(w.getPropertyValue.bind(w)),w=e.offsetHeight},f={stop:(w={})=>{c&&clearTimeout(c);var P=Math.min(1,(new Date().getTime()-r)/i);return l.forEach(x=>{e.style[x]=(1-P)*s[x]+P*t[x]+(x=="opacity"?"":"px")}),e.style.transitionDuration="0s",w.stopNext?a=!1:o||(o=!0,a&&a()),f},then:w=>(a=w,o&&a&&a(),f),speed:w=>{if(ke.config.animationsDisabled&&(w=0),!o){c&&clearTimeout(c);const x=(new Date().getTime()-r)/i,L=w*(1-x);l.forEach(v=>{e.style[v]=(1-x)*s[v]+x*t[v]+(v=="opacity"?"":"px")}),d(),r=e.speedUpTime,i=L,e.style.transitionDuration=i/1e3+"s",l.forEach(v=>{e.style[v]=t[v]+(v=="opacity"?"":"px")}),c=setTimeout(f.stop,L)}return f},finish:(w=50)=>{var P=(new Date().getTime()-r)/i;return f.speed(w/(1-P)),f}};if(e.hasAttribute("disabled")||o||ke.config.animationsDisabled)return f;var g=window.getComputedStyle(e);return l.forEach(w=>{const P=parseFloat(g.getPropertyValue(w));s[w]=isNaN(P)?0:P}),o||(e.style.transitionProperty=l.join(","),e.style.transitionDuration=i/1e3+"s",l.forEach(w=>{e.style[w]=t[w]+(w=="opacity"?"":"px")})),c=setTimeout(f.stop,i),this._onStopAnimations(e,f.stop),f}constructor(){this._queue=[],this._index=0}_onStopAnimations(e,t){var i=this._queue,r=this._index++;i[e]=i[e]||[],i[e][r]=s=>(delete i[e][r],i[e]&&i[e].length==0&&delete i[e],t(s))}stopAnimations(e,t={}){if(Array.isArray(e))return e.forEach(i=>{this.stopAnimations(i,t)});(this._queue[e]||[]).forEach(i=>{i(t||{})})}stopAll(e={}){this.stopAnimations(Object.keys(this._queue),e)}fade(e,t=200){return this.animate(e,{opacity:0},t)}}const ew="ripple",sp={"":"ripple--*",".ripple__wave":"ripple--*__wave",".ripple__background":"ripple--*__background"};class kd extends Oe{constructor(){super(),this._onTap=this._onTap.bind(this),this._onHold=this._onHold.bind(this),this._onDragStart=this._onDragStart.bind(this),this._onRelease=this._onRelease.bind(this),Z(this,()=>this._compile()),this._animator=new Sx,["color","center","start-radius","background","modifier"].forEach(e=>{this.attributeChangedCallback(e,null,this.getAttribute(e))})}_compile(){this.classList.add(ew),this._wave=this.getElementsByClassName("ripple__wave")[0],this._background=this.getElementsByClassName("ripple__background")[0],this._background&&this._wave||(this._wave=m.create(".ripple__wave"),this._background=m.create(".ripple__background"),this.appendChild(this._wave),this.appendChild(this._background)),le.initModifier(this,sp)}_getEffectSize(){const e=["cover","contain"];if(this.hasAttribute("size")){const t=this.getAttribute("size");if(e.indexOf(t)!==-1)return t}return"cover"}_calculateCoords(e){let t,i,r,s,o;const a=this.getBoundingClientRect(),c=this._getEffectSize(),l=()=>m.throw("Ripple invalid state");return this._center?(t=a.width/2,i=a.height/2,c==="cover"?o=Math.sqrt(t*t+i*i):c==="contain"?o=Math.min(t,i):l()):(t=(typeof e.clientX=="number"?e.clientX:e.changedTouches[0].clientX)-a.left,i=(typeof e.clientY=="number"?e.clientY:e.changedTouches[0].clientY)-a.top,r=Math.max(i,a.height-i),s=Math.max(t,a.width-t),c==="cover"?o=Math.sqrt(r*r+s*s):c==="contain"?o=Math.min(Math.round(r/2),Math.round(s/2)):l()),{x:t,y:i,r:o}}_rippleAnimation(e,t=300){const{_animator:i,_wave:r,_background:s,_minR:o}=this,{x:a,y:c,r:l}=this._calculateCoords(e);return i.stopAll({stopNext:1}),i.animate(s,{opacity:1},t),m.extend(r.style,{opacity:1,top:c-o+"px",left:a-o+"px",width:2*o+"px",height:2*o+"px"}),i.animate(r,{top:c-l,left:a-l,height:2*l,width:2*l},t)}_updateParent(){!this._parentUpdated&&this.parentNode&&(window.getComputedStyle(this.parentNode).getPropertyValue("position")==="static"&&(this.parentNode.style.position="relative"),this._parentUpdated=!0)}_onTap(e){!this.disabled&&!e.ripple&&(e.ripple=!0,this._updateParent(),this._rippleAnimation(e.gesture.srcEvent).then(()=>{this._animator.fade(this._wave),this._animator.fade(this._background)}))}_onHold(e){!this.disabled&&!e.ripple&&(e.ripple=!0,this._updateParent(),this._holding=this._rippleAnimation(e.gesture.srcEvent,2e3),document.addEventListener("release",this._onRelease))}_onRelease(e){this._holding&&!e.ripple&&(e.ripple=!0,this._holding.speed(300).then(()=>{this._animator.stopAll({stopNext:!0}),this._animator.fade(this._wave),this._animator.fade(this._background)}),this._holding=!1),document.removeEventListener("release",this._onRelease)}_onDragStart(e){if(this._holding)return this._onRelease(e);["left","right"].indexOf(e.gesture.direction)!=-1&&this._onTap(e)}connectedCallback(){this._parentNode=this.parentNode,ke.config.animationsDisabled?this.disabled=!0:(this._parentNode.addEventListener("tap",this._onTap),this._parentNode.addEventListener("hold",this._onHold),this._parentNode.addEventListener("dragstart",this._onDragStart))}disconnectedCallback(){const e=this._parentNode||this.parentNode;e.removeEventListener("tap",this._onTap),e.removeEventListener("hold",this._onHold),e.removeEventListener("dragstart",this._onDragStart)}static get observedAttributes(){return["start-radius","color","background","center","class","modifier"]}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,ew,sp);break;case"modifier":le.onModifierChanged(t,i,this,sp);break;case"start-radius":this._minR=Math.max(0,parseFloat(i)||0);break;case"color":i&&Z(this,()=>{this._wave.style.background=i,this.hasAttribute("background")||(this._background.style.background=i)});break;case"background":(i||t)&&(i==="none"?Z(this,()=>{this._background.setAttribute("disabled","disabled"),this._background.style.background="transparent"}):Z(this,()=>{this._background.hasAttribute("disabled")&&this._background.removeAttribute("disabled"),this._background.style.background=i}));break;case"center":e==="center"&&(this._center=i!=null&&i!="false");break}}}m.defineBooleanProperties(kd,["disabled","center"]);ve.Ripple=kd;customElements.define("ons-ripple",kd);const Ix=Object.freeze(Object.defineProperty({__proto__:null,default:kd},Symbol.toStringTag,{value:"Module"}));class Zs extends Oe{get _scheme(){m.throwMember()}get _defaultClassName(){m.throwMember()}get _rippleOpt(){return[this]}constructor(){super(),this.constructor===Zs&&m.throwAbstract(),Z(this,()=>this._compile())}get _icon(){return m.findChild(this,"ons-icon")}get _hiddenButton(){return m.findChild(this,"button")}_compile(){if(Be.prepare(this),this.classList.add(this._defaultClassName),!this._icon&&this.hasAttribute("icon")){m.checkMissingImport("Icon");const e=m.createElement(`<ons-icon icon="${this.getAttribute("icon")}"></ons-icon>`);e.classList.add(this._defaultClassName.replace("button","icon")),this.insertBefore(e,this.firstChild)}if(!this._hiddenButton){const e=m.createElement("<button hidden></button>");this.appendChild(e)}this._updateRipple(),le.initModifier(this,this._scheme)}_updateIcon(){this._icon&&this._icon.setAttribute("icon",this.getAttribute("icon"))}_updateRipple(){this._rippleOpt&&m.updateRipple(...this._rippleOpt)}static get observedAttributes(){return["modifier","class","icon","ripple"]}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,this._defaultClassName,this._scheme);break;case"modifier":le.onModifierChanged(t,i,this,this._scheme);break;case"icon":this._updateIcon();break;case"ripple":this.classList.contains(this._defaultClassName)&&this._updateRipple();break}}}m.defineBooleanProperties(Zs,["ripple","disabled"]);class w_ extends Zs{get _scheme(){return{"":"action-sheet-button--*",".action-sheet-icon":"action-sheet-icon--*"}}get _defaultClassName(){return"action-sheet-button"}get _rippleOpt(){}}ve.ActionSheetButton=w_;customElements.define("ons-action-sheet-button",w_);const Ax=Object.freeze(Object.defineProperty({__proto__:null,default:w_},Symbol.toStringTag,{value:"Module"})),Cx=be(Ax);class Jo extends Gi{constructor({timing:e="linear",delay:t=0,duration:i=.2}={}){super({timing:e,delay:t,duration:i})}show(e,t){t()}hide(e,t){t()}}class tw extends Jo{constructor({timing:e="cubic-bezier(.1, .7, .4, 1)",duration:t=.2,delay:i=0}={}){super({duration:t,timing:e,delay:i})}show(e,t){t=t||function(){},k.runAll(k(e._mask,this.def).default({opacity:0},{opacity:1}),k(e._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0) scale3d(.9, .9, 1)",opacity:0},{transform:"translate3d(-50%, -50%, 0) scale3d(1, 1, 1)",opacity:1}).queue(i=>{t(),i()}))}hide(e,t){t=t||function(){},k.runAll(k(e._mask,this.def).default({opacity:1},{opacity:0}),k(e._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0) scale3d(1, 1, 1)",opacity:1},{transform:"translate3d(-50%, -50%, 0) scale3d(.9, .9, 1)",opacity:0}).queue(i=>{t(),i()}))}}class nw extends Jo{constructor({timing:e="cubic-bezier(.1, .7, .4, 1)",duration:t=.2,delay:i=0}={}){super({duration:t,timing:e,delay:i})}show(e,t){t=t||function(){},k.runAll(k(e._mask,this.def).default({opacity:0},{opacity:1}),k(e._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0) scale3d(1.3, 1.3, 1)",opacity:0},{transform:"translate3d(-50%, -50%, 0) scale3d(1, 1, 1)",opacity:1}).queue(i=>{t(),i()}))}hide(e,t){t=t||function(){},k.runAll(k(e._mask,this.def).default({opacity:1},{opacity:0}),k(e._dialog,this.def).default({opacity:1},{opacity:0}).queue(i=>{t(),i()}))}}const Px={".alert-dialog":"alert-dialog--*",".alert-dialog-container":"alert-dialog-container--*",".alert-dialog-title":"alert-dialog-title--*",".alert-dialog-content":"alert-dialog-content--*",".alert-dialog-footer":"alert-dialog-footer--*",".alert-dialog-footer--rowfooter":"alert-dialog-footer--rowfooter--*",".alert-dialog-button--rowfooter":"alert-dialog-button--rowfooter--*",".alert-dialog-button--primal":"alert-dialog-button--primal--*",".alert-dialog-button":"alert-dialog-button--*","ons-alert-dialog-button":"alert-dialog-button--*",".alert-dialog-mask":"alert-dialog-mask--*",".text-input":"text-input--*"},op={none:Jo,default:function(){return qe.isAndroid()?tw:nw},fade:function(){return qe.isAndroid()?tw:nw}};class E_ extends Wi{constructor(){super(),Z(this,()=>this._compile())}get _scheme(){return Px}get _mask(){return m.findChild(this,".alert-dialog-mask")}get _dialog(){return m.findChild(this,".alert-dialog")}get _titleElement(){return m.findChild(this._dialog.children[0],".alert-dialog-title")}get _contentElement(){return m.findChild(this._dialog.children[0],".alert-dialog-content")}_updateAnimatorFactory(){return new On({animators:op,baseClass:Jo,baseClassName:"AlertDialogAnimator",defaultAnimation:this.getAttribute("animation")})}_compile(){Be.prepare(this),this.style.display="none",this.style.zIndex=10001;const e=document.createDocumentFragment();if(!this._mask&&!this._dialog)for(;this.firstChild;)e.appendChild(this.firstChild);if(!this._mask){const t=document.createElement("div");t.classList.add("alert-dialog-mask"),this.insertBefore(t,this.children[0])}if(!this._dialog){const t=document.createElement("div");t.classList.add("alert-dialog"),this.insertBefore(t,null)}if(!m.findChild(this._dialog,".alert-dialog-container")){const t=document.createElement("div");t.classList.add("alert-dialog-container"),this._dialog.appendChild(t)}this._dialog.children[0].appendChild(e),this._dialog.style.zIndex=20001,this._mask.style.zIndex=2e4,le.initModifier(this,this._scheme)}static registerAnimator(e,t){t.prototype instanceof Jo||m.throwAnimator("AlertDialog"),op[e]=t}static get animators(){return op}static get AlertDialogAnimator(){return Jo}}ve.AlertDialog=E_;customElements.define("ons-alert-dialog",E_);const kx=Object.freeze(Object.defineProperty({__proto__:null,default:E_},Symbol.toStringTag,{value:"Module"})),xx=be(kx);class T_ extends Zs{get _scheme(){return{"":"alert-dialog-button--*"}}get _defaultClassName(){return"alert-dialog-button"}get _rippleOpt(){return[this,void 0,{modifier:"light-gray"}]}}ve.AlertDialogButton=T_;customElements.define("ons-alert-dialog-button",T_);const Rx=Object.freeze(Object.defineProperty({__proto__:null,default:T_},Symbol.toStringTag,{value:"Module"})),Dx=be(Rx),iw="back-button",ap={"":"back-button--*",".back-button__icon":"back-button--*__icon",".back-button__label":"back-button--*__label"},Ox=`
  <?xml version="1.0" encoding="UTF-8"?>
  <svg width="13px" height="21px" viewBox="0 0 13 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <title>ios-back-button-icon</title>
      <desc>Created with Sketch.</desc>
      <defs></defs>
      <g id="toolbar-back-button" stroke="none" stroke-width="1" fill-rule="evenodd">
          <g id="ios" transform="translate(-34.000000, -30.000000)">
              <polygon id="ios-back-button-icon" points="34 40.5 44.5 30 46.5 32 38 40.5 46.5 49 44.5 51"></polygon>
          </g>
      </g>
  </svg>
`,Nx=`
  <?xml version="1.0" encoding="UTF-8"?>
  <svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <title>md-back-button-icon</title>
      <desc>Created with Sketch.</desc>
      <defs></defs>
      <g id="toolbar-back-button" stroke="none" stroke-width="1" fill-rule="evenodd">
          <g id="android" transform="translate(-32.000000, -32.000000)" fill-rule="nonzero">
              <polygon id="md-back-button-icon" points="48 39 35.83 39 41.42 33.41 40 32 32 40 40 48 41.41 46.59 35.83 41 48 41"></polygon>
          </g>
      </g>
  </svg>
`;class S_ extends Oe{constructor(){super(),Z(this,()=>{this._compile()}),this._options={},this._boundOnClick=this._onClick.bind(this);const{onConnected:e,onDisconnected:t}=m.defineListenerProperty(this,"click");this._connectOnClick=e,this._disconnectOnClick=t}_updateIcon(e=m.findChild(this,".back-button__icon")){e.innerHTML=Be.getPlatform(this)==="android"||m.hasModifier(this,"material")?Nx:Ox}_compile(){if(Be.prepare(this),this.classList.add(iw),!m.findChild(this,".back-button__label")){const e=m.create("span.back-button__label");for(;this.childNodes[0];)e.appendChild(this.childNodes[0]);this.appendChild(e)}if(!m.findChild(this,".back-button__icon")){const e=m.create("span.back-button__icon");this._updateIcon(e),this.insertBefore(e,this.children[0])}m.updateRipple(this,void 0,{center:"",size:"contain",background:"transparent"}),le.initModifier(this,ap)}get options(){return this._options}set options(e){this._options=e}_onClick(e){setTimeout(()=>{if(!e.defaultPrevented){const t=m.findParent(this,"ons-navigator");t&&t.popPage({...this.options,onsBackButton:!0})}})}connectedCallback(){this.addEventListener("click",this._boundOnClick,!1),this._connectOnClick()}static get observedAttributes(){return["modifier","class"]}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,iw,ap);break;case"modifier":{le.onModifierChanged(t,i,this,ap)&&this._updateIcon();break}}}disconnectedCallback(){this.removeEventListener("click",this._boundOnClick,!1),this._disconnectOnClick()}show(){this.style.display="inline-block"}hide(){this.style.display="none"}}ve.BackButton=S_;customElements.define("ons-back-button",S_);const Lx=Object.freeze(Object.defineProperty({__proto__:null,default:S_},Symbol.toStringTag,{value:"Module"})),Mx=be(Lx),rw="bottom-bar",lp={"":"bottom-bar--*"};class I_ extends Oe{constructor(){super(),this.classList.add(rw),le.initModifier(this,lp)}static get observedAttributes(){return["modifier","class"]}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,rw,lp);break;case"modifier":le.onModifierChanged(t,i,this,lp);break}}}ve.BottomToolbar=I_;customElements.define("ons-bottom-toolbar",I_);const Vx=Object.freeze(Object.defineProperty({__proto__:null,default:I_},Symbol.toStringTag,{value:"Module"})),Bx=be(Vx);class A_ extends Zs{get _scheme(){return{"":"button--*"}}get _defaultClassName(){return"button"}}ve.Button=A_;customElements.define("ons-button",A_);const Fx=Object.freeze(Object.defineProperty({__proto__:null,default:A_},Symbol.toStringTag,{value:"Module"})),$x=be(Fx),sw="card",up={"":"card--*",".card__title":"card--*__title",".card__content":"card--*__content"};class C_ extends Oe{constructor(){super(),Z(this,()=>{this._compile()})}_compile(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.classList.contains("title")?t.classList.add("card__title"):t.classList.contains("content")&&t.classList.add("card__content")}Be.prepare(this),this.classList.add(sw),le.initModifier(this,up)}static get observedAttributes(){return["modifier","class"]}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,sw,up);break;case"modifier":le.onModifierChanged(t,i,this,up);break}}}ve.Card=C_;customElements.define("ons-card",C_);const zx=Object.freeze(Object.defineProperty({__proto__:null,default:C_},Symbol.toStringTag,{value:"Module"})),jx=be(zx),qx={vertical:{axis:"Y",size:"Height",dir:["up","down"],t3d:["0px, ","px, 0px"]},horizontal:{axis:"X",size:"Width",dir:["left","right"],t3d:["","px, 0px, 0px"]}};class zS{constructor(e){const t=()=>!1;`getInitialIndex getBubbleWidth isVertical isOverScrollable isCentered
    isAutoScrollable refreshHook preChangeHook postChangeHook overScrollHook`.split(/\s+/).forEach(i=>this[i]=e[i]||t),this.getElement=e.getElement,this.scrollHook=e.scrollHook,this.itemSize=e.itemSize||"100%",this.getAutoScrollRatio=(...i)=>{let r=e.getAutoScrollRatio&&e.getAutoScrollRatio(...i);return r=typeof r=="number"&&r===r?r:.5,(r<0||r>1)&&m.throw("Invalid auto-scroll-ratio "+r+". Must be between 0 and 1"),r},this.shouldBlock=m.globals.actualMobileOS==="other",this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onResize=this.onResize.bind(this),this._shouldFixScroll=m.globals.actualMobileOS==="ios"}init({swipeable:e,autoRefresh:t}={}){this.initialized=!0,this.target=this.getElement().children[0],this.blocker=this.getElement().children[1],(!this.target||!this.blocker)&&m.throw('Expected "target" and "blocker" elements to exist before initializing Swiper'),this.shouldBlock||(this.blocker.style.display="none"),this.getElement().classList.add("ons-swiper"),this.target.classList.add("ons-swiper-target"),this.blocker.classList.add("ons-swiper-blocker"),this._gestureDetector=new pe(this.getElement(),{dragMinDistance:1,dragLockToAxis:!0,passive:!this._shouldFixScroll}),this._mutationObserver=new MutationObserver(()=>this.refresh()),this.updateSwipeable(e),this.updateAutoRefresh(t),this._scroll=this._offset=this._lastActiveIndex=0,this._updateLayout(),this._setupInitialIndex(),setImmediate(()=>this.initialized&&this._setupInitialIndex()),(window!==window.parent||this.offsetHeight===0)&&window.requestAnimationFrame(()=>this.initialized&&this.onResize())}dispose(){this.initialized=!1,this.updateSwipeable(!1),this.updateAutoRefresh(!1),this._gestureDetector&&this._gestureDetector.dispose(),this.target=this.blocker=this._gestureDetector=this._mutationObserver=null,this.setupResize(!1)}onResize(){const e=this._scroll/this.itemNumSize;this._reset(),this.setActiveIndex(e),this.refresh()}get itemCount(){return this.target.children.length}get itemNumSize(){return(typeof this._itemNumSize!="number"||this._itemNumSize!==this._itemNumSize)&&(this._itemNumSize=this._calculateItemSize()),this._itemNumSize}get maxScroll(){const e=this.itemCount*this.itemNumSize-this.targetSize;return Math.ceil(e<0?0:e)}_calculateItemSize(){const e=this.itemSize.match(/^(\d+)(px|%)/);e||m.throw("Invalid state: swiper's size unit must be '%' or 'px'");const t=parseInt(e[1],10);return e[2]==="%"?Math.round(t/100*this.targetSize):t}_setupInitialIndex(){this._reset(),this._lastActiveIndex=Math.max(Math.min(Number(this.getInitialIndex()),this.itemCount),0),this._scroll=this._offset+this.itemNumSize*this._lastActiveIndex,this._scrollTo(this._scroll)}_setSwiping(e){this.target.classList.toggle("swiping",e)}setActiveIndex(e,t={}){this._setSwiping(!0),e=Math.max(0,Math.min(e,this.itemCount-1));const i=Math.max(0,Math.min(this.maxScroll,this._offset+this.itemNumSize*e));return this._changeTo(i,t)}getActiveIndex(e=this._scroll){e-=this._offset;const t=this.itemCount,i=this.itemNumSize;if(this.itemNumSize===0||!m.isInteger(e))return this._lastActiveIndex;if(e<=0)return 0;for(let r=0;r<t;r++)if(i*r<=e&&i*(r+1)>e)return r;return t-1}setupResize(e){window[(e?"add":"remove")+"EventListener"]("resize",this.onResize,!0)}show(){this.setupResize(!0),this.onResize(),setTimeout(()=>this.target&&this.target.classList.add("active"),1e3/60)}hide(){this.setupResize(!1),this.target.classList.remove("active")}updateSwipeable(e){if(this._gestureDetector){const t=e?"on":"off";this._gestureDetector[t]("drag",this.onDrag),this._gestureDetector[t]("dragstart",this.onDragStart),this._gestureDetector[t]("dragend",this.onDragEnd)}}updateAutoRefresh(e){this._mutationObserver&&(e?this._mutationObserver.observe(this.target,{childList:!0}):this._mutationObserver.disconnect())}updateItemSize(e){this.itemSize=e||"100%",this.refresh()}toggleBlocker(e){this.blocker.style.pointerEvents=e?"auto":"none"}_canConsumeGesture(e){const t=e.direction,i=this._scroll===0&&!this.isOverScrollable(),r=this._scroll===this.maxScroll&&!this.isOverScrollable();return this.isVertical()?t==="down"&&!i||t==="up"&&!r:t==="right"&&!i||t==="left"&&!r}onDragStart(e){if(this._ignoreDrag=e.consumed||!m.isValidGesture(e),!this._ignoreDrag){const t=e.consume;if(e.consume=()=>{t&&t(),this._ignoreDrag=!0},this._canConsumeGesture(e.gesture)){const i=e.gesture.center&&e.gesture.center.clientX||0,r=this.getBubbleWidth()||0,s=()=>{t&&t(),e.consumed=!0,this._started=!0,this.shouldBlock&&this.toggleBlocker(!0),this._setSwiping(!0),m.iosPreventScroll(this._gestureDetector)};i<r||i>this.targetSize-r?setImmediate(()=>!this._ignoreDrag&&s()):s()}}}onDrag(e){!e.gesture||this._ignoreDrag||!this._started||(this._continued=!0,e.stopPropagation(),this._scrollTo(this._scroll-this._getDelta(e),{throttle:!0}))}onDragEnd(e){if(this._started=!1,!e.gesture||this._ignoreDrag||!this._continued){this._ignoreDrag=!0;return}this._continued=!1,e.stopPropagation();const t=this._scroll-this._getDelta(e),i=this._normalizeScroll(t);t===i?this._startMomentumScroll(t,e):this._killOverScroll(i),this.shouldBlock&&this.toggleBlocker(!1)}_startMomentumScroll(e,t){const i=this._getVelocity(t),r=t.gesture.interimDirection===this.dM.dir[this._getDelta(t)<0?0:1],s=this._getAutoScroll(e,i,r);let o=Math.abs(s-e)/(i+.01)/1e3;o=Math.min(.25,Math.max(.1,o)),this._changeTo(s,{swipe:!0,animationOptions:{duration:o,timing:"cubic-bezier(.4, .7, .5, 1)"}})}_killOverScroll(e){this._scroll=e;const t=this.dM.dir[+(e>0)],i=()=>this._changeTo(e,{animationOptions:{duration:.4,timing:"cubic-bezier(.1, .4, .1, 1)"}});this.overScrollHook({direction:t,killOverScroll:i})||i()}_changeTo(e,t={}){const i={activeIndex:this.getActiveIndex(e),lastActiveIndex:this._lastActiveIndex,swipe:t.swipe||!1},r=i.activeIndex!==i.lastActiveIndex,s=r?this.preChangeHook(i):!1;return this._scroll=s?this._offset+i.lastActiveIndex*this.itemNumSize:e,this._lastActiveIndex=s?i.lastActiveIndex:i.activeIndex,this._scrollTo(this._scroll,t).then(()=>{if(e===this._scroll&&!s)this._setSwiping(!1),r&&this.postChangeHook(i);else if(t.reject)return this._setSwiping(!1),Promise.reject("Canceled")})}_scrollTo(e,t={}){if(t.throttle)if(e<0)e=this.isOverScrollable()?Math.round(e*.35):0;else{const s=this.maxScroll;s<e&&(e=this.isOverScrollable()?s+Math.round((e-s)*.35):s)}const i=t.animation==="none"?{}:t.animationOptions;return this.scrollHook&&this.itemNumSize>0&&this.scrollHook((e/this.itemNumSize).toFixed(2),t.animationOptions||{}),new Promise(r=>k(this.target).queue({transform:this._getTransform(e)},i).play(r))}_getAutoScroll(e,t,i){const r=this.maxScroll,s=this._offset,o=this.itemNumSize;if(!this.isAutoScrollable())return Math.max(0,Math.min(r,e));let a=[];for(let f=s;f<r;f+=o)a.push(f);a.push(r),a=a.sort((f,g)=>Math.abs(f-e)-Math.abs(g-e)).filter((f,g)=>!g||f!==a[g-1]);let c=a[0];const l=this._lastActiveIndex*o+s,d=Math.abs(e-l)/o;return d<=this.getAutoScrollRatio(i,t,o)?c=l:d<1&&a[0]===l&&a.length>1&&(c=a[1]),Math.max(0,Math.min(r,c))}_reset(){this._targetSize=this._itemNumSize=void 0}_normalizeScroll(e){return Math.max(Math.min(e,this.maxScroll),0)}refresh(){if(this._reset(),this._updateLayout(),m.isInteger(this._scroll)){const e=this._normalizeScroll(this._scroll);e!==this._scroll?this._killOverScroll(e):this._changeTo(e)}else this._setupInitialIndex();this.refreshHook()}get targetSize(){return this._targetSize||(this._targetSize=this.target[`offset${this.dM.size}`]),this._targetSize}_getDelta(e){return e.gesture[`delta${this.dM.axis}`]}_getVelocity(e){return e.gesture[`velocity${this.dM.axis}`]}_getTransform(e){return`translate3d(${this.dM.t3d[0]}${-e}${this.dM.t3d[1]})`}_updateLayout(){this.dM=qx[this.isVertical()?"vertical":"horizontal"],this.target.classList.toggle("ons-swiper-target--vertical",this.isVertical());for(let e=this.target.children[0];e;e=e.nextElementSibling)e.style[this.dM.size.toLowerCase()]=this.itemSize;this.isCentered()&&(this._offset=(this.targetSize-this.itemNumSize)/-2||0)}}class xd extends Oe{constructor(){super();const{onConnected:e,onDisconnected:t}=m.defineListenerProperty(this,"swipe");this._connectOnSwipe=e,this._disconnectOnSwipe=t,Z(this,()=>this._compile())}_compile(){const e=this.children[0]&&this.children[0].tagName!=="ONS-CAROUSEL-ITEM"&&this.children[0]||document.createElement("div");if(!e.parentNode){for(;this.firstChild;)e.appendChild(this.firstChild);this.appendChild(e)}!this.children[1]&&this.appendChild(document.createElement("div")),this.appendChild=this.appendChild.bind(e),this.insertBefore=this.insertBefore.bind(e)}connectedCallback(){this._swiper||(this._swiper=new zS({getElement:()=>this,getInitialIndex:()=>this.getAttribute("active-index")||this.getAttribute("initial-index"),getAutoScrollRatio:()=>this.autoScrollRatio,isVertical:()=>this.vertical,isOverScrollable:()=>this.overscrollable,isCentered:()=>this.centered,isAutoScrollable:()=>this.autoScroll,itemSize:this.itemSize,overScrollHook:this._onOverScroll.bind(this),preChangeHook:this._onPreChange.bind(this),postChangeHook:this._onPostChange.bind(this),refreshHook:this._onRefresh.bind(this),scrollHook:(e,t)=>m.triggerElementEvent(this,"swipe",{index:e,options:t})}),Z(this,()=>this._swiper.init({swipeable:this.hasAttribute("swipeable"),autoRefresh:this.hasAttribute("auto-refresh")}))),this._connectOnSwipe()}disconnectedCallback(){this._swiper&&this._swiper.initialized&&(this._swiper.dispose(),this._swiper=null),this._disconnectOnSwipe()}static get observedAttributes(){return["swipeable","auto-refresh","direction","item-height","item-width","active-index"]}attributeChangedCallback(e,t,i){if(this._swiper)switch(e){case"swipeable":this._swiper.updateSwipeable(this.hasAttribute("swipeable"));break;case"auto-refresh":this._swiper.updateAutoRefresh(this.hasAttribute("auto-refresh"));break;case"item-height":this.vertical&&this._swiper.updateItemSize(this.itemSize);break;case"item-width":this.vertical||this._swiper.updateItemSize(this.itemSize);break;case"direction":this._swiper.refresh();break;case"active-index":this.getActiveIndex()!==this.activeIndex&&this.setActiveIndex(this.activeIndex);break}}_show(){this._swiper.show()}_hide(){this._swiper.hide()}_onOverScroll({direction:e,killOverScroll:t}){let i=!1;return m.triggerElementEvent(this,"overscroll",{carousel:this,activeIndex:this.getActiveIndex(),direction:e,waitToReturn:r=>{i=!0,r.then(t)}}),i}_onPreChange({activeIndex:e,lastActiveIndex:t}){m.triggerElementEvent(this,"prechange",{carousel:this,activeIndex:e,lastActiveIndex:t})}_onPostChange({activeIndex:e,lastActiveIndex:t}){this.activeIndex=e,m.triggerElementEvent(this,"postchange",{carousel:this,activeIndex:e,lastActiveIndex:t})}_onRefresh(){m.triggerElementEvent(this,"refresh",{carousel:this})}setActiveIndex(e,t={}){return t={animation:this.getAttribute("animation"),animationOptions:this.animationOptions||{duration:.3,timing:"cubic-bezier(.4, .7, .5, 1)"},...t},this._swiper.setActiveIndex(e,t).then(()=>(t.callback instanceof Function&&t.callback(this),Promise.resolve(this)))}getActiveIndex(){return this._swiper.getActiveIndex()}next(e){return this.setActiveIndex(this.getActiveIndex()+1,e)}prev(e){return this.setActiveIndex(this.getActiveIndex()-1,e)}first(e){return this.setActiveIndex(0,e)}last(e){this.setActiveIndex(Math.max(this.itemCount-1,0),e)}refresh(){this._swiper.refresh()}get itemCount(){return this._swiper.itemCount}get vertical(){return this.getAttribute("direction")==="vertical"}get itemSize(){const e=(this.getAttribute(`item-${this.vertical?"height":"width"}`)||"").trim();return e.match(/^\d+(px|%)$/)?e:"100%"}get autoScrollRatio(){return parseFloat(this.getAttribute("auto-scroll-ratio"))}set autoScrollRatio(e){this.setAttribute("auto-scroll-ratio",e)}static get events(){return["postchange","refresh","overscroll","prechange","swipe"]}get animationOptions(){const e=this.getAttribute("animation-options");return e&&m.animationOptionsParse(e)}set animationOptions(e){e==null?this.removeAttribute("animation-options"):this.setAttribute("animation-options",JSON.stringify(e))}get activeIndex(){return parseInt(this.getAttribute("active-index"))}set activeIndex(e){e!=null&&this.setAttribute("active-index",e)}}m.defineBooleanProperties(xd,["swipeable","disabled","overscrollable","auto-scroll","centered","fullscreen","auto-refresh"]);ve.Carousel=xd;customElements.define("ons-carousel",xd);const Ux=Object.freeze(Object.defineProperty({__proto__:null,default:xd},Symbol.toStringTag,{value:"Module"})),Hx=be(Ux),ow={"":"carousel-item--*"};class P_ extends Oe{constructor(){super(),this.style.width="100%",le.initModifier(this,ow)}static get observedAttributes(){return["modifier"]}attributeChangedCallback(e,t,i){if(e==="modifier")return le.onModifierChanged(t,i,this,ow)}}ve.CarouselItem=P_;customElements.define("ons-carousel-item",P_);const Gx=Object.freeze(Object.defineProperty({__proto__:null,default:P_},Symbol.toStringTag,{value:"Module"})),Wx=be(Gx),cp=["autocapitalize","autocomplete","autocorrect","autofocus","disabled","inputmode","max","maxlength","min","minlength","name","pattern","placeholder","readonly","required","size","spellcheck","step","validator","value"];class Fr extends Oe{_update(){}get _scheme(){m.throwMember()}get _template(){m.throwMember()}get type(){m.throwMember()}constructor(){super(),this.constructor===Fr&&m.throwAbstract(),Z(this,()=>this._compile()),this._boundDelegateEvent=this._delegateEvent.bind(this)}_compile(){Be.prepare(this),this._defaultClassName&&this.classList.add(this._defaultClassName),this.children.length===0&&(this.appendChild(m.createFragment(this._template)),this._setInputId(),this._updateBoundAttributes(),le.initModifier(this,this._scheme))}_updateBoundAttributes(){cp.forEach(e=>{this.hasAttribute(e)?this._input.setAttribute(e,this.getAttribute(e)):this._input.removeAttribute(e)}),this._update()}_delegateEvent(e){const t=new CustomEvent(e.type,{bubbles:!1,cancelable:!0});return this.dispatchEvent(t)}_setInputId(){this.hasAttribute("input-id")&&(this._input.id=this.getAttribute("input-id"))}get _defaultClassName(){return""}get _input(){return this.querySelector("input")}get value(){return this._input===null?this.getAttribute("value"):this._input.value}set value(e){Z(this,()=>{e instanceof Date&&(e=e.toISOString().substring(0,10)),this._input.value=e,this._update()})}connectedCallback(){Z(this,()=>{this._input.addEventListener("focus",this._boundDelegateEvent),this._input.addEventListener("blur",this._boundDelegateEvent)})}disconnectedCallback(){Z(this,()=>{this._input.removeEventListener("focus",this._boundDelegateEvent),this._input.removeEventListener("blur",this._boundDelegateEvent)})}static get observedAttributes(){return["modifier","input-id","class",...cp]}attributeChangedCallback(e,t,i){switch(e){case"modifier":Z(this,()=>le.onModifierChanged(t,i,this,this._scheme));break;case"input-id":Z(this,()=>this._setInputId());break;case"class":m.restoreClass(this,this._defaultClassName,this._scheme);break}cp.indexOf(e)>=0&&Z(this,()=>this._updateBoundAttributes())}blur(){this._input.blur()}focus(){this._input.focus()}}m.defineBooleanProperties(Fr,["disabled"]);class Lu extends Fr{constructor(){super(),this.constructor===Lu&&util.throwAbstract(),Z(this,()=>{this.attributeChangedCallback("checked",null,this.getAttribute("checked"))})}get _template(){return`
      <input type="${this.type}" class="${this._defaultClassName}__input">
      <span class="${this._defaultClassName}__checkmark"></span>
    `}get _helper(){return this.querySelector("span")}get checked(){return this._input.checked}set checked(e){Z(this,()=>{this._input.checked=e})}static get observedAttributes(){return[...super.observedAttributes,"checked"]}attributeChangedCallback(e,t,i){switch(e){case"checked":this.checked=i!==null;break;default:super.attributeChangedCallback(e,t,i)}}}const Kx={".checkbox":"checkbox--*",".checkbox__input":"checkbox--*__input",".checkbox__checkmark":"checkbox--*__checkmark"};class k_ extends Lu{get _scheme(){return Kx}get _defaultClassName(){return"checkbox"}get type(){return"checkbox"}}ve.Checkbox=k_;customElements.define("ons-checkbox",k_);const Qx=Object.freeze(Object.defineProperty({__proto__:null,default:k_},Symbol.toStringTag,{value:"Module"})),Xx=be(Qx);class x_ extends Oe{constructor(){super(),this.getAttribute("width")&&this._updateWidth()}static get observedAttributes(){return["width"]}attributeChangedCallback(e,t,i){e==="width"&&this._updateWidth()}_updateWidth(){let e=this.getAttribute("width");e?(e=e.trim().match(/^\d+$/)?e+"%":e,zt(this,{flex:"0 0 "+e,maxWidth:e})):zt.clear(this,"flex maxWidth")}}ve.Col=x_;customElements.define("ons-col",x_);const Yx=Object.freeze(Object.defineProperty({__proto__:null,default:x_},Symbol.toStringTag,{value:"Module"})),Jx=be(Yx);class Rs extends Gi{constructor({timing:e="linear",delay:t=0,duration:i=.2}={}){super({timing:e,delay:t,duration:i})}show(e,t){t()}hide(e,t){t()}}class Zx extends Rs{constructor({timing:e="ease-in-out",delay:t=0,duration:i=.3}={}){super({timing:e,delay:t,duration:i})}show(e,t){t=t||function(){},k.runAll(k(e._mask,this.def).default({opacity:0},{opacity:1}),k(e._dialog,this.def).default({transform:"translate3d(-50%, -60%, 0)",opacity:0},{transform:"translate3d(-50%, -50%, 0)",opacity:1}).queue(i=>{t(),i()}))}hide(e,t){t=t||function(){},k.runAll(k(e._mask,this.def).default({opacity:1},{opacity:0}),k(e._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0)",opacity:1},{transform:"translate3d(-50%, -60%, 0)",opacity:0}).queue(i=>{t(),i()}))}}class eR extends Rs{constructor({timing:e="ease-in-out",delay:t=0,duration:i=.2}={}){super({timing:e,delay:t,duration:i}),this.bodyHeight=document.body.clientHeight}show(e,t){t=t||function(){},k.runAll(k(e._mask,this.def).default({opacity:0},{opacity:1}),k(e._dialog,this.def).default({transform:`translate3d(-50%, ${this.bodyHeight/2-1}px, 0)`},{transform:"translate3d(-50%, -50%, 0)"}).queue(i=>{t(),i()}))}hide(e,t){t=t||function(){},k.runAll(k(e._mask,this.def).default({opacity:1},{opacity:0}),k(e._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0)"},{transform:`translate3d(-50%, ${this.bodyHeight/2-1}px, 0)`}).queue(i=>{t(),i()}))}}class tR extends Rs{constructor({timing:e="cubic-bezier(.1, .7, .4, 1)",delay:t=0,duration:i=.2}={}){super({timing:e,delay:t,duration:i}),this.bodyHeight=document.body.clientHeight}show(e,t){t=t||function(){},k.runAll(k(e._mask,this.def).default({opacity:0},{opacity:1}),k(e._dialog,this.def).default({transform:`translate3d(-50%, ${-(this.bodyHeight/2)+1-e._dialog.clientHeight}px, 0)`},{transform:"translate3d(-50%, -50%, 0)"}).queue(i=>{t(),i()}))}hide(e,t){t=t||function(){},k.runAll(k(e._mask,this.def).default({opacity:1},{opacity:0}),k(e._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0)"},{transform:`translate3d(-50%, ${-(this.bodyHeight/2)+1-e._dialog.clientHeight}px, 0)`}).queue(i=>{t(),i()}))}}const nR={".dialog":"dialog--*",".dialog-container":"dialog-container--*",".dialog-mask":"dialog-mask--*"},hp={default:function(){return qe.isAndroid()?Zx:eR},slide:tR,none:Rs};class R_ extends Wi{constructor(){super(),Z(this,()=>this._compile())}get _scheme(){return nR}get _mask(){return m.findChild(this,".dialog-mask")}get _dialog(){return m.findChild(this,".dialog")}_updateAnimatorFactory(){return new On({animators:hp,baseClass:Rs,baseClassName:"DialogAnimator",defaultAnimation:this.getAttribute("animation")})}_compile(){if(Be.prepare(this),this.style.display="none",this.style.zIndex=10001,!this._dialog){const e=document.createElement("div");e.classList.add("dialog");const t=document.createElement("div");for(t.classList.add("dialog-container");this.firstChild;)t.appendChild(this.firstChild);e.appendChild(t),this.appendChild(e)}if(!this._mask){const e=document.createElement("div");e.classList.add("dialog-mask"),this.insertBefore(e,this.firstChild)}this._dialog.style.zIndex=20001,this._mask.style.zIndex=2e4,this.setAttribute("status-bar-fill",""),le.initModifier(this,this._scheme)}static registerAnimator(e,t){t.prototype instanceof Rs||m.throwAnimator("Dialog"),hp[e]=t}static get animators(){return hp}static get DialogAnimator(){return Rs}}ve.Dialog=R_;customElements.define("ons-dialog",R_);const iR=Object.freeze(Object.defineProperty({__proto__:null,default:R_},Symbol.toStringTag,{value:"Module"})),rR=be(iR),aw="fab",dp={"":"fab--*",".fab__icon":"fab--*__icon"};class Rd extends Oe{constructor(){super(),this._hide(),this.classList.add(aw),Z(this,()=>{this._compile()})}_compile(){if(Be.prepare(this),!m.findChild(this,".fab__icon")){const e=document.createElement("span");e.classList.add("fab__icon"),m.arrayFrom(this.childNodes).forEach(t=>{(!t.tagName||t.tagName.toLowerCase()!=="ons-ripple")&&e.appendChild(t)}),this.appendChild(e)}this._updateRipple(),le.initModifier(this,dp),this._updatePosition()}connectedCallback(){setImmediate(()=>this._show())}static get observedAttributes(){return["modifier","ripple","position","class"]}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,aw,dp);break;case"modifier":le.onModifierChanged(t,i,this,dp);break;case"ripple":this._updateRipple();break;case"position":this._updatePosition();break}}_show(){this._manuallyHidden||this._toggle(!0)}_hide(){setImmediate(()=>this._toggle(!1))}_updateRipple(){m.updateRipple(this)}_updatePosition(){const e=this.getAttribute("position");switch(this.classList.remove("fab--top__left","fab--bottom__right","fab--bottom__left","fab--top__right","fab--top__center","fab--bottom__center"),e){case"top right":case"right top":this.classList.add("fab--top__right");break;case"top left":case"left top":this.classList.add("fab--top__left");break;case"bottom right":case"right bottom":this.classList.add("fab--bottom__right");break;case"bottom left":case"left bottom":this.classList.add("fab--bottom__left");break;case"center top":case"top center":this.classList.add("fab--top__center");break;case"center bottom":case"bottom center":this.classList.add("fab--bottom__center");break}}show(){this.toggle(!0)}hide(){this.toggle(!1)}toggle(e=!this.visible){this._manuallyHidden=!e,this._toggle(e)}_toggle(e=!this.visible){const i=(this.getAttribute("position")||"").indexOf("bottom")>=0?`translate3d(0px, -${m.globals.fabOffset||0}px, 0px)`:"";zt(this,{transform:`${i} scale(${Number(e)})`})}get visible(){return this.style.transform.indexOf("scale(0)")===-1&&this.style.display!=="none"}}m.defineBooleanProperties(Rd,["disabled","ripple"]);ve.Fab=Rd;customElements.define("ons-fab",Rd);const sR=Object.freeze(Object.defineProperty({__proto__:null,default:Rd},Symbol.toStringTag,{value:"Module"})),oR=be(sR);class D_ extends Oe{constructor(){super(),this._gestureDetector=new pe(this,{passive:!0})}}ve.GestureDetector=D_;customElements.define("ons-gesture-detector",D_);const aR=Object.freeze(Object.defineProperty({__proto__:null,default:D_},Symbol.toStringTag,{value:"Module"})),lR=be(aR);let fp="fa";class Dd extends Oe{constructor(){super(),Z(this,()=>{this._compile()})}static get observedAttributes(){return["icon","size","modifier","class"]}attributeChangedCallback(e,t,i){this._cleanClassAttribute(e==="icon"?t:this.getAttribute("icon"),e==="modifier"?t:void 0),this._update()}_compile(){Be.prepare(this),this._update()}_update(){const{classList:e,style:t}=this._buildClassAndStyle(this._parseAttr("icon"),this._parseAttr("size"));m.extend(this.style,t),e.forEach(i=>this.classList.add(i))}_parseAttr(e,t=this.getAttribute("modifier")||""){const r=(this.getAttribute(e)||e||"").split(/\s*,\s*/),s=r[0];let o=r[1];return o=(o||"").split(/\s*:\s*/),(t&&RegExp(`(^|\\s+)${o[0]}($|\\s+)`,"i").test(t)?o[1]:s)||""}_cleanClassAttribute(e,t){const{className:i,prefix:r}=this._prefixIcon(this._parseAttr(e,t)),s=i!==r?`|${r}$|${r}-`:`|${i}$`||"",o=new RegExp(`^(fa$|fa-|ion-|zmdi$|zmdi-|ons-icon--${s})`);m.arrayFrom(this.classList).filter(a=>o.test(a)).forEach(a=>this.classList.remove(a))}_prefixIcon(e){const t=fp+(fp?"-":"")+e;return{className:t,prefix:t.split("-")[0]}}_buildClassAndStyle(e,t){const i=["ons-icon"],r={};if(e.indexOf("ion-")===0)i.push(e),i.push("ons-icon--ion");else if(e.indexOf("fa-")===0)i.push(e),this.classList.contains("far")||this.classList.contains("fab")||this.classList.contains("fal")||i.push("fa");else if(e.indexOf("md-")===0)i.push("zmdi"),i.push("zmdi-"+e.split(/-(.+)?/)[1]);else{const{className:s,prefix:o}=this._prefixIcon(e);o&&i.push(o),s&&i.push(s)}return t.match(/^[1-5]x|lg$/)?(i.push("ons-icon--"+t),this.style.removeProperty("font-size")):r.fontSize=t,{classList:i,style:r}}static setAutoPrefix(e){fp=e?typeof e=="string"&&e||"fa":""}}m.defineBooleanProperties(Dd,["fixed-width","spin"]);ve.Icon=Dd;customElements.define("ons-icon",Dd);const uR=Object.freeze(Object.defineProperty({__proto__:null,default:Dd},Symbol.toStringTag,{value:"Module"})),cR=be(uR),hR={".text-input":"text-input--*",".text-input__label":"text-input--*__label"};class Od extends Fr{constructor(){super(),this._boundOnInput=this._update.bind(this),this._boundOnFocusin=this._update.bind(this)}_update(){this._updateLabel(),this._updateLabelClass()}get _scheme(){return hR}get _template(){return`
      <input type="${this.type}" class="text-input">
      <span class="text-input__label"></span>
    `}get type(){const e=this.getAttribute("type");return["checkbox","radio"].indexOf(e)<0&&e||"text"}set type(e){this.setAttribute("type",e)}_updateLabel(){const e=this.getAttribute("placeholder")||"";typeof this._helper.textContent<"u"?this._helper.textContent=e:this._helper.innerText=e}_updateLabelClass(){this.value===""?this._helper.classList.remove("text-input--material__label--active"):this._helper.classList.add("text-input--material__label--active")}get _helper(){return this.querySelector("span")}connectedCallback(){super.connectedCallback(),Z(this,()=>{this._input.addEventListener("input",this._boundOnInput),this._input.addEventListener("focusin",this._boundOnFocusin)});const e=this.getAttribute("type");["checkbox","radio"].indexOf(e)>=0&&m.warn(`Warn: <ons-input type="${e}"> is deprecated since v2.4.0. Use <ons-${e}> instead.`)}disconnectedCallback(){super.disconnectedCallback(),Z(this,()=>{this._input.removeEventListener("input",this._boundOnInput),this._input.removeEventListener("focusin",this._boundOnFocusin)})}static get observedAttributes(){return[...super.observedAttributes,"type"]}attributeChangedCallback(e,t,i){switch(e){case"type":Z(this,()=>this._input.setAttribute("type",this.type));break;default:super.attributeChangedCallback(e,t,i)}}}m.defineBooleanProperties(Od,["float"]);ve.Input=Od;customElements.define("ons-input",Od);const dR=Object.freeze(Object.defineProperty({__proto__:null,default:Od},Symbol.toStringTag,{value:"Module"})),fR=be(dR);class O_{constructor(e,t=null){(typeof e!="object"||e===null)&&m.throw('"delegate" parameter must be an object'),this._userDelegate=e,!(t instanceof Element)&&t!==null&&m.throw('"templateElement" parameter must be an instance of Element or null'),this._templateElement=t}get itemHeight(){return this._userDelegate.itemHeight}hasRenderFunction(){return this._userDelegate._render instanceof Function}_render(){this._userDelegate._render.apply(this._userDelegate,arguments)}loadItemElement(e,t){if(this._userDelegate.loadItemElement instanceof Function)this._userDelegate.loadItemElement(e,t);else{const i=this._userDelegate.createItemContent(e,this._templateElement);i instanceof Element||m.throw('"createItemContent" must return an instance of Element'),t({element:i})}}countItems(){const e=this._userDelegate.countItems();return typeof e!="number"&&m.throw('"countItems" must return a number'),e}updateItem(e,t){this._userDelegate.updateItemContent instanceof Function&&this._userDelegate.updateItemContent(e,t)}calculateItemHeight(e){if(this._userDelegate.calculateItemHeight instanceof Function){const t=this._userDelegate.calculateItemHeight(e);return typeof t!="number"&&m.throw('"calculateItemHeight" must return a number'),t}return 0}destroyItem(e,t){this._userDelegate.destroyItem instanceof Function&&this._userDelegate.destroyItem(e,t)}destroy(){this._userDelegate.destroy instanceof Function&&this._userDelegate.destroy(),this._userDelegate=this._templateElement=null}}class jS{constructor(e,t){t instanceof O_||m.throw('"delegate" parameter must be an instance of LazyRepeatDelegate'),this._wrapperElement=e,this._delegate=t,this._insertIndex=this._wrapperElement.children[0]&&this._wrapperElement.children[0].tagName==="ONS-LAZY-REPEAT"?1:0,e.tagName.toLowerCase()==="ons-list"&&e.classList.add("lazy-list"),this._pageContent=this._findPageContentElement(e),this._pageContent||m.throw("LazyRepeat must be descendant of a Page element"),this.lastScrollTop=this._pageContent.scrollTop,this.padding=0,this._topPositions=[0],this._renderedItems={},!this._delegate.itemHeight&&!this._delegate.calculateItemHeight(0)&&(this._unknownItemHeight=!0),this._addEventListeners(),this._onChange()}get padding(){return parseInt(this._wrapperElement.style.paddingTop,10)}set padding(e){this._wrapperElement.style.paddingTop=e+"px"}_findPageContentElement(e){const t=m.findParent(e,".page__content");if(t)return t;const i=m.findParent(e,"ons-page");if(i){const r=m.findChild(i,".content");if(r)return r}return null}_checkItemHeight(e){this._delegate.loadItemElement(0,t=>{this._unknownItemHeight||m.throw("Invalid state"),this._wrapperElement.appendChild(t.element);const i=()=>{this._delegate.destroyItem(0,t),t.element&&t.element.remove(),delete this._unknownItemHeight,e()};if(this._itemHeight=t.element.offsetHeight,this._itemHeight>0){i();return}this._wrapperElement.style.visibility="hidden",t.element.style.visibility="hidden",setImmediate(()=>{this._itemHeight=t.element.offsetHeight,this._itemHeight==0&&m.throw('Invalid state: "itemHeight" must be greater than zero'),this._wrapperElement.style.visibility="",i()})})}get staticItemHeight(){return this._delegate.itemHeight||this._itemHeight}_countItems(){return this._delegate.countItems()}_getItemHeight(e){return Object.prototype.hasOwnProperty.call(this._renderedItems,e)?(Object.prototype.hasOwnProperty.call(this._renderedItems[e],"height")||(this._renderedItems[e].height=this._renderedItems[e].element.offsetHeight),this._renderedItems[e].height):this._topPositions[e+1]&&this._topPositions[e]?this._topPositions[e+1]-this._topPositions[e]:this.staticItemHeight||this._delegate.calculateItemHeight(e)}_calculateRenderedHeight(){return Object.keys(this._renderedItems).reduce((e,t)=>e+this._getItemHeight(+t),0)}_onChange(){this._render()}_lastItemRendered(){return Math.max(...Object.keys(this._renderedItems))}_firstItemRendered(){return Math.min(...Object.keys(this._renderedItems))}refresh(){const e={forceScrollDown:!0},t=this._firstItemRendered();m.isInteger(t)&&(this._wrapperElement.style.height=this._topPositions[t]+this._calculateRenderedHeight()+"px",this.padding=this._topPositions[t],e.forceFirstIndex=t),this._removeAllElements(),this._render(e),this._wrapperElement.style.height="inherit"}_render({forceScrollDown:e=!1,forceFirstIndex:t,forceLastIndex:i}={}){if(this._unknownItemHeight)return this._checkItemHeight(this._render.bind(this,arguments[0]));const r=!e&&this.lastScrollTop>this._pageContent.scrollTop;this.lastScrollTop=this._pageContent.scrollTop;const s={},o=this._wrapperElement.getBoundingClientRect().top,a=4*window.innerHeight-o,c=this._countItems(),l=t||Math.max(0,this._calculateStartIndex(o)-30);let d=l;for(let f=this._topPositions[d];d<c&&f<a;d++)d>=this._topPositions.length&&(this._topPositions.length+=100),this._topPositions[d]=f,f+=this._getItemHeight(d);if(this._delegate.hasRenderFunction&&this._delegate.hasRenderFunction())return this._delegate._render(l,d,()=>{this.padding=this._topPositions[l]});if(r)for(let f=d-1;f>=l;f--)s[f]=!0,this._renderElement(f,r);else{const f=i||Math.max(d-1,...Object.keys(this._renderedItems));for(let g=l;g<=f;g++)s[g]=!0,this._renderElement(g,r)}Object.keys(this._renderedItems).forEach(f=>s[f]||this._removeElement(f,r))}_renderElement(e,t){const i=this._renderedItems[e];if(i){this._delegate.updateItem(e,i);return}this._delegate.loadItemElement(e,r=>{t?(this._wrapperElement.insertBefore(r.element,this._wrapperElement.children[this._insertIndex]),this.padding=this._topPositions[e],r.height=this._topPositions[e+1]-this._topPositions[e]):this._wrapperElement.appendChild(r.element),this._renderedItems[e]=r})}_removeElement(e,t=!0){e=+e;const i=this._renderedItems[e];this._delegate.destroyItem(e,i),t?this._topPositions[e+1]=void 0:this.padding=this.padding+this._getItemHeight(e),i.element.parentElement&&i.element.parentElement.removeChild(i.element),delete this._renderedItems[e]}_removeAllElements(){Object.keys(this._renderedItems).forEach(e=>this._removeElement(e))}_recalculateTopPositions(e,t){for(let i=e;i<=t;i++)this._topPositions[i+1]=this._topPositions[i]+this._getItemHeight(i)}_calculateStartIndex(e){const t=this._firstItemRendered(),i=this._lastItemRendered();this._recalculateTopPositions(t,i);let r=0,s=this._countItems()-1;for(;;){const o=Math.floor((r+s)/2),a=e+this._topPositions[o];if(s<r)return 0;if(a<=0&&a+this._getItemHeight(o)>0)return o;isNaN(a)||a>=0?s=o-1:r=o+1}}_debounce(e,t,i){let r;return function(){const s=i&&!r;clearTimeout(r),s?e.apply(this,arguments):r=setTimeout(()=>{r=null,e.apply(this,arguments)},t)}}_doubleFireOnTouchend(){this._render(),this._debounce(this._render.bind(this),100)}_addEventListeners(){m.bindListeners(this,["_onChange","_doubleFireOnTouchend"]),qe.isIOS()&&(this._boundOnChange=this._debounce(this._boundOnChange,30)),this._pageContent.addEventListener("scroll",this._boundOnChange,!0),qe.isIOS()&&(m.addEventListener(this._pageContent,"touchmove",this._boundOnChange,{capture:!0,passive:!0}),this._pageContent.addEventListener("touchend",this._boundDoubleFireOnTouchend,!0)),window.document.addEventListener("resize",this._boundOnChange,!0)}_removeEventListeners(){this._pageContent.removeEventListener("scroll",this._boundOnChange,!0),qe.isIOS()&&(m.removeEventListener(this._pageContent,"touchmove",this._boundOnChange,{capture:!0,passive:!0}),this._pageContent.removeEventListener("touchend",this._boundDoubleFireOnTouchend,!0)),window.document.removeEventListener("resize",this._boundOnChange,!0)}destroy(){this._removeAllElements(),this._delegate.destroy(),this._parentElement=this._delegate=this._renderedItems=null,this._removeEventListeners()}}class N_ extends Oe{connectedCallback(){this.hasAttribute("delegate")&&(this.delegate=window[this.getAttribute("delegate")])}set delegate(e){this._lazyRepeatProvider&&this._lazyRepeatProvider.destroy(),!this._templateElement&&this.children[0]&&(this._templateElement=this.removeChild(this.children[0]));const t=new O_(e,this._templateElement||null);this._lazyRepeatProvider=new jS(this.parentElement,t)}get delegate(){m.throw("No delegate getter")}refresh(){this._lazyRepeatProvider&&this._lazyRepeatProvider.refresh()}attributeChangedCallback(e,t,i){}disconnectedCallback(){this._lazyRepeatProvider&&(this._lazyRepeatProvider.destroy(),this._lazyRepeatProvider=null)}}ke.LazyRepeatDelegate=O_;ke.LazyRepeatProvider=jS;ve.LazyRepeat=N_;customElements.define("ons-lazy-repeat",N_);const pR=Object.freeze(Object.defineProperty({__proto__:null,default:N_},Symbol.toStringTag,{value:"Module"})),mR=be(pR),lw="list",pp={"":"list--*"};class L_ extends Oe{constructor(){super(),this._compile()}_compile(){Be.prepare(this),this.classList.add(lw),le.initModifier(this,pp)}static get observedAttributes(){return["modifier","class"]}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,lw,pp);break;case"modifier":le.onModifierChanged(t,i,this,pp);break}}}ve.List=L_;customElements.define("ons-list",L_);const gR=Object.freeze(Object.defineProperty({__proto__:null,default:L_},Symbol.toStringTag,{value:"Module"})),_R=be(gR),uw="list-header",mp={"":"list-header--*"};class M_ extends Oe{constructor(){super(),this._compile()}_compile(){Be.prepare(this),this.classList.add(uw),le.initModifier(this,mp)}static get observedAttributes(){return["modifier","class"]}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,uw,mp);break;case"modifier":le.onModifierChanged(t,i,this,mp);break}}}ve.ListHeader=M_;customElements.define("ons-list-header",M_);const yR=Object.freeze(Object.defineProperty({__proto__:null,default:M_},Symbol.toStringTag,{value:"Module"})),vR=be(yR);class V_ extends Gi{constructor({timing:e="linear",delay:t=0,duration:i=.2}={}){super({timing:e,delay:t,duration:i})}showExpansion(e,t){t()}hideExpansion(e,t){t()}}class bR extends V_{showExpansion(e,t){this._animateExpansion(e,!0,t)}hideExpansion(e,t){this._animateExpansion(e,!1,t)}_animateExpansion(e,t,i){const r=e.expandableContent.style.height,s=e.expandableContent.style.display;e.expandableContent.style.height="auto",e.expandableContent.style.display="block";const o=window.getComputedStyle(e.expandableContent),a=[{height:0,paddingTop:0,paddingBottom:0},{height:o.height,paddingTop:o.paddingTop,paddingBottom:o.paddingBottom}],c=[{transform:"rotate(45deg)"},{transform:"rotate(225deg)"}];e.expandableContent.style.height=r,k(e.expandableContent,{duration:this.duration,property:"height padding-top padding-bottom"}).default(...t?a:a.reverse()).play(()=>{e.expandableContent.style.display=s,i&&i()}),e.expandChevron&&k(e.expandChevron,{duration:this.duration,property:"transform"}).default(...t?c:c.reverse()).play()}}const cw="list-item",gp={".list-item":"list-item--*",".list-item__left":"list-item--*__left",".list-item__center":"list-item--*__center",".list-item__right":"list-item--*__right",".list-item__label":"list-item--*__label",".list-item__title":"list-item--*__title",".list-item__subtitle":"list-item--*__subtitle",".list-item__thumbnail":"list-item--*__thumbnail",".list-item__icon":"list-item--*__icon"},wR={default:bR,none:V_};class Mu extends Oe{constructor(){super(),this._animatorFactory=this._updateAnimatorFactory();const e=/^ons-(?!col$|row$|if$)/i;this._shouldIgnoreTap=t=>t.hasAttribute("prevent-tap")||e.test(t.tagName),this.show=this.showExpansion,this.hide=this.hideExpansion,Z(this,()=>{this._compile()})}_compile(){Be.prepare(this),this.classList.add(cw);let e,t,i=[];Array.from(this.childNodes).forEach(c=>{c.nodeType!==Node.ELEMENT_NODE?i.push(c):c.classList.contains("top")?e=c:c.classList.contains("expandable-content")?t=c:i.push(c),c.nodeName!=="ONS-RIPPLE"&&c.remove()}),i=e?Array.from(e.childNodes):i;let r,s,o;const a=[];if(i.forEach(c=>{c.nodeType!==Node.ELEMENT_NODE?a.push(c):c.classList.contains("left")?r=c:c.classList.contains("right")?s=c:c.classList.contains("center")?o=c:a.push(c)}),this.hasAttribute("expandable")){if(this.classList.add("list-item--expandable"),e||(e=document.createElement("div"),e.classList.add("top")),e.classList.add("list-item__top"),this.appendChild(e),this._top=e,t&&(t.classList.add("list-item__expandable-content"),this.appendChild(t)),!s){s=document.createElement("div"),s.classList.add("list-item__right","right");const c=document.createElement("span");c.classList.add("list-item__expand-chevron"),s.appendChild(c)}this.expanded&&this.classList.add("list-item--expanded")}else e=this;o||(o=document.createElement("div"),o.classList.add("center"),a.forEach(c=>o.appendChild(c))),o.classList.add("list-item__center"),e.appendChild(o),r&&(r.classList.add("list-item__left"),e.appendChild(r)),s&&(s.classList.add("list-item__right"),e.appendChild(s)),m.updateRipple(this),le.initModifier(this,gp)}showExpansion(){this.expanded=!0}hideExpansion(){this.expanded=!1}toggleExpansion(){this.expanded=!this.expanded}clearTapBackgroundColor(){this._clearTapBackgroundColor()}_animateExpansion(){const e=this.expanded&&this.classList.contains("list-item--expanded");if(!this.hasAttribute("expandable")||this._expanding||e)return;this._expanding=!0;const t=()=>{this._expanding=!1,this.expanded?this.classList.add("list-item--expanded"):this.classList.remove("list-item--expanded")},i=this._animatorFactory.newAnimator();i._animateExpansion?i._animateExpansion(this,this.expanded,t):t()}_updateAnimatorFactory(){return new On({animators:wR,baseClass:V_,baseClassName:"ListItemAnimator",defaultAnimation:this.getAttribute("animation")||"default"})}static get observedAttributes(){return["modifier","class","ripple","animation","expanded"]}get expandableContent(){return this.querySelector(".list-item__expandable-content")}get expandChevron(){return this.querySelector(".list-item__expand-chevron")}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,cw,gp);break;case"modifier":le.onModifierChanged(t,i,this,gp);break;case"ripple":m.updateRipple(this);break;case"animation":this._animatorFactory=this._updateAnimatorFactory();break;case"expanded":Z(this,()=>this._animateExpansion());break}}connectedCallback(){Z(this,()=>{this._setupListeners(!0),this._originalBackgroundColor=this.style.backgroundColor,this.tapped=!1})}disconnectedCallback(){this._setupListeners(!1)}_setupListeners(e){const t=(e?"add":"remove")+"EventListener";m[t](this,"touchstart",this._onTouch,{passive:!0}),m[t](this,"touchmove",this._onRelease,{passive:!0}),this[t]("touchcancel",this._onRelease),this[t]("touchend",this._onRelease),this[t]("touchleave",this._onRelease),this[t]("drag",this._onDrag),this[t]("mousedown",this._onTouch),this[t]("mouseup",this._onRelease),this[t]("mouseout",this._onRelease),this._top&&this._top[t]("click",this._onClickTop.bind(this))}_onClickTop(){this._expanding||(this.toggleExpansion(),this.dispatchEvent(new Event("expand")),this.dispatchEvent(new Event("expansion")))}_onDrag(e){const t=e.gesture;this.hasAttribute("lock-on-drag")&&["left","right"].indexOf(t.direction)>-1&&t.preventDefault()}_onTouch(e){if(this.tapped||this!==e.target&&(this._shouldIgnoreTap(e.target)||m.findParent(e.target,this._shouldIgnoreTap,i=>i===this)))return;this.tapped=!0;const t={transition:"background-color 0.0s linear 0.02s, box-shadow 0.0s linear 0.02s"};this.hasAttribute("tappable")&&(this.style.backgroundColor&&(this._originalBackgroundColor=this.style.backgroundColor),t.backgroundColor=this.getAttribute("tap-background-color")||"#d9d9d9",t.boxShadow=`0px -1px 0px 0px ${t.backgroundColor}`),zt(this,t)}_onRelease(){this.tapped=!1,this.keepTapBackgroundColor||this._clearTapBackgroundColor(),zt.clear(this,"transition boxShadow")}_clearTapBackgroundColor(){this.style.backgroundColor=this._originalBackgroundColor||""}}m.defineBooleanProperties(Mu,["expanded","expandable","tappable","lock-on-drag","keep-tap-background-color"]);m.defineStringProperties(Mu,["animation","tap-background-color"]);ve.ListItem=Mu;customElements.define("ons-list-item",Mu);const ER=Object.freeze(Object.defineProperty({__proto__:null,default:Mu},Symbol.toStringTag,{value:"Module"})),TR=be(ER),hw="list-title",_p={"":"list-title--*"};class B_ extends Oe{constructor(){super(),this._compile()}_compile(){Be.prepare(this),this.classList.add(hw),le.initModifier(this,_p)}static get observedAttributes(){return["modifier","class"]}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,hw,_p);break;case"modifier":le.onModifierChanged(t,i,this,_p);break}}}ve.ListTitle=B_;customElements.define("ons-list-title",B_);const SR=Object.freeze(Object.defineProperty({__proto__:null,default:B_},Symbol.toStringTag,{value:"Module"})),IR=be(SR),AR=n=>{const[e,t]=[parseInt(n,10),/px/.test(n)];return t?e:Math.round(document.body.offsetWidth*e/100)};class qS{constructor(e){"element ignoreSwipe isInitialState onDragCallback swipeMax swipeMin swipeMid".split(/\s+/).forEach(t=>this[t]=e[t]),this.elementHandler=e.elementHandler||e.element,this.getThreshold=e.getThreshold||(()=>.5),this.getSide=e.getSide||(()=>"left"),this.handleGesture=this.handleGesture.bind(this),this._shouldFixScroll=m.globals.actualMobileOS==="ios"}update(e=this.element.hasAttribute("swipeable")){this.gestureDetector||(this.gestureDetector=new pe(this.elementHandler,{dragMinDistance:1,passive:!this._shouldFixScroll}));const t=e?"on":"off";this.gestureDetector[t]("drag dragstart dragend",this.handleGesture)}handleGesture(e){e.gesture&&(e.type==="dragstart"?this.onDragStart(e):this._ignoreDrag||(e.type==="dragend"?this.onDragEnd(e):this.onDrag(e)))}onDragStart(e){const t=()=>this.getSide()==="left"?e.gesture.center.clientX:window.innerWidth-e.gesture.center.clientX;this._ignoreDrag=e.consumed||!m.isValidGesture(e)||this.ignoreSwipe(e,t()),this._ignoreDrag||(e.consume&&e.consume(),e.consumed=!0,this._width=AR(this.element.style.width||"100%"),this._startDistance=this._distance=!(this.isInitialState instanceof Function)||this.isInitialState()?0:this._width,m.iosPreventScroll(this.gestureDetector))}onDrag(e){e.stopPropagation();const t=this.getSide()==="left"?e.gesture.deltaX:-e.gesture.deltaX,i=Math.max(0,Math.min(this._width,this._startDistance+t));i!==this._distance&&(this._distance=i,this.swipeMid(this._distance,this._width))}onDragEnd(e){e.stopPropagation();const t=e.gesture.interimDirection;this.getSide()!==t&&this._distance>this._width*this.getThreshold()?this.swipeMax():this.swipeMin()}dispose(){this.gestureDetector&&this.gestureDetector.dispose(),this.gestureDetector=this.element=this.elementHandler=null}}class _i extends Gi{constructor(e){e=m.extend({timing:"linear",duration:"0.4",delay:"0"},e||{}),super(e)}push(e,t,i){i()}pop(e,t,i){i()}block(e){const t=m.createElement(`
      <div style="position: absolute; background-color: transparent; width: 100%; height: 100%; z-index: 100000"></div>
    `);return e.parentNode.appendChild(t),()=>t.remove()}}class F_ extends _i{static get swipeable(){return!0}constructor({durationRestore:e=.1,durationSwipe:t=.15,timingSwipe:i="linear",...r}={}){super({...r}),this.constructor===F_&&m.throwAbstract(),this.durationRestore=e,this.durationSwipe=t,this.timingSwipe=i,this.optSwipe={timing:i,duration:t},this.optRestore={timing:i,duration:e},this.swipeShadow=m.createElement('<div style="position: absolute; height: 100%; width: 12px; right: 100%; top: 0; bottom: 0; z-index: -1;background: linear-gradient(to right, transparent 0, rgba(0,0,0,.04) 40%, rgba(0,0,0,.12) 80%, rgba(0,0,0,.16) 100%);"></div>'),this.isDragStart=!0}_decompose(){m.throwMember()}_shouldAnimateToolbar(){m.throwMember()}_calculateDelta(){m.throwMember()}_dragStartSetup(e,t){this.isDragStart=!1,this.unblock=super.block(t),e.parentElement.insertBefore(this.backgroundMask,e),this.target={enter:m.findToolbarPage(e)||e,leave:m.findToolbarPage(t)||t},this.decomp={enter:this._decompose(this.target.enter),leave:this._decompose(this.target.leave)},this.delta=this._calculateDelta(t,this.decomp.leave),this.shouldAnimateToolbar=this._shouldAnimateToolbar(this.target.enter,this.target.leave),this.shouldAnimateToolbar?(this.swipeShadow.style.top=this.decomp.leave.toolbar.offsetHeight+"px",this.target.leave.appendChild(this.swipeShadow),this._saveStyle(this.target.enter,this.target.leave)):(t.appendChild(this.swipeShadow),this._saveStyle(e,t)),t.classList.add("overflow-visible"),this.overflowElement=t,this.decomp.leave.content.classList.add("content-swiping")}translate(e,t,i,r){this.isSwiping=!0,i.style.display==="none"&&(i.style.display=""),this.isDragStart&&(this.maxWidth=t,this._dragStartSetup(i,r));const s=(e-t)/t;this.shouldAnimateToolbar?k.runAll(k([this.decomp.enter.content,this.decomp.enter.bottomToolbar,this.decomp.enter.background]).queue({transform:`translate3d(${s*25}%, 0, 0)`,opacity:1+s*10/100}),k(this.decomp.enter.toolbarCenter).queue({transform:`translate3d(${this.delta.title*s}px, 0, 0)`,opacity:1+s}),k(this.decomp.enter.backButtonLabel).queue({opacity:1+s*10/100,transform:`translate3d(${this.delta.label*s}px, 0, 0)`}),k(this.decomp.enter.other).queue({opacity:1+s}),k([this.decomp.leave.content,this.decomp.leave.bottomToolbar,this.decomp.leave.background,this.swipeShadow]).queue({transform:`translate3d(${e}px, 0, 0)`}),k(this.decomp.leave.toolbar).queue({opacity:-1*s}),k(this.decomp.leave.toolbarCenter).queue({transform:`translate3d(${(1+s)*125}%, 0, 0)`}),k(this.decomp.leave.backButtonLabel).queue({opacity:-1*s,transform:`translate3d(${this.delta.title*(1+s)}px, 0, 0)`}),k(this.swipeShadow).queue({opacity:-1*s})):k.runAll(k(r).queue({transform:`translate3d(${e}px, 0, 0)`}),k(i).queue({transform:`translate3d(${s*25}%, 0, 0)`,opacity:1+s*10/100}),k(this.swipeShadow).queue({opacity:-1*s}))}restore(e,t,i){this.isDragStart||(this.shouldAnimateToolbar?k.runAll(k([this.decomp.enter.content,this.decomp.enter.bottomToolbar,this.decomp.enter.background]).queue({transform:"translate3d(-25%, 0, 0)",opacity:.9},this.optRestore),k(this.decomp.enter.toolbarCenter).queue({transform:`translate3d(-${this.delta.title}px, 0, 0)`,transition:`opacity ${this.durationRestore}s linear, transform ${this.durationRestore}s ${this.timingSwipe}`,opacity:0}),k(this.decomp.enter.backButtonLabel).queue({transform:`translate3d(-${this.delta.label}px, 0, 0)`},this.optRestore),k(this.decomp.enter.other).queue({opacity:0},this.optRestore),k([this.decomp.leave.content,this.decomp.leave.bottomToolbar,this.decomp.leave.background,this.swipeShadow]).queue({transform:"translate3d(0, 0, 0)"},this.optRestore),k(this.decomp.leave.toolbar).queue({opacity:1},this.optRestore),k(this.decomp.leave.toolbarCenter).queue({transform:"translate3d(0, 0, 0)"},this.optRestore),k(this.decomp.leave.backButtonLabel).queue({opacity:1,transform:"translate3d(0, 0, 0)",transition:`opacity ${this.durationRestore}s linear, transform ${this.durationRestore}s ${this.timingSwipe}`}),k(this.swipeShadow).queue({opacity:0},this.optRestore).queue(r=>{this._reset(this.target.enter,this.target.leave),e.style.display="none",i&&i(),r()})):k.runAll(k(e).queue({transform:"translate3D(-25%, 0, 0)",opacity:.9},this.optRestore),k(t).queue({transform:"translate3D(0, 0, 0)"},this.optRestore).queue(r=>{this._reset(e,t),e.style.display="none",i&&i(),r()})))}popSwipe(e,t,i){this.isDragStart||(this.shouldAnimateToolbar?k.runAll(k([this.decomp.enter.content,this.decomp.enter.bottomToolbar,this.decomp.enter.background]).queue({transform:"translate3d(0, 0, 0)",opacity:1},this.optSwipe),k(this.decomp.enter.toolbarCenter).queue({transform:"translate3d(0, 0, 0)",transition:`opacity ${this.durationSwipe}s linear, transform ${this.durationSwipe}s ${this.timingSwipe}`,opacity:1}),k(this.decomp.enter.backButtonLabel).queue({transform:"translate3d(0, 0, 0)"},this.optSwipe),k(this.decomp.enter.other).queue({opacity:1},this.optSwipe),k([this.decomp.leave.content,this.decomp.leave.bottomToolbar,this.decomp.leave.background]).queue({transform:"translate3d(100%, 0, 0)"},this.optSwipe),k(this.decomp.leave.toolbar).queue({opacity:0},this.optSwipe),k(this.decomp.leave.toolbarCenter).queue({transform:"translate3d(125%, 0, 0)"},this.optSwipe),k(this.decomp.leave.backButtonLabel).queue({opacity:0,transform:`translate3d(${this.delta.title}px, 0, 0)`,transition:`opacity ${this.durationSwipe}s linear, transform ${this.durationSwipe}s ${this.timingSwipe}`}),k(this.swipeShadow).queue({opacity:0,transform:`translate3d(${this.maxWidth}px, 0, 0)`},this.optSwipe).queue(r=>{this._reset(this.target.enter,this.target.leave),i&&i(),r()})):k.runAll(k(e).queue({transform:"translate3D(0, 0, 0)",opacity:1},this.optSwipe),k(t).queue({transform:"translate3D(100%, 0, 0)"},this.optSwipe).queue(r=>{this._reset(e,t),i&&i(),r()})))}_saveStyle(...e){this._savedStyle=new WeakMap;const t=i=>this._savedStyle.set(i,i.getAttribute("style"));e.forEach(t),Object.keys(this.decomp).forEach(i=>{Object.keys(this.decomp[i]).forEach(r=>{(this.decomp[i][r]instanceof Array?this.decomp[i][r]:[this.decomp[i][r]]).forEach(t)})})}_restoreStyle(...e){const t=i=>{this._savedStyle.get(i)===null?i.removeAttribute("style"):i.setAttribute("style",this._savedStyle.get(i)),this._savedStyle.delete(i)};e.forEach(t),Object.keys(this.decomp).forEach(i=>{Object.keys(this.decomp[i]).forEach(r=>{(this.decomp[i][r]instanceof Array?this.decomp[i][r]:[this.decomp[i][r]]).forEach(t)})})}_reset(...e){this.isSwiping=!1,this._savedStyle&&this._restoreStyle(...e),this.unblock&&this.unblock(),this.swipeShadow.remove(),this.backgroundMask.remove(),this.overflowElement.classList.remove("overflow-visible"),this.decomp.leave.content.classList.remove("content-swiping"),this.decomp=this.target=this.overflowElement=this._savedStyle=null,this.isDragStart=!0}}const ze=(n=0,e=0,t=0)=>`translate3d(${n}, ${e}, ${t})`;class yp extends F_{constructor({timing:e="cubic-bezier(0.3, .4, 0, .9)",delay:t=0,duration:i=.4,...r}={}){super({timing:e,delay:t,duration:i,...r}),this.backgroundMask=m.createElement('<div style="position: absolute; width: 100%; height: 100%;background-color: black; z-index: 2"></div>')}_decompose(e){const t=e._getToolbarElement(),i=t._getToolbarLeftItemsElement(),r=t._getToolbarRightItemsElement(),s=function(a){const c=[];for(let l=0;l<a.length;l++)a[l].nodeName.toLowerCase()!=="ons-back-button"&&c.push(a[l]);return c},o=[].concat(i.children.length===0?i:s(i.children)).concat(r.children.length===0?r:s(r.children));return{toolbarCenter:t._getToolbarCenterItemsElement(),backButtonIcon:t._getToolbarBackButtonIconElement(),backButtonLabel:t._getToolbarBackButtonLabelElement(),other:o,content:e._getContentElement(),background:e._getBackgroundElement(),toolbar:t,bottomToolbar:e._getBottomToolbarElement()}}_shouldAnimateToolbar(e,t){const i=e._canAnimateToolbar()&&t._canAnimateToolbar(),r=e._getToolbarElement(),s=t._getToolbarElement(),o=r.hasAttribute("static")||s.hasAttribute("static"),a=m.hasModifier(r,"material")||m.hasModifier(s,"material"),c=m.hasModifier(r,"transparent")||m.hasModifier(s,"transparent");return i&&!o&&!a&&!c}_calculateDelta(e,t){let i,r;const s=e.getBoundingClientRect();if(t.backButtonLabel.classList.contains("back-button__label")){const o=t.backButtonLabel.getBoundingClientRect();i=Math.round(s.width/2-o.width/2-o.left)}else i=Math.round(s.width/2*.6);return t.backButtonIcon.classList.contains("back-button__icon")&&(r=t.backButtonIcon.getBoundingClientRect().right-2),{title:i,label:r}}push(e,t,i){this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t);const r=super.block(e);Z(e,()=>{const s=m.findToolbarPage(e)||e,o=m.findToolbarPage(t)||t,a=this._decompose(s),c=this._decompose(o),l=this._calculateDelta(t,a);this._shouldAnimateToolbar(s,o)?k.runAll(k([a.content,a.bottomToolbar,a.background],this.def).default({transform:ze("100%")},{transform:ze()}),k(a.toolbar,this.def).default({opacity:0},{opacity:1}),k(a.toolbarCenter,this.def).default({transform:ze("125%"),opacity:1},{transform:ze(),opacity:1}),k(a.backButtonLabel,this.def).default({transform:ze(`${l.title}px`),opacity:0},{transform:ze(),opacity:1,transition:`opacity ${this.duration}s linear, transform ${this.duration}s ${this.timing}`}),k(a.other,this.def).default({opacity:0},{css:{opacity:1},timing:"linear"}),k([c.content,c.bottomToolbar,c.background],this.def).default({transform:ze(),opacity:1},{transform:ze("-25%"),opacity:.9}).queue(f=>{this.backgroundMask.remove(),r(),i(),f()}),k(c.toolbarCenter,this.def).default({transform:ze(),opacity:1},{transform:ze(`-${l.title}px`),opacity:0,transition:`opacity ${this.duration}s linear, transform ${this.duration}s ${this.timing}`}),k(c.backButtonLabel,this.def).default({transform:ze(),opacity:1},{transform:ze(`-${l.label}px`),opacity:0}),k(c.other,this.def).default({opacity:1},{css:{opacity:0},timing:"linear"})):k.runAll(k(e,this.def).default({transform:ze("100%")},{transform:ze()}),k(t,this.def).default({transform:ze(),opacity:1},{transform:ze("-25%"),opacity:.9}).queue(f=>{this.backgroundMask.remove(),r(),i(),f()}))})}pop(e,t,i){if(this.isSwiping)return this.popSwipe(e,t,i);this.backgroundMask.remove(),e.parentNode.insertBefore(this.backgroundMask,e);const r=super.block(e),s=m.findToolbarPage(e)||e,o=m.findToolbarPage(t)||t,a=this._decompose(s),c=this._decompose(o),l=this._calculateDelta(t,c);this._shouldAnimateToolbar(s,o)?k.runAll(k([a.content,a.bottomToolbar,a.background],this.def).default({transform:ze("-25%"),opacity:.9},{transform:ze(),opacity:1}),k(a.toolbarCenter,this.def).default({transform:ze(`-${l.title}px`),opacity:0},{transform:ze(),opacity:1,transition:`opacity ${this.duration}s linear, transform ${this.duration}s ${this.timing}`}),k(a.backButtonLabel,this.def).default({transform:ze(`-${l.label}px`)},{transform:ze()}),k(a.other,this.def).default({opacity:0},{css:{opacity:1},timing:"linear"}),k([c.content,c.bottomToolbar,c.background],this.def).default({transform:ze()},{transform:ze("100%")}).wait(0).queue(f=>{this.backgroundMask.remove(),r(),i(),f()}),k(c.toolbar,this.def).default({opacity:1},{opacity:0}),k(c.toolbarCenter,this.def).default({transform:ze()},{transform:ze("125%")}),k(c.backButtonLabel,this.def).default({transform:ze(),opacity:1},{transform:ze(`${l.title}px`),opacity:0,transition:`opacity ${this.duration}s linear, transform ${this.duration}s ${this.timing}`})):k.runAll(k(e,this.def).default({transform:ze("-25%"),opacity:.9},{transform:ze(),opacity:1}),k(t,this.def).default({transform:ze()},{transform:ze("100%")}).queue(f=>{this.backgroundMask.remove(),r(),i(),f()}))}}class dw extends _i{constructor({timing:e="cubic-bezier(.1, .7, .1, 1)",delay:t=0,duration:i=.4}={}){super({timing:e,delay:t,duration:i}),this.backgroundMask=m.createElement('<div style="position: absolute; width: 100%; height: 100%;background: linear-gradient(black, white);"></div>')}push(e,t,i){this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t);const r=super.block(e);k.runAll(k(e,this.def).default({transform:"translate3D(0, 100%, 0)"},{transform:"translate3D(0, 0, 0)"}),k(t,this.def).default({transform:"translate3D(0, 0, 0)",opacity:1},{transform:"translate3D(0, -10%, 0)",opacity:.9}).queue(s=>{this.backgroundMask.remove(),r(),i(),s()}))}pop(e,t,i){this.backgroundMask.remove(),e.parentNode.insertBefore(this.backgroundMask,e);const r=super.block(e);k.runAll(k(e,this.def).default({transform:"translate3D(0, -43px, 0)",opacity:.9},{transform:"translate3D(0, 0, 0)",opacity:1}).queue(s=>{this.backgroundMask.remove(),r(),i(),s()}),k(t,this.def).default({transform:"translate3D(0, 0, 0)"},{transform:"translate3D(0, 100%, 0)"}))}}const Bc="translate3d(0, 0, 0)";class fw extends _i{constructor({timing:e="linear",delay:t=0,duration:i=.4}={}){super({timing:e,delay:t,duration:i})}push(e,t,i){const r=super.block(e);k.runAll(k(e,this.def).default({transform:Bc,opacity:0},{transform:Bc,opacity:1}).queue(s=>{r(),i(),s()}))}pop(e,t,i){const r=super.block(e);k.runAll(k(t,this.def).default({transform:Bc,opacity:1},{transform:Bc,opacity:0}).queue(s=>{r(),i(),s()}))}}class pw extends _i{constructor({timing:e="cubic-bezier(.1, .7, .4, 1)",delay:t=0,duration:i=.3}={}){super({timing:e,delay:t,duration:i}),this.blackMaskOpacity=.4,this.backgroundMask=m.createElement('<div style="position: absolute; width: 100%; height: 100%; z-index: 2;background-color: black; opacity: 0;"></div>')}push(e,t,i){this.backgroundMask.remove(),t.parentElement.insertBefore(this.backgroundMask,t.nextSibling);const r=super.block(e);k.runAll(k(this.backgroundMask,this.def).default({transform:"translate3d(0, 0, 0)",opacity:0},{opacity:this.blackMaskOpacity}).queue(s=>{this.backgroundMask.remove(),s()}),k(e,this.def).default({transform:"translate3d(100%, 0, 0)"},{transform:"translate3d(0, 0, 0)"}),k(t,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(-45%, 0, 0)"}).queue(s=>{r(),i(),s()}))}pop(e,t,i){this.backgroundMask.remove(),e.parentNode.insertBefore(this.backgroundMask,e.nextSibling);const r=super.block(e);k.runAll(k(this.backgroundMask,this.def).default({transform:"translate3d(0, 0, 0)",opacity:this.blackMaskOpacity},{opacity:0}).queue(s=>{this.backgroundMask.remove(),s()}),k(e,this.def).default({transform:"translate3d(-45%, 0, 0)",opacity:.9},{transform:"translate3d(0, 0, 0)",opacity:1}),k(t,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(100%, 0, 0)"}).queue(s=>{r(),i(),s()}))}}class mw extends _i{constructor({timing:e="cubic-bezier(.1, .7, .1, 1)",delay:t=.05,duration:i=.4}={}){super({timing:e,delay:t,duration:i}),this.backgroundMask=m.createElement('<div style="position: absolute; width: 100%; height: 100%;background-color: black;"></div>')}push(e,t,i){this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t);const r=super.block(e),s=k(this.backgroundMask).wait(this.delay+this.duration).queue(o=>{this.backgroundMask.remove(),o()});k.runAll(s,k(e,this.def).default({transform:"translate3d(0, 100%, 0)"},{transform:"translate3d(0, 0, 0)"}),k(t,this.def).default({opacity:1},{opacity:.4}).queue(o=>{r(),i(),o()}))}pop(e,t,i){this.backgroundMask.remove(),e.parentNode.insertBefore(this.backgroundMask,e);const r=super.block(e);k.runAll(k(this.backgroundMask).wait(this.delay+this.duration).queue(s=>{this.backgroundMask.remove(),s()}),k(e,this.def).default({opacity:.4},{opacity:1}).queue(s=>{r(),i(),s()}),k(t,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, 100%, 0)"}))}}class vp extends _i{constructor({timing:e="cubic-bezier(0.4, 0, 0.2, 1)",timingPop:t="cubic-bezier(0.4, 0, 1, 1)",delay:i=0,duration:r=.2}={}){super({timing:e,delay:i,duration:r}),this.timingPop=t}push(e,t,i){const r=super.block(e);k.runAll(k(e,this.def).default({transform:"translate3D(0, 42px, 0)",opacity:0},{transform:"translate3D(0, 0, 0)",opacity:1}).queue(s=>{r(),i(),s()}))}pop(e,t,i){const r=super.block(e);k.runAll(k(t,this.def).default({transform:"translate3D(0, 0, 0)",opacity:1},{css:{transform:"translate3D(0, 38px, 0)",opacity:0},timing:this.timingPop}).queue(s=>{r(),i(),s()}))}}class CR extends _i{constructor(e){super(e)}push(e,t,i){i()}pop(e,t,i){i()}}const vo={default:function(){return qe.isAndroid()?vp:yp},slide:function(){return qe.isAndroid()?pw:yp},lift:function(){return qe.isAndroid()?mw:dw},fade:function(){return qe.isAndroid()?vp:fw},"slide-ios":yp,"slide-md":pw,"lift-ios":dw,"lift-md":mw,"fade-ios":fw,"fade-md":vp,none:CR},gw={ready(n,e){e()}},hl=n=>n.nodeName!=="ONS-PAGE"&&m.throw("Only page elements can be children of navigator");class $_ extends Oe{get animatorFactory(){return this._animatorFactory}constructor(){super(),this._isRunning=!1,this._initialized=!1,this._pageLoader=Nu,this._pageMap=new WeakMap,this._updateAnimatorFactory()}get pageLoader(){return this._pageLoader}set pageLoader(e){e instanceof Js||m.throwPageLoader(),this._pageLoader=e}_getPageTarget(){return this._page||this.getAttribute("page")}get page(){return this._page}set page(e){this._page=e}connectedCallback(){if(this.onDeviceBackButton=this._onDeviceBackButton.bind(this),!qe.isAndroid()||this.getAttribute("swipeable")==="force"){let t;this._swipe=new qS({element:this,getThreshold:()=>Math.max(.2,parseFloat(this.getAttribute("swipe-threshold"))||0),swipeMax:()=>{const r={duration:t.durationSwipe,timing:t.timingSwipe};this._onSwipe&&this._onSwipe(1,r),m.triggerElementEvent(this,"swipe",{ratio:1,animationOptions:r}),this[this.swipeMax?"swipeMax":"popPage"]({animator:t,swipeToPop:!0}),t=null},swipeMid:(i,r)=>{const s=i/r;this._onSwipe&&this._onSwipe(s),m.triggerElementEvent(this,"swipe",{ratio:s}),t.translate(i,r,this.topPage.previousElementSibling,this.topPage)},swipeMin:()=>{const r={duration:t.durationRestore,timing:t.timingSwipe};this._onSwipe&&this._onSwipe(0,r),m.triggerElementEvent(this,"swipe",{ratio:0,animationOptions:r}),t.restore(this.topPage.previousElementSibling,this.topPage),t=null},ignoreSwipe:(i,r)=>{if(!this._isRunning&&this.children.length>1){const s=parseInt(this.getAttribute("swipe-target-width")||25,10);if(i.gesture.direction==="right"&&s>r){const o=a=>/ons-back-button/i.test(a.tagName);if(!o(i.target)&&!m.findParent(i.target,o,a=>/ons-page/i.test(a.tagName))){const a=(this.topPage.pushedOptions||{}).animation||this.animatorFactory._animation,c=vo[a]instanceof Function?vo[a].call():vo[a];if(typeof c<"u"&&c.swipeable)return t=new c,!1}}}return!0}}),this.attributeChangedCallback("swipeable")}if(this._initialized)return;this._initialized=!0;const e=m.defer();this.loaded=e.promise,gw.ready(this,()=>{const t=!m.hasAnyComponentAsParent(this),i={animation:"none",show:t};if(this.pages.length===0&&this._getPageTarget())this.pushPage(this._getPageTarget(),i).then(()=>e.resolve());else if(this.pages.length>0){for(var r=0;r<this.pages.length;r++)hl(this.pages[r]);this.topPage&&Z(this.topPage,()=>setTimeout(()=>{e.resolve(),t&&this.topPage._show(),this._updateLastPageBackButton()},0))}else Z(this,()=>{this.pages.length===0&&this._getPageTarget()?this.pushPage(this._getPageTarget(),i).then(()=>e.resolve()):e.resolve()})})}_updateAnimatorFactory(){this._animatorFactory=new On({animators:vo,baseClass:_i,baseClassName:"NavigatorAnimator",defaultAnimation:this.getAttribute("animation")})}disconnectedCallback(){this._backButtonHandler.destroy(),this._backButtonHandler=null,this._swipe&&this._swipe.dispose(),this._swipe=null}static get observedAttributes(){return["animation","swipeable"]}attributeChangedCallback(e,t,i){switch(e){case"animation":this._updateAnimatorFactory();break;case"swipeable":this._swipe&&this._swipe.update();break}}popPage(e={}){({options:e}=this._preparePageAndOptions(null,e)),m.isInteger(e.times)&&e.times>1&&this._removePages(e.times);const t=()=>new Promise(i=>{this._pageLoader.unload(this.pages[this.pages.length-1]),i()});return this._popPage(e,t)}_popPage(e,t=()=>Promise.resolve()){if(this._isRunning)return Promise.reject("popPage is already running.");if(this.pages.length<=1)return Promise.reject("ons-navigator's page stack is empty.");if(this._emitPrePopEvent())return Promise.reject("Canceled in prepop event.");const i=this.pages.length;return this._isRunning=!0,this.pages[i-2].updateBackButton(i-2>0),new Promise(r=>{const s=this.pages[i-1],o=this.pages[i-2];e=m.extend({},this.options||{},e),e.data&&(o.data=m.extend({},o.data||{},e.data||{}));const a=()=>{t().then(()=>{this._isRunning=!1,o._show(),m.triggerElementEvent(this,"postpop",{leavePage:s,enterPage:o,navigator:this,swipeToPop:!!e.swipeToPop,onsBackButton:!!e.onsBackButton}),e.callback&&e.callback(o),r(o)})};s._hide(),o.style.display="",(e.animator||this._animatorFactory.newAnimator(e)).pop(this.pages[i-2],this.pages[i-1],a)}).catch(()=>this._isRunning=!1)}pushPage(e,t={}){({page:e,options:t}=this._preparePageAndOptions(e,t));const i=r=>{hl(r),this._pageMap.set(r,e),r=m.extend(r,{data:t.data}),r.style.visibility="hidden"};return t.pageHTML?this._pushPage(t,()=>new Promise(r=>{Xb.load({page:t.pageHTML,parent:this,params:t.data},s=>{i(s),r()})})):this._pushPage(t,()=>new Promise((r,s)=>{this._pageLoader.load({page:e,parent:this,params:t.data},o=>{i(o),r()},o=>{this._isRunning=!1,s(o)})}))}_pushPage(e={},t=()=>Promise.resolve()){if(this._isRunning)return Promise.reject("pushPage is already running.");if(this._emitPrePushEvent())return Promise.reject("Canceled in prepush event.");this._isRunning=!0;const i=this.animationOptions;e=m.extend({},this.options||{},{animationOptions:i},e);const r=this._animatorFactory.newAnimator(e);return t().then(()=>{const s=this.pages.length,o=this.pages[s-1],a=e.leavePage||this.pages[s-2];return hl(o),o.updateBackButton(s>(e._replacePage?2:1)),o.pushedOptions=m.extend({},o.pushedOptions||{},e||{}),o.data=m.extend({},o.data||{},e.data||{}),o.unload=o.unload||e.unload,new Promise(c=>{const l=()=>{this._isRunning=!1,e.show!==!1&&setImmediate(()=>o._show()),m.triggerElementEvent(this,"postpush",{leavePage:a,enterPage:o,navigator:this}),a&&(a.style.display="none"),e.callback&&e.callback(o),c(o)};o.style.visibility="",a?(a._hide(),r.push(o,a,l)):l()})}).catch(s=>{throw this._isRunning=!1,s})}replacePage(e,t={}){return this.pushPage(e,t).then(i=>(this.pages.length>1&&this._pageLoader.unload(this.pages[this.pages.length-2]),this._updateLastPageBackButton(),Promise.resolve(i)))}insertPage(e,t,i={}){if({page:t,options:i}=this._preparePageAndOptions(t,i),e=this._normalizeIndex(e),e>=this.pages.length)return this.pushPage(t,i);t=typeof i.pageHTML=="string"?i.pageHTML:t;const r=typeof i.pageHTML=="string"?Xb:this._pageLoader;return new Promise(s=>{r.load({page:t,parent:this},o=>{hl(o),this._pageMap.set(o,t),o=m.extend(o,{data:i.data,pushedOptions:i}),i.animationOptions=m.extend({},this.animationOptions,i.animationOptions||{}),o.style.display="none",this.insertBefore(o,this.pages[e]),this.topPage.updateBackButton(!0),setTimeout(()=>{o=null,s(this.pages[e])},1e3/60)})})}removePage(e,t={}){return e=this._normalizeIndex(e),e<this.pages.length-1?new Promise(i=>{const r=this.pages[e],s=this.topPage;this._pageMap.delete(r),this._pageLoader.unload(r),this.pages.length===1&&this.topPage.updateBackButton(!1),i(s)}):this.popPage(t)}resetToPage(e,t={}){if({page:e,options:t}=this._preparePageAndOptions(e,t),!t.animator&&!t.animation&&!t.pop&&(t.animation="none"),!t.page&&!t.pageHTML&&this._getPageTarget()&&(e=t.page=this._getPageTarget()),t.pop)return this._removePages(),this.insertPage(0,e,{data:t.data}).then(()=>this.popPage(t));const i=t.callback;return t.callback=r=>{this._removePages(),r.updateBackButton(!1),i&&i(r)},this.pushPage(e,t)}bringPageTop(e,t={}){["number","string"].indexOf(typeof e)===-1&&m.throw("First argument must be a page name or the index of an existing page. You supplied "+e);const i=typeof e=="number"?this._normalizeIndex(e):this._lastIndexOfPage(e),r=this.pages[i];return i<0?this.pushPage(e,t):({options:t}=this._preparePageAndOptions(r,t),i===this.pages.length-1?Promise.resolve(r):(r||m.throw("Failed to find item "+e),this._isRunning?Promise.reject("pushPage is already running."):this._emitPrePushEvent()?Promise.reject("Canceled in prepush event."):(r.style.display="",r.style.visibility="hidden",r.parentNode.appendChild(r),this._pushPage(t))))}_preparePageAndOptions(e,t={}){return typeof t!="object"&&m.throw("options must be an object. You supplied "+t),e==null&&t.page&&(e=t.page),t=m.extend({},this.options||{},t,{page:e}),{page:e,options:t}}_removePages(e){const t=this.pages;let i=e===void 0?0:t.length-e;i=i<0?1:i;for(let r=t.length-2;r>=i;r--)this._pageMap.delete(t[r]),this._pageLoader.unload(t[r])}_updateLastPageBackButton(){const e=this.pages.length-1;e>=0&&this.pages[e].updateBackButton(e>0)}_normalizeIndex(e){return e>=0?e:Math.abs(this.pages.length+e)%this.pages.length}_onDeviceBackButton(e){this.pages.length>1?this.popPage():e.callParentHandler()}_lastIndexOfPage(e){let t;for(t=this.pages.length-1;t>=0&&e!==this._pageMap.get(this.pages[t]);t--);return t}_emitPreEvent(e,t={}){let i=!1;return m.triggerElementEvent(this,"pre"+e,m.extend({navigator:this,currentPage:this.pages[this.pages.length-1],cancel:()=>i=!0},t)),i}_emitPrePushEvent(){return this._emitPreEvent("push")}_emitPrePopEvent(){const e=this.pages.length;return this._emitPreEvent("pop",{leavePage:this.pages[e-1],enterPage:this.pages[e-2]})}_createPageElement(e){const t=m.createElement(ke.normalizePageHTML(e));return hl(t),t}get onDeviceBackButton(){return this._backButtonHandler}set onDeviceBackButton(e){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=Ou.createHandler(this,e)}get topPage(){let e=this.lastElementChild;for(;e&&e.tagName!=="ONS-PAGE";)e=e.previousElementSibling;return e}get pages(){return m.arrayFrom(this.children).filter(e=>e.tagName==="ONS-PAGE")}get onSwipe(){return this._onSwipe}set onSwipe(e){e&&!(e instanceof Function)&&m.throw('"onSwipe" must be a function'),this._onSwipe=e}get options(){return this._options}set options(e){this._options=e}get animationOptions(){return this.hasAttribute("animation-options")?On.parseAnimationOptionsString(this.getAttribute("animation-options")):{}}set animationOptions(e){e==null?this.removeAttribute("animation-options"):this.setAttribute("animation-options",JSON.stringify(e))}set _isRunning(e){this.setAttribute("_is-running",e?"true":"false")}get _isRunning(){return JSON.parse(this.getAttribute("_is-running"))}_show(){this.loaded.then(()=>this.topPage&&this.topPage._show())}_hide(){this.topPage&&this.topPage._hide()}_destroy(){for(let e=this.pages.length-1;e>=0;e--)this._pageLoader.unload(this.pages[e]);this.remove()}static registerAnimator(e,t){t.prototype instanceof _i||m.throwAnimator("Navigator"),vo[e]=t}static get animators(){return vo}static get NavigatorAnimator(){return _i}static get events(){return["prepush","postpush","prepop","postpop","swipe"]}static get rewritables(){return gw}}ve.Navigator=$_;customElements.define("ons-navigator",$_);const PR=Object.freeze(Object.defineProperty({__proto__:null,default:$_},Symbol.toStringTag,{value:"Module"})),kR=be(PR);class Ds extends Gi{constructor({timing:e="linear",delay:t=0,duration:i=.2}={}){super({timing:e,delay:t,duration:i})}show(e,t){t()}hide(e,t){t()}}class xR extends Ds{constructor({timing:e="linear",delay:t=0,duration:i=.3}={}){super({timing:e,delay:t,duration:i})}show(e,t){t=t||function(){},k(e,this.def).default({opacity:0},{opacity:1}).queue(i=>{t(),i()}).play()}hide(e,t){t=t||function(){},k(e,this.def).default({opacity:1},{opacity:0}).queue(i=>{t(),i()}).play()}}class RR extends Ds{constructor({timing:e="cubic-bezier( .1, .7, .1, 1)",delay:t=0,duration:i=.4}={}){super({timing:e,delay:t,duration:i})}show(e,t){t=t||function(){},k(e,this.def).default({transform:"translate3d(0, 100%, 0)"},{transform:"translate3d(0, 0, 0)"}).queue(i=>{t(),i()}).play()}hide(e,t){t=t||function(){},k(e,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, 100%, 0)"}).queue(i=>{t(),i()}).play()}}const _w={"":"modal--*",modal__content:"modal--*__content"},yw="modal",bp={default:Ds,fade:xR,lift:RR,none:Ds};class z_ extends Wi{constructor(){super(),this._defaultDBB=()=>{},Z(this,()=>this._compile())}get _scheme(){return _w}_updateAnimatorFactory(){return new On({animators:bp,baseClass:Ds,baseClassName:"ModalAnimator",defaultAnimation:this.getAttribute("animation")})}_compile(){if(this.style.display="none",this.style.zIndex=10001,this.classList.add(yw),!m.findChild(this,".modal__content")){const e=document.createElement("div");for(e.classList.add("modal__content");this.childNodes[0];){const t=this.childNodes[0];this.removeChild(t),e.insertBefore(t,null)}this.appendChild(e)}le.initModifier(this,this._scheme)}_toggleStyle(e){this.style.display=e?"table":"none"}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}static get observedAttributes(){return[...super.observedAttributes,"class"]}attributeChangedCallback(e,t,i){e==="class"?m.restoreClass(this,yw,_w):super.attributeChangedCallback(e,t,i)}static registerAnimator(e,t){t.prototype instanceof Ds||m.throwAnimator("Modal"),bp[e]=t}static get animators(){return bp}static get ModalAnimator(){return Ds}}ve.Modal=z_;customElements.define("ons-modal",z_);const DR=Object.freeze(Object.defineProperty({__proto__:null,default:z_},Symbol.toStringTag,{value:"Module"})),OR=be(DR),vw="toolbar",wp={"":"toolbar--*",".toolbar__left":"toolbar--*__left",".toolbar__center":"toolbar--*__center",".toolbar__right":"toolbar--*__right"};class Nd extends Oe{constructor(){super(),this._visible=!0,Z(this,()=>{this._compile()})}static get observedAttributes(){return["modifier","class"]}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,vw,wp);break;case"modifier":le.onModifierChanged(t,i,this,wp);break}}setVisibility(e){Z(this,()=>{if(this._visible=e,this.style.display=e?"":"none",this.parentNode){const t=m.findChild(this.parentNode,".page__background");t&&(t.style.top=e?null:0);const i=m.findChild(this.parentNode,".page__content");i&&(i.style.top=e?null:0)}})}show(){this.setVisibility(!0)}hide(){this.setVisibility(!1)}get visible(){return this._visible}set visible(e){this.setVisibility(e)}_getToolbarLeftItemsElement(){return this.querySelector(".left")||ke.nullElement}_getToolbarCenterItemsElement(){return this.querySelector(".center")||ke.nullElement}_getToolbarRightItemsElement(){return this.querySelector(".right")||ke.nullElement}_getToolbarBackButtonLabelElement(){return this.querySelector("ons-back-button .back-button__label")||ke.nullElement}_getToolbarBackButtonIconElement(){return this.querySelector("ons-back-button .back-button__icon")||ke.nullElement}_compile(){Be.prepare(this),this.classList.add(vw),this._ensureToolbarItemElements(),le.initModifier(this,wp)}_ensureToolbarItemElements(){for(let t=this.childNodes.length-1;t>=0;t--)this.childNodes[t].nodeType!=1&&this.removeChild(this.childNodes[t]);const e=this._ensureToolbarElement("center");if(e.classList.add("toolbar__title"),this.children.length!==1||!this.children[0].classList.contains("center")){const t=this._ensureToolbarElement("left"),i=this._ensureToolbarElement("right");(this.children[0]!==t||this.children[1]!==e||this.children[2]!==i)&&(this.appendChild(t),this.appendChild(e),this.appendChild(i))}}_ensureToolbarElement(e){if(m.findChild(this,".toolbar__"+e)){const i=m.findChild(this,".toolbar__"+e);return i.classList.add(e),i}const t=m.findChild(this,"."+e)||m.create("."+e);return t.classList.add("toolbar__"+e),t}}m.defineBooleanProperties(Nd,["static"]);ve.Toolbar=Nd;customElements.define("ons-toolbar",Nd);const NR=Object.freeze(Object.defineProperty({__proto__:null,default:Nd},Symbol.toStringTag,{value:"Module"})),bw="page",Ep={"":"page--*",".page__content":"page--*__content",".page__background":"page--*__background"};class j_ extends Oe{constructor(){super(),this._deriveHooks(),this._defaultClassName=bw,this.classList.add(bw),this._initialized=!1,Z(this,()=>{this._compile(),this._isShown=!1,this._contentElement=this._getContentElement(),this._backgroundElement=this._getBackgroundElement()})}_compile(){Be.prepare(this);const e=m.findChild(this,"ons-toolbar"),t=m.findChild(this,".page__background")||m.findChild(this,".background")||document.createElement("div");t.classList.add("page__background"),this.insertBefore(t,!e&&this.firstChild||e&&e.nextSibling);const i=m.findChild(this,".page__content")||m.findChild(this,".content")||document.createElement("div");i.classList.add("page__content"),i.parentElement||m.arrayFrom(this.childNodes).forEach(s=>{(s.nodeType!==1||this._elementShouldBeMoved(s))&&i.appendChild(s)}),this._tryToFillStatusBar(i),this.insertBefore(i,t.nextSibling),(!e||!m.hasModifier(e,"transparent"))&&i.children.length===1&&m.isPageControl(i.children[0])&&(this._defaultClassName+=" page--wrapper",this.attributeChangedCallback("class")),m.findChild(this,"ons-bottom-toolbar")&&(this._defaultClassName+=" page-with-bottom-toolbar",this.attributeChangedCallback("class")),le.initModifier(this,Ep)}_elementShouldBeMoved(e){if(e.classList.contains("page__background"))return!1;const t=e.tagName.toLowerCase();if(t==="ons-fab")return!e.hasAttribute("position");const i=["script","ons-toolbar","ons-bottom-toolbar","ons-modal","ons-speed-dial","ons-dialog","ons-alert-dialog","ons-popover","ons-action-sheet"];return e.hasAttribute("inline")||i.indexOf(t)===-1}_tryToFillStatusBar(e=this._contentElement){ke.autoStatusBarFill(()=>{m.toggleAttribute(this,"status-bar-fill",!m.findParent(this,t=>t.hasAttribute("status-bar-fill"))&&(this._canAnimateToolbar(e)||!m.findChild(e,m.isPageControl)))})}_canAnimateToolbar(e=this._contentElement){return m.findChild(this,"ons-toolbar")?!0:!!m.findChild(e,t=>m.match(t,"ons-toolbar")&&!t.hasAttribute("inline"))}connectedCallback(){m.isAttached(this)&&Z(this,()=>{this._tryToFillStatusBar(),this.hasAttribute("on-infinite-scroll")&&this.attributeChangedCallback("on-infinite-scroll",null,this.getAttribute("on-infinite-scroll")),this._initialized||(this._initialized=!0,setImmediate(()=>{this.onInit&&this.onInit(),m.triggerElementEvent(this,"init")}),m.hasAnyComponentAsParent(this)||setImmediate(()=>this._show()))})}updateBackButton(e){this.backButton&&(e?this.backButton.show():this.backButton.hide())}set name(e){this.setAttribute("name",e)}get name(){return this.getAttribute("name")}get backButton(){return this.querySelector("ons-back-button")}set onInfiniteScroll(e){e&&!(e instanceof Function)&&m.throw('"onInfiniteScroll" must be function or null'),Z(this,()=>{e?this._onInfiniteScroll||(this._infiniteScrollLimit=.9,this._boundOnScroll=this._onScroll.bind(this),setImmediate(()=>this._contentElement.addEventListener("scroll",this._boundOnScroll))):this._contentElement.removeEventListener("scroll",this._boundOnScroll),this._onInfiniteScroll=e})}get onInfiniteScroll(){return this._onInfiniteScroll}_onScroll(){const e=this._contentElement,t=(e.scrollTop+e.clientHeight)/e.scrollHeight>=this._infiniteScrollLimit;this._onInfiniteScroll&&!this._loadingContent&&t&&(this._loadingContent=!0,this._onInfiniteScroll(()=>this._loadingContent=!1))}get onDeviceBackButton(){return this._backButtonHandler}set onDeviceBackButton(e){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=Ou.createHandler(this,e)}get scrollTop(){return this._contentElement.scrollTop}set scrollTop(e){this._contentElement.scrollTop=e}_getContentElement(){const e=m.findChild(this,".page__content");if(e)return e;m.throw('Fail to get ".page__content" element')}_getBackgroundElement(){const e=m.findChild(this,".page__background");if(e)return e;m.throw('Fail to get ".page__background" element')}_getBottomToolbarElement(){return m.findChild(this,"ons-bottom-toolbar")||ke.nullElement}_getToolbarElement(){return m.findChild(this,"ons-toolbar")||document.createElement("ons-toolbar")}static get observedAttributes(){return["modifier","on-infinite-scroll","class"]}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,this._defaultClassName,Ep);break;case"modifier":le.onModifierChanged(t,i,this,Ep);break;case"on-infinite-scroll":i===null?this.onInfiniteScroll=null:this.onInfiniteScroll=r=>{const s=m.findFromPath(i);this.onInfiniteScroll=s,s(r)};break}}_show(){!this._isShown&&m.isAttached(this)&&(this._isShown=!0,this.setAttribute("shown",""),this.onShow&&this.onShow(),m.triggerElementEvent(this,"show"),m.propagateAction(this,"_show"))}_hide(){this._isShown&&(this._isShown=!1,this.removeAttribute("shown"),this.onHide&&this.onHide(),m.triggerElementEvent(this,"hide"),m.propagateAction(this,"_hide"))}_destroy(){this._hide(),this.onDestroy&&this.onDestroy(),m.triggerElementEvent(this,"destroy"),this.onDeviceBackButton&&this.onDeviceBackButton.destroy(),m.propagateAction(this,"_destroy"),this.remove()}_deriveHooks(){this.constructor.events.forEach(e=>{const t="on"+e.charAt(0).toUpperCase()+e.slice(1);Object.defineProperty(this,t,{configurable:!0,enumerable:!0,get:()=>this[`_${t}`],set:i=>{i instanceof Function||m.throw(`"${t}" hook must be a function`),this[`_${t}`]=i.bind(this)}})})}static get events(){return["init","show","hide","destroy"]}}ve.Page=j_;customElements.define("ons-page",j_);const LR=Object.freeze(Object.defineProperty({__proto__:null,default:j_},Symbol.toStringTag,{value:"Module"})),MR=be(LR);class Vl extends Gi{constructor({timing:e="cubic-bezier(.1, .7, .4, 1)",delay:t=0,duration:i=.2}={}){super({timing:e,delay:t,duration:i})}show(e,t){t()}hide(e,t){t()}_animate(e,{from:t,to:i,options:r,callback:s,restore:o=!1,animation:a}){return r=m.extend({},this.options,r),a&&(t=a.from,i=a.to),a=k(e),o&&(a=a.saveStyle()),a=a.queue(t).wait(this.delay).queue({css:i,duration:this.duration,timing:this.timing}),o&&(a=a.restoreStyle()),s&&(a=a.queue(c=>{s(),c()})),a}_animateAll(e,t){Object.keys(t).forEach(i=>this._animate(e[i],t[i]).play())}}const El={out:{from:{opacity:1},to:{opacity:0}},in:{from:{opacity:0},to:{opacity:1}}};class qm extends Vl{show(e,t){this._animateAll(e,{_mask:El.in,_popover:{animation:El.in,restore:!0,callback:t}})}hide(e,t){this._animateAll(e,{_mask:El.out,_popover:{animation:El.out,restore:!0,callback:t}})}}class ww extends qm{show(e,t){this._animateAll(e,{_mask:El.in,_popover:{from:{transform:"scale3d(1.3, 1.3, 1.0)",opacity:0},to:{transform:"scale3d(1.0, 1.0,  1.0)",opacity:1},restore:!0,callback:t}})}}const VR={".popover":"popover--*",".popover-mask":"popover-mask--*",".popover__content":"popover--*__content",".popover__arrow":"popover--*__arrow"},Tp={default:function(){return qe.isAndroid()?qm:ww},none:Vl,"fade-ios":ww,"fade-md":qm},BR={up:"bottom",left:"right",down:"top",right:"left"};class Vu extends Wi{constructor(){super(),this._boundOnChange=this._onChange.bind(this),Z(this,()=>{this._compile(),this.style.display="none"})}get _scheme(){return VR}get _mask(){return m.findChild(this,".popover-mask")}get _popover(){return m.findChild(this,".popover")}get _content(){return m.findChild(this._popover,".popover__content")}get _arrow(){return m.findChild(this._popover,".popover__arrow")}_updateAnimatorFactory(){return new On({animators:Tp,baseClass:Vl,baseClassName:"PopoverAnimator",defaultAnimation:this.getAttribute("animation")||"default"})}_toggleStyle(e,t={}){if(e){this.style.display="block";let i=t.target;!i&&this.target&&(i=document.getElementById(this.target)),this._currentTarget=i,this._positionPopover(i)}else this.style.display="none",this._clearStyles()}_positionPopover(e){const{_radius:t,_content:i,_margin:r}=this,s=Ot.getSafeAreaLengths(),o=Ot.getSafeAreaDOMRect(),a=e.getBoundingClientRect(),c=m.hasModifier(this,"material"),l=c&&this.hasAttribute("cover-target"),f=(m.findParent(this,"ons-page")||document.body).getBoundingClientRect(),g={top:Math.max(f.top,o.top),left:Math.max(f.left,o.left),bottom:Math.min(f.bottom,o.bottom),right:Math.min(f.right,o.right)},w={top:a.top-(g.top+r),left:a.left-(g.left+r),bottom:g.bottom-r-a.bottom,right:g.right-r-a.right},P={top:a.top+Math.round(a.height/2)-(g.top+r),left:a.left+Math.round(a.width/2)-(g.left+r),bottom:g.bottom-r-a.bottom+Math.round(a.height/2),right:g.right-r-a.right+Math.round(a.width/2)},{vertical:x,primary:L,secondary:v}=this._calculateDirections(w);this._currentDirection=L,m.addModifier(this,L);const E=x?"width":"height",I=(S=>({width:parseInt(S.getPropertyValue("width"),10),height:parseInt(S.getPropertyValue("height"),10)}))(window.getComputedStyle(i)),N=l?0:(x?a.height:a.width)+(c?0:14),K=Math.max(s[L]+r,s[L]+r+w[L]+N),Q=Math.max(s[v]+r,s[v]+r+P[v]-I[E]/2);this._popover.style[L]=K+"px",this._popover.style[v]=Q+"px",this._arrow.style[v]=Math.max(t,s[v]+r+P[v]-Q)+"px"}_calculateDirections(e){const i=(this.getAttribute("direction")||"up down left right").split(/\s+/).map(o=>BR[o]).sort((o,a)=>e[o]-e[a])[0],r=i=="top"||i=="bottom";let s;return r?s=e.left<e.right?"left":"right":s=e.top<e.bottom?"top":"bottom",{vertical:r,primary:i,secondary:s}}_clearStyles(){this._currentDirection=null,["top","bottom","left","right"].forEach(e=>{this._arrow.style[e]=this._content.style[e]=this._popover.style[e]="",m.removeModifier(this,e)})}_onChange(){setImmediate(()=>{this._currentTarget&&this._positionPopover(this._currentTarget)})}_compile(){if(Be.prepare(this),this._popover&&this._mask)return;if(this._popover&&this._content){if(!this._mask){const t=document.createElement("div");t.classList.add("popover-mask"),this.insertBefore(t,this.firstChild)}if(!this._arrow){const t=document.createElement("div");t.classList.add("popover__arrow"),this._popover.appendChild(t)}}else{const t=m.createFragment(`
        <div class="popover-mask"></div>
        <div class="popover">
          <div class="popover__content"></div>
          <div class="popover__arrow"></div>
        </div>
      `),i=t.querySelector(".popover__content");for(;this.childNodes[0];)i.appendChild(this.childNodes[0]);this.appendChild(t)}this.hasAttribute("style")&&(this._popover.setAttribute("style",this.getAttribute("style")),this.removeAttribute("style")),le.initModifier(this,this._scheme)}show(e,t={}){return e&&typeof e=="object"&&!(e instanceof Event)&&!(e instanceof HTMLElement)?t={...e}:t={...t,target:e},typeof t.target=="string"?t.target=document.querySelector(t.target):t.target instanceof Event&&(t.target=t.target.target),!t.target&&this.target&&(t.target=document.getElementById(this.target)),t.target instanceof HTMLElement||m.throw("Invalid target type or undefined"),super.show(t)}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this._boundOnChange,!1),this._margin=this._margin||parseInt(window.getComputedStyle(this).getPropertyValue("top")),this._margin=this._margin||6,Z(this,()=>{this._radius=parseInt(window.getComputedStyle(this._content).getPropertyValue("border-top-left-radius"))})}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this._boundOnChange,!1)}static get observedAttributes(){return[...super.observedAttributes,"direction"]}attributeChangedCallback(e,t,i){if(e==="direction")return this._boundOnChange();e==="modifier"&&this._currentDirection&&m.addModifier(this,this._currentDirection),super.attributeChangedCallback(e,t,i)}static registerAnimator(e,t){t.prototype instanceof Vl||m.throwAnimator("Popover"),Tp[e]=t}static get animators(){return Tp}static get PopoverAnimator(){return Vl}}m.defineBooleanProperties(Vu,["cover-target"]);m.defineStringProperties(Vu,["target"]);ve.Popover=Vu;customElements.define("ons-popover",Vu);const FR=Object.freeze(Object.defineProperty({__proto__:null,default:Vu},Symbol.toStringTag,{value:"Module"})),$R=be(FR),Ew={".progress-bar":"progress-bar--*",".progress-bar__primary":"progress-bar--*__primary",".progress-bar__secondary":"progress-bar--*__secondary"},zR=m.createElement(`
  <div class="progress-bar">
    <div class="progress-bar__secondary"></div>
    <div class="progress-bar__primary"></div>
  </div>
`),ar="indeterminate";class q_ extends Oe{constructor(){super(),Z(this,()=>this._compile())}_compile(){this._isCompiled()?this._template=m.findChild(this,".progress-bar"):this._template=zR.cloneNode(!0),this._primary=m.findChild(this._template,".progress-bar__primary"),this._secondary=m.findChild(this._template,".progress-bar__secondary"),this._updateDeterminate(),this._updateValue(),this.appendChild(this._template),Be.prepare(this),le.initModifier(this,Ew)}_isCompiled(){if(!m.findChild(this,".progress-bar"))return!1;const e=m.findChild(this,".progress-bar");return!(!m.findChild(e,".progress-bar__secondary")||!m.findChild(e,".progress-bar__primary"))}static get observedAttributes(){return["modifier","value","secondary-value",ar]}attributeChangedCallback(e,t,i){e==="modifier"?(le.onModifierChanged(t,i,this,Ew),this.hasAttribute(ar)&&this._updateDeterminate()):e==="value"||e==="secondary-value"?this._updateValue():e===ar&&this._updateDeterminate()}_updateDeterminate(){Z(this,()=>m.toggleModifier(this,ar,{force:this.hasAttribute(ar)}))}_updateValue(){Z(this,()=>{this._primary.style.width=this.hasAttribute("value")?this.getAttribute("value")+"%":"0%",this._secondary.style.width=this.hasAttribute("secondary-value")?this.getAttribute("secondary-value")+"%":"0%"})}set value(e){(typeof e!="number"||e<0||e>100)&&m.throw("Invalid value"),this.setAttribute("value",Math.floor(e))}get value(){return parseInt(this.getAttribute("value")||"0")}set secondaryValue(e){(typeof e!="number"||e<0||e>100)&&m.throw("Invalid value"),this.setAttribute("secondary-value",Math.floor(e))}get secondaryValue(){return parseInt(this.getAttribute("secondary-value")||"0")}set indeterminate(e){e?this.setAttribute(ar,""):this.removeAttribute(ar)}get indeterminate(){return this.hasAttribute(ar)}}ve.ProgressBar=q_;customElements.define("ons-progress-bar",q_);const jR=Object.freeze(Object.defineProperty({__proto__:null,default:q_},Symbol.toStringTag,{value:"Module"})),qR=be(jR),Tw={".progress-circular":"progress-circular--*",".progress-circular__background":"progress-circular--*__background",".progress-circular__primary":"progress-circular--*__primary",".progress-circular__secondary":"progress-circular--*__secondary"},UR=m.createElement(`
  <svg class="progress-circular">
    <circle class="progress-circular__background" />
    <circle class="progress-circular__secondary" cx="50%" cy="50%" r="40%" />
    <circle class="progress-circular__primary" cx="50%" cy="50%" r="40%" />
  </svg>
`),lr="indeterminate";class U_ extends Oe{constructor(){super(),Z(this,()=>this._compile())}static get observedAttributes(){return["modifier","value","secondary-value",lr]}attributeChangedCallback(e,t,i){e==="modifier"?(le.onModifierChanged(t,i,this,Tw),this.hasAttribute(lr)&&this._updateDeterminate()):e==="value"||e==="secondary-value"?this._updateValue():e===lr&&this._updateDeterminate()}_updateDeterminate(){Z(this,()=>m.toggleModifier(this,lr,{force:this.hasAttribute(lr)}))}_updateValue(){this.hasAttribute("value")&&Z(this,()=>{const e=Math.ceil(this.getAttribute("value")*251.32*.01);this._primary.style["stroke-dasharray"]=e+"%, 251.32%"}),this.hasAttribute("secondary-value")?Z(this,()=>{const e=Math.ceil(this.getAttribute("secondary-value")*251.32*.01);this._secondary.style.display=null,this._secondary.style["stroke-dasharray"]=e+"%, 251.32%"}):Z(this,()=>{this._secondary.style.display="none"})}set value(e){(typeof e!="number"||e<0||e>100)&&m.throw("Invalid value"),this.setAttribute("value",Math.floor(e))}get value(){return parseInt(this.getAttribute("value")||"0")}set secondaryValue(e){(typeof e!="number"||e<0||e>100)&&m.throw("Invalid value"),this.setAttribute("secondary-value",Math.floor(e))}get secondaryValue(){return parseInt(this.getAttribute("secondary-value")||"0")}set indeterminate(e){e?this.setAttribute(lr,""):this.removeAttribute(lr)}get indeterminate(){return this.hasAttribute(lr)}_compile(){this._isCompiled()?this._template=m.findChild(this,".progress-circular"):this._template=UR.cloneNode(!0),this._primary=m.findChild(this._template,".progress-circular__primary"),this._secondary=m.findChild(this._template,".progress-circular__secondary"),this._updateDeterminate(),this._updateValue(),this.appendChild(this._template),Be.prepare(this),le.initModifier(this,Tw)}_isCompiled(){if(!m.findChild(this,".progress-circular"))return!1;const e=m.findChild(this,".progress-circular");return!(!m.findChild(e,".progress-circular__secondary")||!m.findChild(e,".progress-circular__primary"))}}ve.ProgressCircular=U_;customElements.define("ons-progress-circular",U_);const HR=Object.freeze(Object.defineProperty({__proto__:null,default:U_},Symbol.toStringTag,{value:"Module"})),GR=be(HR),Sp="initial",WR="preaction",KR="action",Ip=(n,e)=>m.throw(`"${n}" must be ${e}`);class Ld extends Oe{constructor(){super(),this._onDrag=this._onDrag.bind(this),this._onDragStart=this._onDragStart.bind(this),this._onDragEnd=this._onDragEnd.bind(this),this._onScroll=this._onScroll.bind(this),this._setState(Sp,!0),this._hide();const{onConnected:e,onDisconnected:t}=m.defineListenerProperty(this,"pull");this._connectOnPull=e,this._disconnectOnPull=t}_setStyle(){const e=this.height+"px";zt(this,{height:e,lineHeight:e}),this.style.display===""&&this._show()}_onScroll(e){const t=this._pageElement;t.scrollTop<0&&(t.scrollTop=0)}_canConsumeGesture(e){return e.direction==="up"||e.direction==="down"}_onDragStart(e){if(!e.gesture||this.disabled)return;const t=e.gesture.center.clientY+this._pageElement.scrollTop,i=window.innerHeight,r=1;if(this._ignoreDrag=e.consumed||t>i*r,!this._ignoreDrag){const s=e.consume;e.consume=()=>{s&&s(),this._ignoreDrag=!0,this._hide()},this._canConsumeGesture(e.gesture)&&(s&&s(),e.consumed=!0,this._show())}this._startScroll=this._pageElement.scrollTop}_onDrag(e){if(!e.gesture||this.disabled||this._ignoreDrag||!this._canConsumeGesture(e.gesture))return;this.style.display==="none"&&this._show(),e.stopPropagation(),e.gesture.center.clientY+this._pageElement.scrollTop;const t=Math.max(e.gesture.deltaY-this._startScroll,0);if(t!==this._currentTranslation){const i=this.thresholdHeight;i>0&&t>=i?(e.gesture.stopDetect(),setImmediate(()=>this._finish())):t>=this.height?this._setState(WR):this._setState(Sp),this._translateTo(t)}}_onDragEnd(e){!e.gesture||this.disabled||this._ignoreDrag||(e.stopPropagation(),this._currentTranslation>0&&(this._currentTranslation>this.height?this._finish():this._translateTo(0,{animate:!0})))}get onAction(){return this._onAction}set onAction(e){e&&!(e instanceof Function)&&Ip("onAction","function or null"),this._onAction=e}_finish(){this._setState(KR),this._translateTo(this.height,{animate:!0}),(this.onAction||(t=>t()))(()=>{this._translateTo(0,{animate:!0}),this._setState(Sp)})}set height(e){m.isInteger(e)||Ip("height","integer"),this.setAttribute("height",`${e}px`)}get height(){return parseInt(this.getAttribute("height")||"64",10)}set thresholdHeight(e){m.isInteger(e)||Ip("thresholdHeight","integer"),this.setAttribute("threshold-height",`${e}px`)}get thresholdHeight(){return parseInt(this.getAttribute("threshold-height")||"96",10)}_setState(e,t){const i=this.state;this.setAttribute("state",e),!t&&i!==this.state&&m.triggerElementEvent(this,"changestate",{pullHook:this,state:e,lastState:i})}get state(){return this.getAttribute("state")}get pullDistance(){return this._currentTranslation}_show(){setImmediate(()=>{this.style.display="",this._pageElement&&(this._pageElement.style.marginTop=`-${this.height}px`)})}_hide(){this.style.display="none",this._pageElement&&(this._pageElement.style.marginTop="")}_translateTo(e,t={}){if(this._currentTranslation==0&&e==0)return;this._currentTranslation=e;const i=t.animate?{duration:.3,timing:"cubic-bezier(.1, .7, .1, 1)"}:{};m.triggerElementEvent(this,"pull",{ratio:(e/this.height).toFixed(2),animationOptions:i});const r=this.hasAttribute("fixed-content")?this:this._pageElement;k(r).queue({transform:`translate3d(0px, ${e}px, 0px)`},i).play(()=>{e===0&&zt.clear(r,"transition transform"),t.callback instanceof Function&&t.callback()})}_disableDragLock(){this._dragLockDisabled=!0,this._setupListeners(!0)}_setupListeners(e){const t=r=>this._pageElement[`${r}EventListener`]("scroll",this._onScroll,!1),i=r=>{const s={passive:!0};this._gestureDetector[r]("drag",this._onDrag,s),this._gestureDetector[r]("dragstart",this._onDragStart,s),this._gestureDetector[r]("dragend",this._onDragEnd,s)};this._gestureDetector&&(i("off"),this._gestureDetector.dispose(),this._gestureDetector=null),t("remove"),e&&(this._gestureDetector=new pe(this._pageElement,{dragMinDistance:1,dragDistanceCorrection:!1,dragLockToAxis:!this._dragLockDisabled,passive:!0}),i("on"),t("add"))}connectedCallback(){this._currentTranslation=0,this._pageElement=this.parentNode,this._setupListeners(!0),this._setStyle(),this._connectOnPull()}disconnectedCallback(){this._hide(),this._setupListeners(!1),this._disconnectOnPull()}static get observedAttributes(){return["height"]}attributeChangedCallback(e,t,i){e==="height"&&this._pageElement&&this._setStyle()}static get events(){return["changestate","pull"]}}m.defineBooleanProperties(Ld,["disabled","fixed-content"]);ve.PullHook=Ld;customElements.define("ons-pull-hook",Ld);const QR=Object.freeze(Object.defineProperty({__proto__:null,default:Ld},Symbol.toStringTag,{value:"Module"})),XR=be(QR),YR={".radio-button":"radio-button--*",".radio-button__input":"radio-button--*__input",".radio-button__checkmark":"radio-button--*__checkmark"};class H_ extends Lu{get _scheme(){return YR}get _defaultClassName(){return"radio-button"}get type(){return"radio"}}ve.Radio=H_;customElements.define("ons-radio",H_);const JR=Object.freeze(Object.defineProperty({__proto__:null,default:H_},Symbol.toStringTag,{value:"Module"})),ZR=be(JR),eD={"":"range--*",".range__input":"range--*__input",".range__focus-ring":"range--*__focus-ring"},Fc="range__input--active";class G_ extends Fr{constructor(){super(),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onInput=this._update.bind(this),this._onDragstart=this._onDragstart.bind(this),this._onDragend=this._onDragend.bind(this)}_compile(){super._compile(),this._updateDisabled(this.hasAttribute("disabled"))}_update(){const e=this._input,t=this._focusRing;e.style.backgroundSize=`${100*this._ratio}% 2px`,t.value=this.value,e.min===""&&e.value==="0"||e.min===e.value?e.setAttribute("_zero",""):e.removeAttribute("_zero"),["min","max"].forEach(i=>t[i]=e[i])}get _scheme(){return eD}get _template(){return`
      <input type="${this.type}" class="${this._defaultClassName}__input">
      <input type="range" class="range__focus-ring" tabIndex="-1">
    `}get _defaultClassName(){return"range"}get type(){return"range"}_onMouseDown(e){this._input.classList.add(Fc),setImmediate(()=>this._input.focus())}_onTouchStart(e){this._onMouseDown()}_onMouseUp(e){this._input.classList.remove(Fc)}_onTouchEnd(e){this._onMouseUp(e)}_onDragstart(e){e.consumed=!0,e.gesture.stopPropagation(),this._input.classList.add(Fc),this.addEventListener("drag",this._onDrag)}_onDrag(e){e.stopPropagation()}_onDragend(e){this._input.classList.remove(Fc),this.removeEventListener("drag",this._onDrag)}get _focusRing(){return this.children[1]}get _ratio(){const e=this._input.min===""?0:parseInt(this._input.min),t=this._input.max===""?100:parseInt(this._input.max);return(this.value-e)/(t-e)}static get observedAttributes(){return["disabled",...Fr.observedAttributes]}attributeChangedCallback(e,t,i){e==="disabled"&&this._updateDisabled(i),super.attributeChangedCallback(e,t,i)}_updateDisabled(e){e?this.classList.add("range--disabled"):this.classList.remove("range--disabled")}connectedCallback(){this._setupListeners(!0)}disconnectedCallback(){this._setupListeners(!1)}_setupListeners(e){const t=(e?"add":"remove")+"EventListener";m[t](this,"touchstart",this._onTouchStart,{passive:!0}),this[t]("mousedown",this._onMouseDown),this[t]("mouseup",this._onMouseUp),this[t]("touchend",this._onTouchEnd),this[t]("dragstart",this._onDragstart),this[t]("dragend",this._onDragend),this[t]("input",this._onInput)}}ve.Range=G_;customElements.define("ons-range",G_);const tD=Object.freeze(Object.defineProperty({__proto__:null,default:G_},Symbol.toStringTag,{value:"Module"})),nD=be(tD),iD=be(Ix);class W_ extends Oe{}ve.Row=W_;customElements.define("ons-row",W_);const rD=Object.freeze(Object.defineProperty({__proto__:null,default:W_},Symbol.toStringTag,{value:"Module"})),sD=be(rD),oD={".search-input":"search-input--*"};class K_ extends Fr{get _scheme(){return oD}get _template(){return`
      <input type="${this.type}" class="search-input">
    `}get type(){return"search"}}ve.SearchInput=K_;customElements.define("ons-search-input",K_);const aD=Object.freeze(Object.defineProperty({__proto__:null,default:K_},Symbol.toStringTag,{value:"Module"})),lD=be(aD),Sw="segment",Ap={"":"segment--*",".segment__item":"segment--*__item",".segment__input":"segment--*__input",".segment__button":"segment--*__button"},uD=(()=>{let n=0;return()=>"ons-segment-gen-"+n++})();class Md extends Oe{constructor(){super(),this._segmentId=uD(),this._tabbar=null,this._onChange=this._onChange.bind(this),this._onTabbarPreChange=this._onTabbarPreChange.bind(this),Z(this,()=>{this._compile(),setImmediate(()=>this._lastActiveIndex=this._tabbar?this._tabbar.getActiveTabIndex():this.getActiveButtonIndex())})}_compile(){Be.prepare(this),this.classList.add(Sw);for(let e=this.children.length-1;e>=0;e--){const t=this.children[e];t.classList.add("segment__item");const i=m.findChild(t,".segment__input")||m.create("input.segment__input");i.type="radio",i.value=e,i.name=i.name||this._segmentId,i.checked=!this.hasAttribute("tabbar-id")&&e===(this.activeIndex||0);const r=m.findChild(t,".segment__button")||m.create(".segment__button");if(r.parentElement!==t)for(;t.firstChild;)r.appendChild(t.firstChild);t.appendChild(i),t.appendChild(r)}le.initModifier(this,Ap)}connectedCallback(){Z(this,()=>{if(this.hasAttribute("tabbar-id")){const e=m.findParent(this,"ons-page");this._tabbar=e&&e.querySelector("#"+this.getAttribute("tabbar-id")),(!this._tabbar||this._tabbar.tagName!=="ONS-TABBAR")&&m.throw(`No tabbar with id ${this.getAttribute("tabbar-id")} was found.`),this._tabbar.setAttribute("hide-tabs",""),setImmediate(()=>{const t=this._tabbar.getActiveTabIndex();this._setChecked(t),this.activeIndex=t}),this._tabbar.addEventListener("prechange",this._onTabbarPreChange)}}),this.addEventListener("change",this._onChange)}disconnectedCallback(){Z(this,()=>{this._tabbar&&(this._tabbar.removeEventListener("prechange",this._onTabbarPreChange),this._tabbar=null)}),this.removeEventListener("change",this._onChange)}_setChecked(e){this.children[e].firstElementChild.checked=!0}setActiveButton(e,t){return this._tabbar?this._tabbar.setActiveTab(e,t):(this._setChecked(e),this._postChange(e),Promise.resolve(e))}getActiveButtonIndex(){for(let e=this.children.length-1;e>=0;e--)if(this.children[e].firstElementChild.checked)return e;return-1}_onChange(e){e.stopPropagation(),this._tabbar?this._tabbar.setActiveTab(this.getActiveButtonIndex(),{reject:!1}):this._postChange(this.getActiveButtonIndex())}_onTabbarPreChange(e){setImmediate(()=>{e.detail.canceled||(this._setChecked(e.index),this._postChange(e.index))})}_postChange(e){m.triggerElementEvent(this,"postchange",{index:e,activeIndex:e,lastActiveIndex:this._lastActiveIndex,segmentItem:this.children[e]}),this._lastActiveIndex=e,this.activeIndex=e}get activeIndex(){return parseInt(this.getAttribute("active-index"))}set activeIndex(e){e!=null&&this.setAttribute("active-index",e)}static get observedAttributes(){return["class","modifier","active-index"]}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,Sw,Ap);break;case"modifier":le.onModifierChanged(t,i,this,Ap);break;case"active-index":Z(this,()=>{this.getActiveButtonIndex()!==this.activeIndex&&this.setActiveButton(this.activeIndex)});break}}static get events(){return["postchange"]}}m.defineBooleanProperties(Md,["disabled"]);ve.Segment=Md;customElements.define("ons-segment",Md);const cD=Object.freeze(Object.defineProperty({__proto__:null,default:Md},Symbol.toStringTag,{value:"Module"})),hD=be(cD),Cp={"":"select-* select--*",".select-input":"select-input--*"},Iw="select",Pp=["autofocus","disabled","form","multiple","name","required","size"];class Q_ extends Oe{constructor(){super(),Z(this,()=>this._compile()),this._deriveGetters()}static get observedAttributes(){return["modifier","class",...Pp]}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,Iw,Cp);break;case"modifier":le.onModifierChanged(t,i,this,Cp);break}Pp.indexOf(e)>=0&&Z(this,()=>this._updateBoundAttributes())}get _select(){return this.querySelector("select")}_updateBoundAttributes(){Pp.forEach(e=>{this.hasAttribute(e)?this._select.setAttribute(e,this.getAttribute(e)):this._select.removeAttribute(e)})}_compile(){Be.prepare(this),this.classList.add(Iw);const e=this._select||document.createElement("select");!e.id&&this.hasAttribute("select-id")&&(e.id=this.getAttribute("select-id")),e.classList.add("select-input"),this._select||(m.arrayFrom(this.childNodes).forEach(t=>e.appendChild(t)),this.appendChild(e)),le.initModifier(this,Cp)}_deriveGetters(){["disabled","length","multiple","name","options","selectedIndex","size","value","form","type"].forEach(e=>{Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:()=>this._select[e],set:["form","type"].indexOf(e)===-1?t=>Z(this,()=>this._select[e]=t):void 0})})}add(e,t=null){this._select.add(e,t)}remove(e){e===void 0?Element.prototype.remove.call(this):this._select.remove(e)}}ve.Select=Q_;customElements.define("ons-select",Q_);const dD=Object.freeze(Object.defineProperty({__proto__:null,default:Q_},Symbol.toStringTag,{value:"Module"})),fD=be(dD),Aw="speed-dial",kp={"":"speed-dial--*"};class Vd extends Oe{constructor(){super(),Z(this,()=>{this._compile()}),this._boundOnClick=this._onClick.bind(this);const{onConnected:e,onDisconnected:t}=m.defineListenerProperty(this,"click");this._connectOnClick=e,this._disconnectOnClick=t}_compile(){this.classList.add(Aw),Be.prepare(this),this._updateRipple(),le.initModifier(this,kp),this.hasAttribute("direction")?this._updateDirection(this.getAttribute("direction")):this._updateDirection("up"),this._updatePosition()}static get observedAttributes(){return["class","modifier","ripple","direction","position","open"]}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,Aw,kp);break;case"modifier":le.onModifierChanged(t,i,this,kp);break;case"ripple":Z(this,()=>this._updateRipple());break;case"direction":Z(this,()=>this._updateDirection(i));break;case"position":Z(this,()=>this._updatePosition());break;case"open":this._ignoreOpenSideEffect||Z(this,()=>this._updateOpen(t));break}}connectedCallback(){this.addEventListener("click",this._boundOnClick,!1),this._connectOnClick()}disconnectedCallback(){this.removeEventListener("click",this._boundOnClick,!1),this._disconnectOnClick()}get items(){return m.arrayFrom(this.querySelectorAll("ons-speed-dial-item"))}get _fab(){return m.findChild(this,"ons-fab")}_onClick(e){setTimeout(()=>{if(!e.defaultPrevented&&!this.disabled&&this.visible)return this.toggleItems()})}_show(){return this.inline?Promise.resolve():this.show()}_hide(){return new Promise(e=>{this.inline?e():setImmediate(()=>this.hide().then(e))})}_updateRipple(){this._fab&&(this.hasAttribute("ripple")?this._fab.setAttribute("ripple",""):this._fab.removeAttribute("ripple"))}_updateDirection(e){const t=this.items;for(let i=0;i<t.length;i++)zt(t[i],{transitionDelay:25*i+"ms",bottom:"auto",right:"auto",top:"auto",left:"auto"});switch(e){case"up":for(let i=0;i<t.length;i++)t[i].style.bottom=72+56*i+"px",t[i].style.right="8px";break;case"down":for(let i=0;i<t.length;i++)t[i].style.top=72+56*i+"px",t[i].style.left="8px";break;case"left":for(let i=0;i<t.length;i++)t[i].style.top="8px",t[i].style.right=72+56*i+"px";break;case"right":for(let i=0;i<t.length;i++)t[i].style.top="8px",t[i].style.left=72+56*i+"px";break;default:m.throw("Argument must be one of up, down, left or right.")}}_updatePosition(){const e=this.getAttribute("position");switch(this.classList.remove("fab--top__left","fab--bottom__right","fab--bottom__left","fab--top__right","fab--top__center","fab--bottom__center"),e){case"top right":case"right top":this.classList.add("fab--top__right");break;case"top left":case"left top":this.classList.add("fab--top__left");break;case"bottom right":case"right bottom":this.classList.add("fab--bottom__right");break;case"bottom left":case"left bottom":this.classList.add("fab--bottom__left");break;case"center top":case"top center":this.classList.add("fab--top__center");break;case"center bottom":case"bottom center":this.classList.add("fab--bottom__center");break}}_getTranslate(){return(this.getAttribute("position")||"").indexOf("bottom")>=0?`translate3d(0px, -${m.globals.fabOffset||0}px, 0px) `:""}show(){return this._fab.show(),zt(this,{transform:this._getTranslate}),Promise.resolve()}hide(){return this.hideItems().then(()=>this._fab.hide())}showItems(){const e=this.open;return this._ignoreOpenSideEffect=!0,this.open=!0,this._ignoreOpenSideEffect=!1,this._updateOpen(e)}hideItems(){const e=this.open;return this._ignoreOpenSideEffect=!0,this.open=!1,this._ignoreOpenSideEffect=!1,this._updateOpen(e)}_updateOpen(e){this.open&&(this.hasAttribute("direction")?this._updateDirection(this.getAttribute("direction")):this._updateDirection("up"));let t=0;if(e!==this.open){const r=this.items;for(let s=0;s<r.length;s++){const o=25*(this.open?s:r.length-s);t+=o,zt(r[s],{transform:`scale(${this.open?1:0})`,transitionDelay:o+"ms"})}t+=50,m.triggerElementEvent(this,this.open?"open":"close")}const i=m.defer();return setTimeout(i.resolve,t),i.promise}set disabled(e){e&&this.hideItems(),m.arrayFrom(this.children).forEach(t=>{m.match(t,".fab")&&m.toggleAttribute(t,"disabled",e)}),m.toggleAttribute(this,"disabled",e)}get disabled(){return this.hasAttribute("disabled")}get inline(){return this.hasAttribute("inline")}get visible(){return this._fab&&this._fab.visible&&this.style.display!=="none"}isOpen(){return this.open}toggle(){return this.visible?this.hide():this.show()}toggleItems(){return this.open?this.hideItems():this.showItems()}static get events(){return["open","close"]}}m.defineBooleanProperties(Vd,["open","ripple"]);ve.SpeedDial=Vd;customElements.define("ons-speed-dial",Vd);const pD=Object.freeze(Object.defineProperty({__proto__:null,default:Vd},Symbol.toStringTag,{value:"Module"})),mD=be(pD),Cw="fab fab--mini speed-dial__item",xp={"":"fab--* speed-dial__item--*"};class Bd extends Oe{constructor(){super(),this._compile(),this._boundOnClick=this._onClick.bind(this)}static get observedAttributes(){return["modifier","ripple","class"]}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,Cw,xp);break;case"modifier":le.onModifierChanged(t,i,this,xp),m.addModifier(this,"mini");break;case"ripple":this._updateRipple()}}connectedCallback(){this.addEventListener("click",this._boundOnClick,!1)}disconnectedCallback(){this.removeEventListener("click",this._boundOnClick,!1)}_updateRipple(){m.updateRipple(this)}_onClick(e){e.stopPropagation()}_compile(){Be.prepare(this),Cw.split(/\s+/).forEach(e=>this.classList.add(e)),m.addModifier(this,"mini"),this._updateRipple(),le.initModifier(this,xp)}}m.defineBooleanProperties(Bd,["ripple"]);ve.SpeedDialItem=Bd;customElements.define("ons-speed-dial-item",Bd);const gD=Object.freeze(Object.defineProperty({__proto__:null,default:Bd},Symbol.toStringTag,{value:"Module"})),_D=be(gD);let Fd=class extends Gi{constructor({timing:e="cubic-bezier(.1, .7, .1, 1)",duration:t=.3,delay:i=0}={}){super({timing:e,duration:t,delay:i})}updateOptions(e={}){m.extend(this,{timing:this.timing,duration:this.duration,delay:this.delay},e)}activate(e){const t=e.parentNode;Z(t,()=>{this._side=e,this._oppositeSide=t.right!==e&&t.right||t.left!==e&&t.left,this._content=t.content,this._mask=t.mask})}deactivate(){this.clearTransition(),this._mask&&this.clearMask(),this._content=this._side=this._oppositeSide=this._mask=null}get minus(){return this._side.side==="right"?"-":""}clearTransition(){"side mask content".split(/\s+/).forEach(e=>this["_"+e]&&zt.clear(this["_"+e],"transform transition"))}clearMask(){(!this._oppositeSide||this._oppositeSide.mode==="split"||!this._oppositeSide.isOpen)&&(this._mask.style.opacity="",this._mask.style.display="none")}translate(e){}open(e){e()}close(e){e()}};class Pw extends Fd{translate(e){this._mask.style.display="block",k(this._side).queue({transform:`translate3d(${this.minus+e}px, 0, 0)`}).play()}open(e){k.runAll(k(this._side).wait(this.delay).queue({transform:`translate3d(${this.minus}100%, 0, 0)`},this.def).queue(t=>{t(),e&&e()}),k(this._mask).wait(this.delay).queue({display:"block"}).queue({opacity:"1"},{duration:this.duration,timing:"linear"}))}close(e){k.runAll(k(this._side).wait(this.delay).queue({transform:"translate3d(0, 0, 0)"},this.def).queue(t=>{e&&e(),t()}),k(this._mask).wait(this.delay).queue({opacity:"0"},{duration:this.duration,timing:"linear"}).queue({display:"none"}))}}class yD extends Fd{_getSlidingElements(){const e=[this._side,this._content];return this._oppositeSide&&this._oppositeSide.mode==="split"&&e.push(this._oppositeSide),e}translate(e){this._slidingElements||(this._slidingElements=this._getSlidingElements()),this._mask.style.display="block",k(this._slidingElements).queue({transform:`translate3d(${this.minus+e}px, 0, 0)`}).play()}open(e){const t=this._side.offsetWidth;this._slidingElements=this._getSlidingElements(),k.runAll(k(this._slidingElements).wait(this.delay).queue({transform:`translate3d(${this.minus+t}px, 0, 0)`},this.def).queue(i=>{this._slidingElements=null,i(),e&&e()}),k(this._mask).wait(this.delay).queue({display:"block"}))}close(e){this._slidingElements=this._getSlidingElements(),k.runAll(k(this._slidingElements).wait(this.delay).queue({transform:"translate3d(0, 0, 0)"},this.def).queue(t=>{this._slidingElements=null,super.clearTransition(),e&&e(),t()}),k(this._mask).wait(this.delay).queue({display:"none"}))}}class vD extends Fd{_getSlidingElements(){const e=[this._content,this._mask];return this._oppositeSide&&this._oppositeSide.mode==="split"&&e.push(this._oppositeSide),e}activate(e){super.activate(e),e.mode==="collapse"&&this._setStyles(e)}deactivate(){this._side&&this._unsetStyles(this._side),super.deactivate()}_setStyles(e){zt(e,{left:e.side==="right"?"auto":0,right:e.side==="right"?0:"auto",zIndex:0,backgroundColor:"black",transform:this._generateBehindPageStyle(0).container.transform,display:"none"});const t=e.parentElement;Z(t,()=>t.content&&zt(t.content,{boxShadow:"0 0 12px 0 rgba(0, 0, 0, 0.2)"}))}_unsetStyles(e){zt.clear(e,"left right zIndex backgroundColor display"),e._content&&(e._content.style.opacity=""),(!this._oppositeSide||this._oppositeSide.mode==="split")&&e.parentElement.content&&zt.clear(e.parentElement.content,"boxShadow")}_generateBehindPageStyle(e){const t=this.maxWidth;let i=(e-t)/t*10;i=isNaN(i)?0:Math.max(Math.min(i,0),-10);const r=`translate3d(${(this.minus?-1:1)*i}%, 0, 0)`;return{content:{opacity:1+i/100},container:{transform:r}}}translate(e){this._side.style.display="",this._side.style.zIndex=1,this.maxWidth=this.maxWidth||this._getMaxWidth();const t=this._generateBehindPageStyle(Math.min(e,this.maxWidth));this._slidingElements||(this._slidingElements=this._getSlidingElements()),this._mask.style.display="block",k.runAll(k(this._slidingElements).queue({transform:`translate3d(${this.minus+e}px, 0, 0)`}),k(this._side._content).queue(t.content),k(this._side).queue(t.container))}open(e){this._side.style.display="",this._side.style.zIndex=1,this.maxWidth=this.maxWidth||this._getMaxWidth();const t=this._generateBehindPageStyle(this.maxWidth);this._slidingElements=this._getSlidingElements(),setTimeout(()=>{k.runAll(k(this._slidingElements).wait(this.delay).queue({transform:`translate3d(${this.minus+this.maxWidth}px, 0, 0)`},this.def),k(this._mask).wait(this.delay).queue({display:"block"}),k(this._side._content).wait(this.delay).queue(t.content,this.def),k(this._side).wait(this.delay).queue(t.container,this.def).queue(i=>{this._slidingElements=null,i(),e&&e()}))},1e3/60)}close(e){const t=this._generateBehindPageStyle(0);this._slidingElements=this._getSlidingElements(),k.runAll(k(this._slidingElements).wait(this.delay).queue({transform:"translate3d(0, 0, 0)"},this.def),k(this._mask).wait(this.delay).queue({display:"none"}),k(this._side._content).wait(this.delay).queue(t.content,this.def),k(this._side).wait(this.delay).queue(t.container,this.def).queue(i=>{this._slidingElements=null,this._side.style.zIndex=0,this._side.style.display="none",this._side._content.style.opacity="",e&&e(),i()}))}_getMaxWidth(){return this._side.offsetWidth}}const kw={default:Pw,overlay:Pw,push:yD,reveal:vD};class $d extends Oe{_getSide(e){return m.findChild(this,i=>m.match(i,"ons-splitter-side")&&i.getAttribute("side")===e)}get left(){return this._getSide("left")}get right(){return this._getSide("right")}get side(){return m.findChild(this,"ons-splitter-side")}get _sides(){return[this.left,this.right].filter(e=>e)}get content(){return m.findChild(this,"ons-splitter-content")}get topPage(){return this.content._content}get mask(){return m.findChild(this,"ons-splitter-mask")}get onDeviceBackButton(){return this._backButtonHandler}set onDeviceBackButton(e){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=Ou.createHandler(this,e)}_onDeviceBackButton(e){this._sides.some(t=>t.isOpen?t.close():!1)||e.callParentHandler()}_onModeChange(e){e.target.parentNode&&Z(this,()=>{this._layout()})}_layout(){this._sides.forEach(e=>{this.content&&(this.content.style[e.side]=e.mode==="split"?e.style.width:0)})}constructor(){super(),this._onModeChange=this._onModeChange.bind(this),Z(this,()=>{!this.mask&&this.appendChild(document.createElement("ons-splitter-mask")),this._layout()})}connectedCallback(){this.onDeviceBackButton=this._onDeviceBackButton.bind(this),this.addEventListener("modechange",this._onModeChange,!1)}disconnectedCallback(){this._backButtonHandler.destroy(),this._backButtonHandler=null,this.removeEventListener("modechange",this._onModeChange,!1)}attributeChangedCallback(e,t,i){}_show(){m.propagateAction(this,"_show")}_hide(){m.propagateAction(this,"_hide")}_destroy(){m.propagateAction(this,"_destroy"),this.remove()}static registerAnimator(e,t){t instanceof SplitterAnimator||m.throwAnimator("Splitter"),kw[e]=t}static get SplitterAnimator(){return SplitterAnimator}static get animators(){return kw}}ve.Splitter=$d;customElements.define("ons-splitter",$d);const bD=Object.freeze(Object.defineProperty({__proto__:null,default:$d},Symbol.toStringTag,{value:"Module"})),wD=be(bD),xw={ready(n,e){setImmediate(e)}};class X_ extends Oe{constructor(){super(),this._page=null,this._pageLoader=Nu,Z(this,()=>{xw.ready(this,()=>{const e=this._getPageTarget();e&&this.load(e)})})}connectedCallback(){m.match(this.parentNode,"ons-splitter")||m.throw('"ons-splitter-content" must have "ons-splitter" as parent')}_getPageTarget(){return this._page||this.getAttribute("page")}disconnectedCallback(){}static get observedAttributes(){return[]}attributeChangedCallback(e,t,i){}get page(){return this._page}set page(e){this._page=e}get _content(){return this.children[0]}get pageLoader(){return this._pageLoader}set pageLoader(e){e instanceof Js||m.throwPageLoader(),this._pageLoader=e}load(e,t={}){this._page=e;const i=t.callback||function(){};return new Promise(r=>{let s=this._content||null;this._pageLoader.load({page:e,parent:this},o=>{s&&(this._pageLoader.unload(s),s=null),setImmediate(()=>this._show()),i(o),r(o)})})}_show(){this._content&&this._content._show()}_hide(){this._content&&this._content._hide()}_destroy(){this._content&&this._pageLoader.unload(this._content),this.remove()}static get rewritables(){return xw}}ve.SplitterContent=X_;customElements.define("ons-splitter-content",X_);const ED=Object.freeze(Object.defineProperty({__proto__:null,default:X_},Symbol.toStringTag,{value:"Module"})),TD=be(ED);class Y_ extends Oe{constructor(){super(),this._boundOnClick=this._onClick.bind(this),Z(this,()=>{this.parentNode._sides.every(e=>e.mode==="split")&&this.setAttribute("style","display: none !important")})}_onClick(e){this.onClick instanceof Function?this.onClick():m.match(this.parentNode,"ons-splitter")&&this.parentNode._sides.forEach(t=>t.close("left").catch(()=>{})),e.stopPropagation()}static get observedAttributes(){return[]}attributeChangedCallback(e,t,i){}connectedCallback(){this.addEventListener("click",this._boundOnClick)}disconnectedCallback(){this.removeEventListener("click",this._boundOnClick)}}ve.SplitterMask=Y_;customElements.define("ons-splitter-mask",Y_);const SD=Object.freeze(Object.defineProperty({__proto__:null,default:Y_},Symbol.toStringTag,{value:"Module"})),ID=be(SD),Tl="split",oh="collapse",dl="closed",Rw="open",Dw="changing",Ow={ready(n,e){setImmediate(e)}};class AD{constructor(e,t){this._element=e,this._onChange=this._onChange.bind(this),t&&this.changeTarget(t)}changeTarget(e){this.disable(),this._target=e,e&&(this._orientation=["portrait","landscape"].indexOf(e)!==-1,this.activate())}_match(e){return this._orientation?this._target===(e.isPortrait?"portrait":"landscape"):e.matches}_onChange(e){this._element._updateMode(this._match(e)?oh:Tl)}activate(){this._orientation?(sh.on("change",this._onChange),this._onChange({isPortrait:sh.isPortrait()})):(this._queryResult=window.matchMedia(this._target),this._queryResult.addListener(this._onChange),this._onChange(this._queryResult))}disable(){this._orientation?sh.off("change",this._onChange):this._queryResult&&(this._queryResult.removeListener(this._onChange),this._queryResult=null)}}class zd extends Oe{constructor(){super(),this._page=null,this._state=dl,this._lock=new v_,this._pageLoader=Nu,this._collapseDetection=new AD(this),this._animatorFactory=new On({animators:$d.animators,baseClass:Fd,baseClassName:"SplitterAnimator",defaultAnimation:this.getAttribute("animation")}),Z(this,()=>{this.attributeChangedCallback("width"),this.hasAttribute("side")||this.setAttribute("side","left"),Ow.ready(this,()=>{const e=this._page||this.getAttribute("page");e&&this.load(e)})})}connectedCallback(){m.match(this.parentNode,"ons-splitter")||m.throw("Parent must be an ons-splitter element"),this._swipe||(this._swipe=new qS({element:this,elementHandler:this.parentElement,swipeMax:()=>{this._onSwipe&&this._onSwipe(1,this._animationOpt),m.triggerElementEvent(this,"swipe",{ratio:1,animationOptions:this._animationOpt}),this.open()},swipeMid:(e,t)=>{const i=e/t;this._onSwipe&&this._onSwipe(i),m.triggerElementEvent(this,"swipe",{ratio:i}),this._animator.translate(e)},swipeMin:()=>{this._onSwipe&&this._onSwipe(0,this._animationOpt),m.triggerElementEvent(this,"swipe",{ratio:0,animationOptions:this._animationOpt}),this.close()},getThreshold:()=>Math.max(0,Math.min(1,parseFloat(this.getAttribute("open-threshold"))||.3)),getSide:()=>this.side,isInitialState:()=>{const e=this._state===dl;return this._state=Dw,e},ignoreSwipe:(e,t)=>{const i=this.isOpen,r=o=>this.side==="left"?o==="left"&&i||o==="right"&&!i:o==="left"&&!i||o==="right"&&i,s=Math.max(0,parseInt(this.getAttribute("swipe-target-width"),10)||0);return this._mode===Tl||this._lock.isLocked()||this._isOtherSideOpen()||!r(e.gesture.direction)||!i&&s!==0&&t>s}}),this.attributeChangedCallback("swipeable")),Z(this,()=>{this.constructor.observedAttributes.forEach(e=>this.attributeChangedCallback(e,null,this.getAttribute(e)))})}get side(){return this.getAttribute("side")==="right"?"right":"left"}set side(e){e?this.setAttribute("side",e):tihs.removeAttribute("side")}disconnectedCallback(){this._swipe&&this._swipe.dispose(),this._animator=this._animationOpt=this._swipe=null}static get observedAttributes(){return["animation","width","collapse","swipeable","animation-options"]}attributeChangedCallback(e,t,i){switch(e){case"swipeable":this._swipe&&this._swipe.update();break;case"width":i=this.getAttribute("width"),this.style.width=/^\d+(px|%)$/.test(i)?i:"80%";break;case"animation":case"animation-options":this._updateAnimation();break;default:this[m.camelize(`_update-${e}`)](i)}}_emitEvent(e){if(e.slice(0,3)!=="pre")return m.triggerElementEvent(this,e,{side:this});let t=!1;return m.triggerElementEvent(this,e,{side:this,cancel:()=>t=!0}),t}_isOtherSideOpen(){return!!m.findChild(this.parentElement,e=>e instanceof this.constructor&&e!==this&&e._mode===oh&&e.isOpen)}_updateCollapse(e=this.getAttribute("collapse")){if(e===null||e==="split")return this._collapseDetection.disable(),this._updateMode(Tl);if(e===""||e==="collapse")return this._collapseDetection.disable(),this._updateMode(oh);this._collapseDetection.changeTarget(e)}_updateMode(e){e!==this._mode&&(this._mode=e,this.setAttribute("mode",e),e===Tl?(this._animator&&this._animator.deactivate(),this._state=dl):(this._animator&&this._animator.activate(this),this._state===Rw&&this._animator.open()),m.triggerElementEvent(this,"modechange",{side:this,mode:e}))}_updateAnimation(e=this.getAttribute("animation")){this.parentNode&&(this._animator&&this._animator.deactivate(),this._animator=this._animatorFactory.newAnimator({animation:e}),this._animator.activate(this),this._animationOpt={timing:this._animator.duration,duration:this._animator.duration},this._animator.updateOptions(this.animationOptions))}get page(){return this._page}set page(e){this._page=e}get _content(){return this.children[0]}get pageLoader(){return this._pageLoader}set pageLoader(e){e instanceof Js||m.throwPageLoader(),this._pageLoader=e}get mode(){return this._mode}get onSwipe(){return this._onSwipe}set onSwipe(e){e&&!(e instanceof Function)&&m.throw('"onSwipe" must be a function'),this._onSwipe=e}get animationOptions(){return this.hasAttribute("animation-options")?On.parseAnimationOptionsString(this.getAttribute("animation-options")):{}}set animationOptions(e){e==null?this.removeAttribute("animation-options"):this.setAttribute("animation-options",JSON.stringify(e))}get isOpen(){return this._mode===oh&&this._state!==dl}set isOpen(e){this.toggle({},e)}open(e){return this.toggle(e,!0)}close(e){return this.toggle(e,!1)}toggle(e={},t){const i=typeof t=="boolean"?t:!this.isOpen,r=i?"open":"close",s=i?Rw:dl;if(this._mode===Tl)return Promise.resolve(!1);if(this._state===s)return Promise.resolve(this);if(this._lock.isLocked())return Promise.reject("Another splitter-side action is already running.");if(i&&this._isOtherSideOpen())return Promise.reject("Another menu is already open.");if(this._emitEvent(`pre${r}`))return Promise.reject(`Canceled in pre${r} event.`);const o=this._lock.lock();return this._state=Dw,e.animation&&this._updateAnimation(e.animation),new Promise(a=>{this._animator[r](()=>{m.iosPageScrollFix(i),this._state=s,o(),this._emitEvent(`post${r}`),e.callback instanceof Function&&e.callback(this),a(this)})})}load(e,t={}){this._page=e;const i=t.callback||(()=>{});return new Promise(r=>{let s=this._content||null;this._pageLoader.load({page:e,parent:this},o=>{s&&(this._pageLoader.unload(s),s=null),setImmediate(()=>this._show()),i(o),r(o)})})}_show(){this._content&&this._content._show()}_hide(){this._content&&this._content._hide()}_destroy(){this._content&&this._pageLoader.unload(this._content),this.remove()}static get events(){return["preopen","postopen","preclose","postclose","modechange","swipe"]}static get rewritables(){return Ow}}m.defineBooleanProperties(zd,["swipeable"]);ve.SplitterSide=zd;customElements.define("ons-splitter-side",zd);const CD=Object.freeze(Object.defineProperty({__proto__:null,default:zd},Symbol.toStringTag,{value:"Module"})),PD=be(CD),kD={"":"switch--*",".switch__input":"switch--*__input",".switch__handle":"switch--*__handle",".switch__toggle":"switch--*__toggle"},xD={ios:[1,21],material:[0,16]};class J_ extends Lu{constructor(){super(),Z(this,()=>{this.attributeChangedCallback("modifier",null,this.getAttribute("modifier"))}),this._onChange=this._onChange.bind(this),this._onRelease=this._onRelease.bind(this),this._lastTimeStamp=0}get _scheme(){return kD}get _defaultClassName(){return"switch"}get _template(){return`
      <input type="${this.type}" class="${this._defaultClassName}__input">
      <div class="${this._defaultClassName}__toggle">
        <div class="${this._defaultClassName}__handle">
          <div class="${this._defaultClassName}__touch"></div>
        </div>
      </div>
    `}get type(){return"checkbox"}_getPosition(e){const t=this._locations;return Math.min(t[1],Math.max(t[0],this._startX+e.gesture.deltaX))}_emitChangeEvent(){m.triggerElementEvent(this,"change",{value:this.checked,switch:this,isInteractive:!0})}_onChange(e){e&&e.stopPropagation&&e.stopPropagation(),this._emitChangeEvent()}_onClick(e){(e.target.classList.contains(`${this.defaultElementClass}__touch`)||e.timeStamp-this._lastTimeStamp<50)&&e.preventDefault(),this._lastTimeStamp=e.timeStamp}_onHold(e){this.disabled||(le.addModifier(this,"active"),document.addEventListener("release",this._onRelease))}_onDragStart(e){if(this.disabled||["left","right"].indexOf(e.gesture.direction)===-1){le.removeModifier(this,"active");return}e.consumed=!0,le.addModifier(this,"active"),this._startX=this._locations[this.checked?1:0],this.addEventListener("drag",this._onDrag),document.addEventListener("release",this._onRelease)}_onDrag(e){e.stopPropagation(),this._handle.style.left=this._getPosition(e)+"px"}_onRelease(e){const t=this._locations,i=this._getPosition(e),r=this.checked;this.checked=i>=(t[0]+t[1])/2,this.checked!==r&&this._emitChangeEvent(),this.removeEventListener("drag",this._onDrag),document.removeEventListener("release",this._onRelease),this._handle.style.left="",le.removeModifier(this,"active")}click(e={}){this.disabled||(this.checked=!this.checked,this._emitChangeEvent(),this._lastTimeStamp=e.timeStamp||0)}get _handle(){return this.querySelector(`.${this._defaultClassName}__handle`)}get checkbox(){return this._input}connectedCallback(){Z(this,()=>{this._input.addEventListener("change",this._onChange)}),this.addEventListener("dragstart",this._onDragStart),this.addEventListener("hold",this._onHold),this.addEventListener("tap",this.click),this.addEventListener("click",this._onClick),this._gestureDetector=new pe(this,{dragMinDistance:1,holdTimeout:251,passive:!0})}disconnectedCallback(){Z(this,()=>{this._input.removeEventListener("change",this._onChange)}),this.removeEventListener("dragstart",this._onDragStart),this.removeEventListener("hold",this._onHold),this.removeEventListener("tap",this.click),this.removeEventListener("click",this._onClick),this._gestureDetector&&this._gestureDetector.dispose()}static get observedAttributes(){return[...super.observedAttributes,"modifier"]}attributeChangedCallback(e,t,i){if(e==="modifier"){const r=(i||"").indexOf("material")!==-1;this._locations=xD[r?"material":"ios"]}super.attributeChangedCallback(e,t,i)}}ve.Switch=J_;customElements.define("ons-switch",J_);const RD=Object.freeze(Object.defineProperty({__proto__:null,default:J_},Symbol.toStringTag,{value:"Module"})),DD=be(RD),Nw={".tabbar__content":"tabbar--*__content",".tabbar__border":"tabbar--*__border",".tabbar":"tabbar--*"},OD={ready(n,e){e()}};ke.nullElement;const Lw=(n,e,t)=>(1-t)*n+t*e;class Bu extends Oe{constructor(){super(),this._loadInactive=m.defer(),Z(this,()=>this._compile());const{onConnected:e,onDisconnected:t}=m.defineListenerProperty(this,"swipe");this._connectOnSwipe=e,this._disconnectOnSwipe=t}connectedCallback(){this._swiper||(this._swiper=new zS({getElement:()=>this._contentElement,getInitialIndex:()=>this.activeIndex||this.getAttribute("activeIndex"),getAutoScrollRatio:this._getAutoScrollRatio.bind(this),getBubbleWidth:()=>parseInt(this.getAttribute("ignore-edge-width")||25,10),isAutoScrollable:()=>!0,preChangeHook:this._onPreChange.bind(this),postChangeHook:this._onPostChange.bind(this),refreshHook:this._onRefresh.bind(this),scrollHook:this._onScroll.bind(this)}),Z(this,()=>{this._tabbarBorder=m.findChild(this._tabbarElement,".tabbar__border"),this._swiper.init({swipeable:this.hasAttribute("swipeable")})})),Z(this,()=>{this._updatePosition(),this._updateVisibility(),m.findParent(this,"ons-page",e=>e===document.body)||this._show()}),this._connectOnSwipe()}disconnectedCallback(){this._swiper&&this._swiper.initialized&&(this._swiper.dispose(),this._swiper=null,this._tabbarBorder=null,this._tabsRect=null),this._disconnectOnSwipe()}_normalizeEvent(e){return{...e,index:e.activeIndex,tabItem:this.tabs[e.activeIndex]}}_onPostChange(e){e=this._normalizeEvent(e),m.triggerElementEvent(this,"postchange",e);const t=e.tabItem.pageElement;t&&t._show()}_onPreChange(e){if(e=this._normalizeEvent(e),e.cancel=()=>e.canceled=!0,m.triggerElementEvent(this,"prechange",e),!e.canceled){const{activeIndex:t,lastActiveIndex:i}=e,r=this.tabs;if(r[t].setActive(!0),i>=0){const s=r[i];s.setActive(!1),s.pageElement&&s.pageElement._hide()}}return e.canceled}_onScroll(e,t={}){if(this._tabbarBorder)if(this._tabbarBorder.style.transition=`all ${t.duration||0}s ${t.timing||""}`,this._autogrow&&this._tabsRect.length>0){const i=Math.floor(e),r=Math.ceil(e),s=e%1;this._tabbarBorder.style.width=Lw(this._tabsRect[i].width,this._tabsRect[r].width,s)+"px",this._tabbarBorder.style.transform=`translate3d(${Lw(this._tabsRect[i].left,this._tabsRect[r].left,s)}px, 0, 0)`}else this._tabbarBorder.style.transform=`translate3d(${e*100}%, 0, 0)`;m.triggerElementEvent(this,"swipe",{index:e,options:t})}_onRefresh(){if(this._autogrow=m.hasModifier(this,"autogrow"),this._tabsRect=this.tabs.map(e=>e.getBoundingClientRect()),this._tabbarBorder){this._tabbarBorder.style.display=this.hasAttribute("tab-border")||m.hasModifier(this,"material")?"block":"none";const e=this.getActiveTabIndex();this._tabsRect.length>0&&e>=0&&(this._tabbarBorder.style.width=this._tabsRect[e].width+"px")}}_getAutoScrollRatio(e,t,i){const s=i/300*(e?-1:1);return Math.min(1,Math.max(0,.6+t*s))}get _tabbarElement(){return m.findChild(this,".tabbar")}get _contentElement(){return m.findChild(this,".tabbar__content")}get _targetElement(){const e=this._contentElement;return e&&e.children[0]||null}_compile(){Be.prepare(this);const e=this._contentElement||m.create(".tabbar__content");e.classList.add("ons-tabbar__content");const t=this._tabbarElement||m.create(".tabbar");if(t.classList.add("ons-tabbar__footer"),!t.parentNode)for(;this.firstChild;)t.appendChild(this.firstChild);t.children.length>this.activeIndex&&!m.findChild(t,"[active]")&&t.children[this.activeIndex].setAttribute("active",""),this._tabbarBorder=m.findChild(t,".tabbar__border")||m.create(".tabbar__border"),t.appendChild(this._tabbarBorder),t.classList.add("ons-swiper-tabbar"),!e.children[0]&&e.appendChild(document.createElement("div")),!e.children[1]&&e.appendChild(document.createElement("div")),e.appendChild=e.appendChild.bind(e.children[0]),e.insertBefore=e.insertBefore.bind(e.children[0]),this.appendChild(e),this.appendChild(t),le.initModifier(this,Nw)}_updatePosition(e=this.getAttribute("position")){const t=this._top=e==="top"||e==="auto"&&m.hasModifier(this,"material"),i=t?m.addModifier:m.removeModifier;i(this,"top");const r=m.findParent(this,"ons-page");r&&Z(r,()=>{let s=0;r.children[0]&&m.match(r.children[0],"ons-toolbar")&&(i(r.children[0],"noshadow"),s=1);const o=r._getContentElement(),a=window.getComputedStyle(r._getContentElement(),null);this.style.top=t?parseInt(a.getPropertyValue("padding-top"),10)-s+"px":"",o.style.top=a.top,o.style.top=""}),ke.autoStatusBarFill(()=>{const s=m.findParent(this,o=>o.hasAttribute("status-bar-fill"));m.toggleAttribute(this,"status-bar-fill",t&&!s)})}get topPage(){const e=this.tabs,t=this.getActiveTabIndex();return e[t]&&(e[t].pageElement||this.pages[0])||null}get pages(){return m.arrayFrom(this._targetElement.children)}get tabs(){return Array.prototype.filter.call(this._tabbarElement.children,e=>e.tagName==="ONS-TAB")}setActiveTab(e,t={}){const i=this.activeIndex;return this._activeIndexSkipEffect=!0,this.activeIndex=e,this._updateActiveIndex(e,i,t)}_updateActiveIndex(e,t,i={}){const r=this.tabs[t],s=this.tabs[e];if(!s)return Promise.reject("Specified index does not match any tab.");if(e===t)return m.triggerElementEvent(this,"reactive",{index:e,activeIndex:e,tabItem:s}),Promise.resolve(s.pageElement);const o=s.pageElement;return(o?Promise.resolve(o):s.loaded).then(a=>this._swiper.setActiveIndex(e,{reject:!0,...i,animation:r&&a?i.animation||this.getAttribute("animation"):"none",animationOptions:m.extend({duration:.3,timing:"cubic-bezier(.4, .7, .5, 1)"},this.animationOptions,i.animationOptions||{})}).then(()=>(i.callback instanceof Function&&i.callback(a),a)))}setTabbarVisibility(e){this.hideTabs=!e}show(){this.hideTabs=!1}hide(){this.hideTabs=!0}_updateVisibility(){Z(this,()=>{const e=!this.hideTabs;this._contentElement.style[this._top?"top":"bottom"]=e?"":"0px",this._tabbarElement.style.display=e?"":"none",e&&this._onRefresh()})}get visible(){return this._tabbarElement.style.display!=="none"}getActiveTabIndex(e=this.tabs){for(let t=0;t<e.length;t++)if(e[t]&&e[t].tagName==="ONS-TAB"&&e[t].isActive())return t;return-1}get activeIndex(){return Number(this.getAttribute("active-index"))}set activeIndex(e){e!=null&&this.setAttribute("active-index",e)}_show(){this._swiper.show(),setImmediate(()=>{const e=this.tabs,t=this.getActiveTabIndex(e);this._loadInactive.resolve(),e.length>0&&t>=0&&e[t].loaded.then(i=>i&&setImmediate(()=>i._show()))})}_hide(){this._swiper.hide();const e=this.topPage;e&&e._hide()}_destroy(){this.tabs.forEach(e=>e.remove()),this.remove()}static get observedAttributes(){return["modifier","position","swipeable","tab-border","hide-tabs","active-index"]}attributeChangedCallback(e,t,i){if(e==="modifier"){le.onModifierChanged(t,i,this,Nw);const r=s=>/(^|\s+)top($|\s+)/i.test(s);r(t)!==r(i)&&this._updatePosition()}else e==="position"?m.isAttached(this)&&this._updatePosition():e==="swipeable"?this._swiper&&this._swiper.updateSwipeable(this.hasAttribute("swipeable")):e==="hide-tabs"?this.isConnected&&this._updateVisibility():e==="active-index"&&(this._activeIndexSkipEffect?this._activeIndexSkipEffect=!1:this.isConnected&&Z(this,()=>this._updateActiveIndex(i,t)))}static get rewritables(){return OD}static get events(){return["prechange","postchange","reactive","swipe"]}get animationOptions(){return this.hasAttribute("animation-options")?m.animationOptionsParse(this.getAttribute("animation-options")):{}}set animationOptions(e){e==null?this.removeAttribute("animation-options"):this.setAttribute("animation-options",JSON.stringify(e))}}m.defineBooleanProperties(Bu,["hide-tabs","swipeable","tab-border"]);ve.Tabbar=Bu;customElements.define("ons-tabbar",Bu);const ND=Object.freeze(Object.defineProperty({__proto__:null,default:Bu},Symbol.toStringTag,{value:"Module"})),Mw="tabbar__item",Rp={"":"tabbar--*__item",".tabbar__button":"tabbar--*__button"};class Z_ extends Oe{constructor(){super(),["label","icon","badge"].some(this.hasAttribute.bind(this))?this._compile():Z(this,()=>this._compile()),this._pageLoader=Nu,this._onClick=this._onClick.bind(this);const{onConnected:e,onDisconnected:t}=m.defineListenerProperty(this,"click");this._connectOnClick=e,this._disconnectOnClick=t}set pageLoader(e){e instanceof Js||m.throwPageLoader(),this._pageLoader=e}get pageLoader(){return this._pageLoader}_compile(){if(Be.prepare(this),this.classList.add(Mw),this._button)return;const e=m.create("button.tabbar__button");for(;this.childNodes[0];)e.appendChild(this.childNodes[0]);const t=m.create("input",{display:"none"});t.type="radio",this.appendChild(t),this.appendChild(e),this._updateButtonContent(),le.initModifier(this,Rp),this._updateRipple()}_updateRipple(){this._button&&m.updateRipple(this._button,this.hasAttribute("ripple"))}_updateButtonContent(){const e=this._button;let t=this._icon;if(this.hasAttribute("icon")){t=t||m.createElement('<div class="tabbar__icon"><ons-icon></ons-icon></div>');const i=t.children[0],r=(s=>()=>i.attributeChangedCallback("icon",s,this.getAttribute("icon")))(i.getAttribute("icon"));this.hasAttribute("icon")&&this.hasAttribute("active-icon")?i.setAttribute("icon",this.getAttribute(this.isActive()?"active-icon":"icon")):this.hasAttribute("icon")&&i.setAttribute("icon",this.getAttribute("icon")),t.parentElement!==e&&e.insertBefore(t,e.firstChild),i.attributeChangedCallback instanceof Function?r():setImmediate(()=>i.attributeChangedCallback instanceof Function&&r())}else t&&t.remove();["label","badge"].forEach((i,r)=>{let s=this.querySelector(`.tabbar__${i}`);this.hasAttribute(i)?(s=s||m.create(`.tabbar__${i}`+(i==="badge"?" notification":"")),s.textContent=this.getAttribute(i),s.parentElement!==e&&e.appendChild(s)):s&&s.remove()})}get _input(){return m.findChild(this,"input")}get _button(){return m.findChild(this,".tabbar__button")}get _icon(){return this.querySelector(".tabbar__icon")}get _tabbar(){return m.findParent(this,"ons-tabbar")}get index(){return Array.prototype.indexOf.call(this.parentElement.children,this)}_onClick(e){setTimeout(()=>{e.defaultPrevented||this._tabbar.setActiveTab(this.index,{reject:!1})})}setActive(e=!0){Z(this,()=>{this._input.checked=e,this.classList.toggle("active",e),m.toggleAttribute(this,"active",e),this.hasAttribute("icon")&&this.hasAttribute("active-icon")&&this._icon.children[0].setAttribute("icon",this.getAttribute(e?"active-icon":"icon"))})}_loadPageElement(e,t){return this._hasLoaded=!0,new Promise(i=>{this._pageLoader.load({parent:e,page:t},r=>{e.replaceChild(r,e.children[this.index]),this._loadedPage=r,i(r)})})}get pageElement(){if(this._loadedPage)return this._loadedPage;const e=this._tabbar;return e.pages.length===e.tabs.length?e.pages[this.index]:null}isActive(){return this.classList.contains("active")}disconnectedCallback(){this.removeEventListener("click",this._onClick,!1),this._loadedPage&&(this._hasLoaded=!1,this.loaded=null),this._disconnectOnClick()}connectedCallback(){if(this.addEventListener("click",this._onClick,!1),!m.isAttached(this)||this.loaded)return;const e=m.defer();this.loaded=e.promise,Z(this,()=>{const t=this.index,i=this._tabbar;i||m.throw("Tab elements must be children of Tabbar"),i.hasAttribute("modifier")&&m.addModifier(this,i.getAttribute("modifier")),this._hasLoaded||(this.hasAttribute("active")&&(this.setActive(!0),i.activeIndex=t),t===i.tabs.length-1&&(i._onRefresh(),setImmediate(()=>i._onRefresh())),Bu.rewritables.ready(i,()=>{const r=this.page||this.getAttribute("page");if(!this.pageElement&&r){const s=i._targetElement,o=m.create("div",{height:"100%",width:"100%",visibility:"hidden"});s.insertBefore(o,s.children[t]);const a=()=>this._loadPageElement(s,r).then(e.resolve);return this.isActive()?a():i._loadInactive.promise.then(a)}return e.resolve(this.pageElement)}))}),this._connectOnClick()}static get observedAttributes(){return["modifier","ripple","icon","label","page","badge","class"]}attributeChangedCallback(e,t,i){switch(e){case"class":m.restoreClass(this,Mw,Rp);break;case"modifier":Z(this,()=>le.onModifierChanged(t,i,this,Rp));break;case"ripple":Z(this,()=>this._updateRipple());break;case"icon":case"label":case"badge":Z(this,()=>this._updateButtonContent());break;case"page":this.page=i||"";break}}}ve.Tab=Z_;customElements.define("ons-tab",Z_);const LD=Object.freeze(Object.defineProperty({__proto__:null,default:Z_},Symbol.toStringTag,{value:"Module"})),MD=be(LD),VD=be(ND);class Dr extends Gi{constructor({timing:e="linear",delay:t=0,duration:i=.2}={}){super({timing:e,delay:t,duration:i})}show(e,t){t()}hide(e,t){t()}}class BD extends Dr{constructor({timing:e="linear",delay:t=0,duration:i=.3}={}){super({timing:e,delay:t,duration:i})}show(e,t){t=t||function(){},k(e,this.def).default({opacity:0},{opacity:1}).queue(i=>{t(),i()}).play()}hide(e,t){t=t||function(){},k(e,this.def).default({opacity:1},{opacity:0}).queue(i=>{t(),i()}).play()}}class Vw extends Dr{constructor({timing:e="ease",delay:t=0,duration:i=.25}={}){super({timing:e,delay:t,duration:i}),this.messageDelay=this.duration*.4+this.delay,qe.isAndroid()?this.ascension=48:Ot.isIPhoneXPortraitPatchActive()?this.ascension=98:Ot.isIPhoneXLandscapePatchActive()?this.ascension=85:this.ascension=64}show(e,t){e=e._toast,m.globals.fabOffset=this.ascension,k.runAll(k(e,this.def).default({transform:`translate3d(0, ${this.ascension}px, 0)`},{transform:"translate3d(0, 0, 0)"}).queue(i=>{t&&t(),i()}),k(this._getFabs()).wait(this.delay).queue({transform:`translate3d(0, -${this.ascension}px, 0) scale(1)`},this.def),k(m.arrayFrom(e.children),this.def).default({opacity:0},{opacity:1}))}hide(e,t){e=e._toast,m.globals.fabOffset=0,k.runAll(k(e,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:`translate3d(0, ${this.ascension}px, 0)`}).queue(i=>{t&&t(),i()}),k(this._getFabs(),this.def).wait(this.delay).queue({transform:"translate3d(0, 0, 0) scale(1)"},this.def),k(m.arrayFrom(e.children),this.def).default({opacity:1},{opacity:0}))}_getFabs(){return m.arrayFrom(document.querySelectorAll("ons-fab[position~=bottom], ons-speed-dial[position~=bottom]")).filter(e=>e.visible)}}class Bw extends Dr{constructor({timing:e="ease",delay:t=0,duration:i=.35}={}){super({timing:e,delay:t,duration:i}),this.bodyHeight=document.body.clientHeight,Ot.isIPhoneXPortraitPatchActive()?this.liftAmount="calc(100% + 34px)":Ot.isIPhoneXLandscapePatchActive()?this.liftAmount="calc(100% + 21px)":this.liftAmount="100%"}show(e,t){e=e._toast,k.runAll(k(e,this.def).default({transform:`translate3d(0, ${this.liftAmount}, 0)`,opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}).queue(i=>{t&&t(),i()}))}hide(e,t){e=e._toast,k.runAll(k(e,this.def).default({transform:"translate3d(0, 0, 0)",opacity:1},{transform:`translate3d(0, ${this.liftAmount}, 0)`,opacity:0}).queue(i=>{t&&t(),i()}))}_updatePosition(e){parseInt(e.style.top,10)===0&&(e.style.top=e.style.bottom="")}}class FD extends Dr{constructor({timing:e="ease",delay:t=0,duration:i=.35}={}){super({timing:e,delay:t,duration:i}),Ot.isIPhoneXPortraitPatchActive()?this.fallAmount="calc(-100% - 44px)":this.fallAmount="-100%"}show(e,t){e=e._toast,this._updatePosition(e),k.runAll(k(e,this.def).default({transform:`translate3d(0, ${this.fallAmount}, 0)`,opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}).queue(i=>{t&&t(),i()}))}hide(e,t){e=e._toast,this._updatePosition(e),k.runAll(k(e,this.def).default({transform:"translate3d(0, 0, 0)",opacity:1},{transform:`translate3d(0, ${this.fallAmount}, 0)`,opacity:0}).queue(i=>{this._updatePosition(e,!0),t&&t(),i()}))}_updatePosition(e,t){let i;Ot.isIPhoneXPortraitPatchActive()?i="44px":i="0",e.style.top!==i&&(e.style.top=i,e.style.bottom="initial")}}const $D={".toast":"toast--*",".toast__message":"toast--*__message",".toast__button":"toast--*__button"},Dp="toast",Op={default:qe.isAndroid()?Vw:Bw,fade:BD,ascend:Vw,lift:Bw,fall:FD,none:Dr};class ey extends Wi{constructor(){super(),this._defaultDBB=null,Z(this,()=>this._compile())}get _scheme(){return $D}get _toast(){return m.findChild(this,`.${Dp}`)}_updateAnimatorFactory(){return this._toast&&(this._toast.style.top=this._toast.style.bottom=""),new On({animators:Op,baseClass:Dr,baseClassName:"ToastAnimator",defaultAnimation:this.getAttribute("animation")})}_compile(){Be.prepare(this),this.style.display="none",this.style.zIndex=1e4;const e="toast__message",t="toast__button";let i=m.findChild(this,`.${Dp}`);if(!i)for(i=document.createElement("div"),i.classList.add(Dp);this.childNodes[0];)i.appendChild(this.childNodes[0]);let r=m.findChild(i,`.${t}`);if(r||(r=m.findChild(i,s=>m.match(s,".button")||m.match(s,"button")),r&&(r.classList.remove("button"),r.classList.add(t),i.appendChild(r))),!m.findChild(i,`.${e}`)){let s=m.findChild(i,".message");if(!s){s=document.createElement("div");for(let o=i.childNodes.length-1;o>=0;o--)i.childNodes[o]!==r&&s.insertBefore(i.childNodes[o],s.firstChild)}s.classList.add(e),i.insertBefore(s,i.firstChild)}i.parentNode!==this&&this.appendChild(i),le.initModifier(this,this._scheme)}static registerAnimator(e,t){t.prototype instanceof Dr||m.throw('"Animator" param must inherit OnsToastElement.ToastAnimator'),Op[e]=t}static get animators(){return Op}static get ToastAnimator(){return Dr}}ve.Toast=ey;customElements.define("ons-toast",ey);const zD=Object.freeze(Object.defineProperty({__proto__:null,default:ey},Symbol.toStringTag,{value:"Module"})),jD=be(zD),qD=be(NR);class ty extends Zs{get _scheme(){return{"":"toolbar-button--*"}}get _defaultClassName(){return"toolbar-button"}get _rippleOpt(){return[this,void 0,{center:"",size:"contain",background:"transparent"}]}}ve.ToolbarButton=ty;customElements.define("ons-toolbar-button",ty);const UD=Object.freeze(Object.defineProperty({__proto__:null,default:ty},Symbol.toStringTag,{value:"Module"})),HD=be(UD);(function(n,e){(function(t,i){i(e,px,_x(),Tx,Tn,wS,Cx,xx,Dx,Mx,Bx,$x,jx,Hx,Wx,Xx,Jx,rR,oR,lR,cR,fR,mR,_R,vR,TR,IR,kR,OR,MR,$R,qR,GR,XR,ZR,nD,iD,sD,lD,hD,fD,mD,_D,wD,TD,ID,PD,DD,MD,VD,jD,qD,HD)})(XC,function(t,i,r,s,o,a){function c(X){return X&&typeof X=="object"&&"default"in X?X:{default:X}}var l=c(r),d=c(o),f=c(a);function g(){return g=Object.assign?Object.assign.bind():function(X){for(var V=1;V<arguments.length;V++){var G=arguments[V];for(var ee in G)Object.prototype.hasOwnProperty.call(G,ee)&&(X[ee]=G[ee])}return X},g.apply(this,arguments)}const w=X=>X.replace(/([a-zA-Z])([A-Z])/g,"$1-$2").toLowerCase(),P=(X,V)=>{const G={...X},ee={className:"class",...V};for(const[se,ce]of Object.entries(ee))G[ce]===void 0&&G[se]!==void 0&&(G[ce]=G[se],delete G[se]);return G};function x(X,V,G){const ee=V.slice(2).toLowerCase();o.useEffect(()=>{const se=X.current;return se.addEventListener(ee,G),function(){se.removeEventListener(ee,G)}},[X,G])}function L(X){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G=arguments.length>2?arguments[2]:void 0;const ee=V.notAttributes||[],se=V.deprecated||{},ce={};for(const[_e,de]of Object.entries(P(X,se))){const Ee=w(_e);ee.includes(_e)?o.useEffect(()=>{G.current[_e]=de}):/^on[A-Z]/.test(_e)?x(G,_e,de):typeof de=="boolean"?ce[Ee]=de?"":null:typeof de=="object"&&de!==null?ce[Ee]=JSON.stringify(de):ce[Ee]=de}return{properties:ce}}function v(X,V){return d.default.forwardRef((G,ee)=>{const se=ee||o.useRef(),{style:ce,children:_e,...de}=G,{properties:Ee}=L(de,V,se);return d.default.createElement(X,g({ref:se,style:ce},Ee),_e)})}class E extends d.default.Component{constructor(V){super(V),this.container=document.createElement("div")}componentDidMount(){document.body.appendChild(this.container)}componentWillUnmount(){document.body.removeChild(this.container)}render(){return f.default.createPortal(this.props.children,this.container)}}const I=X=>d.default.forwardRef((V,G)=>{const{visible:ee,...se}=V;return d.default.createElement(E,null,d.default.createElement(X,g({},se,{visible:ee,ref:G}),V.children))}),N={title:l.default.string,onDialogCancel:l.default.func,visible:l.default.bool,cancelable:l.default.bool,disabled:l.default.bool,onCancel:l.default.func,isOpen:l.default.bool,isCancelable:l.default.bool,isDisabled:l.default.bool,animation:l.default.string,modifier:l.default.string,maskColor:l.default.string,animationOptions:l.default.object,onPreShow:l.default.func,onPostShow:l.default.func,onPreHide:l.default.func,onPostHide:l.default.func,onDeviceBackButton:l.default.func},K={onCancel:"onDialogCancel",isOpen:"visible",isDisabled:"disabled",isCancelable:"cancelable"},Q=["onDeviceBackButton"],S=v(I("ons-action-sheet"),{propTypes:N,deprecated:K,notAttributes:Q});S.propTypes=N;const _={modifier:l.default.string,icon:l.default.string,onClick:l.default.func},b=v("ons-action-sheet-button",{propTypes:_});b.propTypes=_;const T={onCancel:"onDialogCancel",isOpen:"visible",isDisabled:"disabled",isCancelable:"cancelable"},C=["onDeviceBackButton"],R=v(I("ons-alert-dialog"),{deprecated:T,notAttributes:C});R.propTypes={visible:l.default.bool,disabled:l.default.bool,cancelable:l.default.bool,onDialogCancel:l.default.func,onCancel:l.default.func,isOpen:l.default.bool,isCancelable:l.default.bool,isDisabled:l.default.bool,animation:l.default.string,modifier:l.default.string,maskColor:l.default.string,animationOptions:l.default.object,onPreShow:l.default.func,onPostShow:l.default.func,onPreHide:l.default.func,onPostHide:l.default.func,onDeviceBackButton:l.default.func};const A=v("ons-alert-dialog-button");A.propTypes={modifier:l.default.string,disabled:l.default.bool,onClick:l.default.func};const gt=v("ons-back-button",{notAttributes:["options"]});gt.propTypes={modifier:l.default.string,onClick:l.default.func,options:l.default.shape({animation:l.default.string,animationOptions:l.default.object,callback:l.default.func})};const Sn={modifier:l.default.string},Pt=v("ons-bottom-toolbar",{propTypes:Sn});Pt.propTypes=Sn;const J={modifier:l.default.string,disabled:l.default.bool,ripple:l.default.bool,onClick:l.default.func},fe=v("ons-button",{propTypes:J});fe.propTypes=J;const we=v("ons-card");we.propTypes={modifier:l.default.string};const Fe=v("ons-carousel",{deprecated:{index:"activeIndex"}}),We=d.default.forwardRef((X,V)=>{const{itemWidth:G,itemHeight:ee,...se}=X,ce=Ee=>typeof Ee=="number"?`${Ee}px`:Ee,_e=ce(G),de=ce(ee);return d.default.createElement(Fe,g({itemWidth:_e,itemHeight:de,ref:V},se),X.children)});We.propTypes={direction:l.default.oneOf(["horizontal","vertical"]),fullscreen:l.default.bool,overscrollable:l.default.bool,centered:l.default.bool,itemWidth:l.default.string,itemHeight:l.default.string,autoScroll:l.default.bool,autoScrollRatio:l.default.number,swipeable:l.default.bool,disabled:l.default.bool,activeIndex:l.default.number,index:l.default.number,autoRefresh:l.default.bool,onPreChange:l.default.func,onPostChange:l.default.func,onRefresh:l.default.func,onOverscroll:l.default.func,animation:l.default.string,animationOptions:l.default.object,onSwipe:l.default.func};const Zt=v("ons-carousel-item");Zt.propTypes={modifier:l.default.string};const Tt=(X,V,G)=>{class ee extends d.default.Component{constructor(ce){super(ce),this.ref=d.default.createRef()}componentDidMount(){const ce=this.props[V];ce&&(this.ref.current[G]=ce)}render(){const{innerRef:ce,..._e}=this.props;return delete _e[V],ce&&ce!==this.ref&&(this.ref=ce),d.default.createElement(X,g({ref:this.ref},_e),this.props.children)}}return d.default.forwardRef((se,ce)=>d.default.createElement(ee,g({innerRef:ce},se),se.children))},St={autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",inputMode:"inputmode",maxLength:"maxlength",minLength:"minlength",readOnly:"readonly",spellCheck:"spellcheck"},In={...St},oo=(X=>Tt(X,"defaultChecked","checked"))(v("ons-checkbox",{deprecated:In}));oo.propTypes={modifier:l.default.string,disabled:l.default.bool,onChange:l.default.func,onInput:l.default.func,value:l.default.oneOfType([l.default.string,l.default.instanceOf(Date)]),checked:l.default.bool,defaultChecked:l.default.bool,inputId:l.default.string};const Ei=v("ons-col");Ei.propTypes={verticalAlign:l.default.oneOf(["top","bottom","center"]),width:l.default.oneOfType([l.default.number,l.default.string])};const Yi={onCancel:"onDialogCancel",isOpen:"visible",isDisabled:"disabled",isCancelable:"cancelable"},Ti=["onDeviceBackButton"],Si=v(I("ons-dialog"),{deprecated:Yi,notAttributes:Ti});Si.propTypes={visible:l.default.bool,disabled:l.default.bool,cancelable:l.default.bool,onDialogCancel:l.default.func,onCancel:l.default.func,isOpen:l.default.bool,isCancelable:l.default.bool,isDisabled:l.default.bool,animation:l.default.string,modifier:l.default.string,maskColor:l.default.string,animationOptions:l.default.object,onPreShow:l.default.func,onPostShow:l.default.func,onPreHide:l.default.func,onPostHide:l.default.func,onDeviceBackButton:l.default.func};const Ji=v("ons-fab");Ji.propTypes={modifier:l.default.string,ripple:l.default.bool,position:l.default.string,disabled:l.default.bool,onClick:l.default.func};const Ii={onDrag:l.default.func,onDragLeft:l.default.func,onDragRight:l.default.func,onDragUp:l.default.func,onDragDown:l.default.func,onHold:l.default.func,onRelease:l.default.func,onSwipe:l.default.func,onSwipeLeft:l.default.func,onSwipeRight:l.default.func,onSwipeUp:l.default.func,onSwipeDown:l.default.func,onTap:l.default.func,onDoubleTap:l.default.func,onPinch:l.default.func,onPinchIn:l.default.func,onPinchOut:l.default.func,onTouch:l.default.func,onTransform:l.default.func,onRotate:l.default.func},is=v("ons-gesture-detector",{propTypes:Ii});is.propTypes=Ii;const Ma=X=>{if(X){if(typeof X=="string")return X;{const G=Object.keys(X).filter(ee=>ee!=="default").map(ee=>ee+":"+X[ee]);return X.default+", "+G.join(",")}}},Va=X=>{if(X){if(typeof X=="number")return`${X}px`;{const G=Object.keys(X).filter(ee=>ee!=="default").map(ee=>ee+":"+X[ee]+"px");return X.default+"px, "+G.join(",")}}},ao=v("ons-icon"),Kn=d.default.forwardRef((X,V)=>{const{icon:G,size:ee,...se}=X;return d.default.createElement(ao,g({icon:Ma(G),size:Va(ee)},se,{ref:V}),X.children)});Kn.propTypes={modifier:l.default.string,icon:l.default.oneOfType([l.default.string,l.default.objectOf(l.default.string)]),size:l.default.oneOfType([l.default.number,l.default.objectOf(l.default.number)]),rotate:l.default.oneOf([0,90,180,270]),fixedWidth:l.default.bool,spin:l.default.bool};const ai={...St},F=(X=>Tt(X,"defaultValue","value"))(v("ons-input",{deprecated:ai,notAttributes:["value"]}));F.propTypes={modifier:l.default.string,disabled:l.default.bool,readOnly:l.default.bool,onChange:l.default.func,onInput:l.default.func,value:l.default.oneOfType([l.default.string,l.default.instanceOf(Date)]),defaultValue:l.default.oneOfType([l.default.string,l.default.instanceOf(Date)]),placeholder:l.default.string,type:l.default.string,inputId:l.default.string,float:l.default.bool};const q=v("ons-list"),$=d.default.forwardRef((X,V)=>{const{renderHeader:G,renderFooter:ee,renderRow:se,dataSource:ce,..._e}=X,de=ce.map((Ee,dn)=>se(Ee,dn));return d.default.createElement(q,g({},_e,{ref:V}),G(),de,X.children,ee())});$.propTypes={modifier:l.default.string,dataSource:l.default.array,renderRow:l.default.func,renderHeader:l.default.func,renderFooter:l.default.func},$.defaultProps={dataSource:[],renderRow:()=>null,renderHeader:()=>null,renderFooter:()=>null};const D=d.default.forwardRef((X,V)=>{const G=V||o.useRef(),[ee,se]=o.useState([]),[,ce]=o.useState(),{calculateItemHeight:_e,renderRow:de,length:Ee,...dn}=X;return o.useEffect(()=>{G.current.delegate={calculateItemHeight:function(Ci){return _e(Ci)},_render:function(Ci,Bn,Qa){const mo=[];for(let Xa=Ci;Xa<Bn;Xa++)mo.push(de(Xa));se(mo),ce(Qa)},countItems:function(){return Ee}}},[_e,de,Ee]),d.default.createElement($,g({},dn,{style:{position:"relative"}}),d.default.createElement("ons-lazy-repeat",{ref:G}),ee)});D.propTypes={modifier:l.default.string,length:l.default.number.isRequired,renderRow:l.default.func.isRequired,calculateItemHeight:l.default.func.isRequired};const U=v("ons-list-header");U.propTypes={modifier:l.default.string};const oe={modifier:l.default.string,tappable:l.default.bool,tapBackgroundColor:l.default.string,keepTapBackgroundColor:l.default.bool,lockOnDrag:l.default.bool,expandable:l.default.bool,expanded:l.default.bool,onExpand:l.default.func,animation:l.default.string},Le=v("ons-list-item",{propTypes:oe});Le.propTypes=oe;const ct={modifier:l.default.string},en=v("ons-list-title",{propTypes:ct});en.propTypes=ct;const tn=v("ons-navigator");class Qn extends d.default.Component{constructor(){super(...arguments),this.ref=d.default.createRef(),this.pages=[],this.state={},this._prePush=this._prePush.bind(this),this._postPush=this._postPush.bind(this),this._prePop=this._prePop.bind(this),this._postPop=this._postPop.bind(this)}update(V,G){return this.pages=V||[],new Promise(ee=>{this.forceUpdate(ee)})}resetPage(V){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.resetPageStack([V],G)}resetPageStack(V){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.isRunning())return Promise.reject("Navigator is already running animation.");const ee=()=>{const de=this.ref.current.pages;for(let Ee=de.length-2;Ee>=0;Ee--)de[Ee].style.display="none"};if(G.pop){this.routesBeforePop=this.routes.slice(),this.routesAfterPop=V,this.routes=V.concat([this.routes[this.routes.length-1]]);const de=()=>(this.pages.pop(),this.routes=V,new Promise(Ee=>this.forceUpdate(Ee)));return this.update(this.pages).then(()=>this.ref.current._popPage(G,de)).then(()=>ee())}const se=V[V.length-1],ce=this.props.renderPage(se,this);this.routes.push(se);const _e=()=>(this.pages.push(ce),new Promise(de=>this.forceUpdate(de)));return this.ref.current._pushPage(G,_e).then(()=>(this.routes=V,this.pages=V.map(de=>this.props.renderPage(de,this)),this.update(this.pages).then(()=>ee())))}pushPage(V){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isRunning()?Promise.reject("Navigator is already running animation."):new Promise(ee=>{const se=()=>new Promise(ce=>{this.pages.push(this.props.renderPage(V,this)),this.forceUpdate(ce)});this.routes.push(V),this.ref.current._pushPage(G,se).then(ee).catch(ce=>{throw this.routes.pop(),this.pages.pop(),ce})})}isRunning(){return this.ref.current._isRunning}replacePage(V){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isRunning()?Promise.reject("Navigator is already running animation."):this.pushPage(V,G).then(()=>{const ee=this.pages.length-2;this.pages.splice(ee,1),this.routes.splice(ee,1),this.ref.current.topPage.updateBackButton(this.pages.length>1),this.forceUpdate()})}popPage(){let V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isRunning())return Promise.reject("Navigator is already running animation.");this.routesBeforePop=this.routes.slice(),this.routesAfterPop=this.routesBeforePop.slice(0,this.routesBeforePop.length-1);const G=()=>new Promise(ee=>{this.pages.pop(),this.routes.pop(),f.default.flushSync(()=>{this.forceUpdate(ee)})});return this.ref.current._popPage(V,G)}_onDeviceBackButton(V){this.pages.length>1?this.popPage():V.callParentHandler()}_prePop(V){V.target===this.ref.current&&(V.routes={poppingRoute:this.routesBeforePop[this.routesBeforePop.length-1],routes:this.routesBeforePop},this.props.onPrePop(V))}_postPop(V){V.target===this.ref.current&&(V.routes={poppedRoute:this.routesBeforePop[this.routesBeforePop.length-1],routes:this.routesAfterPop},this.props.onPostPop(V))}_prePush(V){V.target===this.ref.current&&(V.routes={pushingRoute:this.routes[this.routes.length-1],routes:this.routes.slice(0,this.routes.length-1)},this.props.onPrePush(V))}_postPush(V){V.target===this.ref.current&&(V.routes={pushedRoute:this.routes[this.routes.length-1],routes:this.routes},this.props.onPostPush(V))}componentDidMount(){const V=this.ref.current;if(V.popPage=this.popPage.bind(this),V.addEventListener("prepush",this._prePush),V.addEventListener("postpush",this._postPush),V.addEventListener("prepop",this._prePop),V.addEventListener("postpop",this._postPop),V.swipeMax=this.props.swipePop,V.onDeviceBackButton=this.props.onDeviceBackButton||this._onDeviceBackButton.bind(this),this.props.initialRoute&&this.props.initialRouteStack)throw new Error("In Navigator either initalRoute or initalRoutes can be set");this.props.initialRoute?this.routes=[this.props.initialRoute]:this.props.initialRouteStack?this.routes=this.props.initialRouteStack:this.routes=[],this.pages=this.routes.map(G=>this.props.renderPage(G,this)),this.forceUpdate()}componentDidUpdate(){this.props.onDeviceBackButton!==void 0&&(this.ref.current.onDeviceBackButton=this.props.onDeviceBackButton)}componentWillUnmount(){const V=this.ref.current;V.removeEventListener("prepush",this.props.onPrePush),V.removeEventListener("postpush",this.props.onPostPush),V.removeEventListener("prepop",this.props.onPrePop),V.removeEventListener("postpop",this.props.onPostPop)}render(){const{innerRef:V,renderPage:G,initialRouteStack:ee,initialRoute:se,onPrePush:ce,onPostPush:_e,onPrePop:de,onPostPop:Ee,swipePop:dn,onDeviceBackButton:Ci,...Bn}=this.props,Qa=this.routes?this.routes.map(mo=>G(mo,this)):null;return V&&V!==this.ref&&(this.ref=V),d.default.createElement(tn,g({ref:this.ref},Bn),Qa)}}const rs=d.default.forwardRef((X,V)=>d.default.createElement(Qn,g({innerRef:V},X),X.children));rs.propTypes={renderPage:l.default.func.isRequired,initialRouteStack:l.default.array,initialRoute:l.default.object,onPrePush:l.default.func,onPostPush:l.default.func,onPrePop:l.default.func,onPostPop:l.default.func,animation:l.default.string,animationOptions:l.default.object,swipeable:l.default.oneOfType([l.default.bool,l.default.string]),swipePop:l.default.func,onDeviceBackButton:l.default.func};const lo=()=>null;rs.defaultProps={onPostPush:lo,onPrePush:lo,onPrePop:lo,onPostPop:lo};const df={isOpen:"visible"},Ba=["onDeviceBackButton"],Fa=v(I("ons-modal"),{deprecated:df,notAttributes:Ba});Fa.propTypes={animation:l.default.oneOf(["none","fade","lift"]),animationOptions:l.default.object,onPreShow:l.default.func,onPostShow:l.default.func,onPreHide:l.default.func,onPostHide:l.default.func,visible:l.default.bool,isOpen:l.default.bool,onDeviceBackButton:l.default.func};const ss=v("ons-page",{notAttributes:["onInfiniteScroll","onDeviceBackButton"]}),os=d.default.forwardRef((X,V)=>{const{renderToolbar:G,renderBottomToolbar:ee,renderModal:se,renderFixed:ce,contentStyle:_e,children:de,...Ee}=X;return d.default.createElement(ss,g({},Ee,{ref:V}),G(V),d.default.createElement("div",{className:"page__background"}," "),d.default.createElement("div",{className:"page__content",style:_e},de),d.default.createElement("div",{className:"page__extra",style:{zIndex:10001}},se(V)),ce(V),ee(V))});os.propTypes={contentStyle:l.default.object,modifier:l.default.string,renderModal:l.default.func,renderToolbar:l.default.func,renderBottomToolbar:l.default.func,renderFixed:l.default.func,onInit:l.default.func,onShow:l.default.func,onHide:l.default.func,onInfiniteScroll:l.default.func,onDeviceBackButton:l.default.func};const Zi=()=>null;os.defaultProps={renderToolbar:Zi,renderBottomToolbar:Zi,renderModal:Zi,renderFixed:Zi};const Ai={onCancel:"onDialogCancel",isDisabled:"disabled",isCancelable:"cancelable"},ec=["onDeviceBackButton"],uo=v(I("ons-popover"),{deprecated:Ai,notAttributes:ec}),$a=d.default.forwardRef((X,V)=>{const{isOpen:G,getTarget:ee,children:se,...ce}=X,_e=V||o.useRef();return o.useEffect(()=>{if(G!==_e.current.visible)if(G){let de=ee();!(dn=>dn instanceof Element||dn instanceof HTMLDocument)(de)&&de.current&&(de=de.current),_e.current.show({target:de})}else _e.current.hide()}),d.default.createElement(uo,g({ref:_e},ce),se)});$a.propTypes={getTarget:l.default.func.isRequired,onDialogCancel:l.default.func,onCancel:l.default.func,isOpen:l.default.bool.isRequired,cancelable:l.default.bool,isCancelable:l.default.bool,disabled:l.default.bool,isDisabled:l.default.bool,animation:l.default.string,modifier:l.default.string,maskColor:l.default.string,animationOptions:l.default.object,onPreShow:l.default.func,onPostShow:l.default.func,onPreHide:l.default.func,onPostHide:l.default.func,onDeviceBackButton:l.default.func};const er=v("ons-progress-bar");er.propTypes={modifier:l.default.string,value:l.default.number,secondaryValue:l.default.number,indeterminate:l.default.bool};const za=v("ons-progress-circular");za.propTypes={modifier:l.default.string,value:l.default.number,secondaryValue:l.default.number,indeterminate:l.default.bool};const tr=v("ons-pull-hook",{deprecated:{onLoad:"onAction",onChange:"onChangeState"},notAttributes:["onAction"]});tr.propTypes={onChangeState:l.default.func,onChange:l.default.func,onAction:l.default.func,onLoad:l.default.func,onPull:l.default.func,disabled:l.default.bool,height:l.default.number,thresholdHeight:l.default.number,fixedContent:l.default.bool};const as={...St},tc=(X=>Tt(X,"defaultChecked","checked"))(v("ons-radio",{deprecated:as}));tc.propTypes={name:l.default.string,modifier:l.default.string,disabled:l.default.bool,onChange:l.default.func,value:l.default.oneOfType([l.default.string,l.default.instanceOf(Date)]),checked:l.default.bool,defaultChecked:l.default.bool,inputId:l.default.string};const nr={...St},nc=(X=>Tt(X,"defaultValue","value"))(v("ons-range",{deprecated:nr}));nc.propTypes={modifier:l.default.string,onChange:l.default.func,onInput:l.default.func,value:l.default.number,defaultValue:l.default.number,disabled:l.default.bool};const ls=v("ons-ripple");ls.propTypes={color:l.default.string,modifier:l.default.string,background:l.default.string,size:l.default.string,center:l.default.bool,disabled:l.default.bool};const ic=v("ons-navigator");class ja extends d.default.Component{constructor(){super(...arguments),this.cancelUpdate=!1;const V=(G,ee)=>{if(this.props[G])return this.props[G](ee)};this.onPrePush=V.bind(this,"onPrePush"),this.onPostPush=V.bind(this,"onPostPush"),this.onPrePop=V.bind(this,"onPrePop"),this.onPostPop=V.bind(this,"onPostPop"),this.ref=d.default.createRef(),this.state={internalStack:[]}}update(V){this.cancelUpdate||this.setState({},V)}resetPageStack(V){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.isRunning())return;const ee=()=>new Promise(se=>{this.setState({internalStack:[...this.state.internalStack,V[V.length-1]]},se)});return this.ref.current._pushPage(G,ee).then(()=>{this.setState({internalStack:[...V]})})}pushPage(V){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.isRunning())return;const ee=()=>new Promise(se=>{this.setState({internalStack:[...this.state.internalStack,V]},se)});return this.ref.current._pushPage(G,ee)}isRunning(){return this.ref.current._isRunning}replacePage(V){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.isRunning())return;const ee=()=>new Promise(se=>{this.setState({internalStack:[...this.state.internalStack,V]},se)});return this.ref.current._pushPage(G,ee).then(()=>{this.setState({internalStack:[...this.state.internalStack.slice(0,-2),V]})})}popPage(){let V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isRunning())return;const G=()=>new Promise(ee=>{f.default.flushSync(()=>{this.setState({internalStack:this.state.internalStack.slice(0,-1)},ee)})});return this.ref.current._popPage(V,G)}_onDeviceBackButton(V){this.props.routeConfig.routeStack.length>1?this.popPage():V.callParentHandler()}componentDidMount(){const V=this.ref.current;if(this.cancelUpdate=!1,V.addEventListener("prepush",this.onPrePush),V.addEventListener("postpush",this.onPostPush),V.addEventListener("prepop",this.onPrePop),V.addEventListener("postpop",this.onPostPop),!this.props.routeConfig)throw new Error("In RouterNavigator the property routeConfig needs to be set");V.swipeMax=this.props.swipePop,V.onDeviceBackButton=this.props.onDeviceBackButton||this._onDeviceBackButton.bind(this),this.setState({internalStack:this.props.routeConfig.routeStack})}componentWillUnmount(){const V=this.ref.current;V.removeEventListener("prepush",this.onPrePush),V.removeEventListener("postpush",this.onPostPush),V.removeEventListener("prepop",this.onPrePop),V.removeEventListener("postpop",this.onPostPop),this.cancelUpdate=!0}componentDidUpdate(V){this.props.onDeviceBackButton!==void 0&&(this.ref.current.onDeviceBackButton=this.props.onDeviceBackButton);const G=[...this.props.routeConfig.processStack];if(!(V.routeConfig.processStack.length<this.props.routeConfig.processStack.length&&V.routeConfig.routeStack.length>this.props.routeConfig.routeStack.length)&&G.length>0){const{type:ee,route:se,options:ce}=G[0];switch(ee){case"push":this.pushPage(se,ce);break;case"pop":this.popPage(ce);break;case"reset":Array.isArray(se)?this.resetPageStack(se,ce):this.resetPageStack([se],ce);break;case"replace":this.replacePage(se,ce);break;default:throw new Error(`Unknown type ${ee} in processStack`)}}}render(){const{innerRef:V,renderPage:G,onPrePush:ee,onPostPush:se,onPrePop:ce,onPostPop:_e,swipePop:de,onDeviceBackButton:Ee,...dn}=this.props,Ci=this.state.internalStack.map(Bn=>G(Bn));return V&&V!==this.ref&&(this.ref=V),d.default.createElement(ic,g({},dn,{ref:this.ref}),Ci)}}const us=d.default.forwardRef((X,V)=>d.default.createElement(ja,g({innerRef:V},X),X.children));us.propTypes={renderPage:l.default.func.isRequired,routeConfig:l.default.shape({routeStack:l.default.arrayOf(l.default.object),processStack:l.default.arrayOf(l.default.object)}),onPrePush:l.default.func,onPostPush:l.default.func,onPrePop:l.default.func,onPostPop:l.default.func,animation:l.default.string,animationOptions:l.default.object,swipeable:l.default.oneOfType([l.default.bool,l.default.string]),swipePop:l.default.func,onDeviceBackButton:l.default.func};const Xn=v("ons-row");Xn.propTypes={verticalAlign:l.default.oneOf(["top","bottom","center"])};const rc={...St},co=(X=>Tt(X,"defaultValue","value"))(v("ons-search-input",{deprecated:rc,notAttributes:["value"]}));co.propTypes={modifier:l.default.string,disabled:l.default.bool,readOnly:l.default.bool,onChange:l.default.func,onInput:l.default.func,value:l.default.oneOfType([l.default.string,l.default.instanceOf(Date)]),defaultValue:l.default.oneOfType([l.default.string,l.default.instanceOf(Date)]),placeholder:l.default.string,inputId:l.default.string};const qa=v("ons-segment",{deprecated:{index:"activeIndex"}});qa.propTypes={activeIndex:l.default.number,index:l.default.number,tabbarId:l.default.string,modifier:l.default.string,onPostChange:l.default.func,disabled:l.default.bool};const _f={...St},oc=(X=>Tt(X,"defaultValue","value"))(v("ons-select",{deprecated:_f})),ho=d.default.forwardRef((X,V)=>d.default.createElement(oc,g({},X,{ref:V}),d.default.createElement("select",null,X.children)));ho.propTypes={modifier:l.default.string,disabled:l.default.bool,onChange:l.default.func,value:l.default.string,defaultValue:l.default.string,multiple:l.default.bool,autofocus:l.default.bool,required:l.default.bool,form:l.default.string,size:l.default.number,name:l.default.string};const ir=v("ons-speed-dial");ir.propTypes={modifier:l.default.string,position:l.default.string,direction:l.default.oneOf(["up","down","left","right"]),disabled:l.default.bool};const li=v("ons-speed-dial-item");li.propTypes={modifier:l.default.string,onClick:l.default.func};const lc=v("ons-splitter",{notAttributes:["onDeviceBackButton"]});lc.propTypes={onDeviceBackButton:l.default.func};const uc=v("ons-splitter-content"),cc=v("ons-splitter-mask"),Ha=v("ons-splitter-side",{deprecated:{onOpen:"onPostOpen",onClose:"onPostClose"},notAttributes:["isOpen"]}),Ga=d.default.forwardRef((X,V)=>{const{width:G,...ee}=X,se=typeof G=="number"?`${G}px`:G;return d.default.createElement(Ha,g({width:se,ref:V},ee),X.children)});Ga.propTypes={collapse:l.default.oneOfType([l.default.bool,l.default.string]),swipeable:l.default.bool,isOpen:l.default.bool,onPostOpen:l.default.func,onOpen:l.default.func,onPostClose:l.default.func,onClose:l.default.func,side:l.default.oneOf(["left","right"]),swipeTargetWidth:l.default.number,width:l.default.string,animation:l.default.string,animationOptions:l.default.object,openThreshold:l.default.number,onPreOpen:l.default.func,onPreClose:l.default.func,onModeChange:l.default.func};const dc={...St},fc=(X=>Tt(X,"defaultChecked","checked"))(v("ons-switch",{deprecated:dc}));fc.propTypes={modifier:l.default.string,onChange:l.default.func,checked:l.default.bool,defaultChecked:l.default.bool,disabled:l.default.bool,inputId:l.default.string};const Wa=v("ons-tab");Wa.propTypes={icon:l.default.string,activeIcon:l.default.string,label:l.default.string,badge:l.default.string};const bf=v("ons-tabbar",{deprecated:{index:"activeIndex"}}),ui=d.default.forwardRef((X,V)=>{const{visible:G,hideTabs:ee,renderTabs:se,...ce}=X,_e=se(X.activeIndex,V);let de;return ee===void 0&&G!==void 0?de=!G:de=ee,d.default.createElement(bf,g({hideTabs:de},ce,{ref:V}),d.default.createElement("div",{className:"tabbar__content"},d.default.createElement("div",null,_e.map(Ee=>Ee.content)),d.default.createElement("div",null)),d.default.createElement("div",{className:"tabbar"},_e.map(Ee=>Ee.tab),d.default.createElement("div",{className:"tabbar__border"})))});ui.propTypes={activeIndex:l.default.number,index:l.default.number,renderTabs:l.default.func.isRequired,position:l.default.string,swipeable:l.default.bool,ignoreEdgeWidth:l.default.number,animation:l.default.oneOf(["none","slide"]),animationOptions:l.default.object,tabBorder:l.default.bool,onPreChange:l.default.func,onPostChange:l.default.func,onReactive:l.default.func,onSwipe:l.default.func,hideTabs:l.default.bool,visible:l.default.bool,modifier:l.default.string};const Vn={visible:l.default.bool,isOpen:l.default.bool,animation:l.default.string,modifier:l.default.string,animationOptions:l.default.object,onPreShow:l.default.func,onPostShow:l.default.func,onPreHide:l.default.func,onPostHide:l.default.func,onDeviceBackButton:l.default.func},fo={isOpen:"visible"},po=["onDeviceBackButton"],Ka=v(I("ons-toast"),{propTypes:Vn,deprecated:fo,notAttributes:po});Ka.propTypes=Vn;const cs=v("ons-toolbar",{notAttributes:["visible"]});cs.propTypes={modifier:l.default.string,visible:l.default.bool,static:l.default.bool,inline:l.default.bool};const rr=v("ons-toolbar-button");rr.propTypes={modifier:l.default.string,disabled:l.default.bool,icon:l.default.string,onClick:l.default.func};var hs={init:X=>({routeStack:[...X],processStack:[]}),replace:X=>{let{routeConfig:V,route:G,options:ee,key:se}=X;const ce={...V},_e=[...ce.routeStack];let de=[...ce.processStack];if(se==null||de.filter(Ee=>Ee.key===se).length===0){const Ee={type:"replace",route:G,options:ee,key:se};de=[...de,Ee]}return{routeStack:_e,processStack:de}},reset:X=>{let{routeConfig:V,route:G,options:ee,key:se}=X;const ce={...V},_e=[...ce.routeStack];let de=[...ce.processStack];if(se==null||de.filter(Ee=>Ee.key===se).length===0){const Ee={type:"reset",route:G,options:ee,key:se};de=[...de,Ee]}return{routeStack:_e,processStack:de}},push:X=>{let{routeConfig:V,route:G,options:ee,key:se}=X;const ce={...V},_e=[...ce.routeStack];let de=[...ce.processStack];if(se==null||ce.processStack.filter(Ee=>Ee.key===se).length===0){const Ee={type:"push",route:G,options:ee,key:se};de=[...de,Ee]}return{routeStack:_e,processStack:de}},pop:X=>{let{routeConfig:V,options:G,key:ee}=X;const se={...V},ce=[...se.routeStack];let _e=[...se.processStack];if(_e.filter(dn=>dn.type==="pop").length+1>=ce.length)return console.warn("Page stack is already empty"),se;const Ee={type:"pop",key:ee,options:G};return _e=[..._e,Ee],{routeStack:ce,processStack:_e}},postPush:X=>{const V={...X};let G=[...V.routeStack];const ee=[...V.processStack],se=ee.shift(),ce=se.type;let _e=se.route;return ce==="push"?_e!==null&&(G=[...G,_e]):ce==="reset"?(Array.isArray(_e)||(_e=[_e]),G=_e):ce==="replace"&&(G.pop(),G.push(_e)),{routeStack:G,processStack:ee}},postPop:X=>{const V={...X};let G=[...V.routeStack],ee=[...V.processStack];return G=G.slice(0,G.length-1),ee=ee.slice(1),{routeStack:G,processStack:ee}}};t.ActionSheet=S,t.ActionSheetButton=b,t.AlertDialog=R,t.AlertDialogButton=A,t.BackButton=gt,t.BottomToolbar=Pt,t.Button=fe,t.Card=we,t.Carousel=We,t.CarouselItem=Zt,t.Checkbox=oo,t.Col=Ei,t.Dialog=Si,t.Fab=Ji,t.GestureDetector=is,t.Icon=Kn,t.Input=F,t.LazyList=D,t.List=$,t.ListHeader=U,t.ListItem=Le,t.ListTitle=en,t.Modal=Fa,t.Navigator=rs,t.Page=os,t.Popover=$a,t.ProgressBar=er,t.ProgressCircular=za,t.PullHook=tr,t.Radio=tc,t.Range=nc,t.Ripple=ls,t.RouterNavigator=us,t.RouterUtil=hs,t.Row=Xn,t.SearchInput=co,t.Segment=qa,t.Select=ho,t.SpeedDial=ir,t.SpeedDialItem=li,t.Splitter=lc,t.SplitterContent=uc,t.SplitterMask=cc,t.SplitterSide=Ga,t.Switch=fc,t.Tab=Wa,t.Tabbar=ui,t.Toast=Ka,t.Toolbar=cs,t.ToolbarButton=rr,Object.defineProperty(t,"__esModule",{value:!0})})})(Bm,Bm.exports);var Re=Bm.exports;const GD=[{title:"Pisang Coklat Keju",price:0},{title:"Pisang Coklat",price:0},{title:"Pisang Keju",price:0},{title:"Pisang Keju Spesial",price:0},{title:"Pisang Tiramisu",price:0},{title:"Pisang Matcha",price:0},{title:"Pisang Cappuccino",price:0},{title:"Mix Varian",price:0}],WD=["Pisang Tiramisu","Pisang Matcha","Mix Varian","Pisang Cappuccino"],Um=()=>{const n=new Date,e=n.getFullYear();let t=n.getMonth()+1,i=n.getDate();return i<10&&(i="0"+i),t<10&&(t="0"+t),i+"/"+t+"/"+e},Hm=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(n??0);var Fw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},KD=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=n[t++],o=n[t++],a=n[t++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},HS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,l=c?n[r+2]:0,d=s>>2,f=(s&3)<<4|a>>4;let g=(a&15)<<2|l>>6,w=l&63;c||(w=64,o||(g=64)),i.push(t[d],t[f],t[g],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(US(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):KD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const l=r<n.length?t[n.charAt(r)]:64;++r;const f=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||l==null||f==null)throw new QD;const g=s<<2|a>>4;if(i.push(g),l!==64){const w=a<<4&240|l>>2;if(i.push(w),f!==64){const P=l<<6&192|f;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class QD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XD=function(n){const e=US(n);return HS.encodeByteArray(e,!0)},Kh=function(n){return XD(n).replace(/\./g,"")},YD=function(n){try{return HS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Qh(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!JD(t)||(n[t]=Qh(n[t],e[t]));return n}function JD(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=()=>ZD().__FIREBASE_DEFAULTS__,tO=()=>{if(typeof process>"u"||typeof Fw>"u")return;const n=Fw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},nO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&YD(n[1]);return e&&JSON.parse(e)},GS=()=>{try{return eO()||tO()||nO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},WS=()=>{var n;return(n=GS())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Kh(JSON.stringify(t)),Kh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sO(){var n;const e=(n=GS())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KS(){return typeof self=="object"&&self.self===self}function QS(){return!sO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XS(){try{return typeof indexedDB=="object"}catch{return!1}}function oO(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO="FirebaseError";class eo extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=aO,Object.setPrototypeOf(this,eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jd.prototype.create)}}class jd{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?lO(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new eo(r,a,i)}}function lO(n,e){return n.replace(uO,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const uO=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function cu(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],o=e[r];if(zw(s)&&zw(o)){if(!cu(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function zw(n){return n!==null&&typeof n=="object"}function cO(n,e){const t=new hO(n,e);return t.subscribe.bind(t)}class hO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");dO(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Np),r.error===void 0&&(r.error=Np),r.complete===void 0&&(r.complete=Np);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Np(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(n){return n&&n._delegate?n._delegate:n}class Fs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new iO;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mO(e))try{this.getOrInitializeService({instanceIdentifier:gs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gs){return this.instances.has(e)}getOptions(e=gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:pO(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=gs){return this.component?this.component.multipleInstances?e:gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pO(n){return n===gs?void 0:n}function mO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny=[];var De;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(De||(De={}));const JS={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},gO=De.INFO,_O={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},yO=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=_O[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class iy{constructor(e){this.name=e,this._logLevel=gO,this._logHandler=yO,this._userLogHandler=null,ny.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}function vO(n){ny.forEach(e=>{e.setLogLevel(n)})}function bO(n,e){for(const t of ny){let i=null;e&&e.level&&(i=JS[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(r,s,...o)=>{const a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(i??r.logLevel)&&n({level:De[s].toLowerCase(),message:a,args:o,type:r.name})}}}const wO=(n,e)=>e.some(t=>n instanceof t);let jw,qw;function EO(){return jw||(jw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TO(){return qw||(qw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ZS=new WeakMap,Gm=new WeakMap,eI=new WeakMap,Lp=new WeakMap,ry=new WeakMap;function SO(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Or(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&ZS.set(t,n)}).catch(()=>{}),ry.set(e,n),e}function IO(n){if(Gm.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Gm.set(n,e)}let Wm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Gm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||eI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Or(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function AO(n){Wm=n(Wm)}function CO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Mp(this),e,...t);return eI.set(i,e.sort?e.sort():[e]),Or(i)}:TO().includes(n)?function(...e){return n.apply(Mp(this),e),Or(ZS.get(this))}:function(...e){return Or(n.apply(Mp(this),e))}}function PO(n){return typeof n=="function"?CO(n):(n instanceof IDBTransaction&&IO(n),wO(n,EO())?new Proxy(n,Wm):n)}function Or(n){if(n instanceof IDBRequest)return SO(n);if(Lp.has(n))return Lp.get(n);const e=PO(n);return e!==n&&(Lp.set(n,e),ry.set(e,n)),e}const Mp=n=>ry.get(n);function kO(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=Or(o);return i&&o.addEventListener("upgradeneeded",c=>{i(Or(o.result),c.oldVersion,c.newVersion,Or(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const xO=["get","getKey","getAll","getAllKeys","count"],RO=["put","add","delete","clear"],Vp=new Map;function Uw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Vp.get(e))return Vp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=RO.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||xO.includes(t)))return;const s=async function(o,...a){const c=this.transaction(o,r?"readwrite":"readonly");let l=c.store;return i&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),r&&c.done]))[0]};return Vp.set(e,s),s}AO(n=>({...n,get:(e,t,i)=>Uw(e,t)||n.get(e,t,i),has:(e,t)=>!!Uw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OO(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function OO(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yh="@firebase/app",Km="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new iy("@firebase/app"),NO="@firebase/app-compat",LO="@firebase/analytics-compat",MO="@firebase/analytics",VO="@firebase/app-check-compat",BO="@firebase/app-check",FO="@firebase/auth",$O="@firebase/auth-compat",zO="@firebase/database",jO="@firebase/database-compat",qO="@firebase/functions",UO="@firebase/functions-compat",HO="@firebase/installations",GO="@firebase/installations-compat",WO="@firebase/messaging",KO="@firebase/messaging-compat",QO="@firebase/performance",XO="@firebase/performance-compat",YO="@firebase/remote-config",JO="@firebase/remote-config-compat",ZO="@firebase/storage",eN="@firebase/storage-compat",tN="@firebase/firestore",nN="@firebase/vertexai-preview",iN="@firebase/firestore-compat",rN="firebase",sN="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="[DEFAULT]",oN={[Yh]:"fire-core",[NO]:"fire-core-compat",[MO]:"fire-analytics",[LO]:"fire-analytics-compat",[BO]:"fire-app-check",[VO]:"fire-app-check-compat",[FO]:"fire-auth",[$O]:"fire-auth-compat",[zO]:"fire-rtdb",[jO]:"fire-rtdb-compat",[qO]:"fire-fn",[UO]:"fire-fn-compat",[HO]:"fire-iid",[GO]:"fire-iid-compat",[WO]:"fire-fcm",[KO]:"fire-fcm-compat",[QO]:"fire-perf",[XO]:"fire-perf-compat",[YO]:"fire-rc",[JO]:"fire-rc-compat",[ZO]:"fire-gcs",[eN]:"fire-gcs-compat",[tN]:"fire-fst",[iN]:"fire-fst-compat",[nN]:"fire-vertex","fire-js":"fire-js",[rN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new Map,la=new Map,ua=new Map;function hu(n,e){try{n.container.addComponent(e)}catch(t){$s.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function tI(n,e){n.container.addOrOverwriteComponent(e)}function ca(n){const e=n.name;if(ua.has(e))return $s.debug(`There were multiple attempts to register component ${e}.`),!1;ua.set(e,n);for(const t of zr.values())hu(t,n);for(const t of la.values())hu(t,n);return!0}function nI(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function aN(n,e,t=$r){nI(n,e).clearInstance(t)}function iI(n){return n.options!==void 0}function lN(n){return n.settings!==void 0}function uN(){ua.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hn=new jd("app","Firebase",cN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rI=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN extends rI{constructor(e,t,i,r){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,o={name:i,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,r);else{const a=e;super(a.options,o,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Mi(Yh,Km,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ay(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Hn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=sN;function oy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:$r,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Hn.create("bad-app-name",{appName:String(r)});if(t||(t=WS()),!t)throw Hn.create("no-options");const s=zr.get(r);if(s){if(cu(t,s.options)&&cu(i,s.config))return s;throw Hn.create("duplicate-app",{appName:r})}const o=new YS(r);for(const c of ua.values())o.addComponent(c);const a=new rI(t,i,o);return zr.set(r,a),a}function dN(n,e){if(KS())throw Hn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;iI(n)?t=n.options:t=n;const i=Object.assign(Object.assign({},e),t);i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const r=l=>[...l].reduce((d,f)=>Math.imul(31,d)+f.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Hn.create("finalization-registry-not-supported",{});const s=""+r(JSON.stringify(i)),o=la.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new YS(s);for(const l of ua.values())a.addComponent(l);const c=new hN(t,e,s,a);return la.set(s,c),c}function fN(n=$r){const e=zr.get(n);if(!e&&n===$r&&WS())return oy();if(!e)throw Hn.create("no-app",{appName:n});return e}function pN(){return Array.from(zr.values())}async function ay(n){let e=!1;const t=n.name;zr.has(t)?(e=!0,zr.delete(t)):la.has(t)&&n.decRefCount()<=0&&(la.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)}function Mi(n,e,t){var i;let r=(i=oN[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$s.warn(a.join(" "));return}ca(new Fs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function sI(n,e){if(n!==null&&typeof n!="function")throw Hn.create("invalid-log-argument");bO(n,e)}function oI(n){vO(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN="firebase-heartbeat-database",gN=1,du="firebase-heartbeat-store";let Bp=null;function aI(){return Bp||(Bp=kO(mN,gN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(du)}catch(t){console.warn(t)}}}}).catch(n=>{throw Hn.create("idb-open",{originalErrorMessage:n.message})})),Bp}async function _N(n){try{const t=(await aI()).transaction(du),i=await t.objectStore(du).get(lI(n));return await t.done,i}catch(e){if(e instanceof eo)$s.warn(e.message);else{const t=Hn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$s.warn(t.message)}}}async function Hw(n,e){try{const i=(await aI()).transaction(du,"readwrite");await i.objectStore(du).put(e,lI(n)),await i.done}catch(t){if(t instanceof eo)$s.warn(t.message);else{const i=Hn.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});$s.warn(i.message)}}}function lI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=1024,vN=30*24*60*60*1e3;class bN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new EN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Gw();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=vN}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Gw(),{heartbeatsToSend:i,unsentEntries:r}=wN(this._heartbeatsCache.heartbeats),s=Kh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Gw(){return new Date().toISOString().substring(0,10)}function wN(n,e=yN){const t=[];let i=n.slice();for(const r of n){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Ww(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Ww(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class EN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XS()?oO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await _N(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return Hw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return Hw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Ww(n){return Kh(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(n){ca(new Fs("platform-logger",e=>new DO(e),"PRIVATE")),ca(new Fs("heartbeat",e=>new bN(e),"PRIVATE")),Mi(Yh,Km,n),Mi(Yh,Km,"esm2017"),Mi("fire-js","")}TN("");const SN=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:eo,SDK_VERSION:sy,_DEFAULT_ENTRY_NAME:$r,_addComponent:hu,_addOrOverwriteComponent:tI,_apps:zr,_clearComponents:uN,_components:ua,_getProvider:nI,_isFirebaseApp:iI,_isFirebaseServerApp:lN,_registerComponent:ca,_removeServiceInstance:aN,_serverApps:la,deleteApp:ay,getApp:fN,getApps:pN,initializeApp:oy,initializeServerApp:dN,onLog:sI,registerVersion:Mi,setLogLevel:oI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,t){this._delegate=e,this.firebase=t,hu(e,new Fs("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),ay(this._delegate)))}_getService(e,t=$r){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=$r){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){hu(this._delegate,e)}_addOrOverwriteComponent(e){tI(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Kw=new jd("app-compat","Firebase",AN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n){const e={},t={__esModule:!0,initializeApp:s,app:r,registerVersion:Mi,setLogLevel:oI,onLog:sI,apps:null,SDK_VERSION:sy,INTERNAL:{registerComponent:a,removeApp:i,useAsService:c,modularAPIs:SN}};t.default=t,Object.defineProperty(t,"apps",{get:o});function i(l){delete e[l]}function r(l){if(l=l||$r,!$w(e,l))throw Kw.create("no-app",{appName:l});return e[l]}r.App=n;function s(l,d={}){const f=oy(l,d);if($w(e,f.name))return e[f.name];const g=new n(f,t);return e[f.name]=g,g}function o(){return Object.keys(e).map(l=>e[l])}function a(l){const d=l.name,f=d.replace("-compat","");if(ca(l)&&l.type==="PUBLIC"){const g=(w=r())=>{if(typeof w[f]!="function")throw Kw.create("invalid-app-argument",{appName:d});return w[f]()};l.serviceProps!==void 0&&Qh(g,l.serviceProps),t[f]=g,n.prototype[f]=function(...w){return this._getService.bind(this,d).apply(this,l.multipleInstances?w:[])}}return l.type==="PUBLIC"?t[f]:null}function c(l,d){return d==="serverAuth"?null:d}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(){const n=CN(IN);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:uI,extendNamespace:e,createSubscribe:cO,ErrorFactory:jd,deepExtend:Qh});function e(t){Qh(n,t)}return n}const PN=uI();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=new iy("@firebase/app-compat"),kN="@firebase/app-compat",xN="0.2.35";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(n){Mi(kN,xN,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(KS()&&self.firebase!==void 0){Qw.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&Qw.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Bl=PN;RN();var DN="firebase",ON="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bl.registerVersion(DN,ON,"app-compat");var Xw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Os,cI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,_){function b(){}b.prototype=_.prototype,S.D=_.prototype,S.prototype=new b,S.prototype.constructor=S,S.C=function(T,C,R){for(var A=Array(arguments.length-2),st=2;st<arguments.length;st++)A[st-2]=arguments[st];return _.prototype[C].apply(T,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,_,b){b||(b=0);var T=Array(16);if(typeof _=="string")for(var C=0;16>C;++C)T[C]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(C=0;16>C;++C)T[C]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=S.g[0],b=S.g[1],C=S.g[2];var R=S.g[3],A=_+(R^b&(C^R))+T[0]+3614090360&4294967295;_=b+(A<<7&4294967295|A>>>25),A=R+(C^_&(b^C))+T[1]+3905402710&4294967295,R=_+(A<<12&4294967295|A>>>20),A=C+(b^R&(_^b))+T[2]+606105819&4294967295,C=R+(A<<17&4294967295|A>>>15),A=b+(_^C&(R^_))+T[3]+3250441966&4294967295,b=C+(A<<22&4294967295|A>>>10),A=_+(R^b&(C^R))+T[4]+4118548399&4294967295,_=b+(A<<7&4294967295|A>>>25),A=R+(C^_&(b^C))+T[5]+1200080426&4294967295,R=_+(A<<12&4294967295|A>>>20),A=C+(b^R&(_^b))+T[6]+2821735955&4294967295,C=R+(A<<17&4294967295|A>>>15),A=b+(_^C&(R^_))+T[7]+4249261313&4294967295,b=C+(A<<22&4294967295|A>>>10),A=_+(R^b&(C^R))+T[8]+1770035416&4294967295,_=b+(A<<7&4294967295|A>>>25),A=R+(C^_&(b^C))+T[9]+2336552879&4294967295,R=_+(A<<12&4294967295|A>>>20),A=C+(b^R&(_^b))+T[10]+4294925233&4294967295,C=R+(A<<17&4294967295|A>>>15),A=b+(_^C&(R^_))+T[11]+2304563134&4294967295,b=C+(A<<22&4294967295|A>>>10),A=_+(R^b&(C^R))+T[12]+1804603682&4294967295,_=b+(A<<7&4294967295|A>>>25),A=R+(C^_&(b^C))+T[13]+4254626195&4294967295,R=_+(A<<12&4294967295|A>>>20),A=C+(b^R&(_^b))+T[14]+2792965006&4294967295,C=R+(A<<17&4294967295|A>>>15),A=b+(_^C&(R^_))+T[15]+1236535329&4294967295,b=C+(A<<22&4294967295|A>>>10),A=_+(C^R&(b^C))+T[1]+4129170786&4294967295,_=b+(A<<5&4294967295|A>>>27),A=R+(b^C&(_^b))+T[6]+3225465664&4294967295,R=_+(A<<9&4294967295|A>>>23),A=C+(_^b&(R^_))+T[11]+643717713&4294967295,C=R+(A<<14&4294967295|A>>>18),A=b+(R^_&(C^R))+T[0]+3921069994&4294967295,b=C+(A<<20&4294967295|A>>>12),A=_+(C^R&(b^C))+T[5]+3593408605&4294967295,_=b+(A<<5&4294967295|A>>>27),A=R+(b^C&(_^b))+T[10]+38016083&4294967295,R=_+(A<<9&4294967295|A>>>23),A=C+(_^b&(R^_))+T[15]+3634488961&4294967295,C=R+(A<<14&4294967295|A>>>18),A=b+(R^_&(C^R))+T[4]+3889429448&4294967295,b=C+(A<<20&4294967295|A>>>12),A=_+(C^R&(b^C))+T[9]+568446438&4294967295,_=b+(A<<5&4294967295|A>>>27),A=R+(b^C&(_^b))+T[14]+3275163606&4294967295,R=_+(A<<9&4294967295|A>>>23),A=C+(_^b&(R^_))+T[3]+4107603335&4294967295,C=R+(A<<14&4294967295|A>>>18),A=b+(R^_&(C^R))+T[8]+1163531501&4294967295,b=C+(A<<20&4294967295|A>>>12),A=_+(C^R&(b^C))+T[13]+2850285829&4294967295,_=b+(A<<5&4294967295|A>>>27),A=R+(b^C&(_^b))+T[2]+4243563512&4294967295,R=_+(A<<9&4294967295|A>>>23),A=C+(_^b&(R^_))+T[7]+1735328473&4294967295,C=R+(A<<14&4294967295|A>>>18),A=b+(R^_&(C^R))+T[12]+2368359562&4294967295,b=C+(A<<20&4294967295|A>>>12),A=_+(b^C^R)+T[5]+4294588738&4294967295,_=b+(A<<4&4294967295|A>>>28),A=R+(_^b^C)+T[8]+2272392833&4294967295,R=_+(A<<11&4294967295|A>>>21),A=C+(R^_^b)+T[11]+1839030562&4294967295,C=R+(A<<16&4294967295|A>>>16),A=b+(C^R^_)+T[14]+4259657740&4294967295,b=C+(A<<23&4294967295|A>>>9),A=_+(b^C^R)+T[1]+2763975236&4294967295,_=b+(A<<4&4294967295|A>>>28),A=R+(_^b^C)+T[4]+1272893353&4294967295,R=_+(A<<11&4294967295|A>>>21),A=C+(R^_^b)+T[7]+4139469664&4294967295,C=R+(A<<16&4294967295|A>>>16),A=b+(C^R^_)+T[10]+3200236656&4294967295,b=C+(A<<23&4294967295|A>>>9),A=_+(b^C^R)+T[13]+681279174&4294967295,_=b+(A<<4&4294967295|A>>>28),A=R+(_^b^C)+T[0]+3936430074&4294967295,R=_+(A<<11&4294967295|A>>>21),A=C+(R^_^b)+T[3]+3572445317&4294967295,C=R+(A<<16&4294967295|A>>>16),A=b+(C^R^_)+T[6]+76029189&4294967295,b=C+(A<<23&4294967295|A>>>9),A=_+(b^C^R)+T[9]+3654602809&4294967295,_=b+(A<<4&4294967295|A>>>28),A=R+(_^b^C)+T[12]+3873151461&4294967295,R=_+(A<<11&4294967295|A>>>21),A=C+(R^_^b)+T[15]+530742520&4294967295,C=R+(A<<16&4294967295|A>>>16),A=b+(C^R^_)+T[2]+3299628645&4294967295,b=C+(A<<23&4294967295|A>>>9),A=_+(C^(b|~R))+T[0]+4096336452&4294967295,_=b+(A<<6&4294967295|A>>>26),A=R+(b^(_|~C))+T[7]+1126891415&4294967295,R=_+(A<<10&4294967295|A>>>22),A=C+(_^(R|~b))+T[14]+2878612391&4294967295,C=R+(A<<15&4294967295|A>>>17),A=b+(R^(C|~_))+T[5]+4237533241&4294967295,b=C+(A<<21&4294967295|A>>>11),A=_+(C^(b|~R))+T[12]+1700485571&4294967295,_=b+(A<<6&4294967295|A>>>26),A=R+(b^(_|~C))+T[3]+2399980690&4294967295,R=_+(A<<10&4294967295|A>>>22),A=C+(_^(R|~b))+T[10]+4293915773&4294967295,C=R+(A<<15&4294967295|A>>>17),A=b+(R^(C|~_))+T[1]+2240044497&4294967295,b=C+(A<<21&4294967295|A>>>11),A=_+(C^(b|~R))+T[8]+1873313359&4294967295,_=b+(A<<6&4294967295|A>>>26),A=R+(b^(_|~C))+T[15]+4264355552&4294967295,R=_+(A<<10&4294967295|A>>>22),A=C+(_^(R|~b))+T[6]+2734768916&4294967295,C=R+(A<<15&4294967295|A>>>17),A=b+(R^(C|~_))+T[13]+1309151649&4294967295,b=C+(A<<21&4294967295|A>>>11),A=_+(C^(b|~R))+T[4]+4149444226&4294967295,_=b+(A<<6&4294967295|A>>>26),A=R+(b^(_|~C))+T[11]+3174756917&4294967295,R=_+(A<<10&4294967295|A>>>22),A=C+(_^(R|~b))+T[2]+718787259&4294967295,C=R+(A<<15&4294967295|A>>>17),A=b+(R^(C|~_))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+R&4294967295}i.prototype.u=function(S,_){_===void 0&&(_=S.length);for(var b=_-this.blockSize,T=this.B,C=this.h,R=0;R<_;){if(C==0)for(;R<=b;)r(this,S,R),R+=this.blockSize;if(typeof S=="string"){for(;R<_;)if(T[C++]=S.charCodeAt(R++),C==this.blockSize){r(this,T),C=0;break}}else for(;R<_;)if(T[C++]=S[R++],C==this.blockSize){r(this,T),C=0;break}}this.h=C,this.o+=_},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;var b=8*this.o;for(_=S.length-8;_<S.length;++_)S[_]=b&255,b/=256;for(this.u(S),S=Array(16),_=b=0;4>_;++_)for(var T=0;32>T;T+=8)S[b++]=this.g[_]>>>T&255;return S};function s(S,_){var b=a;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=_(S)}function o(S,_){this.h=_;for(var b=[],T=!0,C=S.length-1;0<=C;C--){var R=S[C]|0;T&&R==_||(b[C]=R,T=!1)}this.g=b}var a={};function c(S){return-128<=S&&128>S?s(S,function(_){return new o([_|0],0>_?-1:0)}):new o([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return L(l(-S));for(var _=[],b=1,T=0;S>=b;T++)_[T]=S/b|0,b*=4294967296;return new o(_,0)}function d(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return L(d(S.substring(1),_));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=l(Math.pow(_,8)),T=f,C=0;C<S.length;C+=8){var R=Math.min(8,S.length-C),A=parseInt(S.substring(C,C+R),_);8>R?(R=l(Math.pow(_,R)),T=T.j(R).add(l(A))):(T=T.j(b),T=T.add(l(A)))}return T}var f=c(0),g=c(1),w=c(16777216);n=o.prototype,n.m=function(){if(x(this))return-L(this).m();for(var S=0,_=1,b=0;b<this.g.length;b++){var T=this.i(b);S+=(0<=T?T:4294967296+T)*_,_*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(P(this))return"0";if(x(this))return"-"+L(this).toString(S);for(var _=l(Math.pow(S,6)),b=this,T="";;){var C=N(b,_).g;b=v(b,C.j(_));var R=((0<b.g.length?b.g[0]:b.h)>>>0).toString(S);if(b=C,P(b))return R+T;for(;6>R.length;)R="0"+R;T=R+T}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function P(S){if(S.h!=0)return!1;for(var _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function x(S){return S.h==-1}n.l=function(S){return S=v(this,S),x(S)?-1:P(S)?0:1};function L(S){for(var _=S.g.length,b=[],T=0;T<_;T++)b[T]=~S.g[T];return new o(b,~S.h).add(g)}n.abs=function(){return x(this)?L(this):this},n.add=function(S){for(var _=Math.max(this.g.length,S.g.length),b=[],T=0,C=0;C<=_;C++){var R=T+(this.i(C)&65535)+(S.i(C)&65535),A=(R>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);T=A>>>16,R&=65535,A&=65535,b[C]=A<<16|R}return new o(b,b[b.length-1]&-2147483648?-1:0)};function v(S,_){return S.add(L(_))}n.j=function(S){if(P(this)||P(S))return f;if(x(this))return x(S)?L(this).j(L(S)):L(L(this).j(S));if(x(S))return L(this.j(L(S)));if(0>this.l(w)&&0>S.l(w))return l(this.m()*S.m());for(var _=this.g.length+S.g.length,b=[],T=0;T<2*_;T++)b[T]=0;for(T=0;T<this.g.length;T++)for(var C=0;C<S.g.length;C++){var R=this.i(T)>>>16,A=this.i(T)&65535,st=S.i(C)>>>16,gt=S.i(C)&65535;b[2*T+2*C]+=A*gt,E(b,2*T+2*C),b[2*T+2*C+1]+=R*gt,E(b,2*T+2*C+1),b[2*T+2*C+1]+=A*st,E(b,2*T+2*C+1),b[2*T+2*C+2]+=R*st,E(b,2*T+2*C+2)}for(T=0;T<_;T++)b[T]=b[2*T+1]<<16|b[2*T];for(T=_;T<2*_;T++)b[T]=0;return new o(b,0)};function E(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function I(S,_){this.g=S,this.h=_}function N(S,_){if(P(_))throw Error("division by zero");if(P(S))return new I(f,f);if(x(S))return _=N(L(S),_),new I(L(_.g),L(_.h));if(x(_))return _=N(S,L(_)),new I(L(_.g),_.h);if(30<S.g.length){if(x(S)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var b=g,T=_;0>=T.l(S);)b=K(b),T=K(T);var C=Q(b,1),R=Q(T,1);for(T=Q(T,2),b=Q(b,2);!P(T);){var A=R.add(T);0>=A.l(S)&&(C=C.add(b),R=A),T=Q(T,1),b=Q(b,1)}return _=v(S,C.j(_)),new I(C,_)}for(C=f;0<=S.l(_);){for(b=Math.max(1,Math.floor(S.m()/_.m())),T=Math.ceil(Math.log(b)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),R=l(b),A=R.j(_);x(A)||0<A.l(S);)b-=T,R=l(b),A=R.j(_);P(R)&&(R=g),C=C.add(R),S=v(S,A)}return new I(C,S)}n.A=function(S){return N(this,S).h},n.and=function(S){for(var _=Math.max(this.g.length,S.g.length),b=[],T=0;T<_;T++)b[T]=this.i(T)&S.i(T);return new o(b,this.h&S.h)},n.or=function(S){for(var _=Math.max(this.g.length,S.g.length),b=[],T=0;T<_;T++)b[T]=this.i(T)|S.i(T);return new o(b,this.h|S.h)},n.xor=function(S){for(var _=Math.max(this.g.length,S.g.length),b=[],T=0;T<_;T++)b[T]=this.i(T)^S.i(T);return new o(b,this.h^S.h)};function K(S){for(var _=S.g.length+1,b=[],T=0;T<_;T++)b[T]=S.i(T)<<1|S.i(T-1)>>>31;return new o(b,S.h)}function Q(S,_){var b=_>>5;_%=32;for(var T=S.g.length-b,C=[],R=0;R<T;R++)C[R]=0<_?S.i(R+b)>>>_|S.i(R+b+1)<<32-_:S.i(R+b);return new o(C,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,cI=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,Os=o}).apply(typeof Xw<"u"?Xw:typeof self<"u"?self:typeof window<"u"?window:{});var $c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hI,dI,Sl,fI,ah,Qm,pI,mI,gI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof $c=="object"&&$c];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var i=t(this);function r(u,h){if(h)e:{var p=i;u=u.split(".");for(var y=0;y<u.length-1;y++){var M=u[y];if(!(M in p))break e;p=p[M]}u=u[u.length-1],y=p[u],h=h(y),h!=y&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,y=!1,M={next:function(){if(!y&&p<u.length){var j=p++;return{value:h(j,u[j]),done:!1}}return y=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}r("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,y),u.apply(h,M)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function w(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),u.apply(this,y)}}function P(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(y,M,j){for(var te=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)te[Ke-2]=arguments[Ke];return h.prototype[M].apply(y,te)}}function x(u){const h=u.length;if(0<h){const p=Array(h);for(let y=0;y<h;y++)p[y]=u[y];return p}return[]}function L(u,h){for(let p=1;p<arguments.length;p++){const y=arguments[p];if(c(y)){const M=u.length||0,j=y.length||0;u.length=M+j;for(let te=0;te<j;te++)u[M+te]=y[te]}else u.push(y)}}class v{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function N(u){return N[" "](u),u}N[" "]=function(){};var K=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function Q(u,h,p){for(const y in u)h.call(p,u[y],y,u)}function S(u,h){for(const p in u)h.call(void 0,u[p],p,u)}function _(u){const h={};for(const p in u)h[p]=u[p];return h}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,h){let p,y;for(let M=1;M<arguments.length;M++){y=arguments[M];for(p in y)u[p]=y[p];for(let j=0;j<b.length;j++)p=b[j],Object.prototype.hasOwnProperty.call(y,p)&&(u[p]=y[p])}}function C(u){var h=1;u=u.split(":");const p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function R(u){a.setTimeout(()=>{throw u},0)}function A(){var u=fe;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class st{constructor(){this.h=this.g=null}add(h,p){const y=gt.get();y.set(h,p),this.h?this.h.next=y:this.g=y,this.h=y}}var gt=new v(()=>new Sn,u=>u.reset());class Sn{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Pt,J=!1,fe=new st,we=()=>{const u=a.Promise.resolve(void 0);Pt=()=>{u.then(je)}};var je=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(p){R(p)}var h=gt;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}J=!1};function Fe(){this.s=this.s,this.C=this.C}Fe.prototype.s=!1,Fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function We(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}We.prototype.h=function(){this.defaultPrevented=!0};var Zt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function Tt(u,h){if(We.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,y=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(K){e:{try{N(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:St[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Tt.aa.h.call(this)}}P(Tt,We);var St={2:"touch",3:"pen",4:"mouse"};Tt.prototype.h=function(){Tt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var In="closure_listenable_"+(1e6*Math.random()|0),Ju=0;function oo(u,h,p,y,M){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!y,this.ha=M,this.key=++Ju,this.da=this.fa=!1}function Ei(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Yi(u){this.src=u,this.g={},this.h=0}Yi.prototype.add=function(u,h,p,y,M){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var te=Si(u,h,y,M);return-1<te?(h=u[te],p||(h.fa=!1)):(h=new oo(h,this.src,j,!!y,M),h.fa=p,u.push(h)),h};function Ti(u,h){var p=h.type;if(p in u.g){var y=u.g[p],M=Array.prototype.indexOf.call(y,h,void 0),j;(j=0<=M)&&Array.prototype.splice.call(y,M,1),j&&(Ei(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Si(u,h,p,y){for(var M=0;M<u.length;++M){var j=u[M];if(!j.da&&j.listener==h&&j.capture==!!p&&j.ha==y)return M}return-1}var Ji="closure_lm_"+(1e6*Math.random()|0),Ii={};function is(u,h,p,y,M){if(Array.isArray(h)){for(var j=0;j<h.length;j++)is(u,h[j],p,y,M);return null}return p=q(p),u&&u[In]?u.K(h,p,l(y)?!!y.capture:!!y,M):Ma(u,h,p,!1,y,M)}function Ma(u,h,p,y,M,j){if(!h)throw Error("Invalid event type");var te=l(M)?!!M.capture:!!M,Ke=O(u);if(Ke||(u[Ji]=Ke=new Yi(u)),p=Ke.add(h,p,y,te,j),p.proxy)return p;if(y=Va(),p.proxy=y,y.src=u,y.listener=p,u.addEventListener)Zt||(M=te),M===void 0&&(M=!1),u.addEventListener(h.toString(),y,M);else if(u.attachEvent)u.attachEvent(ai(h.toString()),y);else if(u.addListener&&u.removeListener)u.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Va(){function u(p){return h.call(u.src,u.listener,p)}const h=Zu;return u}function ao(u,h,p,y,M){if(Array.isArray(h))for(var j=0;j<h.length;j++)ao(u,h[j],p,y,M);else y=l(y)?!!y.capture:!!y,p=q(p),u&&u[In]?(u=u.i,h=String(h).toString(),h in u.g&&(j=u.g[h],p=Si(j,p,y,M),-1<p&&(Ei(j[p]),Array.prototype.splice.call(j,p,1),j.length==0&&(delete u.g[h],u.h--)))):u&&(u=O(u))&&(h=u.g[h.toString()],u=-1,h&&(u=Si(h,p,y,M)),(p=-1<u?h[u]:null)&&Kn(p))}function Kn(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[In])Ti(h.i,u);else{var p=u.type,y=u.proxy;h.removeEventListener?h.removeEventListener(p,y,u.capture):h.detachEvent?h.detachEvent(ai(p),y):h.addListener&&h.removeListener&&h.removeListener(y),(p=O(h))?(Ti(p,u),p.h==0&&(p.src=null,h[Ji]=null)):Ei(u)}}}function ai(u){return u in Ii?Ii[u]:Ii[u]="on"+u}function Zu(u,h){if(u.da)u=!0;else{h=new Tt(h,this);var p=u.listener,y=u.ha||u.src;u.fa&&Kn(u),u=p.call(y,h)}return u}function O(u){return u=u[Ji],u instanceof Yi?u:null}var F="__closure_events_fn_"+(1e9*Math.random()>>>0);function q(u){return typeof u=="function"?u:(u[F]||(u[F]=function(h){return u.handleEvent(h)}),u[F])}function $(){Fe.call(this),this.i=new Yi(this),this.M=this,this.F=null}P($,Fe),$.prototype[In]=!0,$.prototype.removeEventListener=function(u,h,p,y){ao(this,u,h,p,y)};function D(u,h){var p,y=u.F;if(y)for(p=[];y;y=y.F)p.push(y);if(u=u.M,y=h.type||h,typeof h=="string")h=new We(h,u);else if(h instanceof We)h.target=h.target||u;else{var M=h;h=new We(y,u),T(h,M)}if(M=!0,p)for(var j=p.length-1;0<=j;j--){var te=h.g=p[j];M=U(te,y,!0,h)&&M}if(te=h.g=u,M=U(te,y,!0,h)&&M,M=U(te,y,!1,h)&&M,p)for(j=0;j<p.length;j++)te=h.g=p[j],M=U(te,y,!1,h)&&M}$.prototype.N=function(){if($.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],y=0;y<p.length;y++)Ei(p[y]);delete u.g[h],u.h--}}this.F=null},$.prototype.K=function(u,h,p,y){return this.i.add(String(u),h,!1,p,y)},$.prototype.L=function(u,h,p,y){return this.i.add(String(u),h,!0,p,y)};function U(u,h,p,y){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,j=0;j<h.length;++j){var te=h[j];if(te&&!te.da&&te.capture==p){var Ke=te.listener,Vt=te.ha||te.src;te.fa&&Ti(u.i,te),M=Ke.call(Vt,y)!==!1&&M}}return M&&!y.defaultPrevented}function oe(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function Le(u){u.g=oe(()=>{u.g=null,u.i&&(u.i=!1,Le(u))},u.l);const h=u.h;u.h=null,u.m.apply(null,h)}class ct extends Fe{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Le(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function en(u){Fe.call(this),this.h=u,this.g={}}P(en,Fe);var tn=[];function Qn(u){Q(u.g,function(h,p){this.g.hasOwnProperty(p)&&Kn(h)},u),u.g={}}en.prototype.N=function(){en.aa.N.call(this),Qn(this)},en.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rs=a.JSON.stringify,lo=a.JSON.parse,df=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Ba(){}Ba.prototype.h=null;function Fa(u){return u.h||(u.h=u.i())}function ff(){}var ss={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function os(){We.call(this,"d")}P(os,We);function Zi(){We.call(this,"c")}P(Zi,We);var Ai={},ec=null;function uo(){return ec=ec||new $}Ai.La="serverreachability";function $a(u){We.call(this,Ai.La,u)}P($a,We);function er(u){const h=uo();D(h,new $a(h))}Ai.STAT_EVENT="statevent";function za(u,h){We.call(this,Ai.STAT_EVENT,u),this.stat=h}P(za,We);function Ut(u){const h=uo();D(h,new za(h,u))}Ai.Ma="timingevent";function pf(u,h){We.call(this,Ai.Ma,u),this.size=h}P(pf,We);function tr(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function as(){this.g=!0}as.prototype.xa=function(){this.g=!1};function uv(u,h,p,y,M,j){u.info(function(){if(u.g)if(j)for(var te="",Ke=j.split("&"),Vt=0;Vt<Ke.length;Vt++){var $e=Ke[Vt].split("=");if(1<$e.length){var Ht=$e[0];$e=$e[1];var Gt=Ht.split("_");te=2<=Gt.length&&Gt[1]=="type"?te+(Ht+"="+$e+"&"):te+(Ht+"=redacted&")}}else te=null;else te=j;return"XMLHTTP REQ ("+y+") [attempt "+M+"]: "+h+`
`+p+`
`+te})}function tc(u,h,p,y,M,j,te){u.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+M+"]: "+h+`
`+p+`
`+j+" "+te})}function nr(u,h,p,y){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+nc(u,p)+(y?" "+y:"")})}function cv(u,h){u.info(function(){return"TIMEOUT: "+h})}as.prototype.info=function(){};function nc(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var y=p[u];if(!(2>y.length)){var M=y[1];if(Array.isArray(M)&&!(1>M.length)){var j=M[0];if(j!="noop"&&j!="stop"&&j!="close")for(var te=1;te<M.length;te++)M[te]=""}}}}return rs(p)}catch{return h}}var ls={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ic={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ja;function us(){}P(us,Ba),us.prototype.g=function(){return new XMLHttpRequest},us.prototype.i=function(){return{}},ja=new us;function Xn(u,h,p,y){this.j=u,this.i=h,this.l=p,this.R=y||1,this.U=new en(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rc}function rc(){this.i=null,this.g="",this.h=!1}var mf={},sc={};function co(u,h,p){u.L=1,u.v=cs(Vn(h)),u.m=p,u.P=!0,gf(u,null)}function gf(u,h){u.F=Date.now(),Ua(u),u.A=Vn(u.v);var p=u.A,y=u.R;Array.isArray(y)||(y=[String(y)]),Ci(p.i,"t",y),u.C=0,p=u.j.J,u.h=new rc,u.g=kv(u.j,p?h:null,!u.m),0<u.O&&(u.M=new ct(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,y=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(tn[0]=M.toString()),M=tn);for(var j=0;j<M.length;j++){var te=is(p,M[j],y||h.handleEvent,!1,h.h||h);if(!te)break;h.g[te.key]=te}h=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),er(),uv(u.i,u.u,u.A,u.l,u.R,u.m)}Xn.prototype.ca=function(u){u=u.target;const h=this.M;h&&Pi(u)==3?h.j():this.Y(u)},Xn.prototype.Y=function(u){try{if(u==this.g)e:{const Gt=Pi(this.g);var h=this.g.Ba();const _o=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||yv(this.g)))){this.J||Gt!=4||h==7||(h==8||0>=_o?er(3):er(2)),ho(this);var p=this.g.Z();this.X=p;t:if(qa(this)){var y=yv(this.g);u="";var M=y.length,j=Pi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){li(this),ir(this);var te="";break t}this.h.i=new a.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,u+=this.h.i.decode(y[h],{stream:!(j&&h==M-1)});y.length=0,this.h.g+=u,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=p==200,tc(this.i,this.u,this.A,this.l,this.R,Gt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Vt=this.g;if((Ke=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Ke)){var $e=Ke;break t}}$e=null}if(p=$e)nr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ac(this,p);else{this.o=!1,this.s=3,Ut(12),li(this),ir(this);break e}}if(this.P){p=!0;let Yn;for(;!this.J&&this.C<te.length;)if(Yn=_f(this,te),Yn==sc){Gt==4&&(this.s=4,Ut(14),p=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(Yn==mf){this.s=4,Ut(15),nr(this.i,this.l,te,"[Invalid Chunk]"),p=!1;break}else nr(this.i,this.l,Yn,null),ac(this,Yn);if(qa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||te.length!=0||this.h.h||(this.s=1,Ut(16),p=!1),this.o=this.o&&p,!p)nr(this.i,this.l,te,"[Invalid Chunked Response]"),li(this),ir(this);else if(0<te.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Sf(Ht),Ht.M=!0,Ut(11))}}else nr(this.i,this.l,te,null),ac(this,te);Gt==4&&li(this),this.o&&!this.J&&(Gt==4?Iv(this.j,this):(this.o=!1,Ua(this)))}else HC(this.g),p==400&&0<te.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),li(this),ir(this)}}}catch{}finally{}};function qa(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function _f(u,h){var p=u.C,y=h.indexOf(`
`,p);return y==-1?sc:(p=Number(h.substring(p,y)),isNaN(p)?mf:(y+=1,y+p>h.length?sc:(h=h.slice(y,y+p),u.C=y+p,h)))}Xn.prototype.cancel=function(){this.J=!0,li(this)};function Ua(u){u.S=Date.now()+u.I,oc(u,u.I)}function oc(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=tr(g(u.ba,u),h)}function ho(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Xn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(cv(this.i,this.A),this.L!=2&&(er(),Ut(17)),li(this),this.s=2,ir(this)):oc(this,this.S-u)};function ir(u){u.j.G==0||u.J||Iv(u.j,u)}function li(u){ho(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,Qn(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function ac(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||hc(p.h,u))){if(!u.K&&hc(p.h,u)&&p.G==3){try{var y=p.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var M=y;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)yc(p),gc(p);else break e;Tf(p),Ut(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=tr(g(p.Za,p),6e3));if(1>=yf(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ds(p,11)}else if((u.K||p.g==u)&&yc(p),!E(h))for(M=p.Da.g.parse(h),h=0;h<M.length;h++){let $e=M[h];if(p.T=$e[0],$e=$e[1],p.G==2)if($e[0]=="c"){p.K=$e[1],p.ia=$e[2];const Ht=$e[3];Ht!=null&&(p.la=Ht,p.j.info("VER="+p.la));const Gt=$e[4];Gt!=null&&(p.Aa=Gt,p.j.info("SVER="+p.Aa));const _o=$e[5];_o!=null&&typeof _o=="number"&&0<_o&&(y=1.5*_o,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;const Yn=u.g;if(Yn){const bc=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bc){var j=y.h;j.g||bc.indexOf("spdy")==-1&&bc.indexOf("quic")==-1&&bc.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Ha(j,j.h),j.h=null))}if(y.D){const If=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;If&&(y.ya=If,Qe(y.I,y.D,If))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var te=u;if(y.qa=Pv(y,y.J?y.ia:null,y.W),te.K){Ga(y.h,te);var Ke=te,Vt=y.L;Vt&&(Ke.I=Vt),Ke.B&&(ho(Ke),Ua(Ke)),y.g=te}else Tv(y);0<p.i.length&&_c(p)}else $e[0]!="stop"&&$e[0]!="close"||ds(p,7);else p.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?ds(p,7):Ef(p):$e[0]!="noop"&&p.l&&p.l.ta($e),p.v=0)}}er(4)}catch{}}var lc=class{constructor(u,h){this.g=u,this.map=h}};function uc(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cc(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function yf(u){return u.h?1:u.g?u.g.size:0}function hc(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function Ha(u,h){u.g?u.g.add(h):u.h=h}function Ga(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}uc.prototype.cancel=function(){if(this.i=dc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function dc(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(const p of u.g.values())h=h.concat(p.D);return h}return x(u.i)}function hv(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,y=0;y<p;y++)h.push(u[y]);return h}h=[],p=0;for(y in u)h[p++]=u[y];return h}function fc(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(const y in u)h[p++]=y;return h}}}function Wa(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=fc(u),y=hv(u),M=y.length,j=0;j<M;j++)h.call(void 0,y[j],p&&p[j],u)}var vf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bf(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var y=u[p].indexOf("="),M=null;if(0<=y){var j=u[p].substring(0,y);M=u[p].substring(y+1)}else j=u[p];h(j,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function ui(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ui){this.h=u.h,fo(this,u.j),this.o=u.o,this.g=u.g,po(this,u.s),this.l=u.l;var h=u.i,p=new _e;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Ka(this,p),this.m=u.m}else u&&(h=String(u).match(vf))?(this.h=!1,fo(this,h[1]||"",!0),this.o=rr(h[2]||""),this.g=rr(h[3]||"",!0),po(this,h[4]),this.l=rr(h[5]||"",!0),Ka(this,h[6]||"",!0),this.m=rr(h[7]||"")):(this.h=!1,this.i=new _e(null,this.h))}ui.prototype.toString=function(){var u=[],h=this.j;h&&u.push(hs(h,V,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(hs(h,V,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(hs(p,p.charAt(0)=="/"?ee:G,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",hs(p,ce)),u.join("")};function Vn(u){return new ui(u)}function fo(u,h,p){u.j=p?rr(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function po(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function Ka(u,h,p){h instanceof _e?(u.i=h,Qa(u.i,u.h)):(p||(h=hs(h,se)),u.i=new _e(h,u.h))}function Qe(u,h,p){u.i.set(h,p)}function cs(u){return Qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function rr(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function hs(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,X),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function X(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var V=/[#\/\?@]/g,G=/[#\?:]/g,ee=/[#\?]/g,se=/[#\?@]/g,ce=/#/g;function _e(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function de(u){u.g||(u.g=new Map,u.h=0,u.i&&bf(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=_e.prototype,n.add=function(u,h){de(this),this.i=null,u=Bn(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function Ee(u,h){de(u),h=Bn(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function dn(u,h){return de(u),h=Bn(u,h),u.g.has(h)}n.forEach=function(u,h){de(this),this.g.forEach(function(p,y){p.forEach(function(M){u.call(h,M,y,this)},this)},this)},n.na=function(){de(this);const u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let y=0;y<h.length;y++){const M=u[y];for(let j=0;j<M.length;j++)p.push(h[y])}return p},n.V=function(u){de(this);let h=[];if(typeof u=="string")dn(this,u)&&(h=h.concat(this.g.get(Bn(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},n.set=function(u,h){return de(this),this.i=null,u=Bn(this,u),dn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function Ci(u,h,p){Ee(u,h),0<p.length&&(u.i=null,u.g.set(Bn(u,h),x(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var y=h[p];const j=encodeURIComponent(String(y)),te=this.V(y);for(y=0;y<te.length;y++){var M=j;te[y]!==""&&(M+="="+encodeURIComponent(String(te[y]))),u.push(M)}}return this.i=u.join("&")};function Bn(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function Qa(u,h){h&&!u.j&&(de(u),u.i=null,u.g.forEach(function(p,y){var M=y.toLowerCase();y!=M&&(Ee(this,y),Ci(this,M,p))},u)),u.j=h}function mo(u,h){const p=new as;if(a.Image){const y=new Image;y.onload=w(sr,p,"TestLoadImage: loaded",!0,h,y),y.onerror=w(sr,p,"TestLoadImage: error",!1,h,y),y.onabort=w(sr,p,"TestLoadImage: abort",!1,h,y),y.ontimeout=w(sr,p,"TestLoadImage: timeout",!1,h,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=u}else h(!1)}function Xa(u,h){const p=new as,y=new AbortController,M=setTimeout(()=>{y.abort(),sr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:y.signal}).then(j=>{clearTimeout(M),j.ok?sr(p,"TestPingServer: ok",!0,h):sr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),sr(p,"TestPingServer: error",!1,h)})}function sr(u,h,p,y,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),y(p)}catch{}}function zC(){this.g=new df}function jC(u,h,p){const y=p||"";try{Wa(u,function(M,j){let te=M;l(M)&&(te=rs(M)),h.push(y+j+"="+encodeURIComponent(te))})}catch(M){throw h.push(y+"type="+encodeURIComponent("_badmap")),M}}function Ya(u){this.l=u.Ub||null,this.j=u.eb||!1}P(Ya,Ba),Ya.prototype.g=function(){return new pc(this.l,this.j)},Ya.prototype.i=function(u){return function(){return u}}({});function pc(u,h){$.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(pc,$),n=pc.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Za(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ja(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Za(this)),this.g&&(this.readyState=3,Za(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function dv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Ja(this):Za(this),this.readyState==3&&dv(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ja(this))},n.Qa=function(u){this.g&&(this.response=u,Ja(this))},n.ga=function(){this.g&&Ja(this)};function Ja(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Za(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Za(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(pc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function fv(u){let h="";return Q(u,function(p,y){h+=y,h+=":",h+=p,h+=`\r
`}),h}function wf(u,h,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=fv(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Qe(u,h,p))}function ht(u){$.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(ht,$);var qC=/^https?$/i,UC=["POST","PUT"];n=ht.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ja.g(),this.v=this.o?Fa(this.o):Fa(ja),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(j){pv(this,j);return}if(u=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var M in y)p.set(M,y[M]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const j of y.keys())p.set(j,y.get(j));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(j=>j.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(UC,h,void 0))||y||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,te]of p)this.g.setRequestHeader(j,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_v(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){pv(this,j)}};function pv(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,mv(u),mc(u)}function mv(u){u.A||(u.A=!0,D(u,"complete"),D(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,D(this,"complete"),D(this,"abort"),mc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mc(this,!0)),ht.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?gv(this):this.bb())},n.bb=function(){gv(this)};function gv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Pi(u)!=4||u.Z()!=2)){if(u.u&&Pi(u)==4)oe(u.Ea,0,u);else if(D(u,"readystatechange"),Pi(u)==4){u.h=!1;try{const te=u.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var y;if(y=te===0){var M=String(u.D).match(vf)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),y=!qC.test(M?M.toLowerCase():"")}p=y}if(p)D(u,"complete"),D(u,"success");else{u.m=6;try{var j=2<Pi(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",mv(u)}}finally{mc(u)}}}}function mc(u,h){if(u.g){_v(u);const p=u.g,y=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||D(u,"ready");try{p.onreadystatechange=y}catch{}}}function _v(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Pi(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Pi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),lo(h)}};function yv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function HC(u){const h={};u=(u.g&&2<=Pi(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<u.length;y++){if(E(u[y]))continue;var p=C(u[y]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const j=h[M]||[];h[M]=j,j.push(p)}S(h,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tl(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function vv(u){this.Aa=0,this.i=[],this.j=new as,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tl("baseRetryDelayMs",5e3,u),this.cb=tl("retryDelaySeedMs",1e4,u),this.Wa=tl("forwardChannelMaxRetries",2,u),this.wa=tl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new uc(u&&u.concurrentRequestLimit),this.Da=new zC,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=vv.prototype,n.la=8,n.G=1,n.connect=function(u,h,p,y){Ut(0),this.W=u,this.H=h||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=Pv(this,null,this.W),_c(this)};function Ef(u){if(bv(u),u.G==3){var h=u.U++,p=Vn(u.I);if(Qe(p,"SID",u.K),Qe(p,"RID",h),Qe(p,"TYPE","terminate"),nl(u,p),h=new Xn(u,u.j,h),h.L=2,h.v=cs(Vn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=kv(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ua(h)}Cv(u)}function gc(u){u.g&&(Sf(u),u.g.cancel(),u.g=null)}function bv(u){gc(u),u.u&&(a.clearTimeout(u.u),u.u=null),yc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function _c(u){if(!cc(u.h)&&!u.s){u.s=!0;var h=u.Ga;Pt||we(),J||(Pt(),J=!0),fe.add(h,u),u.B=0}}function GC(u,h){return yf(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=tr(g(u.Ga,u,h),Av(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Xn(this,this.j,u);let j=this.o;if(this.S&&(j?(j=_(j),T(j,this.S)):j=this.S),this.m!==null||this.O||(M.H=j,j=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Ev(this,M,h),p=Vn(this.I),Qe(p,"RID",u),Qe(p,"CVER",22),this.D&&Qe(p,"X-HTTP-Session-Id",this.D),nl(this,p),j&&(this.O?h="headers="+encodeURIComponent(String(fv(j)))+"&"+h:this.m&&wf(p,this.m,j)),Ha(this.h,M),this.Ua&&Qe(p,"TYPE","init"),this.P?(Qe(p,"$req",h),Qe(p,"SID","null"),M.T=!0,co(M,p,null)):co(M,p,h),this.G=2}}else this.G==3&&(u?wv(this,u):this.i.length==0||cc(this.h)||wv(this))};function wv(u,h){var p;h?p=h.l:p=u.U++;const y=Vn(u.I);Qe(y,"SID",u.K),Qe(y,"RID",p),Qe(y,"AID",u.T),nl(u,y),u.m&&u.o&&wf(y,u.m,u.o),p=new Xn(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=Ev(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ha(u.h,p),co(p,y,h)}function nl(u,h){u.H&&Q(u.H,function(p,y){Qe(h,y,p)}),u.l&&Wa({},function(p,y){Qe(h,y,p)})}function Ev(u,h,p){p=Math.min(u.i.length,p);var y=u.l?g(u.l.Na,u.l,u):null;e:{var M=u.i;let j=-1;for(;;){const te=["count="+p];j==-1?0<p?(j=M[0].g,te.push("ofs="+j)):j=0:te.push("ofs="+j);let Ke=!0;for(let Vt=0;Vt<p;Vt++){let $e=M[Vt].g;const Ht=M[Vt].map;if($e-=j,0>$e)j=Math.max(0,M[Vt].g-100),Ke=!1;else try{jC(Ht,te,"req"+$e+"_")}catch{y&&y(Ht)}}if(Ke){y=te.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,y}function Tv(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;Pt||we(),J||(Pt(),J=!0),fe.add(h,u),u.v=0}}function Tf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=tr(g(u.Fa,u),Av(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Sv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=tr(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),gc(this),Sv(this))};function Sf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Sv(u){u.g=new Xn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Vn(u.qa);Qe(h,"RID","rpc"),Qe(h,"SID",u.K),Qe(h,"AID",u.T),Qe(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Qe(h,"TO",u.ja),Qe(h,"TYPE","xmlhttp"),nl(u,h),u.m&&u.o&&wf(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=cs(Vn(h)),p.m=null,p.P=!0,gf(p,u)}n.Za=function(){this.C!=null&&(this.C=null,gc(this),Tf(this),Ut(19))};function yc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Iv(u,h){var p=null;if(u.g==h){yc(u),Sf(u),u.g=null;var y=2}else if(hc(u.h,h))p=h.D,Ga(u.h,h),y=1;else return;if(u.G!=0){if(h.o)if(y==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var M=u.B;y=uo(),D(y,new pf(y,p)),_c(u)}else Tv(u);else if(M=h.s,M==3||M==0&&0<h.X||!(y==1&&GC(u,h)||y==2&&Tf(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),M){case 1:ds(u,5);break;case 4:ds(u,10);break;case 3:ds(u,6);break;default:ds(u,2)}}}function Av(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function ds(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),y=u.Xa;const M=!y;y=new ui(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fo(y,"https"),cs(y),M?mo(y.toString(),p):Xa(y.toString(),p)}else Ut(2);u.G=0,u.l&&u.l.sa(h),Cv(u),bv(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Cv(u){if(u.G=0,u.ka=[],u.l){const h=dc(u.h);(h.length!=0||u.i.length!=0)&&(L(u.ka,h),L(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function Pv(u,h,p){var y=p instanceof ui?Vn(p):new ui(p);if(y.g!="")h&&(y.g=h+"."+y.g),po(y,y.s);else{var M=a.location;y=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var j=new ui(null);y&&fo(j,y),h&&(j.g=h),M&&po(j,M),p&&(j.l=p),y=j}return p=u.D,h=u.ya,p&&h&&Qe(y,p,h),Qe(y,"VER",u.la),nl(u,y),y}function kv(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new ht(new Ya({eb:p})):new ht(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xv(){}n=xv.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function vc(){}vc.prototype.g=function(u,h){return new An(u,h)};function An(u,h){$.call(this),this.g=new vv(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!E(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new go(this)}P(An,$),An.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){Ef(this.g)},An.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=rs(u),u=p);h.i.push(new lc(h.Ya++,u)),h.G==3&&_c(h)},An.prototype.N=function(){this.g.l=null,delete this.j,Ef(this.g),delete this.g,An.aa.N.call(this)};function Rv(u){os.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(const p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}P(Rv,os);function Dv(){Zi.call(this),this.status=1}P(Dv,Zi);function go(u){this.g=u}P(go,xv),go.prototype.ua=function(){D(this.g,"a")},go.prototype.ta=function(u){D(this.g,new Rv(u))},go.prototype.sa=function(u){D(this.g,new Dv)},go.prototype.ra=function(){D(this.g,"b")},vc.prototype.createWebChannel=vc.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,gI=function(){return new vc},mI=function(){return uo()},pI=Ai,Qm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ls.NO_ERROR=0,ls.TIMEOUT=8,ls.HTTP_ERROR=6,ah=ls,ic.COMPLETE="complete",fI=ic,ff.EventType=ss,ss.OPEN="a",ss.CLOSE="b",ss.ERROR="c",ss.MESSAGE="d",$.prototype.listen=$.prototype.K,Sl=ff,dI=Ya,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,hI=ht}).apply(typeof $c<"u"?$c:typeof self<"u"?self:typeof window<"u"?window:{});const Yw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rt.UNAUTHENTICATED=new Rt(null),Rt.GOOGLE_CREDENTIALS=new Rt("google-credentials-uid"),Rt.FIRST_PARTY=new Rt("first-party-uid"),Rt.MOCK_USER=new Rt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new iy("@firebase/firestore");function Io(){return jr.logLevel}function NN(n){jr.setLogLevel(n)}function W(n,...e){if(jr.logLevel<=De.DEBUG){const t=e.map(ly);jr.debug(`Firestore (${Pa}): ${n}`,...t)}}function yt(n,...e){if(jr.logLevel<=De.ERROR){const t=e.map(ly);jr.error(`Firestore (${Pa}): ${n}`,...t)}}function oi(n,...e){if(jr.logLevel<=De.WARN){const t=e.map(ly);jr.warn(`Firestore (${Pa}): ${n}`,...t)}}function ly(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(n="Unexpected state"){const e=`FIRESTORE (${Pa}) INTERNAL ASSERTION FAILED: `+n;throw yt(e),new Error(e)}function me(n,e){n||ue()}function LN(n,e){n||ue()}function re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends eo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rt.UNAUTHENTICATED))}shutdown(){}}class VN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class BN{constructor(e){this.t=e,this.currentUser=Rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i;const r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let s=new Nt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Nt,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Nt)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(me(typeof i.accessToken=="string"),new _I(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new Rt(e)}}class FN{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Rt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $N{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new FN(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const i=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(me(typeof t.token=="string"),this.R=t.token,new zN(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=qN(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function Se(n,e){return n<e?-1:n>e?1:0}function ha(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function vI(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new H(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new H(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new H(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new rt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new rt(0,0))}static max(){return new ge(new rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,t,i){t===void 0?t=0:t>e.length&&ue(),i===void 0?i=e.length-t:i>e.length-t&&ue(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return fu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fu?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Pe extends fu{construct(e,t,i){return new Pe(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new H(z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Pe(t)}static emptyPath(){return new Pe([])}}const UN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends fu{construct(e,t,i){return new nt(e,t,i)}static isValidIdentifier(e){return UN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nt(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(i.length===0)throw new H(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new H(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new H(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new H(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(t)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Pe.fromString(e))}static fromName(e){return new ie(Pe.fromString(e).popFirst(5))}static empty(){return new ie(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Pe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function Xm(n){return n.fields.find(e=>e.kind===2)}function _s(n){return n.fields.filter(e=>e.kind!==2)}Jh.UNKNOWN_ID=-1;class lh{constructor(e,t){this.fieldPath=e,this.kind=t}}class pu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new pu(0,Nn.min())}}function bI(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=ge.fromTimestamp(i===1e9?new rt(t+1,0):new rt(t,i));return new Nn(r,ie.empty(),e)}function wI(n){return new Nn(n.readTime,n.key,-1)}class Nn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Nn(ge.min(),ie.empty(),-1)}static max(){return new Nn(ge.max(),ie.empty(),-1)}}function uy(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ie.comparator(n.documentKey,e.documentKey),t!==0?t:Se(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zr(n){if(n.code!==z.FAILED_PRECONDITION||n.message!==EI)throw n;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):B.reject(t)}static resolve(e){return new B((t,i)=>{t(e)})}static reject(e){return new B((t,i)=>{i(e)})}static waitFor(e){return new B((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},c=>i(c))}),o=!0,s===r&&t()})}static or(e){let t=B.resolve(!1);for(const i of e)t=t.next(r=>r?B.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new B((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const l=c;t(e[l]).next(d=>{o[l]=d,++a,a===s&&i(o)},d=>r(d))}})}static doWhile(e,t){return new B((i,r)=>{const s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Nt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Fl(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=cy(i.target.error);this.V.reject(new Fl(e,r))}}static open(e,t,i,r){try{return new qd(t,e.transaction(r,i))}catch(s){throw new Fl(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new GN(t)}}class yi{constructor(e,t,i){this.name=e,this.version=t,this.p=i,yi.S(Xh())===12.2&&yt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),ys(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!XS())return!1;if(yi.C())return!0;const e=Xh(),t=yi.S(e),i=0<t&&t<10,r=SI(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}async M(e){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const o=s.target.result;t(o)},r.onblocked=()=>{i(new Fl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const o=s.target.error;o.name==="VersionError"?i(new H(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new H(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new Fl(e,o))},r.onupgradeneeded=s=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,r.transaction,s.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,r){const s=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=qd.open(this.db,e,s?"readonly":"readwrite",i),c=r(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),B.reject(l))).toPromise();return c.catch(()=>{}),await a.m,c}catch(a){const c=a,l=c.name!=="FirebaseError"&&o<3;if(W("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function SI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class HN{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ys(this.B.delete())}}class Fl extends H{constructor(e,t){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function es(n){return n.name==="IndexedDbTransactionError"}class GN{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(W("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ys(i)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),ys(this.store.add(e))}get(e){return ys(this.store.get(e)).next(t=>(t===void 0&&(t=null),W("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),ys(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),ys(this.store.count())}U(e,t){const i=this.options(e,t),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const s=r.getAll(i.range);return new B((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(i),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new B((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}j(e,t){W("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.H=!1;const r=this.cursor(i);return this.W(r,(s,o,a)=>a.delete())}J(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.W(r,t)}Y(e){const t=this.cursor({});return new B((i,r)=>{t.onerror=s=>{const o=cy(s.target.error);r(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}W(e,t){const i=[];return new B((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const c=new HN(a),l=t(a.primaryKey,a.value,c);if(l instanceof B){const d=l.catch(f=>(c.done(),B.reject(f)));i.push(d)}c.isDone?r():c.K===null?a.continue():a.continue(c.K)}}).next(()=>B.waitFor(i))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ys(n){return new B((e,t)=>{n.onsuccess=i=>{const r=i.target.result;e(r)},n.onerror=i=>{const r=cy(i.target.error);t(r)}})}let Jw=!1;function cy(n){const e=yi.S(Xh());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new H("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Jw||(Jw=!0,setTimeout(()=>{throw i},0)),i}}return n}class WN{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){W("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{W("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){es(t)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Zr(t)}await this.X(6e4)})}}class KN{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const i=new Set;let r=t,s=!0;return B.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!i.has(o))return W("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>t-r)}ne(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(r,s)).next(a=>(W("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let i=e;return t.changes.forEach((r,s)=>{const o=wI(s);uy(o,i)>0&&(i=o)}),new Nn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}_n.oe=-1;function Fu(n){return n==null}function mu(n){return n===0&&1/n==-1/0}function II(n){return typeof n=="number"&&Number.isInteger(n)&&!mu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Zw(e)),e=QN(n.get(t),e);return Zw(e)}function QN(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function Zw(n){return n+""}function fi(n){const e=n.length;if(me(e>=2),e===2)return me(n.charAt(0)===""&&n.charAt(1)===""),Pe.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const o=n.indexOf("",s);switch((o<0||o>t)&&ue(),n.charAt(o+1)){case"":const a=n.substring(s,o);let c;r.length===0?c=a:(r+=a,c=r,r=""),i.push(c);break;case"":r+=n.substring(s,o),r+="\0";break;case"":r+=n.substring(s,o+1);break;default:ue()}s=o+2}return new Pe(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(n,e){return[n,an(e)]}function AI(n,e,t){return[n,an(e),t]}const XN={},YN=["prefixPath","collectionGroup","readTime","documentId"],JN=["prefixPath","collectionGroup","documentId"],ZN=["collectionGroup","readTime","prefixPath","documentId"],eL=["canonicalId","targetId"],tL=["targetId","path"],nL=["path","targetId"],iL=["collectionId","parent"],rL=["indexId","uid"],sL=["uid","sequenceNumber"],oL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],aL=["indexId","uid","orderedDocumentKey"],lL=["userId","collectionPath","documentId"],uL=["userId","collectionPath","largestBatchId"],cL=["userId","collectionGroup","largestBatchId"],CI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hL=[...CI,"documentOverlays"],PI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kI=PI,xI=[...kI,"indexConfiguration","indexState","indexEntries"],dL=xI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends TI{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Lt(n,e){const t=re(n);return yi.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function to(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function RI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,t){this.comparator=e,this.root=t||Ft.EMPTY}insert(e,t){return new Ye(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zc(this.root,e,this.comparator,!0)}}class zc{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??Ft.RED,this.left=r??Ft.EMPTY,this.right=s??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new Ft(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Ft.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();const e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,t,i,r,s){return this}insert(e,t,i){return new Ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new n0(this.data.getIterator())}getIteratorFrom(e){return new n0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ge(this.comparator);return t.data=e,t}}class n0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bo(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new yn([])}unionWith(e){let t=new Ge(nt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ha(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new DI("Invalid base64 string: "+s):s}}(e);return new Ct(t)}static fromUint8Array(e){const t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new Ct(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const pL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qi(n){if(me(!!n),typeof n=="string"){let e=0;const t=pL.exec(n);if(me(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ft(n.seconds),nanos:ft(n.nanos)}}function ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qr(n){return typeof n=="string"?Ct.fromBase64String(n):Ct.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function hy(n){const e=n.mapValue.fields.__previous_value__;return Ud(e)?hy(e):e}function gu(n){const e=qi(n.mapValue.fields.__local_write_time__.timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,t,i,r,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class Ur{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ur("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ur&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ch={nullValue:"NULL_VALUE"};function zs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ud(n)?4:OI(n)?9007199254740991:10:ue()}function bi(n,e){if(n===e)return!0;const t=zs(n);if(t!==zs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gu(n).isEqual(gu(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=qi(r.timestampValue),a=qi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return qr(r.bytesValue).isEqual(qr(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return ft(r.geoPointValue.latitude)===ft(s.geoPointValue.latitude)&&ft(r.geoPointValue.longitude)===ft(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ft(r.integerValue)===ft(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=ft(r.doubleValue),a=ft(s.doubleValue);return o===a?mu(o)===mu(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return ha(n.arrayValue.values||[],e.arrayValue.values||[],bi);case 10:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(t0(o)!==t0(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!bi(o[c],a[c])))return!1;return!0}(n,e);default:return ue()}}function _u(n,e){return(n.values||[]).find(t=>bi(t,e))!==void 0}function Hr(n,e){if(n===e)return 0;const t=zs(n),i=zs(e);if(t!==i)return Se(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Se(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ft(s.integerValue||s.doubleValue),c=ft(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return i0(n.timestampValue,e.timestampValue);case 4:return i0(gu(n),gu(e));case 5:return Se(n.stringValue,e.stringValue);case 6:return function(s,o){const a=qr(s),c=qr(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const d=Se(a[l],c[l]);if(d!==0)return d}return Se(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Se(ft(s.latitude),ft(o.latitude));return a!==0?a:Se(ft(s.longitude),ft(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){const d=Hr(a[l],c[l]);if(d)return d}return Se(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===wr.mapValue&&o===wr.mapValue)return 0;if(s===wr.mapValue)return 1;if(o===wr.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const g=Se(c[f],d[f]);if(g!==0)return g;const w=Hr(a[c[f]],l[d[f]]);if(w!==0)return w}return Se(c.length,d.length)}(n.mapValue,e.mapValue);default:throw ue()}}function i0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Se(n,e);const t=qi(n),i=qi(e),r=Se(t.seconds,i.seconds);return r!==0?r:Se(t.nanos,i.nanos)}function da(n){return Jm(n)}function Jm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=qi(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return qr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ie.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(const s of t.values||[])r?r=!1:i+=",",i+=Jm(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Jm(t.fields[o])}`;return r+"}"}(n.mapValue):ue()}function js(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Zm(n){return!!n&&"integerValue"in n}function yu(n){return!!n&&"arrayValue"in n}function r0(n){return!!n&&"nullValue"in n}function s0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hh(n){return!!n&&"mapValue"in n}function $l(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return to(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=$l(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$l(n.arrayValue.values[t]);return e}return Object.assign({},n)}function OI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function gL(n){return"nullValue"in n?ch:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?js(Ur.empty(),ie.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ue()}function _L(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?js(Ur.empty(),ie.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?wr:ue()}function o0(n,e){const t=Hr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function a0(n,e){const t=Hr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.value=e}static empty(){return new $t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!hh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$l(t)}setAll(e){let t=nt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=$l(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());hh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];hh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){to(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new $t($l(this.value))}}function NI(n){const e=[];return to(n.fields,(t,i)=>{const r=new nt([t]);if(hh(i)){const s=NI(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ze(e,0,ge.min(),ge.min(),ge.min(),$t.empty(),0)}static newFoundDocument(e,t,i,r){return new Ze(e,1,t,ge.min(),i,r,0)}static newNoDocument(e,t){return new Ze(e,2,t,ge.min(),ge.min(),$t.empty(),0)}static newUnknownDocument(e,t){return new Ze(e,3,t,ge.min(),ge.min(),$t.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ze&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,t){this.position=e,this.inclusive=t}}function l0(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(s.field.isKeyField()?i=ie.comparator(ie.fromName(o.referenceValue),t.key):i=Hr(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function u0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!bi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,t="asc"){this.field=e,this.dir=t}}function yL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{}class xe extends LI{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new vL(e,t,i):t==="array-contains"?new EL(e,i):t==="in"?new zI(e,i):t==="not-in"?new TL(e,i):t==="array-contains-any"?new SL(e,i):new xe(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new bL(e,i):new wL(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Hr(t,this.value)):t!==null&&zs(this.value)===zs(t)&&this.matchesComparison(Hr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ue extends LI{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ue(e,t)}matches(e){return fa(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fa(n){return n.op==="and"}function eg(n){return n.op==="or"}function dy(n){return MI(n)&&fa(n)}function MI(n){for(const e of n.filters)if(e instanceof Ue)return!1;return!0}function tg(n){if(n instanceof xe)return n.field.canonicalString()+n.op.toString()+da(n.value);if(dy(n))return n.filters.map(e=>tg(e)).join(",");{const e=n.filters.map(t=>tg(t)).join(",");return`${n.op}(${e})`}}function VI(n,e){return n instanceof xe?function(i,r){return r instanceof xe&&i.op===r.op&&i.field.isEqual(r.field)&&bi(i.value,r.value)}(n,e):n instanceof Ue?function(i,r){return r instanceof Ue&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&VI(o,r.filters[a]),!0):!1}(n,e):void ue()}function BI(n,e){const t=n.filters.concat(e);return Ue.create(t,n.op)}function FI(n){return n instanceof xe?function(t){return`${t.field.canonicalString()} ${t.op} ${da(t.value)}`}(n):n instanceof Ue?function(t){return t.op.toString()+" {"+t.getFilters().map(FI).join(" ,")+"}"}(n):"Filter"}class vL extends xe{constructor(e,t,i){super(e,t,i),this.key=ie.fromName(i.referenceValue)}matches(e){const t=ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class bL extends xe{constructor(e,t){super(e,"in",t),this.keys=$I("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class wL extends xe{constructor(e,t){super(e,"not-in",t),this.keys=$I("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $I(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ie.fromName(i.referenceValue))}class EL extends xe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yu(t)&&_u(t.arrayValue,this.value)}}class zI extends xe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_u(this.value.arrayValue,t)}}class TL extends xe{constructor(e,t){super(e,"not-in",t)}matches(e){if(_u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!_u(this.value.arrayValue,t)}}class SL extends xe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>_u(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function ng(n,e=null,t=[],i=[],r=null,s=null,o=null){return new IL(n,e,t,i,r,s,o)}function qs(n){const e=re(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>tg(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Fu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>da(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>da(i)).join(",")),e.ue=t}return e.ue}function $u(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!VI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!u0(n.startAt,e.startAt)&&u0(n.endAt,e.endAt)}function Zh(n){return ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ed(n,e){return n.filters.filter(t=>t instanceof xe&&t.field.isEqual(e))}function c0(n,e,t){let i=ch,r=!0;for(const s of ed(n,e)){let o=ch,a=!0;switch(s.op){case"<":case"<=":o=gL(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=ch}o0({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];o0({value:i,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(i=o,r=t.inclusive);break}}return{value:i,inclusive:r}}function h0(n,e,t){let i=wr,r=!0;for(const s of ed(n,e)){let o=wr,a=!0;switch(s.op){case">=":case">":o=_L(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=wr}a0({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];a0({value:i,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(i=o,r=t.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function jI(n,e,t,i,r,s,o,a){return new Ki(n,e,t,i,r,s,o,a)}function ka(n){return new Ki(n)}function d0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fy(n){return n.collectionGroup!==null}function Zo(n){const e=re(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ge(nt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new vu(s,i))}),t.has(nt.keyField().canonicalString())||e.ce.push(new vu(nt.keyField(),i))}return e.ce}function ln(n){const e=re(n);return e.le||(e.le=AL(e,Zo(n))),e.le}function AL(n,e){if(n.limitType==="F")return ng(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new vu(r.field,s)});const t=n.endAt?new Gr(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Gr(n.startAt.position,n.startAt.inclusive):null;return ng(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function ig(n,e){const t=n.filters.concat([e]);return new Ki(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function td(n,e,t){return new Ki(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zu(n,e){return $u(ln(n),ln(e))&&n.limitType===e.limitType}function qI(n){return`${qs(ln(n))}|lt:${n.limitType}`}function Ao(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>FI(r)).join(", ")}]`),Fu(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>da(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>da(r)).join(",")),`Target(${i})`}(ln(n))}; limitType=${n.limitType})`}function ju(n,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):ie.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(const s of Zo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,a,c){const l=l0(o,a,c);return o.inclusive?l<=0:l<0}(i.startAt,Zo(i),r)||i.endAt&&!function(o,a,c){const l=l0(o,a,c);return o.inclusive?l>=0:l>0}(i.endAt,Zo(i),r))}(n,e)}function UI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function HI(n){return(e,t)=>{let i=!1;for(const r of Zo(n)){const s=CL(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function CL(n,e,t){const i=n.field.isKeyField()?ie.comparator(e.key,t.key):function(s,o,a){const c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Hr(c,l):ue()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return RI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=new Ye(ie.comparator);function vn(){return PL}const GI=new Ye(ie.comparator);function Il(...n){let e=GI;for(const t of n)e=e.insert(t.key,t);return e}function WI(n){let e=GI;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function pi(){return zl()}function KI(){return zl()}function zl(){return new ts(n=>n.toString(),(n,e)=>n.isEqual(e))}const kL=new Ye(ie.comparator),xL=new Ge(ie.comparator);function Ie(...n){let e=xL;for(const t of n)e=e.add(t);return e}const RL=new Ge(Se);function py(){return RL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mu(e)?"-0":e}}function XI(n){return{integerValue:""+n}}function YI(n,e){return II(e)?XI(e):QI(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(){this._=void 0}}function DL(n,e,t){return n instanceof pa?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Ud(s)&&(s=hy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Us?ZI(n,e):n instanceof Hs?eA(n,e):function(r,s){const o=JI(r,s),a=f0(o)+f0(r.Pe);return Zm(o)&&Zm(r.Pe)?XI(a):QI(r.serializer,a)}(n,e)}function OL(n,e,t){return n instanceof Us?ZI(n,e):n instanceof Hs?eA(n,e):t}function JI(n,e){return n instanceof ma?function(i){return Zm(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class pa extends Hd{}class Us extends Hd{constructor(e){super(),this.elements=e}}function ZI(n,e){const t=tA(e);for(const i of n.elements)t.some(r=>bi(r,i))||t.push(i);return{arrayValue:{values:t}}}class Hs extends Hd{constructor(e){super(),this.elements=e}}function eA(n,e){let t=tA(e);for(const i of n.elements)t=t.filter(r=>!bi(r,i));return{arrayValue:{values:t}}}class ma extends Hd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function f0(n){return ft(n.integerValue||n.doubleValue)}function tA(n){return yu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t){this.field=e,this.transform=t}}function NL(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof Us&&r instanceof Us||i instanceof Hs&&r instanceof Hs?ha(i.elements,r.elements,bi):i instanceof ma&&r instanceof ma?bi(i.Pe,r.Pe):i instanceof pa&&r instanceof pa}(n.transform,e.transform)}class LL{constructor(e,t){this.version=e,this.transformResults=t}}class it{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new it}static exists(e){return new it(void 0,e)}static updateTime(e){return new it(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Gd{}function nA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ra(n.key,it.none()):new xa(n.key,n.data,it.none());{const t=n.data,i=$t.empty();let r=new Ge(nt.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Qi(n.key,i,new yn(r.toArray()),it.none())}}function ML(n,e,t){n instanceof xa?function(r,s,o){const a=r.value.clone(),c=m0(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Qi?function(r,s,o){if(!dh(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=m0(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(iA(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function jl(n,e,t,i){return n instanceof xa?function(s,o,a,c){if(!dh(s.precondition,o))return a;const l=s.value.clone(),d=g0(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,i):n instanceof Qi?function(s,o,a,c){if(!dh(s.precondition,o))return a;const l=g0(s.fieldTransforms,c,o),d=o.data;return d.setAll(iA(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,i):function(s,o,a){return dh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function VL(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=JI(i.transform,r||null);s!=null&&(t===null&&(t=$t.empty()),t.set(i.field,s))}return t||null}function p0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ha(i,r,(s,o)=>NL(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class xa extends Gd{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Qi extends Gd{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function iA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function m0(n,e,t){const i=new Map;me(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,OL(o,a,t[r]))}return i}function g0(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,DL(s,o,e))}return i}class Ra extends Gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class my extends Gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&ML(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=jl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=jl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=KI();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const c=nA(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ge.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ie())}isEqual(e){return this.batchId===e.batchId&&ha(this.mutations,e.mutations,(t,i)=>p0(t,i))&&ha(this.baseMutations,e.baseMutations,(t,i)=>p0(t,i))}}class _y{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){me(e.mutations.length===i.length);let r=function(){return kL}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new _y(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,Ne;function rA(n){switch(n){default:return ue();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function sA(n){if(n===void 0)return yt("GRPC error has no .code"),z.UNKNOWN;switch(n){case bt.OK:return z.OK;case bt.CANCELLED:return z.CANCELLED;case bt.UNKNOWN:return z.UNKNOWN;case bt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case bt.INTERNAL:return z.INTERNAL;case bt.UNAVAILABLE:return z.UNAVAILABLE;case bt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case bt.NOT_FOUND:return z.NOT_FOUND;case bt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case bt.ABORTED:return z.ABORTED;case bt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case bt.DATA_LOSS:return z.DATA_LOSS;default:return ue()}}(Ne=bt||(bt={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=new Os([4294967295,4294967295],0);function _0(n){const e=oA().encode(n),t=new cI;return t.update(e),new Uint8Array(t.digest())}function y0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Os([t,i],0),new Os([r,s],0)]}class vy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Al(`Invalid padding: ${t}`);if(i<0)throw new Al(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Al(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Al(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Os.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(Os.fromNumber(i)));return r.compare(FL)===1&&(r=new Os([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=_0(e),[i,r]=y0(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new vy(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const t=_0(e),[i,r]=y0(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Uu(ge.min(),r,new Ye(Se),vn(),Ie())}}class Hu{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Hu(i,t,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}}class aA{constructor(e,t){this.targetId=e,this.me=t}}class lA{constructor(e,t,i=Ct.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class v0{constructor(){this.fe=0,this.ge=w0(),this.pe=Ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ie(),t=Ie(),i=Ie();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:ue()}}),new Hu(this.pe,this.ye,e,t,i)}ve(){this.we=!1,this.ge=w0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $L{constructor(e){this.Le=e,this.Be=new Map,this.ke=vn(),this.qe=b0(),this.Qe=new Ye(Se)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:ue()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){const t=e.targetId,i=e.me.count,r=this.Je(t);if(r){const s=r.target;if(Zh(s))if(i===0){const o=new ie(s.path);this.Ue(t,o,Ze.newNoDocument(o,ge.min()))}else me(i===1);else{const o=this.Ye(t);if(o!==i){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);const l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t;let o,a;try{o=qr(i).toUint8Array()}catch(c){if(c instanceof DI)return oi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new vy(o,r,s)}catch(c){return oi(c instanceof Al?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Zh(a.target)){const c=new ie(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Ze.newNoDocument(c,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let i=Ie();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new Uu(e,t,this.Qe,this.ke,i);return this.ke=vn(),this.qe=b0(),this.Qe=new Ye(Se),r}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new v0,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ge(Se),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new v0),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function b0(){return new Ye(ie.comparator)}function w0(){return new Ye(ie.comparator)}const zL={asc:"ASCENDING",desc:"DESCENDING"},jL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qL={and:"AND",or:"OR"};class UL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rg(n,e){return n.useProto3Json||Fu(e)?e:{value:e}}function ga(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function HL(n,e){return ga(n,e.toTimestamp())}function vt(n){return me(!!n),ge.fromTimestamp(function(t){const i=qi(t);return new rt(i.seconds,i.nanos)}(n))}function by(n,e){return sg(n,e).canonicalString()}function sg(n,e){const t=function(r){return new Pe(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function cA(n){const e=Pe.fromString(n);return me(bA(e)),e}function bu(n,e){return by(n.databaseId,e.path)}function vi(n,e){const t=cA(e);if(t.get(1)!==n.databaseId.projectId)throw new H(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new H(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ie(fA(t))}function hA(n,e){return by(n.databaseId,e)}function dA(n){const e=cA(n);return e.length===4?Pe.emptyPath():fA(e)}function og(n){return new Pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fA(n){return me(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function E0(n,e,t){return{name:bu(n,e),fields:t.value.mapValue.fields}}function pA(n,e,t){const i=vi(n,e.name),r=vt(e.updateTime),s=e.createTime?vt(e.createTime):ge.min(),o=new $t({mapValue:{fields:e.fields}}),a=Ze.newFoundDocument(i,r,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function GL(n,e){return"found"in e?function(i,r){me(!!r.found),r.found.name,r.found.updateTime;const s=vi(i,r.found.name),o=vt(r.found.updateTime),a=r.found.createTime?vt(r.found.createTime):ge.min(),c=new $t({mapValue:{fields:r.found.fields}});return Ze.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(i,r){me(!!r.missing),me(!!r.readTime);const s=vi(i,r.missing),o=vt(r.readTime);return Ze.newNoDocument(s,o)}(n,e):ue()}function WL(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(me(d===void 0||typeof d=="string"),Ct.fromBase64String(d||"")):(me(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ct.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const d=l.code===void 0?z.UNKNOWN:sA(l.code);return new H(d,l.message||"")}(o);t=new lA(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=vi(n,i.document.name),s=vt(i.document.updateTime),o=i.document.createTime?vt(i.document.createTime):ge.min(),a=new $t({mapValue:{fields:i.document.fields}}),c=Ze.newFoundDocument(r,s,o,a),l=i.targetIds||[],d=i.removedTargetIds||[];t=new fh(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=vi(n,i.document),s=i.readTime?vt(i.readTime):ge.min(),o=Ze.newNoDocument(r,s),a=i.removedTargetIds||[];t=new fh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=vi(n,i.document),s=i.removedTargetIds||[];t=new fh([],s,r,null)}else{if(!("filter"in e))return ue();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new BL(r,s),a=i.targetId;t=new aA(a,o)}}return t}function wu(n,e){let t;if(e instanceof xa)t={update:E0(n,e.key,e.value)};else if(e instanceof Ra)t={delete:bu(n,e.key)};else if(e instanceof Qi)t={update:E0(n,e.key,e.data),updateMask:ZL(e.fieldMask)};else{if(!(e instanceof my))return ue();t={verify:bu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof pa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Us)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ma)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ue()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:HL(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ue()}(n,e.precondition)),t}function ag(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?it.updateTime(vt(s.updateTime)):s.exists!==void 0?it.exists(s.exists):it.none()}(e.currentDocument):it.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let c=null;if("setToServerValue"in a)me(a.setToServerValue==="REQUEST_TIME"),c=new pa;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];c=new Us(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];c=new Hs(d)}else"increment"in a?c=new ma(o,a.increment):ue();const l=nt.fromServerFormat(a.fieldPath);return new qu(l,c)}(n,r)):[];if(e.update){e.update.name;const r=vi(n,e.update.name),s=new $t({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const l=c.fieldPaths||[];return new yn(l.map(d=>nt.fromServerFormat(d)))}(e.updateMask);return new Qi(r,s,o,t,i)}return new xa(r,s,t,i)}if(e.delete){const r=vi(n,e.delete);return new Ra(r,t)}if(e.verify){const r=vi(n,e.verify);return new my(r,t)}return ue()}function KL(n,e){return n&&n.length>0?(me(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?vt(r.updateTime):vt(s);return o.isEqual(ge.min())&&(o=vt(s)),new LL(o,r.transformResults||[])}(t,e))):[]}function mA(n,e){return{documents:[hA(n,e.path)]}}function gA(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=hA(n,r);const s=function(l){if(l.length!==0)return vA(Ue.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:Co(g.field),direction:XL(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=rg(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:r}}function _A(n){let e=dA(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){me(i===1);const d=t.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(f){const g=yA(f);return g instanceof Ue&&dy(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(g=>function(P){return new vu(Po(P.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Fu(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){const g=!!f.before,w=f.values||[];return new Gr(w,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){const g=!f.before,w=f.values||[];return new Gr(w,g)}(t.endAt)),jI(e,r,o,s,a,"F",c,l)}function QL(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Po(t.unaryFilter.field);return xe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Po(t.unaryFilter.field);return xe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Po(t.unaryFilter.field);return xe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Po(t.unaryFilter.field);return xe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(n):n.fieldFilter!==void 0?function(t){return xe.create(Po(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ue.create(t.compositeFilter.filters.map(i=>yA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ue()}}(t.compositeFilter.op))}(n):ue()}function XL(n){return zL[n]}function YL(n){return jL[n]}function JL(n){return qL[n]}function Co(n){return{fieldPath:n.canonicalString()}}function Po(n){return nt.fromServerFormat(n.fieldPath)}function vA(n){return n instanceof xe?function(t){if(t.op==="=="){if(s0(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NAN"}};if(r0(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(s0(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NAN"}};if(r0(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(t.field),op:YL(t.op),value:t.value}}}(n):n instanceof Ue?function(t){const i=t.getFilters().map(r=>vA(r));return i.length===1?i[0]:{compositeFilter:{op:JL(t.op),filters:i}}}(n):ue()}function ZL(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,t,i,r,s=ge.min(),o=ge.min(),a=Ct.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.ct=e}}function eM(n,e){let t;if(e.document)t=pA(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ie.fromSegments(e.noDocument.path),r=Ws(e.noDocument.readTime);t=Ze.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ue();{const i=ie.fromSegments(e.unknownDocument.path),r=Ws(e.unknownDocument.version);t=Ze.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(r){const s=new rt(r[0],r[1]);return ge.fromTimestamp(s)}(e.readTime)),t}function T0(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:nd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,o){return{name:bu(s,o.key),fields:o.data.value.mapValue.fields,updateTime:ga(s,o.version.toTimestamp()),createTime:ga(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Gs(e.version)};else{if(!e.isUnknownDocument())return ue();i.unknownDocument={path:t.path.toArray(),version:Gs(e.version)}}return i}function nd(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Gs(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ws(n){const e=new rt(n.seconds,n.nanoseconds);return ge.fromTimestamp(e)}function vs(n,e){const t=(e.baseMutations||[]).map(s=>ag(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(s=>ag(n.ct,s)),r=rt.fromMillis(e.localWriteTimeMs);return new gy(e.batchId,r,t,i)}function Cl(n){const e=Ws(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ws(n.lastLimboFreeSnapshotVersion):ge.min();let i;return i=function(s){return s.documents!==void 0}(n.query)?function(s){return me(s.documents.length===1),ln(ka(dA(s.documents[0])))}(n.query):function(s){return ln(_A(s))}(n.query),new Ni(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ct.fromBase64String(n.resumeToken))}function EA(n,e){const t=Gs(e.snapshotVersion),i=Gs(e.lastLimboFreeSnapshotVersion);let r;r=Zh(e.target)?mA(n.ct,e.target):gA(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qs(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function wy(n){const e=_A({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?td(e,e.limit,"L"):e}function Fp(n,e){return new yy(e.largestBatchId,ag(n.ct,e.overlayMutation))}function S0(n,e){const t=e.path.lastSegment();return[n,an(e.path.popLast()),t]}function I0(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:Gs(i.readTime),documentKey:an(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{getBundleMetadata(e,t){return A0(e).get(t).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:Ws(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,t){return A0(e).put(function(r){return{bundleId:r.id,createTime:Gs(vt(r.createTime)),version:r.version}}(t))}getNamedQuery(e,t){return C0(e).get(t).next(i=>{if(i)return function(s){return{name:s.name,query:wy(s.bundledQuery),readTime:Ws(s.readTime)}}(i)})}saveNamedQuery(e,t){return C0(e).put(function(r){return{name:r.name,readTime:Gs(vt(r.readTime)),bundledQuery:r.bundledQuery}}(t))}}function A0(n){return Lt(n,"bundles")}function C0(n){return Lt(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const i=t.uid||"";return new Wd(e,i)}getOverlay(e,t){return fl(e).get(S0(this.userId,t)).next(i=>i?Fp(this.serializer,i):null)}getOverlays(e,t){const i=pi();return B.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,o)=>{const a=new yy(t,o);r.push(this.ht(e,a))}),B.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(o=>r.add(an(o.getCollectionPath())));const s=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(fl(e).j("collectionPathOverlayIndex",a))}),B.waitFor(s)}getOverlaysForCollection(e,t,i){const r=pi(),s=an(t),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return fl(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const l=Fp(this.serializer,c);r.set(l.getKey(),l)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=pi();let o;const a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fl(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{const f=Fp(this.serializer,l);s.size()<r||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return fl(e).put(function(r,s,o){const[a,c,l]=S0(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:wu(r.ct,o.mutation)}}(this.serializer,this.userId,t))}}function fl(n){return Lt(n,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(ft(e.integerValue));else if("doubleValue"in e){const i=ft(e.doubleValue);isNaN(i)?this.Et(t,13):(this.Et(t,15),mu(i)?t.dt(0):t.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(t,20),typeof i=="string"&&(i=qi(i)),t.At(`${i.seconds||""}`),t.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(qr(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?OI(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):ue()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const i=e.fields||{};this.Et(t,55);for(const r of Object.keys(i))this.Rt(r,t),this.It(i[r],t)}wt(e,t){const i=e.values||[];this.Et(t,50);for(const r of i)this.It(r,t)}gt(e,t){this.Et(t,37),ie.fromName(e).path.forEach(i=>{this.Et(t,60),this.St(i,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}bs.bt=new bs;function nM(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function P0(n){const e=64-function(i){let r=0;for(let s=0;s<8;++s){const o=nM(255&i[s]);if(r+=o,o!==8)break}return r}(n);return Math.ceil(e/8)}class iM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ct(i.value),i=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Mt(i.value),i=t.next();this.xt()}Ot(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{const r=t.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{const r=t.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(e){const t=this.Bt(e),i=P0(t);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),i=P0(t);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=(128&t[0])!=0;t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ct(e){const t=255&e;t===0?(this.Kt(0),this.Kt(255)):t===255?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class rM{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class sM{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class pl{constructor(){this.Gt=new iM,this.zt=new rM(this.Gt),this.jt=new sM(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new ws(this.indexId,this.documentKey,this.arrayValue,i)}}function ur(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=k0(n.arrayValue,e.arrayValue),t!==0?t:(t=k0(n.directionalValue,e.directionalValue),t!==0?t:ie.comparator(n.documentKey,e.documentKey)))}function k0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e){this.Yt=new Ge((t,i)=>nt.comparator(t.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const i=t;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(e){if(me(e.collectionGroup===this.collectionId),this.en)return!1;const t=Xm(e);if(t!==void 0&&!this.nn(t))return!1;const i=_s(e);let r=new Set,s=0,o=0;for(;s<i.length&&this.nn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!r.has(a.field.canonicalString())){const c=i[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<i.length;++s){const a=i[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new Ge(nt.comparator);const t=[];for(const i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new lh(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new lh(i.field,0))}for(const i of this.Zt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new lh(i.field,i.dir==="asc"?0:1)));return new Jh(Jh.UNKNOWN_ID,this.collectionId,t,pu.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(n){var e,t;if(me(n instanceof xe||n instanceof Ue),n instanceof xe){if(n instanceof zI){const r=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>xe.create(n.field,"==",s)))||[];return Ue.create(r,"or")}return n}const i=n.filters.map(r=>TA(r));return Ue.create(i,n.op)}function oM(n){if(n.getFilters().length===0)return[];const e=cg(TA(n));return me(SA(e)),lg(e)||ug(e)?[e]:e.getFilters()}function lg(n){return n instanceof xe}function ug(n){return n instanceof Ue&&dy(n)}function SA(n){return lg(n)||ug(n)||function(t){if(t instanceof Ue&&eg(t)){for(const i of t.getFilters())if(!lg(i)&&!ug(i))return!1;return!0}return!1}(n)}function cg(n){if(me(n instanceof xe||n instanceof Ue),n instanceof xe)return n;if(n.filters.length===1)return cg(n.filters[0]);const e=n.filters.map(i=>cg(i));let t=Ue.create(e,n.op);return t=id(t),SA(t)?t:(me(t instanceof Ue),me(fa(t)),me(t.filters.length>1),t.filters.reduce((i,r)=>Ey(i,r)))}function Ey(n,e){let t;return me(n instanceof xe||n instanceof Ue),me(e instanceof xe||e instanceof Ue),t=n instanceof xe?e instanceof xe?function(r,s){return Ue.create([r,s],"and")}(n,e):R0(n,e):e instanceof xe?R0(e,n):function(r,s){if(me(r.filters.length>0&&s.filters.length>0),fa(r)&&fa(s))return BI(r,s.getFilters());const o=eg(r)?r:s,a=eg(r)?s:r,c=o.filters.map(l=>Ey(l,a));return Ue.create(c,"or")}(n,e),id(t)}function R0(n,e){if(fa(e))return BI(e,n.getFilters());{const t=e.filters.map(i=>Ey(n,i));return Ue.create(t,"or")}}function id(n){if(me(n instanceof xe||n instanceof Ue),n instanceof xe)return n;const e=n.getFilters();if(e.length===1)return id(e[0]);if(MI(n))return n;const t=e.map(r=>id(r)),i=[];return t.forEach(r=>{r instanceof xe?i.push(r):r instanceof Ue&&(r.op===n.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Ue.create(i,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this._n=new Ty}addToCollectionParentIndex(e,t){return this._n.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(Nn.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(Nn.min())}updateCollectionGroup(e,t,i){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class Ty{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Ge(Pe.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ge(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new Uint8Array(0);class lM{constructor(e,t){this.databaseId=t,this.an=new Ty,this.un=new ts(i=>qs(i),(i,r)=>$u(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:i,parent:an(r)};return D0(e).put(s)}return B.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[vI(t),""],!1,!0);return D0(e).U(r).next(s=>{for(const o of s){if(o.collectionId!==t)break;i.push(fi(o.parent))}return i})}addFieldIndex(e,t){const i=ml(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete r.indexId;const s=i.add(r);if(t.indexState){const o=Eo(e);return s.next(a=>{o.put(I0(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=ml(e),r=Eo(e),s=wo(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=ml(e),i=wo(e),r=Eo(e);return t.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,t){return B.forEach(this.cn(t),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){const s=new x0(i).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const i=wo(e);let r=!0;const s=new Map;return B.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=Ie();const a=[];return B.forEach(s,(c,l)=>{W("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(N=>`${N.fieldPath}:${N.kind}`).join(",")}`}(c)} to execute ${qs(t)}`);const d=function(I,N){const K=Xm(N);if(K===void 0)return null;for(const Q of ed(I,K.fieldPath))switch(Q.op){case"array-contains-any":return Q.value.arrayValue.values||[];case"array-contains":return[Q.value]}return null}(l,c),f=function(I,N){const K=new Map;for(const Q of _s(N))for(const S of ed(I,Q.fieldPath))switch(S.op){case"==":case"in":K.set(Q.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return K.set(Q.fieldPath.canonicalString(),S.value),Array.from(K.values())}return null}(l,c),g=function(I,N){const K=[];let Q=!0;for(const S of _s(N)){const _=S.kind===0?c0(I,S.fieldPath,I.startAt):h0(I,S.fieldPath,I.startAt);K.push(_.value),Q&&(Q=_.inclusive)}return new Gr(K,Q)}(l,c),w=function(I,N){const K=[];let Q=!0;for(const S of _s(N)){const _=S.kind===0?h0(I,S.fieldPath,I.endAt):c0(I,S.fieldPath,I.endAt);K.push(_.value),Q&&(Q=_.inclusive)}return new Gr(K,Q)}(l,c),P=this.hn(c,l,g),x=this.hn(c,l,w),L=this.Pn(c,l,f),v=this.In(c.indexId,d,P,g.inclusive,x,w.inclusive,L);return B.forEach(v,E=>i.G(E,t.limit).next(I=>{I.forEach(N=>{const K=ie.fromSegments(N.documentKey);o.has(K)||(o=o.add(K),a.push(K))})}))}).next(()=>a)}return B.resolve(null)})}cn(e){let t=this.un.get(e);return t||(e.filters.length===0?t=[e]:t=oM(Ue.create(e.filters,"and")).map(i=>ng(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,i,r,s,o,a){const c=(t!=null?t.length:1)*Math.max(i.length,s.length),l=c/(t!=null?t.length:1),d=[];for(let f=0;f<c;++f){const g=t?this.Tn(t[f/l]):jc,w=this.En(e,g,i[f%l],r),P=this.dn(e,g,s[f%l],o),x=a.map(L=>this.En(e,g,L,!0));d.push(...this.createRange(w,P,x))}return d}En(e,t,i,r){const s=new ws(e,ie.empty(),t,i);return r?s:s.Jt()}dn(e,t,i,r){const s=new ws(e,ie.empty(),t,i);return r?s.Jt():s}ln(e,t){const i=new x0(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(const a of s)i.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let i=2;const r=this.cn(t);return B.forEach(r,s=>this.ln(e,s).next(o=>{o?i!==0&&o.fields.length<function(c){let l=new Ge(nt.comparator),d=!1;for(const f of c.filters)for(const g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(const f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(s)&&(i=1):i=0})).next(()=>function(o){return o.limit!==null}(t)&&r.length>1&&i===2?1:i)}An(e,t){const i=new pl;for(const r of _s(e)){const s=t.data.field(r.fieldPath);if(s==null)return null;const o=i.Ht(r.kind);bs.bt.Pt(s,o)}return i.Wt()}Tn(e){const t=new pl;return bs.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const i=new pl;return bs.bt.Pt(js(this.databaseId,t),i.Ht(function(s){const o=_s(s);return o.length===0?0:o[o.length-1].kind}(e))),i.Wt()}Pn(e,t,i){if(i===null)return[];let r=[];r.push(new pl);let s=0;for(const o of _s(e)){const a=i[s++];for(const c of r)if(this.Vn(t,o.fieldPath)&&yu(a))r=this.mn(r,o,a);else{const l=c.Ht(o.kind);bs.bt.Pt(a,l)}}return this.fn(r)}hn(e,t,i){return this.Pn(e,t,i.position)}fn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Wt();return t}mn(e,t,i){const r=[...e],s=[];for(const o of i.arrayValue.values||[])for(const a of r){const c=new pl;c.seed(a.Wt()),bs.bt.Pt(o,c.Ht(t.kind)),s.push(c)}return s}Vn(e,t){return!!e.filters.find(i=>i instanceof xe&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,t){const i=ml(e),r=Eo(e);return(t?i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.U()).next(s=>{const o=[];return B.forEach(s,a=>r.get([a.indexId,this.uid]).next(c=>{o.push(function(d,f){const g=f?new pu(f.sequenceNumber,new Nn(Ws(f.readTime),new ie(fi(f.documentKey)),f.largestBatchId)):pu.empty(),w=d.fields.map(([P,x])=>new lh(nt.fromServerFormat(P),x));return new Jh(d.indexId,d.collectionGroup,w,g)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:Se(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=ml(e),s=Eo(e);return this.gn(e).next(o=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>B.forEach(a,c=>s.put(I0(c.indexId,this.uid,o,i)))))}updateIndexEntries(e,t){const i=new Map;return B.forEach(t,(r,s)=>{const o=i.get(r.collectionGroup);return(o?B.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),B.forEach(a,c=>this.pn(e,r,c).next(l=>{const d=this.yn(s,c);return l.isEqual(d)?B.resolve():this.wn(e,s,c,l,d)}))))})}Sn(e,t,i,r){return wo(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,t.key),documentKey:t.key.path.toArray()})}bn(e,t,i,r){return wo(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,t.key),t.key.path.toArray()])}pn(e,t,i){const r=wo(e);let s=new Ge(ur);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,t)])},(o,a)=>{s=s.add(new ws(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let i=new Ge(ur);const r=this.An(t,e);if(r==null)return i;const s=Xm(t);if(s!=null){const o=e.data.field(s.fieldPath);if(yu(o))for(const a of o.arrayValue.values||[])i=i.add(new ws(t.indexId,e.key,this.Tn(a),r))}else i=i.add(new ws(t.indexId,e.key,jc,r));return i}wn(e,t,i,r,s){W("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,l,d,f,g){const w=c.getIterator(),P=l.getIterator();let x=bo(w),L=bo(P);for(;x||L;){let v=!1,E=!1;if(x&&L){const I=d(x,L);I<0?E=!0:I>0&&(v=!0)}else x!=null?E=!0:v=!0;v?(f(L),L=bo(P)):E?(g(x),x=bo(w)):(x=bo(w),L=bo(P))}}(r,s,ur,a=>{o.push(this.Sn(e,t,i,a))},a=>{o.push(this.bn(e,t,i,a))}),B.waitFor(o)}gn(e){let t=1;return Eo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((o,a)=>ur(o,a)).filter((o,a,c)=>!a||ur(o,c[a-1])!==0);const r=[];r.push(e);for(const o of i){const a=ur(o,e),c=ur(o,t);if(a===0)r[0]=e.Jt();else if(a>0&&c<0)r.push(o),r.push(o.Jt());else if(c>0)break}r.push(t);const s=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];const a=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,jc,[]],c=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,jc,[]];s.push(IDBKeyRange.bound(a,c))}return s}Dn(e,t){return ur(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(O0)}getMinOffset(e,t){return B.mapArray(this.cn(t),i=>this.ln(e,i).next(r=>r||ue())).next(O0)}}function D0(n){return Lt(n,"collectionParents")}function wo(n){return Lt(n,"indexEntries")}function ml(n){return Lt(n,"indexConfiguration")}function Eo(n){return Lt(n,"indexState")}function O0(n){me(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;uy(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Nn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class pn{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=i.J({range:o},(d,f,g)=>(a++,g.delete()));s.push(c.next(()=>{me(a===1)}));const l=[];for(const d of t.mutations){const f=AI(e,d.key.path,t.batchId);s.push(r.delete(f)),l.push(d.key)}return B.waitFor(s).next(()=>l)}function rd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ue();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(41943040,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);class Kd{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(e,t,i,r){me(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Kd(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cr(e).J({index:"userMutationsIndex",range:i},(r,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=ko(e),o=cr(e);return o.add({}).next(a=>{me(typeof a=="number");const c=new gy(a,t,i,r),l=function(w,P,x){const L=x.baseMutations.map(E=>wu(w.ct,E)),v=x.mutations.map(E=>wu(w.ct,E));return{userId:P,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:L,mutations:v}}(this.serializer,this.userId,c),d=[];let f=new Ge((g,w)=>Se(g.canonicalString(),w.canonicalString()));for(const g of r){const w=AI(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(o.put(l)),d.push(s.put(w,XN))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),B.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return cr(e).get(t).next(i=>i?(me(i.userId===this.userId),vs(this.serializer,i)):null)}vn(e,t){return this.Cn[t]?B.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.Cn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return cr(e).J({index:"userMutationsIndex",range:r},(o,a,c)=>{a.userId===this.userId&&(me(a.batchId>=i),s=vs(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return cr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cr(e).U("userMutationsIndex",t).next(i=>i.map(r=>vs(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=uh(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return ko(e).J({range:r},(o,a,c)=>{const[l,d,f]=o,g=fi(d);if(l===this.userId&&t.path.isEqual(g))return cr(e).get(f).next(w=>{if(!w)throw ue();me(w.userId===this.userId),s.push(vs(this.serializer,w))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ge(Se);const r=[];return t.forEach(s=>{const o=uh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=ko(e).J({range:a},(l,d,f)=>{const[g,w,P]=l,x=fi(w);g===this.userId&&s.path.isEqual(x)?i=i.add(P):f.done()});r.push(c)}),B.waitFor(r).next(()=>this.Fn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=uh(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new Ge(Se);return ko(e).J({range:o},(c,l,d)=>{const[f,g,w]=c,P=fi(g);f===this.userId&&i.isPrefixOf(P)?P.length===r&&(a=a.add(w)):d.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const i=[],r=[];return t.forEach(s=>{r.push(cr(e).get(s).next(o=>{if(o===null)throw ue();me(o.userId===this.userId),i.push(vs(this.serializer,o))}))}),B.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return IA(e._e,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),B.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return B.resolve();const i=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return ko(e).J({range:i},(s,o,a)=>{if(s[0]===this.userId){const c=fi(s[1]);r.push(c)}else a.done()}).next(()=>{me(r.length===0)})})}containsKey(e,t){return AA(e,this.userId,t)}xn(e){return CA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function AA(n,e,t){const i=uh(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return ko(n).J({range:s,H:!0},(a,c,l)=>{const[d,f,g]=a;d===e&&f===r&&(o=!0),l.done()}).next(()=>o)}function cr(n){return Lt(n,"mutations")}function ko(n){return Lt(n,"documentMutations")}function CA(n){return Lt(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ks(0)}static Ln(){return new Ks(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const i=new Ks(t.highestTargetId);return t.highestTargetId=i.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>ge.fromTimestamp(new rt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.Qn(t,i),this.kn(e,i))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>To(e).delete(t.targetId)).next(()=>this.Bn(e)).next(i=>(me(i.targetCount>0),i.targetCount-=1,this.kn(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return To(e).J((o,a)=>{const c=Cl(a);c.sequenceNumber<=t&&i.get(c.targetId)===null&&(r++,s.push(this.removeTargetData(e,c)))}).next(()=>B.waitFor(s)).next(()=>r)}forEachTarget(e,t){return To(e).J((i,r)=>{const s=Cl(r);t(s)})}Bn(e){return L0(e).get("targetGlobalKey").next(t=>(me(t!==null),t))}kn(e,t){return L0(e).put("targetGlobalKey",t)}qn(e,t){return To(e).put(EA(this.serializer,t))}Qn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=qs(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return To(e).J({range:r,index:"queryTargetsIndex"},(o,a,c)=>{const l=Cl(a);$u(t,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=_r(e);return t.forEach(o=>{const a=an(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),B.waitFor(r)}removeMatchingKeys(e,t,i){const r=_r(e);return B.forEach(t,s=>{const o=an(s.path);return B.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=_r(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=_r(e);let s=Ie();return r.J({range:i,H:!0},(o,a,c)=>{const l=fi(o[1]),d=new ie(l);s=s.add(d)}).next(()=>s)}containsKey(e,t){const i=an(t.path),r=IDBKeyRange.bound([i],[vI(i)],!1,!0);let s=0;return _r(e).J({index:"documentTargetsIndex",H:!0,range:r},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return To(e).get(t).next(i=>i?Cl(i):null)}}function To(n){return Lt(n,"targets")}function L0(n){return Lt(n,"targetGlobal")}function _r(n){return Lt(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0([n,e],[t,i]){const r=Se(n,t);return r===0?Se(e,i):r}class cM{constructor(e){this.Kn=e,this.buffer=new Ge(M0),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();M0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hM{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){W("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){es(t)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Zr(t)}await this.zn(3e5)})}}class dM{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return B.resolve(_n.oe);const i=new cM(t);return this.jn.forEachTarget(e,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(e,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(N0)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),N0):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let i,r,s,o,a,c,l;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(i=f,a=Date.now(),this.removeTargets(e,i,t))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(l=Date.now(),Io()<=De.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:f})))}}function fM(n,e){return new dM(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t){this.db=e,this.garbageCollector=fM(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Zn(e){let t=0;return this.Jn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(i,r)=>t(r))}addReference(e,t,i){return qc(e,i)}removeReference(e,t,i){return qc(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return qc(e,t)}er(e,t){return function(r,s){let o=!1;return CA(r).Y(a=>AA(r,a,s).next(c=>(c&&(o=!0),B.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const c=this.er(e,o).next(l=>{if(!l)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,ge.min()),_r(e).delete(function(f){return[0,an(f.path)]}(o))))});r.push(c)}}).next(()=>B.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return qc(e,t)}Xn(e,t){const i=_r(e);let r,s=_n.oe;return i.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==_n.oe&&t(new ie(fi(r)),s),s=l,r=c):s=_n.oe}).next(()=>{s!==_n.oe&&t(new ie(fi(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qc(n,e){return _r(n).put(function(i,r){return{targetId:0,path:an(i.path),sequenceNumber:r}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(){this.changes=new ts(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ze.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?B.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return fs(e).put(i)}removeEntry(e,t,i){return fs(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],nd(o),a[a.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.tr(e,i)))}getEntry(e,t){let i=Ze.newInvalidDocument(t);return fs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(gl(t))},(r,s)=>{i=this.nr(t,s)}).next(()=>i)}rr(e,t){let i={size:0,document:Ze.newInvalidDocument(t)};return fs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(gl(t))},(r,s)=>{i={document:this.nr(t,s),size:rd(s)}}).next(()=>i)}getEntries(e,t){let i=vn();return this.ir(e,t,(r,s)=>{const o=this.nr(r,s);i=i.insert(r,o)}).next(()=>i)}sr(e,t){let i=vn(),r=new Ye(ie.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);i=i.insert(s,a),r=r.insert(s,rd(o))}).next(()=>({documents:i,_r:r}))}ir(e,t,i){if(t.isEmpty())return B.resolve();let r=new Ge(F0);t.forEach(c=>r=r.add(c));const s=IDBKeyRange.bound(gl(r.first()),gl(r.last())),o=r.getIterator();let a=o.getNext();return fs(e).J({index:"documentKeyIndex",range:s},(c,l,d)=>{const f=ie.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&F0(a,f)<0;)i(a,null),a=o.getNext();a&&a.isEqual(f)&&(i(a,l),a=o.hasNext()?o.getNext():null),a?d.$(gl(a)):d.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,i,r,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),nd(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fs(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{s==null||s.incrementDocumentReadCount(l.length);let d=vn();for(const f of l){const g=this.nr(ie.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(ju(t,g)||r.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,i,r){let s=vn();const o=B0(t,i),a=B0(t,Nn.max());return fs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,d)=>{const f=this.nr(ie.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(f.key,f),s.size===r&&d.done()}).next(()=>s)}newChangeBuffer(e){return new gM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return V0(e).get("remoteDocumentGlobalKey").next(t=>(me(!!t),t))}tr(e,t){return V0(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const i=eM(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(ge.min())))return i}return Ze.newInvalidDocument(e)}}function kA(n){return new mM(n)}class gM extends PA{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ts(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new Ge((s,o)=>Se(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=T0(this.ar.serializer,o);r=r.add(s.path.popLast());const l=rd(c);i+=l-a.size,t.push(this.ar.addEntry(e,s,c))}else if(i-=a.size,this.trackRemovals){const c=T0(this.ar.serializer,o.convertToNoDocument(ge.min()));t.push(this.ar.addEntry(e,s,c))}}),r.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,i)),B.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(i=>(this.ur.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:i,_r:r})=>(r.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function V0(n){return Lt(n,"remoteDocumentGlobal")}function fs(n){return Lt(n,"remoteDocumentsV14")}function gl(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function B0(n,e){const t=e.documentKey.path.toArray();return[n,nd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function F0(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=Se(t[s],i[s]),r)return r;return r=Se(t.length,i.length),r||(r=Se(t[t.length-2],i[i.length-2]),r||Se(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&jl(i.mutation,r,yn.empty(),rt.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ie()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ie()){const r=pi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Il();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=pi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ie()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=vn();const o=zl(),a=function(){return zl()}();return t.forEach((c,l)=>{const d=i.get(l.key);r.has(l.key)&&(d===void 0||d.mutation instanceof Qi)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),jl(d.mutation,l,d.mutation.getFieldMask(),rt.now())):o.set(l.key,yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new _M(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){const i=zl();let r=new Ye((o,a)=>o-a),s=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=t.get(c);if(l===null)return;let d=i.get(c)||yn.empty();d=a.applyToLocalView(l,d),i.set(c,d);const f=(r.get(a.batchId)||Ie()).add(c);r=r.insert(a.batchId,f)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,d=c.value,f=KI();d.forEach(g=>{if(!s.has(g)){const w=nA(t.get(g),i.get(g));w!==null&&f.set(g,w),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return B.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):B.resolve(pi());let a=-1,c=s;return o.next(l=>B.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?B.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Ie())).next(d=>({batchId:a,changes:WI(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ie(t)).next(i=>{let r=Il();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const s=t.collectionGroup;let o=Il();return this.indexManager.getCollectionParents(e,s).next(a=>B.forEach(a,c=>{const l=function(f,g){return new Ki(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((c,l)=>{const d=l.getKey();o.get(d)===null&&(o=o.insert(d,Ze.newInvalidDocument(d)))});let a=Il();return o.forEach((c,l)=>{const d=s.get(c);d!==void 0&&jl(d.mutation,l,yn.empty(),rt.now()),ju(t,l)&&(a=a.insert(c,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return B.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:vt(r.createTime)}}(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(r){return{name:r.name,query:wy(r.bundledQuery),readTime:vt(r.readTime)}}(t)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(){this.overlays=new Ye(ie.comparator),this.hr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const i=pi();return B.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),B.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.hr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),B.resolve()}getOverlaysForCollection(e,t,i){const r=pi(),s=t.length+1,o=new ie(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return B.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Ye((l,d)=>l-d);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>i){let d=s.get(l.largestBatchId);d===null&&(d=pi(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}const a=pi(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=r)););return B.resolve(a)}ht(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new yy(t,i));let s=this.hr.get(t);s===void 0&&(s=Ie(),this.hr.set(t,s)),this.hr.set(t,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this.Pr=new Ge(kt.Ir),this.Tr=new Ge(kt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const i=new kt(e,t);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Ar(new kt(e,t))}Rr(e,t){e.forEach(i=>this.removeReference(i,t))}Vr(e){const t=new ie(new Pe([])),i=new kt(t,e),r=new kt(t,e+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new ie(new Pe([])),i=new kt(t,e),r=new kt(t,e+1);let s=Ie();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new kt(e,0),i=this.Pr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class kt{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return ie.comparator(e.key,t.key)||Se(e.pr,t.pr)}static Er(e,t){return Se(e.pr,t.pr)||ie.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Ge(kt.Ir)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gy(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.wr=this.wr.add(new kt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,t){return B.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.br(i),s=r<0?0:r;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new kt(t,0),r=new kt(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{const a=this.Sr(o.pr);s.push(a)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ge(Se);return t.forEach(r=>{const s=new kt(r,0),o=new kt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{i=i.add(a.pr)})}),B.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;ie.isDocumentKey(s)||(s=s.child(""));const o=new kt(new ie(s),0);let a=new Ge(Se);return this.wr.forEachWhile(c=>{const l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.pr)),!0)},o),B.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(i=>{const r=this.Sr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){me(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return B.forEach(t.mutations,r=>{const s=new kt(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,t){const i=new kt(t,0),r=this.wr.firstAfterOrEqual(i);return B.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e){this.vr=e,this.docs=function(){return new Ye(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return B.resolve(i?i.document.mutableCopy():Ze.newInvalidDocument(t))}getEntries(e,t){let i=vn();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ze.newInvalidDocument(r))}),B.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=vn();const o=t.path,a=new ie(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||uy(wI(d),i)<=0||(r.has(d.key)||ju(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,t,i,r){ue()}Fr(e,t){return B.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new EM(this)}getSize(e){return B.resolve(this.size)}}class EM extends PA{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),B.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e){this.persistence=e,this.Mr=new ts(t=>qs(t),$u),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Sy,this.targetCount=0,this.Lr=Ks.Nn()}forEachTarget(e,t){return this.Mr.forEach((i,r)=>t(r)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Or&&(this.Or=t),B.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Ks(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.qn(t),B.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),B.waitFor(s).next(()=>r)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const i=this.Mr.get(t)||null;return B.resolve(i)}addMatchingKeys(e,t,i){return this.Nr.dr(t,i),B.resolve()}removeMatchingKeys(e,t,i){this.Nr.Rr(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Nr.gr(t);return B.resolve(i)}containsKey(e,t){return B.resolve(this.Nr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,t){this.Br={},this.overlays={},this.kr=new _n(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new TM(this),this.indexManager=new aM,this.remoteDocumentCache=function(r){return new wM(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new wA(t),this.$r=new yM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Br[e.toKey()];return i||(i=new bM(t,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,i){W("MemoryPersistence","Starting transaction:",e);const r=new SM(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(e,t){return B.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,t)))}}class SM extends TI{constructor(e){super(),this.currentSequenceNumber=e}}class Qd{constructor(e){this.persistence=e,this.zr=new Sy,this.jr=null}static Hr(e){return new Qd(e)}get Jr(){if(this.jr)return this.jr;throw ue()}addReference(e,t,i){return this.zr.addReference(i,t),this.Jr.delete(i.toString()),B.resolve()}removeReference(e,t,i){return this.zr.removeReference(i,t),this.Jr.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),B.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(r=>this.Jr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,i=>{const r=ie.fromPath(i);return this.Yr(e,r).next(s=>{s||t.removeEntry(r,ge.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(i=>{i?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return B.or([()=>B.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.serializer=e}O(e,t,i,r){const s=new qd("createOrUpgrade",t);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",e0,{unique:!0}),c.createObjectStore("documentMutations")}(e),$0(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=B.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),$0(e)),o=o.next(()=>function(c){const l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ge.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(s))),i<4&&r>=4&&(i!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",e0,{unique:!0});const f=l.store("mutations"),g=d.map(w=>f.put(w));return B.waitFor(g)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(o=o.next(()=>this.Xr(s))),i<6&&r>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),i<7&&r>=7&&(o=o.next(()=>this.ti(s))),i<8&&r>=8&&(o=o.next(()=>this.ni(e,s))),i<9&&r>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(o=o.next(()=>this.ri(s))),i<11&&r>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{(function(c){const l=c.createObjectStore("documentOverlays",{keyPath:lL});l.createIndex("collectionPathOverlayIndex",uL,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",cL,{unique:!1})})(e)})),i<13&&r>=13&&(o=o.next(()=>function(c){const l=c.createObjectStore("remoteDocumentsV14",{keyPath:YN});l.createIndex("documentKeyIndex",JN),l.createIndex("collectionGroupIndex",ZN)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.si(e,s))),i<15&&r>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:rL}).createIndex("sequenceNumberIndex",sL,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:oL}).createIndex("documentKeyIndex",aL,{unique:!1})}(e))),i<16&&r>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((i,r)=>{t+=rd(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.U().next(r=>B.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",o).next(a=>B.forEach(a,c=>{me(c.userId===s.userId);const l=vs(this.serializer,c);return IA(e,s.userId,l).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.J((o,a)=>{const c=new Pe(o),l=function(f){return[0,an(f)]}(c);s.push(t.get(l).next(d=>d?B.resolve():(f=>t.put({targetId:0,path:an(f),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>B.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:iL});const i=t.store("collectionParents"),r=new Ty,s=o=>{if(r.add(o)){const a=o.lastSegment(),c=o.popLast();return i.put({collectionId:a,parent:an(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new Pe(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],l)=>{const d=fi(a);return s(d.popLast())}))}ri(e){const t=e.store("targets");return t.J((i,r)=>{const s=Cl(r),o=EA(this.serializer,s);return t.put(o)})}ii(e,t){const i=t.store("remoteDocuments"),r=[];return i.J((s,o)=>{const a=t.store("remoteDocumentsV14"),c=function(f){return f.document?new ie(Pe.fromString(f.document.name).popFirst(5)):f.noDocument?ie.fromSegments(f.noDocument.path):f.unknownDocument?ie.fromSegments(f.unknownDocument.path):ue()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(l))}).next(()=>B.waitFor(r))}si(e,t){const i=t.store("mutations"),r=kA(this.serializer),s=new RA(Qd.Hr,this.serializer.ct);return i.U().next(o=>{const a=new Map;return o.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:Ie();vs(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),B.forEach(a,(c,l)=>{const d=new Rt(l),f=Wd.lt(this.serializer,d),g=s.getIndexManager(d),w=Kd.lt(d,this.serializer,g,s.referenceDelegate);return new xA(r,w,f,g).recalculateAndSaveOverlaysForDocumentKeys(new Ym(t,_n.oe),c).next()})})}}function $0(n){n.createObjectStore("targetDocuments",{keyPath:tL}).createIndex("documentTargetsIndex",nL,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",eL,{unique:!0}),n.createObjectStore("targetGlobal")}const $p="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Iy{constructor(e,t,i,r,s,o,a,c,l,d,f=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=d,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=g=>Promise.resolve(),!Iy.D())throw new H(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pM(this,r),this.Ti=t+"main",this.serializer=new wA(c),this.Ei=new yi(this.Ti,this.ui,new IM(this.serializer)),this.Qr=new uM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kA(this.serializer),this.$r=new tM,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&yt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new H(z.FAILED_PRECONDITION,$p);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new _n(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Uc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(es(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return _l(e).get("owner").next(t=>B.resolve(this.Si(t)))}bi(e){return Uc(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const i=Lt(t,"clientMetadata");return i.U().next(r=>{const s=this.vi(r,18e5),o=r.filter(a=>s.indexOf(a)===-1);return B.forEach(o,a=>i.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?B.resolve(!0):_l(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new H(z.FAILED_PRECONDITION,$p);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uc(e).U().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){const s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&W("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new Ym(e,_n.oe);return this.yi(t).next(()=>this.bi(t))}),this.Ei.close(),this.Li()}vi(e,t){return e.filter(i=>this.Ci(i.updateTimeMs,t)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Uc(e).U().next(t=>this.vi(t,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return Kd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lM(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Wd.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,i){W("IndexedDbPersistence","Starting transaction:",e);const r=t==="readonly"?"readonly":"readwrite",s=function(c){return c===16?dL:c===15?xI:c===14?kI:c===13?PI:c===12?hL:c===11?CI:void ue()}(this.ui);let o;return this.Ei.runTransaction(e,r,s,a=>(o=new Ym(a,this.kr?this.kr.next():_n.oe),t==="readwrite-primary"?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw yt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new H(z.FAILED_PRECONDITION,EI);return i(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return _l(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new H(z.FAILED_PRECONDITION,$p)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _l(e).put("owner",t)}static D(){return yi.D()}yi(e){const t=_l(e);return t.get("owner").next(i=>this.Si(i)?(W("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):B.resolve())}Ci(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(yt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;QS()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const i=((t=this.di)===null||t===void 0?void 0:t.getItem(this.Fi(e)))!==null;return W("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return yt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){yt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function _l(n){return Lt(n,"owner")}function Uc(n){return Lt(n,"clientMetadata")}function Ay(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.qi=i,this.Qi=r}static Ki(e,t){let i=Ie(),r=Ie();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Cy(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return QS()?8:SI(Xh())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,i,r){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new AM;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,i,r){return i.documentReadCount<this.Wi?(Io()<=De.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Ao(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),B.resolve()):(Io()<=De.DEBUG&&W("QueryEngine","Query:",Ao(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(Io()<=De.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Ao(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ln(t))):B.resolve())}ji(e,t){if(d0(t))return B.resolve(null);let i=ln(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=td(t,null,"F"),i=ln(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=Ie(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{const l=this.Zi(t,a);return this.Xi(t,l,o,c.readTime)?this.ji(e,td(t,null,"F")):this.es(e,l,t,c)}))})))}Hi(e,t,i,r){return d0(t)||r.isEqual(ge.min())?B.resolve(null):this.zi.getDocuments(e,i).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,i,r)?B.resolve(null):(Io()<=De.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ao(t)),this.es(e,o,t,bI(r,-1)).next(a=>a))})}Zi(e,t){let i=new Ge(HI(e));return t.forEach((r,s)=>{ju(e,s)&&(i=i.add(s))}),i}Xi(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(e,t,i){return Io()<=De.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Ao(t)),this.zi.getDocumentsMatchingQuery(e,t,Nn.min(),i)}es(e,t,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e,t,i,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Ye(Se),this.rs=new ts(s=>qs(s),$u),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xA(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function OA(n,e,t,i){return new CM(n,e,t,i)}async function NA(n,e){const t=re(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t._s(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let c=Ie();for(const l of r){o.push(l.batchId);for(const d of l.mutations)c=c.add(d.key)}for(const l of s){a.push(l.batchId);for(const d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(i,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function PM(n,e){const t=re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){const f=l.batch,g=f.keys();let w=B.resolve();return g.forEach(P=>{w=w.next(()=>d.getEntry(c,P)).next(x=>{const L=l.docVersions.get(P);me(L!==null),x.version.compareTo(L)<0&&(f.applyToRemoteDocument(x,l),x.isValidDocument()&&(x.setReadTime(l.commitVersion),d.addEntry(x)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=Ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function LA(n){const e=re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function kM(n,e){const t=re(n),i=e.snapshotVersion;let r=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});r=t.ns;const a=[];e.targetChanges.forEach((d,f)=>{const g=r.get(f);if(!g)return;a.push(t.Qr.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.Qr.addMatchingKeys(s,d.addedDocuments,f)));let w=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?w=w.withResumeToken(Ct.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):d.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(d.resumeToken,i)),r=r.insert(f,w),function(x,L,v){return x.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(g,w,d)&&a.push(t.Qr.updateTargetData(s,w))});let c=vn(),l=Ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(MA(s,o,e.documentUpdates).next(d=>{c=d.cs,l=d.ls})),!i.isEqual(ge.min())){const d=t.Qr.getLastRemoteSnapshotVersion(s).next(f=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(d)}return B.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.ns=r,s))}function MA(n,e,t){let i=Ie(),r=Ie();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=vn();return t.forEach((a,c)=>{const l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(ge.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:r}})}function xM(n,e){const t=re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function _a(n,e){const t=re(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Qr.getTargetData(i,e).next(s=>s?(r=s,B.resolve(r)):t.Qr.allocateTargetId(i).next(o=>(r=new Ni(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ns=t.ns.insert(i.targetId,i),t.rs.set(e,i.targetId)),i})}async function ya(n,e,t){const i=re(n),r=i.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!es(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)}function sd(n,e,t){const i=re(n);let r=ge.min(),s=Ie();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){const f=re(c),g=f.rs.get(d);return g!==void 0?B.resolve(f.ns.get(g)):f.Qr.getTargetData(l,d)}(i,o,ln(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.ts.getDocumentsMatchingQuery(o,e,t?r:ge.min(),t?s:Ie())).next(a=>(FA(i,UI(e),a),{documents:a,hs:s})))}function VA(n,e){const t=re(n),i=re(t.Qr),r=t.ns.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.ot(s,e).next(o=>o?o.target:null))}function BA(n,e){const t=re(n),i=t.ss.get(e)||ge.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.os.getAllFromCollectionGroup(r,e,bI(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(FA(t,e,r),r))}function FA(n,e,t){let i=n.ss.get(e)||ge.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ss.set(e,i)}async function RM(n,e,t,i){const r=re(n);let s=Ie(),o=vn();for(const l of t){const d=e.Ps(l.metadata.name);l.document&&(s=s.add(d));const f=e.Is(l);f.setReadTime(e.Ts(l.metadata.readTime)),o=o.insert(d,f)}const a=r.os.newChangeBuffer({trackRemovals:!0}),c=await _a(r,function(d){return ln(ka(Pe.fromString(`__bundle__/docs/${d}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",l=>MA(l,a,o).next(d=>(a.apply(l),d)).next(d=>r.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>r.Qr.addMatchingKeys(l,s,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(l,d.cs,d.ls)).next(()=>d.cs)))}async function DM(n,e,t=Ie()){const i=await _a(n,ln(wy(e.bundledQuery))),r=re(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const o=vt(e.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.$r.saveNamedQuery(s,e);const a=i.withResumeToken(Ct.EMPTY_BYTE_STRING,o);return r.ns=r.ns.insert(a.targetId,a),r.Qr.updateTargetData(s,a).next(()=>r.Qr.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Qr.addMatchingKeys(s,t,i.targetId)).next(()=>r.$r.saveNamedQuery(s,e))})}function z0(n,e){return`firestore_clients_${n}_${e}`}function j0(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function zp(n,e){return`firestore_targets_${n}_${e}`}class od{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Es(e,t,i){const r=JSON.parse(i);let s,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new H(r.error.code,r.error.message))),o?new od(e,t,r.state,s):(yt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ql{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Es(e,t){const i=JSON.parse(t);let r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new H(i.error.code,i.error.message))),s?new ql(e,i.state,r):(yt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ad{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const i=JSON.parse(t);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=py();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=II(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new ad(e,s):(yt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Py{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Py(t.clientId,t.onlineState):(yt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class hg{constructor(){this.activeTargetIds=py()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jp{constructor(e,t,i,r,s){this.window=e,this.oi=t,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ye(Se),this.started=!1,this.ys=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=z0(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new hg),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const i of e){if(i===this.Vs)continue;const r=this.getItem(z0(this.persistenceKey,i));if(r){const s=ad.Es(i,r);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const i=this.xs(t);i&&this.Os(i)}for(const i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,i){this.Ls(e,t,i),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(zp(this.persistenceKey,e));if(i){const r=ql.Es(e,i);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zp(this.persistenceKey,e))}updateQueryState(e,t,i){this.qs(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return W("SharedClientState","READ",e,t),t}setItem(e,t){W("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){W("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(W("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void yt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.bs.test(t.key)){if(t.newValue==null){const i=this.$s(t.key);return this.Us(i,null)}{const i=this.Ws(t.key,t.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(t.key)){if(t.newValue!==null){const i=this.Gs(t.key,t.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(t.key)){if(t.newValue!==null){const i=this.js(t.key,t.newValue);if(i)return this.Hs(i)}}else if(t.key===this.vs){if(t.newValue!==null){const i=this.xs(t.newValue);if(i)return this.Os(i)}}else if(t.key===this.Ss){const i=function(s){let o=_n.oe;if(s!=null)try{const a=JSON.parse(s);me(typeof a=="number"),o=a}catch(a){yt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);i!==_n.oe&&this.sequenceNumberHandler(i)}else if(t.key===this.Fs){const i=this.Js(t.newValue);await Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(t)})}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,i){const r=new od(this.currentUser,e,t,i),s=j0(this.persistenceKey,this.currentUser,e);this.setItem(s,r.ds())}Bs(e){const t=j0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,i){const r=zp(this.persistenceKey,e),s=new ql(e,t,i);this.setItem(r,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const i=this.$s(e);return ad.Es(i,t)}Gs(e,t){const i=this.Ds.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return od.Es(new Rt(s),r,t)}js(e,t){const i=this.Cs.exec(e),r=Number(i[1]);return ql.Es(r,t)}xs(e){return Py.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);W("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const i=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),s=this.Ns(i),o=[],a=[];return s.forEach(c=>{r.has(c)||o.push(c)}),r.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=i})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=py();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class $A{constructor(){this.no=new hg,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,i){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new hg,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hc=null;function qp(){return Hc===null?Hc=function(){return 268435456+Math.round(2147483648*Math.random())}():Hc++,"0x"+Hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection";class MM extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+t.host,this.So=`projects/${r}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(t,i,r,s,o){const a=qp(),c=this.vo(t,i.toUriEncodedString());W("RestConnection",`Sending RPC '${t}' ${a}:`,c,r);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(t,c,l,r).then(d=>(W("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw oi("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",r),d})}xo(t,i,r,s,o,a){return this.Co(t,i,r,s,o)}Fo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}vo(t,i){const r=NM[t];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,i,r){const s=qp();return new Promise((o,a)=>{const c=new hI;c.setWithCredentials(!0),c.listenOnce(fI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ah.NO_ERROR:const d=c.getResponseJson();W(Qt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case ah.TIMEOUT:W(Qt,`RPC '${e}' ${s} timed out`),a(new H(z.DEADLINE_EXCEEDED,"Request time out"));break;case ah.HTTP_ERROR:const f=c.getStatus();if(W(Qt,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const P=function(L){const v=L.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(v)>=0?v:z.UNKNOWN}(w.status);a(new H(P,w.message))}else a(new H(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new H(z.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{W(Qt,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);W(Qt,`RPC '${e}' ${s} sending request:`,r),c.send(t,"POST",l,i,15)})}Oo(e,t,i){const r=qp(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gI(),a=mI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new dI({})),this.Fo(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;const d=s.join("");W(Qt,`Creating RPC '${e}' stream ${r}: ${d}`,c);const f=o.createWebChannel(d,c);let g=!1,w=!1;const P=new LM({lo:L=>{w?W(Qt,`Not sending because RPC '${e}' stream ${r} is closed:`,L):(g||(W(Qt,`Opening RPC '${e}' stream ${r} transport.`),f.open(),g=!0),W(Qt,`RPC '${e}' stream ${r} sending:`,L),f.send(L))},ho:()=>f.close()}),x=(L,v,E)=>{L.listen(v,I=>{try{E(I)}catch(N){setTimeout(()=>{throw N},0)}})};return x(f,Sl.EventType.OPEN,()=>{w||(W(Qt,`RPC '${e}' stream ${r} transport opened.`),P.mo())}),x(f,Sl.EventType.CLOSE,()=>{w||(w=!0,W(Qt,`RPC '${e}' stream ${r} transport closed`),P.po())}),x(f,Sl.EventType.ERROR,L=>{w||(w=!0,oi(Qt,`RPC '${e}' stream ${r} transport errored:`,L),P.po(new H(z.UNAVAILABLE,"The operation could not be completed")))}),x(f,Sl.EventType.MESSAGE,L=>{var v;if(!w){const E=L.data[0];me(!!E);const I=E,N=I.error||((v=I[0])===null||v===void 0?void 0:v.error);if(N){W(Qt,`RPC '${e}' stream ${r} received error:`,N);const K=N.status;let Q=function(b){const T=bt[b];if(T!==void 0)return sA(T)}(K),S=N.message;Q===void 0&&(Q=z.INTERNAL,S="Unknown error status: "+K+" with message "+N.message),w=!0,P.po(new H(Q,S)),f.close()}else W(Qt,`RPC '${e}' stream ${r} received:`,E),P.yo(E)}}),x(a,pI.STAT_EVENT,L=>{L.stat===Qm.PROXY?W(Qt,`RPC '${e}' stream ${r} detected buffering proxy`):L.stat===Qm.NOPROXY&&W(Qt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{P.fo()},0),P}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(){return typeof window<"u"?window:null}function ph(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(n){return new UL(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,t,i=1e3,r=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=i,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-i);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t,i,r,s,o,a,c){this.oi=e,this.Go=i,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new ky(e,t)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():t&&t.code===z.RESOURCE_EXHAUSTED?(yt(t.toString()),yt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===t&&this.u_(i,r)},i=>{e(()=>{const r=new H(z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(e,t){const i=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VM extends jA{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=WL(this.serializer,e),i=function(s){if(!("targetChange"in s))return ge.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?vt(o.readTime):ge.min()}(e);return this.listener.h_(t,i)}P_(e){const t={};t.database=og(this.serializer),t.addTarget=function(s,o){let a;const c=o.target;if(a=Zh(c)?{documents:mA(s,c)}:{query:gA(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=uA(s,o.resumeToken);const l=rg(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=ga(s,o.snapshotVersion.toTimestamp());const l=rg(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const i=QL(this.serializer,e);i&&(t.labels=i),this.i_(t)}I_(e){const t={};t.database=og(this.serializer),t.removeTarget=e,this.i_(t)}}class BM extends jA{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=KL(e.writeResults,e.commitTime),i=vt(e.commitTime);return this.listener.A_(i,t)}return me(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=og(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>wu(this.serializer,i))};this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new H(z.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,sg(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(z.UNKNOWN,s.toString())})}xo(e,t,i,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,sg(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(z.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class $M{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(yt(t),this.y_=!1):W("OnlineStateTracker",t)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{i.enqueueAndForget(async()=>{ns(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(c){const l=re(c);l.M_.add(4),await Da(l),l.N_.set("Unknown"),l.M_.delete(4),await Wu(l)}(this))})}),this.N_=new $M(i,r)}}async function Wu(n){if(ns(n))for(const e of n.x_)await e(!0)}async function Da(n){for(const e of n.x_)await e(!1)}function Xd(n,e){const t=re(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),Dy(t)?Ry(t):Na(t).Xo()&&xy(t,e))}function va(n,e){const t=re(n),i=Na(t);t.F_.delete(e),i.Xo()&&qA(t,e),t.F_.size===0&&(i.Xo()?i.n_():ns(t)&&t.N_.set("Unknown"))}function xy(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Na(n).P_(e)}function qA(n,e){n.L_.xe(e),Na(n).I_(e)}function Ry(n){n.L_=new $L({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Na(n).start(),n.N_.w_()}function Dy(n){return ns(n)&&!Na(n).Zo()&&n.F_.size>0}function ns(n){return re(n).M_.size===0}function UA(n){n.L_=void 0}async function jM(n){n.N_.set("Online")}async function qM(n){n.F_.forEach((e,t)=>{xy(n,e)})}async function UM(n,e){UA(n),Dy(n)?(n.N_.D_(e),Ry(n)):n.N_.set("Unknown")}async function HM(n,e,t){if(n.N_.set("Online"),e instanceof lA&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.F_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.F_.delete(a),r.L_.removeTarget(a))}(n,e)}catch(i){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ld(n,i)}else if(e instanceof fh?n.L_.Ke(e):e instanceof aA?n.L_.He(e):n.L_.We(e),!t.isEqual(ge.min()))try{const i=await LA(n.localStore);t.compareTo(i)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.F_.get(l);d&&s.F_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{const d=s.F_.get(c);if(!d)return;s.F_.set(c,d.withResumeToken(Ct.EMPTY_BYTE_STRING,d.snapshotVersion)),qA(s,c);const f=new Ni(d.target,c,l,d.sequenceNumber);xy(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(i){W("RemoteStore","Failed to raise snapshot:",i),await ld(n,i)}}async function ld(n,e,t){if(!es(e))throw e;n.M_.add(1),await Da(n),n.N_.set("Offline"),t||(t=()=>LA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await t(),n.M_.delete(1),await Wu(n)})}function HA(n,e){return e().catch(t=>ld(n,t,e))}async function Oa(n){const e=re(n),t=Wr(e);let i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;GM(e);)try{const r=await xM(e.localStore,i);if(r===null){e.v_.length===0&&t.n_();break}i=r.batchId,WM(e,r)}catch(r){await ld(e,r)}GA(e)&&WA(e)}function GM(n){return ns(n)&&n.v_.length<10}function WM(n,e){n.v_.push(e);const t=Wr(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function GA(n){return ns(n)&&!Wr(n).Zo()&&n.v_.length>0}function WA(n){Wr(n).start()}async function KM(n){Wr(n).V_()}async function QM(n){const e=Wr(n);for(const t of n.v_)e.d_(t.mutations)}async function XM(n,e,t){const i=n.v_.shift(),r=_y.from(i,e,t);await HA(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await Oa(n)}async function YM(n,e){e&&Wr(n).E_&&await async function(i,r){if(function(o){return rA(o)&&o!==z.ABORTED}(r.code)){const s=i.v_.shift();Wr(i).t_(),await HA(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Oa(i)}}(n,e),GA(n)&&WA(n)}async function U0(n,e){const t=re(n);t.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const i=ns(t);t.M_.add(3),await Da(t),i&&t.N_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),await Wu(t)}async function dg(n,e){const t=re(n);e?(t.M_.delete(2),await Wu(t)):e||(t.M_.add(2),await Da(t),t.N_.set("Unknown"))}function Na(n){return n.B_||(n.B_=function(t,i,r){const s=re(t);return s.f_(),new VM(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:jM.bind(null,n),To:qM.bind(null,n),Ao:UM.bind(null,n),h_:HM.bind(null,n)}),n.x_.push(async e=>{e?(n.B_.t_(),Dy(n)?Ry(n):n.N_.set("Unknown")):(await n.B_.stop(),UA(n))})),n.B_}function Wr(n){return n.k_||(n.k_=function(t,i,r){const s=re(t);return s.f_(),new BM(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:KM.bind(null,n),Ao:YM.bind(null,n),R_:QM.bind(null,n),A_:XM.bind(null,n)}),n.x_.push(async e=>{e?(n.k_.t_(),await Oa(n)):(await n.k_.stop(),n.v_.length>0&&(W("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))})),n.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Nt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new Oy(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function La(n,e){if(yt("AsyncQueue",`${e}: ${n}`),es(n))return new H(z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.comparator=e?(t,i)=>e(t,i)||ie.comparator(t.key,i.key):(t,i)=>ie.comparator(t.key,i.key),this.keyedMap=Il(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new ea(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ea)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ea;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(){this.q_=new Ye(ie.comparator)}track(e){const t=e.doc.key,i=this.q_.get(t);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(t,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(t):e.type===1&&i.type===2?this.q_=this.q_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):ue():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,i)=>{e.push(i)}),e}}class ba{constructor(e,t,i,r,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,i,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new ba(e,t,ea.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class ZM{constructor(){this.queries=new ts(e=>qI(e),zu),this.onlineState="Unknown",this.z_=new Set}}async function Ny(n,e){const t=re(n);let i=3;const r=e.query;let s=t.queries.get(r);s?!s.W_()&&e.G_()&&(i=2):(s=new JM,i=e.G_()?0:1);try{switch(i){case 0:s.K_=await t.onListen(r,!0);break;case 1:s.K_=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const a=La(o,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&My(t)}async function Ly(n,e){const t=re(n),i=e.query;let r=3;const s=t.queries.get(i);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=e.G_()?0:1:!s.W_()&&e.G_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function eV(n,e){const t=re(n);let i=!1;for(const r of e){const s=r.query,o=t.queries.get(s);if(o){for(const a of o.U_)a.H_(r)&&(i=!0);o.K_=r}}i&&My(t)}function tV(n,e,t){const i=re(n),r=i.queries.get(e);if(r)for(const s of r.U_)s.onError(t);i.queries.delete(e)}function My(n){n.z_.forEach(e=>{e.next()})}var fg,G0;(G0=fg||(fg={})).J_="default",G0.Cache="cache";class Vy{constructor(e,t,i){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ba(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache||!this.G_())return!0;const i=t!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}na(e){e=ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==fg.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e){this.serializer=e}Ps(e){return vi(this.serializer,e)}Is(e){return e.metadata.exists?pA(this.serializer,e.document,!1):Ze.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return vt(e)}}class iV{constructor(e,t,i){this.oa=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=KA(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const i=Pe.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,i=new W0(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.Ps(r.metadata.name);for(const o of r.metadata.queries){const a=(t.get(o)||Ie()).add(s);t.set(o,a)}}return t}async complete(){const e=await RM(this.localStore,new W0(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const i of this.queries)await DM(this.localStore,i,t.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function KA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.key=e}}class XA{constructor(e){this.key=e}}class YA{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ie(),this.mutatedKeys=Ie(),this.Ia=HI(e),this.Ta=new ea(this.Ia)}get Ea(){return this.la}da(e,t){const i=t?t.Aa:new H0,r=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,f)=>{const g=r.get(d),w=ju(this.query,f)?f:null,P=!!g&&this.mutatedKeys.has(g.key),x=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let L=!1;g&&w?g.data.isEqual(w.data)?P!==x&&(i.track({type:3,doc:w}),L=!0):this.Ra(g,w)||(i.track({type:2,doc:w}),L=!0,(c&&this.Ia(w,c)>0||l&&this.Ia(w,l)<0)&&(a=!0)):!g&&w?(i.track({type:0,doc:w}),L=!0):g&&!w&&(i.track({type:1,doc:g}),L=!0,(c||l)&&(a=!0)),L&&(w?(o=o.add(w),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{Ta:o,Aa:i,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((d,f)=>function(w,P){const x=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return x(w)-x(P)}(d.type,f.type)||this.Ia(d.doc,f.doc)),this.Va(i),r=r!=null&&r;const a=t&&!r?this.ma():[],c=this.Pa.size===0&&this.current&&!r?1:0,l=c!==this.ha;return this.ha=c,o.length!==0||l?{snapshot:new ba(this.query,e.Ta,s,o,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new H0,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Ie(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});const t=[];return e.forEach(i=>{this.Pa.has(i)||t.push(new XA(i))}),this.Pa.forEach(i=>{e.has(i)||t.push(new QA(i))}),t}pa(e){this.la=e.hs,this.Pa=Ie();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return ba.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class rV{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class sV{constructor(e){this.key=e,this.wa=!1}}class oV{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ts(a=>qI(a),zu),this.Da=new Map,this.Ca=new Set,this.va=new Ye(ie.comparator),this.Fa=new Map,this.Ma=new Sy,this.xa={},this.Oa=new Map,this.Na=Ks.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function aV(n,e,t=!0){const i=Yd(n);let r;const s=i.ba.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=await JA(i,e,t,!0),r}async function lV(n,e){const t=Yd(n);await JA(t,e,!0,!1)}async function JA(n,e,t,i){const r=await _a(n.localStore,ln(e)),s=r.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return i&&(a=await By(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&Xd(n.remoteStore,r),a}async function By(n,e,t,i,r){n.Ba=(f,g,w)=>async function(x,L,v,E){let I=L.view.da(v);I.Xi&&(I=await sd(x.localStore,L.query,!1).then(({documents:S})=>L.view.da(S,I)));const N=E&&E.targetChanges.get(L.targetId),K=E&&E.targetMismatches.get(L.targetId)!=null,Q=L.view.applyChanges(I,x.isPrimaryClient,N,K);return pg(x,L.targetId,Q.fa),Q.snapshot}(n,f,g,w);const s=await sd(n.localStore,e,!0),o=new YA(e,s.hs),a=o.da(s.documents),c=Hu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),l=o.applyChanges(a,n.isPrimaryClient,c);pg(n,t,l.fa);const d=new rV(e,t,o);return n.ba.set(e,d),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),l.snapshot}async function uV(n,e,t){const i=re(n),r=i.ba.get(e),s=i.Da.get(r.targetId);if(s.length>1)return i.Da.set(r.targetId,s.filter(o=>!zu(o,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ya(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&va(i.remoteStore,r.targetId),wa(i,r.targetId)}).catch(Zr)):(wa(i,r.targetId),await ya(i.localStore,r.targetId,!0))}async function cV(n,e){const t=re(n),i=t.ba.get(e),r=t.Da.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),va(t.remoteStore,i.targetId))}async function hV(n,e,t){const i=jy(n);try{const r=await function(o,a){const c=re(o),l=rt.now(),d=a.reduce((w,P)=>w.add(P.key),Ie());let f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let P=vn(),x=Ie();return c.os.getEntries(w,d).next(L=>{P=L,P.forEach((v,E)=>{E.isValidDocument()||(x=x.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,P)).next(L=>{f=L;const v=[];for(const E of a){const I=VL(E,f.get(E.key).overlayedDocument);I!=null&&v.push(new Qi(E.key,I,NI(I.value.mapValue),it.exists(!0)))}return c.mutationQueue.addMutationBatch(w,l,v,a)}).next(L=>{g=L;const v=L.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(w,L.batchId,v)})}).then(()=>({batchId:g.batchId,changes:WI(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let l=o.xa[o.currentUser.toKey()];l||(l=new Ye(Se)),l=l.insert(a,c),o.xa[o.currentUser.toKey()]=l}(i,r.batchId,t),await Xi(i,r.changes),await Oa(i.remoteStore)}catch(r){const s=La(r,"Failed to persist write");t.reject(s)}}async function ZA(n,e){const t=re(n);try{const i=await kM(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.Fa.get(s);o&&(me(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?me(o.wa):r.removedDocuments.size>0&&(me(o.wa),o.wa=!1))}),await Xi(t,i,e)}catch(i){await Zr(i)}}function K0(n,e,t){const i=re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const c=re(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(const g of f.U_)g.j_(a)&&(l=!0)}),l&&My(c)}(i.eventManager,e),r.length&&i.Sa.h_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function dV(n,e,t){const i=re(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Fa.get(e),s=r&&r.key;if(s){let o=new Ye(ie.comparator);o=o.insert(s,Ze.newNoDocument(s,ge.min()));const a=Ie().add(s),c=new Uu(ge.min(),new Map,new Ye(Se),o,a);await ZA(i,c),i.va=i.va.remove(s),i.Fa.delete(e),zy(i)}else await ya(i.localStore,e,!1).then(()=>wa(i,e,t)).catch(Zr)}async function fV(n,e){const t=re(n),i=e.batch.batchId;try{const r=await PM(t.localStore,e);$y(t,i,null),Fy(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Xi(t,r)}catch(r){await Zr(r)}}async function pV(n,e,t){const i=re(n);try{const r=await function(o,a){const c=re(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(me(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(i.localStore,e);$y(i,e,t),Fy(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Xi(i,r)}catch(r){await Zr(r)}}async function mV(n,e){const t=re(n);ns(t.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(o){const a=re(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(i===-1)return void e.resolve();const r=t.Oa.get(i)||[];r.push(e),t.Oa.set(i,r)}catch(i){const r=La(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function Fy(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function $y(n,e,t){const i=re(n);let r=i.xa[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.xa[i.currentUser.toKey()]=r}}function wa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Da.get(e))n.ba.delete(i),t&&n.Sa.ka(i,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(i=>{n.Ma.containsKey(i)||eC(n,i)})}function eC(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);t!==null&&(va(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),zy(n))}function pg(n,e,t){for(const i of t)i instanceof QA?(n.Ma.addReference(i.key,e),gV(n,i)):i instanceof XA?(W("SyncEngine","Document no longer in limbo: "+i.key),n.Ma.removeReference(i.key,e),n.Ma.containsKey(i.key)||eC(n,i.key)):ue()}function gV(n,e){const t=e.key,i=t.path.canonicalString();n.va.get(t)||n.Ca.has(i)||(W("SyncEngine","New document in limbo: "+t),n.Ca.add(i),zy(n))}function zy(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new ie(Pe.fromString(e)),i=n.Na.next();n.Fa.set(i,new sV(t)),n.va=n.va.insert(t,i),Xd(n.remoteStore,new Ni(ln(ka(t.path)),i,"TargetPurposeLimboResolution",_n.oe))}}async function Xi(n,e,t){const i=re(n),r=[],s=[],o=[];i.ba.isEmpty()||(i.ba.forEach((a,c)=>{o.push(i.Ba(c,e,t).then(l=>{if((l||t)&&i.isPrimaryClient){const d=l&&!l.fromCache;i.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){r.push(l);const d=Cy.Ki(c.targetId,l);s.push(d)}}))}),await Promise.all(o),i.Sa.h_(r),await async function(c,l){const d=re(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(l,g=>B.forEach(g.qi,w=>d.persistence.referenceDelegate.addReference(f,g.targetId,w)).next(()=>B.forEach(g.Qi,w=>d.persistence.referenceDelegate.removeReference(f,g.targetId,w)))))}catch(f){if(!es(f))throw f;W("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const g=f.targetId;if(!f.fromCache){const w=d.ns.get(g),P=w.snapshotVersion,x=w.withLastLimboFreeSnapshotVersion(P);d.ns=d.ns.insert(g,x)}}}(i.localStore,s))}async function _V(n,e){const t=re(n);if(!t.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const i=await NA(t.localStore,e);t.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(c=>{c.reject(new H(z.CANCELLED,o))})}),s.Oa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Xi(t,i.us)}}function yV(n,e){const t=re(n),i=t.Fa.get(e);if(i&&i.wa)return Ie().add(i.key);{let r=Ie();const s=t.Da.get(e);if(!s)return r;for(const o of s){const a=t.ba.get(o);r=r.unionWith(a.view.Ea)}return r}}async function vV(n,e){const t=re(n),i=await sd(t.localStore,e.query,!0),r=e.view.pa(i);return t.isPrimaryClient&&pg(t,e.targetId,r.fa),r}async function bV(n,e){const t=re(n);return BA(t.localStore,e).then(i=>Xi(t,i))}async function wV(n,e,t,i){const r=re(n),s=await function(a,c){const l=re(a),d=re(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.vn(f,c).next(g=>g?l.localDocuments.getDocuments(f,g):B.resolve(null)))}(r.localStore,e);s!==null?(t==="pending"?await Oa(r.remoteStore):t==="acknowledged"||t==="rejected"?($y(r,e,i||null),Fy(r,e),function(a,c){re(re(a).mutationQueue).Mn(c)}(r.localStore,e)):ue(),await Xi(r,s)):W("SyncEngine","Cannot apply mutation batch with id: "+e)}async function EV(n,e){const t=re(n);if(Yd(t),jy(t),e===!0&&t.La!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),r=await Q0(t,i.toArray());t.La=!0,await dg(t.remoteStore,!0);for(const s of r)Xd(t.remoteStore,s)}else if(e===!1&&t.La!==!1){const i=[];let r=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(wa(t,o),ya(t.localStore,o,!0))),va(t.remoteStore,o)}),await r,await Q0(t,i),function(o){const a=re(o);a.Fa.forEach((c,l)=>{va(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new Ye(ie.comparator)}(t),t.La=!1,await dg(t.remoteStore,!1)}}async function Q0(n,e,t){const i=re(n),r=[],s=[];for(const o of e){let a;const c=i.Da.get(o);if(c&&c.length!==0){a=await _a(i.localStore,ln(c[0]));for(const l of c){const d=i.ba.get(l),f=await vV(i,d);f.snapshot&&s.push(f.snapshot)}}else{const l=await VA(i.localStore,o);a=await _a(i.localStore,l),await By(i,tC(l),o,!1,a.resumeToken)}r.push(a)}return i.Sa.h_(s),r}function tC(n){return jI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function TV(n){return function(t){return re(re(t).persistence).Bi()}(re(n).localStore)}async function SV(n,e,t,i){const r=re(n);if(r.La)return void W("SyncEngine","Ignoring unexpected query state notification.");const s=r.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=await BA(r.localStore,UI(s[0])),a=Uu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ct.EMPTY_BYTE_STRING);await Xi(r,o,a);break}case"rejected":await ya(r.localStore,e,!0),wa(r,e,i);break;default:ue()}}async function IV(n,e,t){const i=Yd(n);if(i.La){for(const r of e){if(i.Da.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){W("SyncEngine","Adding an already active target "+r);continue}const s=await VA(i.localStore,r),o=await _a(i.localStore,s);await By(i,tC(s),o.targetId,!1,o.resumeToken),Xd(i.remoteStore,o)}for(const r of t)i.Da.has(r)&&await ya(i.localStore,r,!1).then(()=>{va(i.remoteStore,r),wa(i,r)}).catch(Zr)}}function Yd(n){const e=re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dV.bind(null,e),e.Sa.h_=eV.bind(null,e.eventManager),e.Sa.ka=tV.bind(null,e.eventManager),e}function jy(n){const e=re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pV.bind(null,e),e}function AV(n,e,t){const i=re(n);(async function(s,o,a){try{const c=await o.getMetadata();if(await function(w,P){const x=re(w),L=vt(P.createTime);return x.persistence.runTransaction("hasNewerBundle","readonly",v=>x.$r.getBundleMetadata(v,P.id)).then(v=>!!v&&v.createTime.compareTo(L)>=0)}(s.localStore,c))return await o.close(),a._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(KA(c));const l=new iV(c,s.localStore,o.serializer);let d=await o.qa();for(;d;){const g=await l._a(d);g&&a._updateProgress(g),d=await o.qa()}const f=await l.complete();return await Xi(s,f.ca,void 0),await function(w,P){const x=re(w);return x.persistence.runTransaction("Save bundle","readwrite",L=>x.$r.saveBundleMetadata(L,P))}(s.localStore,c),a._completeWith(f.progress),Promise.resolve(f.ua)}catch(c){return oi("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class mg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Gu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return OA(this.persistence,new DA,e.initialUser,this.serializer)}createPersistence(e){return new RA(Qd.Hr,this.serializer)}createSharedClientState(e){return new $A}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class nC extends mg{constructor(e,t,i){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await jy(this.Qa.syncEngine),await Oa(this.Qa.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return OA(this.persistence,new DA,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new hM(i,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new KN(t,this.persistence);return new WN(e.asyncQueue,i)}createPersistence(e){const t=Ay(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new Iy(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,zA(),ph(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new $A}}class CV extends nC{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof jp&&(this.sharedClientState.syncEngine={Zs:wV.bind(null,t),Xs:SV.bind(null,t),eo:IV.bind(null,t),Bi:TV.bind(null,t),Ys:bV.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi(async i=>{await EV(this.Qa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const t=zA();if(!jp.D(t))throw new H(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Ay(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jp(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class qy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>K0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_V.bind(null,this.syncEngine),await dg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ZM}()}createDatastore(e){const t=Gu(e.databaseInfo.databaseId),i=function(s){return new MM(s)}(e.databaseInfo);return function(s,o,a,c){return new FM(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,a){return new zM(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>K0(this.syncEngine,t,0),function(){return q0.D()?new q0:new OM}())}createSyncEngine(e,t){return function(r,s,o,a,c,l,d){const f=new oV(r,s,o,a,c,l);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(i){const r=re(i);W("RemoteStore","RemoteStore shutting down."),r.M_.add(5),await Da(r),r.O_.shutdown(),r.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):yt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Nt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(i=>{i&&i.sa()?this.metadata.resolve(i.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.ia)}`))},i=>this.metadata.reject(i))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(e===null)return null;const t=this.Wa.decode(e),i=Number(t);isNaN(i)&&this.ja(`length string (${t}) is not valid number`);const r=await this.Ha(i);return new nV(JSON.parse(r),e.length+i)}Ja(){return this.buffer.findIndex(e=>e===123)}async za(){for(;this.Ja()<0&&!await this.Ya(););if(this.buffer.length===0)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new H(z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(r,s){const o=re(r),a={documents:s.map(f=>bu(o.serializer,f))},c=await o.xo("BatchGetDocuments",o.serializer.databaseId,Pe.emptyPath(),a,s.length),l=new Map;c.forEach(f=>{const g=GL(o.serializer,f);l.set(g.key.toString(),g)});const d=[];return s.forEach(f=>{const g=l.get(f.toString());me(!!g),d.push(g)}),d}(this.datastore,e);return t.forEach(i=>this.recordVersion(i)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ra(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,i)=>{const r=ie.fromPath(i);this.mutations.push(new my(r,this.precondition(r)))}),await async function(i,r){const s=re(i),o={writes:r.map(a=>wu(s.serializer,a))};await s.Co("Commit",s.serializer.databaseId,Pe.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ue();t=ge.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new H(z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ge.min())?it.exists(!1):it.updateTime(t):it.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ge.min()))throw new H(z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return it.updateTime(t)}return it.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Za=i.maxAttempts,this.Yo=new ky(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(async()=>{const e=new kV(this.datastore),t=this.tu(e);t&&t.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.nu(r)}))}).catch(i=>{this.nu(i)})})}tu(e){try{const t=this.updateFunction(e);return!Fu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!rA(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Rt.UNAUTHENTICATED,this.clientId=yI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{W("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(W("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new H(z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=La(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function mh(n,e){n.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await NA(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function gg(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Uy(n);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>U0(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>U0(e.remoteStore,r)),n._onlineComponents=e}function iC(n){return n.name==="FirebaseError"?n.code===z.FAILED_PRECONDITION||n.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}async function Uy(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await mh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!iC(t))throw t;oi("Error using user provided cache. Falling back to memory cache: "+t),await mh(n,new mg)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await mh(n,new mg);return n._offlineComponents}async function Zd(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await gg(n,n._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await gg(n,new qy))),n._onlineComponents}function rC(n){return Uy(n).then(e=>e.persistence)}function Hy(n){return Uy(n).then(e=>e.localStore)}function sC(n){return Zd(n).then(e=>e.remoteStore)}function Gy(n){return Zd(n).then(e=>e.syncEngine)}function DV(n){return Zd(n).then(e=>e.datastore)}async function Ea(n){const e=await Zd(n),t=e.eventManager;return t.onListen=aV.bind(null,e.syncEngine),t.onUnlisten=uV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cV.bind(null,e.syncEngine),t}function OV(n){return n.asyncQueue.enqueue(async()=>{const e=await rC(n),t=await sC(n);return e.setNetworkEnabled(!0),function(r){const s=re(r);return s.M_.delete(0),Wu(s)}(t)})}function NV(n){return n.asyncQueue.enqueue(async()=>{const e=await rC(n),t=await sC(n);return e.setNetworkEnabled(!1),async function(r){const s=re(r);s.M_.add(0),await Da(s),s.N_.set("Offline")}(t)})}function LV(n,e){const t=new Nt;return n.asyncQueue.enqueueAndForget(async()=>async function(r,s,o){try{const a=await function(l,d){const f=re(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(r,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new H(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const c=La(a,`Failed to get document '${s} from cache`);o.reject(c)}}(await Hy(n),e,t)),t.promise}function oC(n,e,t={}){const i=new Nt;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,l){const d=new Jd({next:g=>{o.enqueueAndForget(()=>Ly(s,f));const w=g.docs.has(a);!w&&g.fromCache?l.reject(new H(z.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&c&&c.source==="server"?l.reject(new H(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Vy(ka(a.path),d,{includeMetadataChanges:!0,ra:!0});return Ny(s,f)}(await Ea(n),n.asyncQueue,e,t,i)),i.promise}function MV(n,e){const t=new Nt;return n.asyncQueue.enqueueAndForget(async()=>async function(r,s,o){try{const a=await sd(r,s,!0),c=new YA(s,a.hs),l=c.da(a.documents),d=c.applyChanges(l,!1);o.resolve(d.snapshot)}catch(a){const c=La(a,`Failed to execute query '${s} against cache`);o.reject(c)}}(await Hy(n),e,t)),t.promise}function aC(n,e,t={}){const i=new Nt;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,l){const d=new Jd({next:g=>{o.enqueueAndForget(()=>Ly(s,f)),g.fromCache&&c.source==="server"?l.reject(new H(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Vy(a,d,{includeMetadataChanges:!0,ra:!0});return Ny(s,f)}(await Ea(n),n.asyncQueue,e,t,i)),i.promise}function VV(n,e){const t=new Jd(e);return n.asyncQueue.enqueueAndForget(async()=>function(r,s){re(r).z_.add(s),s.next()}(await Ea(n),t)),()=>{t.$a(),n.asyncQueue.enqueueAndForget(async()=>function(r,s){re(r).z_.delete(s)}(await Ea(n),t))}}function BV(n,e,t,i){const r=function(o,a){let c;return c=typeof o=="string"?oA().encode(o):o,function(d,f){return new PV(d,f)}(function(d,f){if(d instanceof Uint8Array)return X0(d,f);if(d instanceof ArrayBuffer)return X0(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Gu(e));n.asyncQueue.enqueueAndForget(async()=>{AV(await Gy(n),r,i)})}function FV(n,e){return n.asyncQueue.enqueue(async()=>function(i,r){const s=re(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,r))}(await Hy(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(n,e,t){if(!t)throw new H(z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uC(n,e,t,i){if(e===!0&&i===!0)throw new H(z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function J0(n){if(!ie.isDocumentKey(n))throw new H(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Z0(n){if(ie.isDocumentKey(n))throw new H(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ef(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ue()}function Ve(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new H(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ef(n);throw new H(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function cC(n,e){if(e<=0)throw new H(z.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new H(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ku{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new H(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new H(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eE(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new MN;switch(i.type){case"firstParty":return new $N(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new H(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Y0.get(t);i&&(W("ComponentProvider","Removing Datastore"),Y0.delete(t),i.terminate())}(this),Promise.resolve()}}function $V(n,e,t,i={}){var r;const s=(n=Ve(n,Ku))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=Rt.MOCK_USER;else{a=rO(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new H(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Rt(l)}n._authCredentials=new VN(new _I(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let un=class hC{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new hC(this.firestore,e,this._query)}},lt=class dC{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dC(this.firestore,e,this._key)}},Nr=class fC extends un{constructor(e,t,i){super(e,t,ka(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lt(this.firestore,null,new ie(e))}withConverter(e){return new fC(this.firestore,e,this._path)}};function pC(n,e,...t){if(n=Et(n),Wy("collection","path",e),n instanceof Ku){const i=Pe.fromString(e,...t);return Z0(i),new Nr(n,null,i)}{if(!(n instanceof lt||n instanceof Nr))throw new H(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Pe.fromString(e,...t));return Z0(i),new Nr(n.firestore,null,i)}}function zV(n,e){if(n=Ve(n,Ku),Wy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new H(z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new un(n,null,function(i){return new Ki(Pe.emptyPath(),i)}(e))}function ud(n,e,...t){if(n=Et(n),arguments.length===1&&(e=yI.newId()),Wy("doc","path",e),n instanceof Ku){const i=Pe.fromString(e,...t);return J0(i),new lt(n,null,new ie(i))}{if(!(n instanceof lt||n instanceof Nr))throw new H(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Pe.fromString(e,...t));return J0(i),new lt(n.firestore,n instanceof Nr?n.converter:null,new ie(i))}}function mC(n,e){return n=Et(n),e=Et(e),(n instanceof lt||n instanceof Nr)&&(e instanceof lt||e instanceof Nr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gC(n,e){return n=Et(n),e=Et(e),n instanceof un&&e instanceof un&&n.firestore===e.firestore&&zu(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new ky(this,"async_queue_retry"),this.hu=()=>{const t=ph();t&&W("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=ph();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=ph();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new Nt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!es(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw yt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=t,t}enqueueAfterDelay(e,t,i){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=Oy.createAndSchedule(this,e,t,i,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&ue()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function _g(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}class qV{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=-1;let mt=class extends Ku{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=function(){return new jV}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||_C(this),this._firestoreClient.terminate()}};function Mt(n){return n._firestoreClient||_C(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function _C(n){var e,t,i;const r=n._freezeSettings(),s=function(a,c,l,d){return new mL(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,lC(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new RV(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function HV(n,e){vC(n=Ve(n,mt));const t=Mt(n);if(t._uninitializedComponentsProvider)throw new H(z.FAILED_PRECONDITION,"SDK cache is already specified.");oi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new qy;return yC(t,r,new nC(r,i.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function GV(n){vC(n=Ve(n,mt));const e=Mt(n);if(e._uninitializedComponentsProvider)throw new H(z.FAILED_PRECONDITION,"SDK cache is already specified.");oi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new qy;return yC(e,i,new CV(i,t.cacheSizeBytes))}function yC(n,e,t){const i=new Nt;return n.asyncQueue.enqueue(async()=>{try{await mh(n,t),await gg(n,e),i.resolve()}catch(r){const s=r;if(!iC(s))throw s;oi("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}}).then(()=>i.promise)}function WV(n){if(n._initialized&&!n._terminated)throw new H(z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Nt;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!yi.D())return Promise.resolve();const r=i+"main";await yi.delete(r)}(Ay(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function KV(n){return function(t){const i=new Nt;return t.asyncQueue.enqueueAndForget(async()=>mV(await Gy(t),i)),i.promise}(Mt(n=Ve(n,mt)))}function QV(n){return OV(Mt(n=Ve(n,mt)))}function XV(n){return NV(Mt(n=Ve(n,mt)))}function YV(n,e){const t=Mt(n=Ve(n,mt)),i=new qV;return BV(t,n._databaseId,e,i),i}function JV(n,e){return FV(Mt(n=Ve(n,mt)),e).then(t=>t?new un(n,null,t.query):null)}function vC(n){if(n._initialized||n._terminated)throw new H(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wi(Ct.fromBase64String(e))}catch(t){throw new H(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wi(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new H(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new H(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new H(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=/^__.*__$/;class e2{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Qi(e,this.data,this.fieldMask,t,this.fieldTransforms):new xa(e,this.data,t,this.fieldTransforms)}}class bC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Qi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}class nf{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new nf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return cd(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(wC(this.fu)&&ZV.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class t2{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Gu(e)}Fu(e,t,i,r=!1){return new nf({fu:e,methodName:t,vu:i,path:nt.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function io(n){const e=n._freezeSettings(),t=Gu(n._databaseId);return new t2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rf(n,e,t,i,r,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,r);ev("Data must be an object, but it was:",o,i);const a=SC(i,o);let c,l;if(s.merge)c=new yn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const g=yg(e,f,t);if(!o.contains(g))throw new H(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);AC(d,g)||d.push(g)}c=new yn(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new e2(new $t(a),c,l)}class Qu extends no{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qu}}function EC(n,e,t){return new nf({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ky extends no{_toFieldTransform(e){return new qu(e.path,new pa)}isEqual(e){return e instanceof Ky}}class Qy extends no{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=EC(this,e,!0),i=this.Mu.map(s=>ro(s,t)),r=new Us(i);return new qu(e.path,r)}isEqual(e){return e instanceof Qy&&cu(this.Mu,e.Mu)}}class Xy extends no{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=EC(this,e,!0),i=this.Mu.map(s=>ro(s,t)),r=new Hs(i);return new qu(e.path,r)}isEqual(e){return e instanceof Xy&&cu(this.Mu,e.Mu)}}class Yy extends no{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new ma(e.serializer,YI(e.serializer,this.xu));return new qu(e.path,t)}isEqual(e){return e instanceof Yy&&this.xu===e.xu}}function Jy(n,e,t,i){const r=n.Fu(1,e,t);ev("Data must be an object, but it was:",r,i);const s=[],o=$t.empty();to(i,(c,l)=>{const d=tv(e,c,t);l=Et(l);const f=r.Su(d);if(l instanceof Qu)s.push(d);else{const g=ro(l,f);g!=null&&(s.push(d),o.set(d,g))}});const a=new yn(s);return new bC(o,a,r.fieldTransforms)}function Zy(n,e,t,i,r,s){const o=n.Fu(1,e,t),a=[yg(e,i,t)],c=[r];if(s.length%2!=0)throw new H(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(yg(e,s[g])),c.push(s[g+1]);const l=[],d=$t.empty();for(let g=a.length-1;g>=0;--g)if(!AC(l,a[g])){const w=a[g];let P=c[g];P=Et(P);const x=o.Su(w);if(P instanceof Qu)l.push(w);else{const L=ro(P,x);L!=null&&(l.push(w),d.set(w,L))}}const f=new yn(l);return new bC(d,f,o.fieldTransforms)}function TC(n,e,t,i=!1){return ro(t,n.Fu(i?4:3,e))}function ro(n,e){if(IC(n=Et(n)))return ev("Unsupported field value:",e,n),SC(n,e);if(n instanceof no)return function(i,r){if(!wC(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let c=ro(a,r.bu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=Et(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return YI(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=rt.fromDate(i);return{timestampValue:ga(r.serializer,s)}}if(i instanceof rt){const s=new rt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ga(r.serializer,s)}}if(i instanceof tf)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof wi)return{bytesValue:uA(r.serializer,i._byteString)};if(i instanceof lt){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:by(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${ef(i)}`)}(n,e)}function SC(n,e){const t={};return RI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(n,(i,r)=>{const s=ro(r,e.pu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function IC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof rt||n instanceof tf||n instanceof wi||n instanceof lt||n instanceof no)}function ev(n,e,t){if(!IC(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){const i=ef(t);throw i==="an object"?e.Du(n+" a custom object"):e.Du(n+" "+i)}}function yg(n,e,t){if((e=Et(e))instanceof Kr)return e._internalPath;if(typeof e=="string")return tv(n,e);throw cd("Field path arguments must be of type string or ",n,!1,void 0,t)}const n2=new RegExp("[~\\*/\\[\\]]");function tv(n,e,t){if(e.search(n2)>=0)throw cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Kr(...e.split("."))._internalPath}catch{throw cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function cd(n,e,t,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new H(z.INVALID_ARGUMENT,a+n+c)}function AC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class i2 extends Eu{data(){return super.data()}}function sf(n,e){return typeof e=="string"?tv(n,e):e instanceof Kr?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new H(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nv{}class Xu extends nv{}function hr(n,e,...t){let i=[];e instanceof nv&&i.push(e),i=i.concat(t),function(s){const o=s.filter(c=>c instanceof iv).length,a=s.filter(c=>c instanceof of).length;if(o>1||o>0&&a>0)throw new H(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class of extends Xu{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new of(e,t,i)}_apply(e){const t=this._parse(e);return kC(e._query,t),new un(e.firestore,e.converter,ig(e._query,t))}_parse(e){const t=io(e.firestore);return function(s,o,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new H(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){nE(f,d);const w=[];for(const P of f)w.push(tE(c,s,P));g={arrayValue:{values:w}}}else g=tE(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||nE(f,d),g=TC(a,o,f,d==="in"||d==="not-in");return xe.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function r2(n,e,t){const i=e,r=sf("where",n);return of._create(r,i,t)}class iv extends nv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new iv(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Ue.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const c of a)kC(o,c),o=ig(o,c)}(e._query,t),new un(e.firestore,e.converter,ig(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rv extends Xu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new rv(e,t)}_apply(e){const t=function(r,s,o){if(r.startAt!==null)throw new H(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new H(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vu(s,o)}(e._query,this._field,this._direction);return new un(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new Ki(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}function s2(n,e="asc"){const t=e,i=sf("orderBy",n);return rv._create(i,t)}class af extends Xu{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new af(e,t,i)}_apply(e){return new un(e.firestore,e.converter,td(e._query,this._limit,this._limitType))}}function o2(n){return cC("limit",n),af._create("limit",n,"F")}function a2(n){return cC("limitToLast",n),af._create("limitToLast",n,"L")}class lf extends Xu{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new lf(e,t,i)}_apply(e){const t=PC(e,this.type,this._docOrFields,this._inclusive);return new un(e.firestore,e.converter,function(r,s){return new Ki(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,t))}}function l2(...n){return lf._create("startAt",n,!0)}function u2(...n){return lf._create("startAfter",n,!1)}class uf extends Xu{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new uf(e,t,i)}_apply(e){const t=PC(e,this.type,this._docOrFields,this._inclusive);return new un(e.firestore,e.converter,function(r,s){return new Ki(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,t))}}function c2(...n){return uf._create("endBefore",n,!1)}function h2(...n){return uf._create("endAt",n,!0)}function PC(n,e,t,i){if(t[0]=Et(t[0]),t[0]instanceof Eu)return function(s,o,a,c,l){if(!c)throw new H(z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const f of Zo(s))if(f.field.isKeyField())d.push(js(o,c.key));else{const g=c.data.field(f.field);if(Ud(g))throw new H(z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const w=f.field.canonicalString();throw new H(z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}d.push(g)}return new Gr(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=io(n.firestore);return function(o,a,c,l,d,f){const g=o.explicitOrderBy;if(d.length>g.length)throw new H(z.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let P=0;P<d.length;P++){const x=d[P];if(g[P].field.isKeyField()){if(typeof x!="string")throw new H(z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof x}`);if(!fy(o)&&x.indexOf("/")!==-1)throw new H(z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${x}' contains a slash.`);const L=o.path.child(Pe.fromString(x));if(!ie.isDocumentKey(L))throw new H(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);const v=new ie(L);w.push(js(a,v))}else{const L=TC(c,l,x);w.push(L)}}return new Gr(w,f)}(n._query,n.firestore._databaseId,r,e,t,i)}}function tE(n,e,t){if(typeof(t=Et(t))=="string"){if(t==="")throw new H(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fy(e)&&t.indexOf("/")!==-1)throw new H(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Pe.fromString(t));if(!ie.isDocumentKey(i))throw new H(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return js(n,new ie(i))}if(t instanceof lt)return js(n,t._key);throw new H(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ef(t)}.`)}function nE(n,e){if(!Array.isArray(n)||n.length===0)throw new H(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kC(n,e){const t=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new H(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class sv{convertValue(e,t="none"){switch(zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ue()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return to(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new tf(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=hy(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(gu(e));default:return null}}convertTimestamp(e){const t=qi(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Pe.fromString(e);me(bA(i));const r=new Ur(i.get(1),i.get(3)),s=new ie(i.popFirst(5));return r.isEqual(t)||yt(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class d2 extends sv{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Ui=class extends Eu{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ul(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(sf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},Ul=class extends Ui{data(e={}){return super.data(e)}},Qr=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new As(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Ul(this._firestore,this._userDataWriter,i.key,i,new As(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new H(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const c=new Ul(r._firestore,r._userDataWriter,a.doc.key,a.doc,new As(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const c=new Ul(r._firestore,r._userDataWriter,a.doc.key,a.doc,new As(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:f2(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function f2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}function xC(n,e){return n instanceof Ui&&e instanceof Ui?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Qr&&e instanceof Qr&&n._firestore===e._firestore&&gC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(n){n=Ve(n,lt);const e=Ve(n.firestore,mt);return oC(Mt(e),n._key).then(t=>ov(e,n,t))}class so extends sv{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,t)}}function m2(n){n=Ve(n,lt);const e=Ve(n.firestore,mt),t=Mt(e),i=new so(e);return LV(t,n._key).then(r=>new Ui(e,i,n._key,r,new As(r!==null&&r.hasLocalMutations,!0),n.converter))}function g2(n){n=Ve(n,lt);const e=Ve(n.firestore,mt);return oC(Mt(e),n._key,{source:"server"}).then(t=>ov(e,n,t))}function _2(n){n=Ve(n,un);const e=Ve(n.firestore,mt),t=Mt(e),i=new so(e);return CC(n._query),aC(t,n._query).then(r=>new Qr(e,i,n,r))}function y2(n){n=Ve(n,un);const e=Ve(n.firestore,mt),t=Mt(e),i=new so(e);return MV(t,n._query).then(r=>new Qr(e,i,n,r))}function v2(n){n=Ve(n,un);const e=Ve(n.firestore,mt),t=Mt(e),i=new so(e);return aC(t,n._query,{source:"server"}).then(r=>new Qr(e,i,n,r))}function iE(n,e,t){n=Ve(n,lt);const i=Ve(n.firestore,mt),r=cf(n.converter,e,t);return Yu(i,[rf(io(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,it.none())])}function rE(n,e,t,...i){n=Ve(n,lt);const r=Ve(n.firestore,mt),s=io(r);let o;return o=typeof(e=Et(e))=="string"||e instanceof Kr?Zy(s,"updateDoc",n._key,e,t,i):Jy(s,"updateDoc",n._key,e),Yu(r,[o.toMutation(n._key,it.exists(!0))])}function b2(n){return Yu(Ve(n.firestore,mt),[new Ra(n._key,it.none())])}function w2(n,e){const t=Ve(n.firestore,mt),i=ud(n),r=cf(n.converter,e);return Yu(t,[rf(io(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,it.exists(!1))]).then(()=>i)}function RC(n,...e){var t,i,r;n=Et(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||_g(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(_g(e[o])){const f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),e[o+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let c,l,d;if(n instanceof lt)l=Ve(n.firestore,mt),d=ka(n._key.path),c={next:f=>{e[o]&&e[o](ov(l,n,f))},error:e[o+1],complete:e[o+2]};else{const f=Ve(n,un);l=Ve(f.firestore,mt),d=f._query;const g=new so(l);c={next:w=>{e[o]&&e[o](new Qr(l,g,f,w))},error:e[o+1],complete:e[o+2]},CC(n._query)}return function(g,w,P,x){const L=new Jd(x),v=new Vy(w,L,P);return g.asyncQueue.enqueueAndForget(async()=>Ny(await Ea(g),v)),()=>{L.$a(),g.asyncQueue.enqueueAndForget(async()=>Ly(await Ea(g),v))}}(Mt(l),d,a,c)}function E2(n,e){return VV(Mt(n=Ve(n,mt)),_g(e)?e:{next:e})}function Yu(n,e){return function(i,r){const s=new Nt;return i.asyncQueue.enqueueAndForget(async()=>hV(await Gy(i),r,s)),s.promise}(Mt(n),e)}function ov(n,e,t){const i=t.docs.get(e._key),r=new so(n);return new Ui(n,r,e._key,i,new As(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S2=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=io(e)}set(e,t,i){this._verifyNotCommitted();const r=yr(e,this._firestore),s=cf(r.converter,t,i),o=rf(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,it.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=yr(e,this._firestore);let o;return o=typeof(t=Et(t))=="string"||t instanceof Kr?Zy(this._dataReader,"WriteBatch.update",s._key,t,i,r):Jy(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,it.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yr(e,this._firestore);return this._mutations=this._mutations.concat(new Ra(t._key,it.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new H(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function yr(n,e){if((n=Et(n)).firestore!==e)throw new H(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I2=class extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=io(t)}get(t){const i=yr(t,this._firestore),r=new d2(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return ue();const o=s[0];if(o.isFoundDocument())return new Eu(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new Eu(this._firestore,r,i._key,null,i.converter);throw ue()})}set(t,i,r){const s=yr(t,this._firestore),o=cf(s.converter,i,r),a=rf(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,a),this}update(t,i,r,...s){const o=yr(t,this._firestore);let a;return a=typeof(i=Et(i))=="string"||i instanceof Kr?Zy(this._dataReader,"Transaction.update",o._key,i,r,s):Jy(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(t){const i=yr(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yr(e,this._firestore),i=new so(this._firestore);return super.get(e).then(r=>new Ui(this._firestore,i,t._key,r._document,new As(!1,!1),t.converter))}};function A2(n,e,t){n=Ve(n,mt);const i=Object.assign(Object.assign({},T2),t);return function(s){if(s.maxAttempts<1)throw new H(z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const c=new Nt;return s.asyncQueue.enqueueAndForget(async()=>{const l=await DV(s);new xV(s.asyncQueue,l,a,o,c).Xa()}),c.promise}(Mt(n),r=>e(new I2(n,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(){return new Qu("deleteField")}function P2(){return new Ky("serverTimestamp")}function k2(...n){return new Qy("arrayUnion",n)}function x2(...n){return new Xy("arrayRemove",n)}function R2(n){return new Yy("increment",n)}(function(e,t=!0){(function(r){Pa=r})(sy),ca(new Fs("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new mt(new BN(i.getProvider("auth-internal")),new jN(i.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new H(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ur(l.options.projectId,d)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Mi(Yw,"4.6.3",e),Mi(Yw,"4.6.3","esm2017")})();const D2="@firebase/firestore-compat",O2="0.3.32";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new H("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(){if(typeof Uint8Array>"u")throw new H("unimplemented","Uint8Arrays are not available in this environment.")}function oE(){if(!fL())throw new H("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Tu{constructor(e){this._delegate=e}static fromBase64String(e){return oE(),new Tu(wi.fromBase64String(e))}static fromUint8Array(e){return sE(),new Tu(wi.fromUint8Array(e))}toBase64(){return oE(),this._delegate.toBase64()}toUint8Array(){return sE(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(n){return N2(n,["next","error","complete"])}function N2(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{enableIndexedDbPersistence(e,t){return HV(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return GV(e._delegate)}clearIndexedDbPersistence(e){return WV(e._delegate)}}class DC{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ur||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&oi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){$V(this._delegate,e,t,i)}enableNetwork(){return QV(this._delegate)}disableNetwork(){return XV(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,uC("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return KV(this._delegate)}onSnapshotsInSync(e){return E2(this._delegate,e)}get app(){if(!this._appCompat)throw new H("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ta(this,pC(this._delegate,e))}catch(t){throw sn(t,"collection()","Firestore.collection()")}}doc(e){try{return new qn(this,ud(this._delegate,e))}catch(t){throw sn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new rn(this,zV(this._delegate,e))}catch(t){throw sn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return A2(this._delegate,t=>e(new OC(this,t)))}batch(){return Mt(this._delegate),new NC(new S2(this._delegate,e=>Yu(this._delegate,e)))}loadBundle(e){return YV(this._delegate,e)}namedQuery(e){return JV(this._delegate,e).then(t=>t?new rn(this,t):null)}}class hf extends sv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tu(new wi(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return qn.forKey(t,this.firestore,null)}}function M2(n){NN(n)}class OC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new hf(e)}get(e){const t=Cs(e);return this._delegate.get(t).then(i=>new Su(this._firestore,new Ui(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Cs(e);return i?(av("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Cs(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Cs(e);return this._delegate.delete(t),this}}class NC{constructor(e){this._delegate=e}set(e,t,i){const r=Cs(e);return i?(av("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Cs(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Cs(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Qs{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new Ul(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Iu(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Qs.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new Qs(e,new hf(e),t),r.set(t,s)),s}}Qs.INSTANCES=new WeakMap;class qn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hf(e)}static forPath(e,t,i){if(e.length%2!==0)throw new H("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new qn(t,new lt(t._delegate,i,new ie(e)))}static forKey(e,t,i){return new qn(t,new lt(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Ta(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ta(this.firestore,pC(this._delegate,e))}catch(t){throw sn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Et(e),e instanceof lt?mC(this._delegate,e):!1}set(e,t){t=av("DocumentReference.set",t);try{return t?iE(this._delegate,e,t):iE(this._delegate,e)}catch(i){throw sn(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?rE(this._delegate,e):rE(this._delegate,e,t,...i)}catch(r){throw sn(r,"updateDoc()","DocumentReference.update()")}}delete(){return b2(this._delegate)}onSnapshot(...e){const t=LC(e),i=MC(e,r=>new Su(this.firestore,new Ui(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return RC(this._delegate,t,i)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=m2(this._delegate):(e==null?void 0:e.source)==="server"?t=g2(this._delegate):t=p2(this._delegate),t.then(i=>new Su(this.firestore,new Ui(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new qn(this.firestore,e?this._delegate.withConverter(Qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function sn(n,e,t){return n.message=n.message.replace(e,t),n}function LC(n){for(const e of n)if(typeof e=="object"&&!vg(e))return e;return{}}function MC(n,e){var t,i;let r;return vg(n[0])?r=n[0]:vg(n[1])?r=n[1]:typeof n[0]=="function"?r={next:n[0],error:n[1],complete:n[2]}:r={next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:(t=r.error)===null||t===void 0?void 0:t.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}class Su{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new qn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xC(this._delegate,e._delegate)}}class Iu extends Su{data(e){const t=this._delegate.data(e);return this._delegate._converter||LN(t!==void 0),t}}class rn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hf(e)}where(e,t,i){try{return new rn(this.firestore,hr(this._delegate,r2(e,t,i)))}catch(r){throw sn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new rn(this.firestore,hr(this._delegate,s2(e,t)))}catch(i){throw sn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new rn(this.firestore,hr(this._delegate,o2(e)))}catch(t){throw sn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new rn(this.firestore,hr(this._delegate,a2(e)))}catch(t){throw sn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new rn(this.firestore,hr(this._delegate,l2(...e)))}catch(t){throw sn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new rn(this.firestore,hr(this._delegate,u2(...e)))}catch(t){throw sn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new rn(this.firestore,hr(this._delegate,c2(...e)))}catch(t){throw sn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new rn(this.firestore,hr(this._delegate,h2(...e)))}catch(t){throw sn(t,"endAt()","Query.endAt()")}}isEqual(e){return gC(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=y2(this._delegate):(e==null?void 0:e.source)==="server"?t=v2(this._delegate):t=_2(this._delegate),t.then(i=>new bg(this.firestore,new Qr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=LC(e),i=MC(e,r=>new bg(this.firestore,new Qr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return RC(this._delegate,t,i)}withConverter(e){return new rn(this.firestore,e?this._delegate.withConverter(Qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class V2{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Iu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class bg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new rn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Iu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new V2(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Iu(this._firestore,i))})}isEqual(e){return xC(this._delegate,e._delegate)}}class Ta extends rn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new qn(this.firestore,e):null}doc(e){try{return e===void 0?new qn(this.firestore,ud(this._delegate)):new qn(this.firestore,ud(this._delegate,e))}catch(t){throw sn(t,"doc()","CollectionReference.doc()")}}add(e){return w2(this._delegate,e).then(t=>new qn(this.firestore,t))}isEqual(e){return mC(this._delegate,e._delegate)}withConverter(e){return new Ta(this.firestore,e?this._delegate.withConverter(Qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Cs(n){return Ve(n,lt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(...e){this._delegate=new Kr(...e)}static documentId(){return new lv(nt.keyField().canonicalString())}isEqual(e){return e=Et(e),e instanceof Kr?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this._delegate=e}static serverTimestamp(){const e=P2();return e._methodName="FieldValue.serverTimestamp",new Es(e)}static delete(){const e=C2();return e._methodName="FieldValue.delete",new Es(e)}static arrayUnion(...e){const t=k2(...e);return t._methodName="FieldValue.arrayUnion",new Es(t)}static arrayRemove(...e){const t=x2(...e);return t._methodName="FieldValue.arrayRemove",new Es(t)}static increment(e){const t=R2(e);return t._methodName="FieldValue.increment",new Es(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2={Firestore:DC,GeoPoint:tf,Timestamp:rt,Blob:Tu,Transaction:OC,WriteBatch:NC,DocumentReference:qn,DocumentSnapshot:Su,Query:rn,QueryDocumentSnapshot:Iu,QuerySnapshot:bg,CollectionReference:Ta,FieldPath:lv,FieldValue:Es,setLogLevel:M2,CACHE_SIZE_UNLIMITED:UV};function F2(n,e){n.INTERNAL.registerComponent(new Fs("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},B2)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(n){F2(n,(e,t)=>new DC(e,t,new L2)),n.registerVersion(D2,O2)}$2(Bl);const z2={apiKey:"AIzaSyBU-C0Rg0XNG4FEOdSZH3tIyRnqnZ6PFIA",authDomain:"bananice-app.firebaseapp.com",projectId:"bananice-app",storageBucket:"bananice-app.appspot.com",messagingSenderId:"395658049571",appId:"1:395658049571:web:2a13a03ae1401b1be39996"};class j2{constructor(){Af(this,"auth",this.auth);Af(this,"sales",()=>this.db.collection("sales"));Bl.apps.length||Bl.initializeApp(z2),this.db=Bl.firestore()}}const VC=new j2,BC="GET_SALES",q2="ADD_SALES",U2=n=>({type:BC,sales:n}),H2=(n,e)=>async(t,i)=>{try{VC.sales().add({...n}).then(()=>{t(FC()),e==null||e()})}catch(r){console.log(r)}},FC=()=>async n=>{try{const e=await VC.sales().get();e.empty&&console.log("data null");let t=[];e.forEach(i=>{t.push(Object.assign({id:i.id},i.data()))}),n(U2(t))}catch(e){console.log(e)}},G2=({navigator:n})=>{const e=CS(),[t,i]=Tn.useState(!1),[r,s]=Tn.useState({title:"",price:"",qty:"",date:Um()}),o=(c,l)=>{i(!0),c==="price"&&WD.includes(r.title)&&(l+=2e3),c==="price"&&(l=r.qty*l),s(d=>({...d,[c]:l}))},a=()=>{r.title===""||r.price===""||r.qty===""||e(H2(r,()=>{i(!1)}))};return ae.jsxs(ae.Fragment,{children:[ae.jsxs(Re.Page,{contentStyle:{paddingTop:50},children:[ae.jsxs(Re.Toolbar,{children:[ae.jsx("div",{className:"left",children:ae.jsx(Re.BackButton,{onClick:()=>n.popPage(),children:"Back"})}),ae.jsx("div",{className:"center",children:"Tambah Item"})]}),ae.jsx(Re.List,{dataSource:GD,renderHeader:()=>ae.jsx(Re.ListHeader,{style:{fontSize:15},className:"testClass",children:" Menu Item "}),renderRow:(c,l)=>ae.jsxs(Re.ListItem,{children:[c==null?void 0:c.title,ae.jsx(Re.Button,{id:"title",className:"right",modifier:"quiet",onClick:d=>o(d.target.id,c==null?void 0:c.title),children:"Tambah"})]})})]}),ae.jsx(Re.Dialog,{onCancel:()=>i(!1),isOpen:t,children:ae.jsxs("div",{style:{padding:20},children:[ae.jsx("h4",{style:{marginTop:0,marginBottom:10},children:r.title}),ae.jsx(Re.Input,{onChange:c=>o(c.target.name,parseInt(c.target.value)),modifier:"material",placeholder:"Jumlah Item",style:{width:"100%",marginBottom:10,marginTop:10},name:"qty",float:!0,type:""}),ae.jsxs("div",{style:{paddingBottom:5},children:[ae.jsx(Re.Radio,{onChange:c=>o(c.target.name,15e3),modifier:"material",name:"price",inputId:"reguler"}),ae.jsx("label",{htmlFor:"reguler",style:{paddingLeft:5},children:"Reguler"})]}),ae.jsxs("div",{style:{paddingBottom:5,marginBottom:30},children:[ae.jsx(Re.Radio,{onChange:c=>o(c.target.name,1e4),modifier:"material",name:"price",inputId:"small"}),ae.jsx("label",{htmlFor:"small",style:{paddingLeft:5},children:"Small"})]}),ae.jsx(Re.Button,{style:{marginBottom:10},modifier:"large--cta",onClick:a,children:"Selesai"}),ae.jsx(Re.Button,{modifier:"large--cta",onClick:()=>i(!1),children:"Batal"})]})})]})},W2=({title:n,navigator:e})=>{const t=()=>{e.pushPage({component:G2,props:{key:"addItem"}})},i=__(l=>l.sales.filter(d=>d.date===Um())),r=Tn.useMemo(()=>i,[i]),s=r.reduce((l,d)=>l+d.price,0),o=r.reduce((l,d)=>l+d.qty,0),[a,c]=Tn.useState(!1);return ae.jsxs(ae.Fragment,{children:[ae.jsxs(Re.Page,{contentStyle:{padding:65},children:[ae.jsx(Re.Toolbar,{children:ae.jsx("div",{className:"center",children:n})}),ae.jsxs("div",{className:"box-add-item",children:[ae.jsx(Re.Button,{onClick:t,children:"Tambah Item"}),ae.jsxs("h3",{children:["Penjualan tanggal ",Um()]}),ae.jsxs("h3",{children:["Penjualan ",o," item"]}),ae.jsx("h2",{children:ae.jsxs("strong",{children:["Total ",Hm(s)]})})]})]}),ae.jsx(Re.Dialog,{onCancel:()=>c(!1),isOpen:a,style:{height:"100%"},cancelable:!0,children:ae.jsx(Re.Page,{contentStyle:{padding:20},children:"Page Content"})})]})},K2=({navigator:n,date:e})=>{const t=__(s=>s.sales.filter(o=>o.date===e)),i=t.reduce((s,o)=>s+o.price,0),r=t.reduce((s,o)=>s+o.qty,0);return ae.jsxs(Re.Page,{contentStyle:{paddingTop:50},children:[ae.jsxs(Re.Toolbar,{children:[ae.jsx("div",{className:"left",children:ae.jsx(Re.BackButton,{onClick:()=>n.popPage(),children:"Back"})}),ae.jsxs("div",{className:"center",children:["Detail Penjualan ",e]})]}),ae.jsx(Re.List,{dataSource:t,renderHeader:()=>ae.jsxs(Re.ListHeader,{style:{fontSize:15},className:"testClass",children:[" Penjualan tanggal ",e]}),renderRow:(s,o)=>ae.jsxs(Re.ListItem,{children:[ae.jsxs("div",{className:"left",children:[s.title," x",s.qty]}),ae.jsx("div",{className:"right",children:ae.jsx("strong",{children:Hm(s.price)})})]})}),ae.jsxs("h4",{children:["Total penjualan ",r," item"]}),ae.jsxs("h3",{children:["Total pendapatan ",Hm(i)]})]})},Q2=({navigator:n})=>{const e=s=>{n.pushPage({component:K2,props:{key:"salesDetail",date:s}})},t=CS();Tn.useEffect(()=>{t(FC())},[t]);const i=__(s=>s.sales),r=Tn.useMemo(()=>Array.from(new Set(i.map(o=>o.date))),[i]);return ae.jsxs(Re.Page,{contentStyle:{paddingTop:50},children:[ae.jsx(Re.Toolbar,{children:ae.jsx("div",{className:"center",children:"Penjualan"})}),ae.jsx(Re.List,{dataSource:r,renderHeader:()=>ae.jsx(Re.ListHeader,{style:{fontSize:15},className:"testClass",children:" Penjualan per tanggal "}),renderRow:(s,o)=>ae.jsxs(Re.ListItem,{children:[s,ae.jsx(Re.Button,{id:"title",className:"right",modifier:"quiet",onClick:a=>e(s),children:"Lihat"})]})})]})},X2=({navigator:n})=>{const e=(t,i)=>[{content:ae.jsx(W2,{title:"Bananice",navigator:n}),tab:ae.jsx(Re.Tab,{label:"Beranda",icon:"md-home",active:t===0,tabbar:i},"home")},{content:ae.jsx(Q2,{navigator:n}),tab:ae.jsx(Re.Tab,{label:"Penjualan",icon:"md-view-list-alt",active:t===1,tabbar:i},"dialogs")}];return ae.jsx(Re.Page,{children:ae.jsx(Re.Tabbar,{renderTabs:(t,i)=>e(t,i)})})};function Y2(){return Tn.useState(0),Tn.useEffect(()=>{ye.platform.select("android")}),ae.jsx(ae.Fragment,{children:ae.jsx("div",{style:{marginBottom:60,marginTop:60},children:ae.jsx(Re.Navigator,{initialRoute:{component:X2,props:{key:"tabs"}},renderPage:(n,e)=>ae.jsx(n.component,{navigator:e,...n.props})})})})}function fn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var J2=typeof Symbol=="function"&&Symbol.observable||"@@observable",aE=J2,Up=()=>Math.random().toString(36).substring(7).split("").join("."),Z2={INIT:`@@redux/INIT${Up()}`,REPLACE:`@@redux/REPLACE${Up()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Up()}`},lE=Z2;function eB(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function $C(n,e,t){if(typeof n!="function")throw new Error(fn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(fn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(fn(1));return t($C)(n,e)}let i=n,r=e,s=new Map,o=s,a=0,c=!1;function l(){o===s&&(o=new Map,s.forEach((L,v)=>{o.set(v,L)}))}function d(){if(c)throw new Error(fn(3));return r}function f(L){if(typeof L!="function")throw new Error(fn(4));if(c)throw new Error(fn(5));let v=!0;l();const E=a++;return o.set(E,L),function(){if(v){if(c)throw new Error(fn(6));v=!1,l(),o.delete(E),s=null}}}function g(L){if(!eB(L))throw new Error(fn(7));if(typeof L.type>"u")throw new Error(fn(8));if(typeof L.type!="string")throw new Error(fn(17));if(c)throw new Error(fn(9));try{c=!0,r=i(r,L)}finally{c=!1}return(s=o).forEach(E=>{E()}),L}function w(L){if(typeof L!="function")throw new Error(fn(10));i=L,g({type:lE.REPLACE})}function P(){const L=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(fn(11));function E(){const N=v;N.next&&N.next(d())}return E(),{unsubscribe:L(E)}},[aE](){return this}}}return g({type:lE.INIT}),{dispatch:g,subscribe:f,getState:d,replaceReducer:w,[aE]:P}}function tB(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function nB(...n){return e=>(t,i)=>{const r=e(t,i);let s=()=>{throw new Error(fn(15))};const o={getState:r.getState,dispatch:(c,...l)=>s(c,...l)},a=n.map(c=>c(o));return s=tB(...a)(r.dispatch),{...r,dispatch:s}}}function iB(n){return({dispatch:t,getState:i})=>r=>s=>typeof s=="function"?s(t,i,n):r(s)}var rB=iB();const sB={sales:[]},oB=(n=sB,e)=>{switch(console.log(e),e.type){case BC:return{...n,sales:e.sales};case q2:return n;default:return n}},aB=$C(oB,nB(rB));Hp.createRoot(document.getElementById("root")).render(ae.jsx(Ig.StrictMode,{children:ae.jsx(qk,{store:aB,children:ae.jsx(Y2,{})})}));
